2024-10-31 03:26:57 - db_utils - INFO -     Column: onske_dato, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:26:57 - db_utils - INFO -   Indexes in stroing.db: ['idx_stroing_bruker', 'idx_stroing_onske_dato', 'idx_stroing_bestillings_dato']
2024-10-31 03:26:57 - db_utils - INFO -   Row count in sqlite_sequence: 1
2024-10-31 03:26:57 - db_utils - INFO -   Row count in stroing_bestillinger: 5
2024-10-31 03:26:57 - db_utils - INFO -   Test query result: (1,)
2024-10-31 03:26:57 - db_utils - INFO - Debugging feedback database:
2024-10-31 03:26:57 - db_utils - INFO -   Database version: 0
2024-10-31 03:26:57 - db_utils - INFO -   Tables in feedback.db: ['sqlite_sequence', 'feedback']
2024-10-31 03:26:57 - db_utils - INFO -   Structure of sqlite_sequence table:
2024-10-31 03:26:57 - db_utils - INFO -     Column: name, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:26:57 - db_utils - INFO -     Column: seq, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:26:57 - db_utils - INFO -   Structure of feedback table:
2024-10-31 03:26:57 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 03:26:57 - db_utils - INFO -     Column: type, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:26:57 - db_utils - INFO -     Column: datetime, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:26:57 - db_utils - INFO -     Column: comment, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:26:57 - db_utils - INFO -     Column: innsender, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:26:57 - db_utils - INFO -     Column: status, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:26:57 - db_utils - INFO -     Column: status_changed_by, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:26:57 - db_utils - INFO -     Column: status_changed_at, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:26:57 - db_utils - INFO -     Column: hidden, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:26:57 - db_utils - INFO -     Column: is_alert, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:26:57 - db_utils - INFO -     Column: display_on_weather, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:26:57 - db_utils - INFO -     Column: expiry_date, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:26:57 - db_utils - INFO -     Column: target_group, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:26:57 - db_utils - INFO -   Indexes in feedback.db: ['idx_feedback_datetime', 'idx_feedback_innsender', 'idx_feedback_status', 'idx_feedback_type']
2024-10-31 03:26:57 - db_utils - INFO -   Row count in sqlite_sequence: 1
2024-10-31 03:26:57 - db_utils - INFO -   Row count in feedback: 11
2024-10-31 03:26:57 - db_utils - INFO -   Test query result: (1,)
2024-10-31 03:26:57 - db_utils - INFO - Detailed database operations debugging completed
2024-10-31 03:26:57 - db_utils - INFO - Oppdatert skjema for customer
2024-10-31 03:26:57 - db_utils - INFO - Oppdatert skjema for feedback
2024-10-31 03:26:57 - db_utils - INFO - Oppdatert skjema for login_history
2024-10-31 03:26:57 - db_utils - INFO - Oppdatert skjema for stroing
2024-10-31 03:26:57 - db_utils - INFO - Oppdatert skjema for tunbroyting
2024-10-31 03:26:57 - db_utils - INFO - All database schemas verified and updated
2024-10-31 03:26:57 - db_utils - INFO - Oppdatert skjema for customer
2024-10-31 03:26:57 - db_utils - INFO - Oppdatert skjema for feedback
2024-10-31 03:26:57 - db_utils - INFO - Oppdatert skjema for login_history
2024-10-31 03:26:57 - db_utils - INFO - Oppdatert skjema for stroing
2024-10-31 03:26:57 - db_utils - INFO - Oppdatert skjema for tunbroyting
2024-10-31 03:26:57 - db_utils - INFO - All database schemas verified and updated
2024-10-31 03:26:57 - db_utils - INFO - Database already initialized. Skipping.
2024-10-31 03:26:57 - db_utils - INFO - Query executed successfully on login_history.db. Rows affected: -1
2024-10-31 03:26:57 - db_utils - INFO - login_history table structure is correct
2024-10-31 03:26:57 - customer_utils - INFO - Starting cabin user consistency check
2024-10-31 03:26:57 - utils - INFO - Attempting to load passwords from secrets
2024-10-31 03:26:57 - utils - INFO - Successfully loaded passwords. Number of entries: 94
2024-10-31 03:26:57 - customer_utils - INFO - Retrieved 94 passwords
2024-10-31 03:26:57 - customer_utils - INFO - Found 94 customers in database
2024-10-31 03:26:57 - customer_utils - INFO - Consistency check completed
2024-10-31 03:26:57 - customer_utils - INFO - Database connection closed
2024-10-31 03:26:57 - customer_utils - INFO - Validating customers and passwords
2024-10-31 03:26:57 - utils - INFO - Attempting to load passwords from secrets
2024-10-31 03:26:57 - utils - INFO - Successfully loaded passwords. Number of entries: 94
2024-10-31 03:26:57 - customer_utils - INFO - Customer and password validation complete
2024-10-31 03:26:57 - db_utils - INFO - Successfully created indexes for tunbroyting database
2024-10-31 03:26:57 - db_utils - INFO - Successfully created indexes for stroing database
2024-10-31 03:26:57 - db_utils - INFO - Successfully created indexes for feedback database
2024-10-31 03:26:57 - db_utils - INFO - Successfully created indexes for login_history database
2024-10-31 03:26:57 - db_utils - INFO - Successfully created indexes for customer database
2024-10-31 03:26:57 - db_utils - INFO - Database index creation completed
2024-10-31 03:26:57 - __main__ - INFO - Application initialization completed successfully
2024-10-31 03:26:57 - __main__ - INFO - Application initialization completed successfully
2024-10-31 03:26:57 - __main__ - INFO - Application setup complete
2024-10-31 03:26:57 - customer_utils - INFO - Successfully retrieved customer with ID: 999
2024-10-31 03:26:58 - weather_display_utils - ERROR - Feil ved opprettelse av v√¶rgraf: name 'PARAMETERS' is not defined
Traceback (most recent call last):
  File "/Users/tor.inge.jossang@aftenbladet.no/dev/gullingen/weather_display_utils.py", line 200, in create_dynamic_graph
    update_figure_layout(fig, df, GRAPH_CONFIG, len(PARAMETERS))
  File "/Users/tor.inge.jossang@aftenbladet.no/dev/gullingen/weather_display_utils.py", line 367, in update_figure_layout
    param = next((p for p in PARAMETERS if p['row'] == i), None)
                             ^^^^^^^^^^
NameError: name 'PARAMETERS' is not defined
2024-10-31 03:26:58 - __main__ - ERROR - An error occurred during application execution: name 'PARAMETERS' is not defined
Traceback (most recent call last):
  File "/Users/tor.inge.jossang@aftenbladet.no/dev/gullingen/app.py", line 263, in main
    handle_weather_page()
  File "/Users/tor.inge.jossang@aftenbladet.no/dev/gullingen/weather_display_utils.py", line 607, in handle_weather_page
    display_weather_data(weather_data['df'])
  File "/Users/tor.inge.jossang@aftenbladet.no/dev/gullingen/weather_display_utils.py", line 672, in display_weather_data
    fig = create_dynamic_graph(df)
          ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/tor.inge.jossang@aftenbladet.no/dev/gullingen/weather_display_utils.py", line 200, in create_dynamic_graph
    update_figure_layout(fig, df, GRAPH_CONFIG, len(PARAMETERS))
  File "/Users/tor.inge.jossang@aftenbladet.no/dev/gullingen/weather_display_utils.py", line 367, in update_figure_layout
    param = next((p for p in PARAMETERS if p['row'] == i), None)
                             ^^^^^^^^^^
NameError: name 'PARAMETERS' is not defined
2024-10-31 03:26:58 - __main__ - INFO - Application shutting down
2024-10-31 03:28:11 - __main__ - INFO - Added validate_user_input function to app.py
2024-10-31 03:28:11 - __main__ - INFO - Starting application initialization
2024-10-31 03:28:11 - db_utils - INFO - Starting detailed database operations debugging
2024-10-31 03:28:11 - db_utils - INFO - Debugging login_history database:
2024-10-31 03:28:11 - db_utils - INFO -   Database version: 0
2024-10-31 03:28:11 - db_utils - INFO -   Tables in login_history.db: ['login_history']
2024-10-31 03:28:11 - db_utils - INFO -   Structure of login_history table:
2024-10-31 03:28:11 - db_utils - INFO -     Column: id, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:28:11 - db_utils - INFO -     Column: login_time, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:28:11 - db_utils - INFO -     Column: success, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:28:11 - db_utils - INFO -   Indexes in login_history.db: ['idx_login_id', 'idx_login_time']
2024-10-31 03:28:11 - db_utils - INFO -   Row count in login_history: 423
2024-10-31 03:28:11 - db_utils - INFO -   Test query result: (1,)
2024-10-31 03:28:11 - db_utils - INFO - Debugging tunbroyting database:
2024-10-31 03:28:11 - db_utils - INFO -   Database version: 0
2024-10-31 03:28:11 - db_utils - INFO -   Tables in tunbroyting.db: ['tunbroyting_bestillinger']
2024-10-31 03:28:11 - db_utils - INFO -   Structure of tunbroyting_bestillinger table:
2024-10-31 03:28:11 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 03:28:11 - db_utils - INFO -     Column: bruker, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:28:11 - db_utils - INFO -     Column: ankomst_dato, Type: DATE, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:28:11 - db_utils - INFO -     Column: ankomst_tid, Type: TIME, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:28:11 - db_utils - INFO -     Column: avreise_dato, Type: DATE, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:28:11 - db_utils - INFO -     Column: avreise_tid, Type: TIME, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:28:11 - db_utils - INFO -     Column: abonnement_type, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:28:11 - db_utils - INFO -   Indexes in tunbroyting.db: ['idx_tunbroyting_bruker', 'idx_tunbroyting_ankomst_dato', 'idx_tunbroyting_avreise_dato', 'idx_tunbroyting_abonnement']
2024-10-31 03:28:11 - db_utils - INFO -   Row count in tunbroyting_bestillinger: 2
2024-10-31 03:28:11 - db_utils - INFO -   Test query result: (1,)
2024-10-31 03:28:11 - db_utils - INFO - Debugging stroing database:
2024-10-31 03:28:11 - db_utils - INFO -   Database version: 0
2024-10-31 03:28:11 - db_utils - INFO -   Tables in stroing.db: ['sqlite_sequence', 'stroing_bestillinger']
2024-10-31 03:28:11 - db_utils - INFO -   Structure of sqlite_sequence table:
2024-10-31 03:28:11 - db_utils - INFO -     Column: name, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:28:11 - db_utils - INFO -     Column: seq, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:28:11 - db_utils - INFO -   Structure of stroing_bestillinger table:
2024-10-31 03:28:11 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 03:28:11 - db_utils - INFO -     Column: bruker, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:28:11 - db_utils - INFO -     Column: bestillings_dato, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:28:11 - db_utils - INFO -     Column: onske_dato, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:28:11 - db_utils - INFO -   Indexes in stroing.db: ['idx_stroing_bruker', 'idx_stroing_onske_dato', 'idx_stroing_bestillings_dato']
2024-10-31 03:28:11 - db_utils - INFO -   Row count in sqlite_sequence: 1
2024-10-31 03:28:11 - db_utils - INFO -   Row count in stroing_bestillinger: 5
2024-10-31 03:28:11 - db_utils - INFO -   Test query result: (1,)
2024-10-31 03:28:11 - db_utils - INFO - Debugging feedback database:
2024-10-31 03:28:11 - db_utils - INFO -   Database version: 0
2024-10-31 03:28:11 - db_utils - INFO -   Tables in feedback.db: ['sqlite_sequence', 'feedback']
2024-10-31 03:28:11 - db_utils - INFO -   Structure of sqlite_sequence table:
2024-10-31 03:28:11 - db_utils - INFO -     Column: name, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:28:11 - db_utils - INFO -     Column: seq, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:28:11 - db_utils - INFO -   Structure of feedback table:
2024-10-31 03:28:11 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 03:28:11 - db_utils - INFO -     Column: type, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:28:11 - db_utils - INFO -     Column: datetime, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:28:11 - db_utils - INFO -     Column: comment, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:28:11 - db_utils - INFO -     Column: innsender, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:28:11 - db_utils - INFO -     Column: status, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:28:11 - db_utils - INFO -     Column: status_changed_by, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:28:11 - db_utils - INFO -     Column: status_changed_at, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:28:11 - db_utils - INFO -     Column: hidden, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:28:11 - db_utils - INFO -     Column: is_alert, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:28:11 - db_utils - INFO -     Column: display_on_weather, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:28:11 - db_utils - INFO -     Column: expiry_date, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:28:11 - db_utils - INFO -     Column: target_group, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:28:11 - db_utils - INFO -   Indexes in feedback.db: ['idx_feedback_datetime', 'idx_feedback_innsender', 'idx_feedback_status', 'idx_feedback_type']
2024-10-31 03:28:11 - db_utils - INFO -   Row count in sqlite_sequence: 1
2024-10-31 03:28:11 - db_utils - INFO -   Row count in feedback: 11
2024-10-31 03:28:11 - db_utils - INFO -   Test query result: (1,)
2024-10-31 03:28:11 - db_utils - INFO - Detailed database operations debugging completed
2024-10-31 03:28:11 - db_utils - INFO - Oppdatert skjema for customer
2024-10-31 03:28:11 - db_utils - INFO - Oppdatert skjema for feedback
2024-10-31 03:28:11 - db_utils - INFO - Oppdatert skjema for login_history
2024-10-31 03:28:11 - db_utils - INFO - Oppdatert skjema for stroing
2024-10-31 03:28:11 - db_utils - INFO - Oppdatert skjema for tunbroyting
2024-10-31 03:28:11 - db_utils - INFO - All database schemas verified and updated
2024-10-31 03:28:11 - db_utils - INFO - Oppdatert skjema for customer
2024-10-31 03:28:11 - db_utils - INFO - Oppdatert skjema for feedback
2024-10-31 03:28:11 - db_utils - INFO - Oppdatert skjema for login_history
2024-10-31 03:28:11 - db_utils - INFO - Oppdatert skjema for stroing
2024-10-31 03:28:11 - db_utils - INFO - Oppdatert skjema for tunbroyting
2024-10-31 03:28:11 - db_utils - INFO - All database schemas verified and updated
2024-10-31 03:28:11 - db_utils - INFO - Database login_history initialized, updated, and optimized
2024-10-31 03:28:11 - db_utils - INFO - Database tunbroyting initialized, updated, and optimized
2024-10-31 03:28:11 - db_utils - INFO - Database stroing initialized, updated, and optimized
2024-10-31 03:28:11 - db_utils - INFO - Database feedback initialized, updated, and optimized
2024-10-31 03:28:11 - db_utils - INFO - Database customer initialized, updated, and optimized
2024-10-31 03:28:11 - db_utils - INFO - Successfully created indexes for tunbroyting database
2024-10-31 03:28:11 - db_utils - INFO - Successfully created indexes for stroing database
2024-10-31 03:28:11 - db_utils - INFO - Successfully created indexes for feedback database
2024-10-31 03:28:11 - db_utils - INFO - Successfully created indexes for login_history database
2024-10-31 03:28:11 - db_utils - INFO - Successfully created indexes for customer database
2024-10-31 03:28:11 - db_utils - INFO - Database index creation completed
2024-10-31 03:28:11 - db_utils - INFO - Database indexes created
2024-10-31 03:28:11 - db_utils - INFO - Successfully verified connection to stroing.db
2024-10-31 03:28:11 - db_utils - INFO - Successfully verified connection to tunbroyting.db
2024-10-31 03:28:11 - db_utils - INFO - Successfully verified connection to feedback.db
2024-10-31 03:28:11 - db_utils - INFO - Successfully verified connection to login_history.db
2024-10-31 03:28:11 - db_utils - INFO - Successfully verified connection to customer.db
2024-10-31 03:28:11 - db_utils - INFO - Database connections verified
2024-10-31 03:28:11 - db_utils - INFO - All databases initialized, updated, and verified
2024-10-31 03:28:11 - db_utils - INFO - Query executed successfully on login_history.db. Rows affected: -1
2024-10-31 03:28:11 - db_utils - INFO - login_history table structure is correct
2024-10-31 03:28:11 - customer_utils - INFO - Starting cabin user consistency check
2024-10-31 03:28:11 - utils - INFO - Attempting to load passwords from secrets
2024-10-31 03:28:11 - utils - INFO - Successfully loaded passwords. Number of entries: 94
2024-10-31 03:28:11 - customer_utils - INFO - Retrieved 94 passwords
2024-10-31 03:28:11 - customer_utils - INFO - Found 94 customers in database
2024-10-31 03:28:11 - customer_utils - INFO - Consistency check completed
2024-10-31 03:28:11 - customer_utils - INFO - Database connection closed
2024-10-31 03:28:11 - customer_utils - INFO - Validating customers and passwords
2024-10-31 03:28:11 - utils - INFO - Attempting to load passwords from secrets
2024-10-31 03:28:11 - utils - INFO - Successfully loaded passwords. Number of entries: 94
2024-10-31 03:28:11 - customer_utils - INFO - Customer and password validation complete
2024-10-31 03:28:11 - db_utils - INFO - Successfully created indexes for tunbroyting database
2024-10-31 03:28:11 - db_utils - INFO - Successfully created indexes for stroing database
2024-10-31 03:28:11 - db_utils - INFO - Successfully created indexes for feedback database
2024-10-31 03:28:11 - db_utils - INFO - Successfully created indexes for login_history database
2024-10-31 03:28:11 - db_utils - INFO - Successfully created indexes for customer database
2024-10-31 03:28:11 - db_utils - INFO - Database index creation completed
2024-10-31 03:28:11 - __main__ - INFO - Application initialization completed successfully
2024-10-31 03:28:11 - __main__ - INFO - Application initialization completed successfully
2024-10-31 03:28:11 - __main__ - INFO - Application setup complete
2024-10-31 03:28:11 - __main__ - INFO - Application shutting down
2024-10-31 03:28:13 - __main__ - INFO - Added validate_user_input function to app.py
2024-10-31 03:28:13 - __main__ - INFO - Starting application initialization
2024-10-31 03:28:13 - db_utils - INFO - Starting detailed database operations debugging
2024-10-31 03:28:13 - db_utils - INFO - Debugging login_history database:
2024-10-31 03:28:13 - db_utils - INFO -   Database version: 0
2024-10-31 03:28:13 - db_utils - INFO -   Tables in login_history.db: ['login_history']
2024-10-31 03:28:13 - db_utils - INFO -   Structure of login_history table:
2024-10-31 03:28:13 - db_utils - INFO -     Column: id, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:28:13 - db_utils - INFO -     Column: login_time, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:28:13 - db_utils - INFO -     Column: success, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:28:13 - db_utils - INFO -   Indexes in login_history.db: ['idx_login_id', 'idx_login_time']
2024-10-31 03:28:13 - db_utils - INFO -   Row count in login_history: 423
2024-10-31 03:28:13 - db_utils - INFO -   Test query result: (1,)
2024-10-31 03:28:13 - db_utils - INFO - Debugging tunbroyting database:
2024-10-31 03:28:13 - db_utils - INFO -   Database version: 0
2024-10-31 03:28:13 - db_utils - INFO -   Tables in tunbroyting.db: ['tunbroyting_bestillinger']
2024-10-31 03:28:13 - db_utils - INFO -   Structure of tunbroyting_bestillinger table:
2024-10-31 03:28:13 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 03:28:13 - db_utils - INFO -     Column: bruker, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:28:13 - db_utils - INFO -     Column: ankomst_dato, Type: DATE, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:28:13 - db_utils - INFO -     Column: ankomst_tid, Type: TIME, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:28:13 - db_utils - INFO -     Column: avreise_dato, Type: DATE, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:28:13 - db_utils - INFO -     Column: avreise_tid, Type: TIME, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:28:13 - db_utils - INFO -     Column: abonnement_type, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:28:13 - db_utils - INFO -   Indexes in tunbroyting.db: ['idx_tunbroyting_bruker', 'idx_tunbroyting_ankomst_dato', 'idx_tunbroyting_avreise_dato', 'idx_tunbroyting_abonnement']
2024-10-31 03:28:13 - db_utils - INFO -   Row count in tunbroyting_bestillinger: 2
2024-10-31 03:28:13 - db_utils - INFO -   Test query result: (1,)
2024-10-31 03:28:13 - db_utils - INFO - Debugging stroing database:
2024-10-31 03:28:13 - db_utils - INFO -   Database version: 0
2024-10-31 03:28:13 - db_utils - INFO -   Tables in stroing.db: ['sqlite_sequence', 'stroing_bestillinger']
2024-10-31 03:28:13 - db_utils - INFO -   Structure of sqlite_sequence table:
2024-10-31 03:28:13 - db_utils - INFO -     Column: name, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:28:13 - db_utils - INFO -     Column: seq, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:28:13 - db_utils - INFO -   Structure of stroing_bestillinger table:
2024-10-31 03:28:13 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 03:28:13 - db_utils - INFO -     Column: bruker, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:28:13 - db_utils - INFO -     Column: bestillings_dato, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:28:13 - db_utils - INFO -     Column: onske_dato, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:28:13 - db_utils - INFO -   Indexes in stroing.db: ['idx_stroing_bruker', 'idx_stroing_onske_dato', 'idx_stroing_bestillings_dato']
2024-10-31 03:28:13 - db_utils - INFO -   Row count in sqlite_sequence: 1
2024-10-31 03:28:13 - db_utils - INFO -   Row count in stroing_bestillinger: 5
2024-10-31 03:28:13 - db_utils - INFO -   Test query result: (1,)
2024-10-31 03:28:13 - db_utils - INFO - Debugging feedback database:
2024-10-31 03:28:13 - db_utils - INFO -   Database version: 0
2024-10-31 03:28:13 - db_utils - INFO -   Tables in feedback.db: ['sqlite_sequence', 'feedback']
2024-10-31 03:28:13 - db_utils - INFO -   Structure of sqlite_sequence table:
2024-10-31 03:28:13 - db_utils - INFO -     Column: name, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:28:13 - db_utils - INFO -     Column: seq, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:28:13 - db_utils - INFO -   Structure of feedback table:
2024-10-31 03:28:13 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 03:28:13 - db_utils - INFO -     Column: type, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:28:13 - db_utils - INFO -     Column: datetime, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:28:13 - db_utils - INFO -     Column: comment, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:28:13 - db_utils - INFO -     Column: innsender, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:28:13 - db_utils - INFO -     Column: status, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:28:13 - db_utils - INFO -     Column: status_changed_by, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:28:13 - db_utils - INFO -     Column: status_changed_at, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:28:13 - db_utils - INFO -     Column: hidden, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:28:13 - db_utils - INFO -     Column: is_alert, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:28:13 - db_utils - INFO -     Column: display_on_weather, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:28:13 - db_utils - INFO -     Column: expiry_date, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:28:13 - db_utils - INFO -     Column: target_group, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:28:13 - db_utils - INFO -   Indexes in feedback.db: ['idx_feedback_datetime', 'idx_feedback_innsender', 'idx_feedback_status', 'idx_feedback_type']
2024-10-31 03:28:13 - db_utils - INFO -   Row count in sqlite_sequence: 1
2024-10-31 03:28:13 - db_utils - INFO -   Row count in feedback: 11
2024-10-31 03:28:13 - db_utils - INFO -   Test query result: (1,)
2024-10-31 03:28:13 - db_utils - INFO - Detailed database operations debugging completed
2024-10-31 03:28:13 - db_utils - INFO - Oppdatert skjema for customer
2024-10-31 03:28:13 - db_utils - INFO - Oppdatert skjema for feedback
2024-10-31 03:28:13 - db_utils - INFO - Oppdatert skjema for login_history
2024-10-31 03:28:13 - db_utils - INFO - Oppdatert skjema for stroing
2024-10-31 03:28:13 - db_utils - INFO - Oppdatert skjema for tunbroyting
2024-10-31 03:28:13 - db_utils - INFO - All database schemas verified and updated
2024-10-31 03:28:13 - db_utils - INFO - Oppdatert skjema for customer
2024-10-31 03:28:13 - db_utils - INFO - Oppdatert skjema for feedback
2024-10-31 03:28:13 - db_utils - INFO - Oppdatert skjema for login_history
2024-10-31 03:28:13 - db_utils - INFO - Oppdatert skjema for stroing
2024-10-31 03:28:13 - db_utils - INFO - Oppdatert skjema for tunbroyting
2024-10-31 03:28:13 - db_utils - INFO - All database schemas verified and updated
2024-10-31 03:28:13 - db_utils - INFO - Database already initialized. Skipping.
2024-10-31 03:28:13 - db_utils - INFO - Query executed successfully on login_history.db. Rows affected: -1
2024-10-31 03:28:13 - db_utils - INFO - login_history table structure is correct
2024-10-31 03:28:13 - customer_utils - INFO - Starting cabin user consistency check
2024-10-31 03:28:13 - utils - INFO - Attempting to load passwords from secrets
2024-10-31 03:28:13 - utils - INFO - Successfully loaded passwords. Number of entries: 94
2024-10-31 03:28:13 - customer_utils - INFO - Retrieved 94 passwords
2024-10-31 03:28:13 - customer_utils - INFO - Found 94 customers in database
2024-10-31 03:28:13 - customer_utils - INFO - Consistency check completed
2024-10-31 03:28:13 - customer_utils - INFO - Database connection closed
2024-10-31 03:28:13 - customer_utils - INFO - Validating customers and passwords
2024-10-31 03:28:13 - utils - INFO - Attempting to load passwords from secrets
2024-10-31 03:28:13 - utils - INFO - Successfully loaded passwords. Number of entries: 94
2024-10-31 03:28:13 - customer_utils - INFO - Customer and password validation complete
2024-10-31 03:28:13 - db_utils - INFO - Successfully created indexes for tunbroyting database
2024-10-31 03:28:13 - db_utils - INFO - Successfully created indexes for stroing database
2024-10-31 03:28:13 - db_utils - INFO - Successfully created indexes for feedback database
2024-10-31 03:28:13 - db_utils - INFO - Successfully created indexes for login_history database
2024-10-31 03:28:13 - db_utils - INFO - Successfully created indexes for customer database
2024-10-31 03:28:13 - db_utils - INFO - Database index creation completed
2024-10-31 03:28:13 - __main__ - INFO - Application initialization completed successfully
2024-10-31 03:28:13 - __main__ - INFO - Application initialization completed successfully
2024-10-31 03:28:13 - __main__ - INFO - Application setup complete
2024-10-31 03:28:13 - auth_utils - INFO - Login attempt for ID: 999
2024-10-31 03:28:13 - db_utils - INFO - DATABASE_PATH: /Users/tor.inge.jossang@aftenbladet.no/dev/gullingen
2024-10-31 03:28:13 - db_utils - INFO - Full database path: /Users/tor.inge.jossang@aftenbladet.no/dev/gullingen/login_history.db
2024-10-31 03:28:13 - db_utils - INFO - Attempting to create database engine...
2024-10-31 03:28:13 - db_utils - INFO - Database engine created successfully for login_history.db
2024-10-31 03:28:13 - auth_utils - INFO - Rate limit check passed for user 999
2024-10-31 03:28:13 - auth_utils - INFO - User 999 authenticated successfully
2024-10-31 03:28:13 - customer_utils - INFO - Successfully retrieved customer with ID: 999
2024-10-31 03:28:13 - db_utils - INFO - Database file /Users/tor.inge.jossang@aftenbladet.no/dev/gullingen/login_history.db exists.
2024-10-31 03:28:13 - db_utils - INFO - Query executed successfully on login_history.db. Rows affected: 1
2024-10-31 03:28:13 - auth_utils - INFO - Successful login for ID: 999
2024-10-31 03:28:13 - auth_utils - INFO - Successful login and logging for ID: 999
2024-10-31 03:28:13 - db_utils - INFO - DATABASE_PATH: /Users/tor.inge.jossang@aftenbladet.no/dev/gullingen
2024-10-31 03:28:13 - db_utils - INFO - Full database path: /Users/tor.inge.jossang@aftenbladet.no/dev/gullingen/login_history.db
2024-10-31 03:28:13 - db_utils - INFO - Attempting to create database engine...
2024-10-31 03:28:13 - db_utils - INFO - Database engine created successfully for login_history.db
2024-10-31 03:28:13 - auth_utils - INFO - Rate limit reset for user 999
2024-10-31 03:28:13 - __main__ - INFO - Application shutting down
2024-10-31 03:28:13 - __main__ - INFO - Added validate_user_input function to app.py
2024-10-31 03:28:13 - __main__ - INFO - Starting application initialization
2024-10-31 03:28:13 - db_utils - INFO - Starting detailed database operations debugging
2024-10-31 03:28:13 - db_utils - INFO - Debugging login_history database:
2024-10-31 03:28:13 - db_utils - INFO -   Database version: 0
2024-10-31 03:28:13 - db_utils - INFO -   Tables in login_history.db: ['login_history']
2024-10-31 03:28:13 - db_utils - INFO -   Structure of login_history table:
2024-10-31 03:28:13 - db_utils - INFO -     Column: id, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:28:13 - db_utils - INFO -     Column: login_time, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:28:13 - db_utils - INFO -     Column: success, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:28:13 - db_utils - INFO -   Indexes in login_history.db: ['idx_login_id', 'idx_login_time']
2024-10-31 03:28:13 - db_utils - INFO -   Row count in login_history: 424
2024-10-31 03:28:13 - db_utils - INFO -   Test query result: (1,)
2024-10-31 03:28:13 - db_utils - INFO - Debugging tunbroyting database:
2024-10-31 03:28:13 - db_utils - INFO -   Database version: 0
2024-10-31 03:28:13 - db_utils - INFO -   Tables in tunbroyting.db: ['tunbroyting_bestillinger']
2024-10-31 03:28:13 - db_utils - INFO -   Structure of tunbroyting_bestillinger table:
2024-10-31 03:28:13 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 03:28:13 - db_utils - INFO -     Column: bruker, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:28:13 - db_utils - INFO -     Column: ankomst_dato, Type: DATE, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:28:13 - db_utils - INFO -     Column: ankomst_tid, Type: TIME, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:28:13 - db_utils - INFO -     Column: avreise_dato, Type: DATE, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:28:13 - db_utils - INFO -     Column: avreise_tid, Type: TIME, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:28:13 - db_utils - INFO -     Column: abonnement_type, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:28:13 - db_utils - INFO -   Indexes in tunbroyting.db: ['idx_tunbroyting_bruker', 'idx_tunbroyting_ankomst_dato', 'idx_tunbroyting_avreise_dato', 'idx_tunbroyting_abonnement']
2024-10-31 03:28:13 - db_utils - INFO -   Row count in tunbroyting_bestillinger: 2
2024-10-31 03:28:13 - db_utils - INFO -   Test query result: (1,)
2024-10-31 03:28:13 - db_utils - INFO - Debugging stroing database:
2024-10-31 03:28:13 - db_utils - INFO -   Database version: 0
2024-10-31 03:28:13 - db_utils - INFO -   Tables in stroing.db: ['sqlite_sequence', 'stroing_bestillinger']
2024-10-31 03:28:13 - db_utils - INFO -   Structure of sqlite_sequence table:
2024-10-31 03:28:13 - db_utils - INFO -     Column: name, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:28:13 - db_utils - INFO -     Column: seq, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:28:13 - db_utils - INFO -   Structure of stroing_bestillinger table:
2024-10-31 03:28:13 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 03:28:13 - db_utils - INFO -     Column: bruker, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:28:13 - db_utils - INFO -     Column: bestillings_dato, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:28:13 - db_utils - INFO -     Column: onske_dato, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:28:13 - db_utils - INFO -   Indexes in stroing.db: ['idx_stroing_bruker', 'idx_stroing_onske_dato', 'idx_stroing_bestillings_dato']
2024-10-31 03:28:13 - db_utils - INFO -   Row count in sqlite_sequence: 1
2024-10-31 03:28:13 - db_utils - INFO -   Row count in stroing_bestillinger: 5
2024-10-31 03:28:13 - db_utils - INFO -   Test query result: (1,)
2024-10-31 03:28:13 - db_utils - INFO - Debugging feedback database:
2024-10-31 03:28:13 - db_utils - INFO -   Database version: 0
2024-10-31 03:28:13 - db_utils - INFO -   Tables in feedback.db: ['sqlite_sequence', 'feedback']
2024-10-31 03:28:13 - db_utils - INFO -   Structure of sqlite_sequence table:
2024-10-31 03:28:13 - db_utils - INFO -     Column: name, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:28:13 - db_utils - INFO -     Column: seq, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:28:13 - db_utils - INFO -   Structure of feedback table:
2024-10-31 03:28:13 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 03:28:13 - db_utils - INFO -     Column: type, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:28:13 - db_utils - INFO -     Column: datetime, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:28:13 - db_utils - INFO -     Column: comment, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:28:13 - db_utils - INFO -     Column: innsender, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:28:13 - db_utils - INFO -     Column: status, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:28:13 - db_utils - INFO -     Column: status_changed_by, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:28:13 - db_utils - INFO -     Column: status_changed_at, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:28:13 - db_utils - INFO -     Column: hidden, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:28:13 - db_utils - INFO -     Column: is_alert, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:28:13 - db_utils - INFO -     Column: display_on_weather, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:28:13 - db_utils - INFO -     Column: expiry_date, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:28:13 - db_utils - INFO -     Column: target_group, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:28:13 - db_utils - INFO -   Indexes in feedback.db: ['idx_feedback_datetime', 'idx_feedback_innsender', 'idx_feedback_status', 'idx_feedback_type']
2024-10-31 03:28:13 - db_utils - INFO -   Row count in sqlite_sequence: 1
2024-10-31 03:28:13 - db_utils - INFO -   Row count in feedback: 11
2024-10-31 03:28:13 - db_utils - INFO -   Test query result: (1,)
2024-10-31 03:28:13 - db_utils - INFO - Detailed database operations debugging completed
2024-10-31 03:28:13 - db_utils - INFO - Oppdatert skjema for customer
2024-10-31 03:28:13 - db_utils - INFO - Oppdatert skjema for feedback
2024-10-31 03:28:13 - db_utils - INFO - Oppdatert skjema for login_history
2024-10-31 03:28:13 - db_utils - INFO - Oppdatert skjema for stroing
2024-10-31 03:28:13 - db_utils - INFO - Oppdatert skjema for tunbroyting
2024-10-31 03:28:13 - db_utils - INFO - All database schemas verified and updated
2024-10-31 03:28:13 - db_utils - INFO - Oppdatert skjema for customer
2024-10-31 03:28:13 - db_utils - INFO - Oppdatert skjema for feedback
2024-10-31 03:28:13 - db_utils - INFO - Oppdatert skjema for login_history
2024-10-31 03:28:13 - db_utils - INFO - Oppdatert skjema for stroing
2024-10-31 03:28:13 - db_utils - INFO - Oppdatert skjema for tunbroyting
2024-10-31 03:28:13 - db_utils - INFO - All database schemas verified and updated
2024-10-31 03:28:13 - db_utils - INFO - Database already initialized. Skipping.
2024-10-31 03:28:13 - db_utils - INFO - Query executed successfully on login_history.db. Rows affected: -1
2024-10-31 03:28:13 - db_utils - INFO - login_history table structure is correct
2024-10-31 03:28:13 - customer_utils - INFO - Starting cabin user consistency check
2024-10-31 03:28:13 - utils - INFO - Attempting to load passwords from secrets
2024-10-31 03:28:13 - utils - INFO - Successfully loaded passwords. Number of entries: 94
2024-10-31 03:28:13 - customer_utils - INFO - Retrieved 94 passwords
2024-10-31 03:28:13 - customer_utils - INFO - Found 94 customers in database
2024-10-31 03:28:13 - customer_utils - INFO - Consistency check completed
2024-10-31 03:28:13 - customer_utils - INFO - Database connection closed
2024-10-31 03:28:13 - customer_utils - INFO - Validating customers and passwords
2024-10-31 03:28:13 - utils - INFO - Attempting to load passwords from secrets
2024-10-31 03:28:13 - utils - INFO - Successfully loaded passwords. Number of entries: 94
2024-10-31 03:28:13 - customer_utils - INFO - Customer and password validation complete
2024-10-31 03:28:13 - db_utils - INFO - Successfully created indexes for tunbroyting database
2024-10-31 03:28:13 - db_utils - INFO - Successfully created indexes for stroing database
2024-10-31 03:28:13 - db_utils - INFO - Successfully created indexes for feedback database
2024-10-31 03:28:13 - db_utils - INFO - Successfully created indexes for login_history database
2024-10-31 03:28:13 - db_utils - INFO - Successfully created indexes for customer database
2024-10-31 03:28:13 - db_utils - INFO - Database index creation completed
2024-10-31 03:28:13 - __main__ - INFO - Application initialization completed successfully
2024-10-31 03:28:13 - __main__ - INFO - Application initialization completed successfully
2024-10-31 03:28:13 - __main__ - INFO - Application setup complete
2024-10-31 03:28:13 - customer_utils - INFO - Successfully retrieved customer with ID: 999
2024-10-31 03:28:13 - alert_utils - INFO - Fetched 1 alerts. only_today=False, include_expired=False
2024-10-31 03:28:13 - tun_utils - WARNING - hent_bestillinger() is deprecated, use get_bookings() instead
2024-10-31 03:28:13 - tun_utils - INFO - Starting get_bookings with start_date=None, end_date=None
2024-10-31 03:28:13 - tun_utils - INFO - Successfully retrieved 2 bookings
2024-10-31 03:28:13 - __main__ - INFO - Application shutting down
2024-10-31 03:28:14 - __main__ - INFO - Added validate_user_input function to app.py
2024-10-31 03:28:14 - __main__ - INFO - Starting application initialization
2024-10-31 03:28:14 - db_utils - INFO - Starting detailed database operations debugging
2024-10-31 03:28:14 - db_utils - INFO - Debugging login_history database:
2024-10-31 03:28:14 - db_utils - INFO -   Database version: 0
2024-10-31 03:28:14 - db_utils - INFO -   Tables in login_history.db: ['login_history']
2024-10-31 03:28:14 - db_utils - INFO -   Structure of login_history table:
2024-10-31 03:28:14 - db_utils - INFO -     Column: id, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:28:14 - db_utils - INFO -     Column: login_time, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:28:14 - db_utils - INFO -     Column: success, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:28:14 - db_utils - INFO -   Indexes in login_history.db: ['idx_login_id', 'idx_login_time']
2024-10-31 03:28:14 - db_utils - INFO -   Row count in login_history: 424
2024-10-31 03:28:14 - db_utils - INFO -   Test query result: (1,)
2024-10-31 03:28:14 - db_utils - INFO - Debugging tunbroyting database:
2024-10-31 03:28:14 - db_utils - INFO -   Database version: 0
2024-10-31 03:28:14 - db_utils - INFO -   Tables in tunbroyting.db: ['tunbroyting_bestillinger']
2024-10-31 03:28:14 - db_utils - INFO -   Structure of tunbroyting_bestillinger table:
2024-10-31 03:28:14 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 03:28:14 - db_utils - INFO -     Column: bruker, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:28:14 - db_utils - INFO -     Column: ankomst_dato, Type: DATE, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:28:14 - db_utils - INFO -     Column: ankomst_tid, Type: TIME, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:28:14 - db_utils - INFO -     Column: avreise_dato, Type: DATE, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:28:14 - db_utils - INFO -     Column: avreise_tid, Type: TIME, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:28:14 - db_utils - INFO -     Column: abonnement_type, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:28:14 - db_utils - INFO -   Indexes in tunbroyting.db: ['idx_tunbroyting_bruker', 'idx_tunbroyting_ankomst_dato', 'idx_tunbroyting_avreise_dato', 'idx_tunbroyting_abonnement']
2024-10-31 03:28:14 - db_utils - INFO -   Row count in tunbroyting_bestillinger: 2
2024-10-31 03:28:14 - db_utils - INFO -   Test query result: (1,)
2024-10-31 03:28:14 - db_utils - INFO - Debugging stroing database:
2024-10-31 03:28:14 - db_utils - INFO -   Database version: 0
2024-10-31 03:28:14 - db_utils - INFO -   Tables in stroing.db: ['sqlite_sequence', 'stroing_bestillinger']
2024-10-31 03:28:14 - db_utils - INFO -   Structure of sqlite_sequence table:
2024-10-31 03:28:14 - db_utils - INFO -     Column: name, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:28:14 - db_utils - INFO -     Column: seq, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:28:14 - db_utils - INFO -   Structure of stroing_bestillinger table:
2024-10-31 03:28:14 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 03:28:14 - db_utils - INFO -     Column: bruker, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:28:14 - db_utils - INFO -     Column: bestillings_dato, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:28:14 - db_utils - INFO -     Column: onske_dato, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:28:14 - db_utils - INFO -   Indexes in stroing.db: ['idx_stroing_bruker', 'idx_stroing_onske_dato', 'idx_stroing_bestillings_dato']
2024-10-31 03:28:14 - db_utils - INFO -   Row count in sqlite_sequence: 1
2024-10-31 03:28:14 - db_utils - INFO -   Row count in stroing_bestillinger: 5
2024-10-31 03:28:14 - db_utils - INFO -   Test query result: (1,)
2024-10-31 03:28:14 - db_utils - INFO - Debugging feedback database:
2024-10-31 03:28:14 - db_utils - INFO -   Database version: 0
2024-10-31 03:28:14 - db_utils - INFO -   Tables in feedback.db: ['sqlite_sequence', 'feedback']
2024-10-31 03:28:14 - db_utils - INFO -   Structure of sqlite_sequence table:
2024-10-31 03:28:14 - db_utils - INFO -     Column: name, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:28:14 - db_utils - INFO -     Column: seq, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:28:14 - db_utils - INFO -   Structure of feedback table:
2024-10-31 03:28:14 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 03:28:14 - db_utils - INFO -     Column: type, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:28:14 - db_utils - INFO -     Column: datetime, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:28:14 - db_utils - INFO -     Column: comment, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:28:14 - db_utils - INFO -     Column: innsender, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:28:14 - db_utils - INFO -     Column: status, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:28:14 - db_utils - INFO -     Column: status_changed_by, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:28:14 - db_utils - INFO -     Column: status_changed_at, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:28:14 - db_utils - INFO -     Column: hidden, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:28:14 - db_utils - INFO -     Column: is_alert, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:28:14 - db_utils - INFO -     Column: display_on_weather, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:28:14 - db_utils - INFO -     Column: expiry_date, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:28:14 - db_utils - INFO -     Column: target_group, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:28:14 - db_utils - INFO -   Indexes in feedback.db: ['idx_feedback_datetime', 'idx_feedback_innsender', 'idx_feedback_status', 'idx_feedback_type']
2024-10-31 03:28:14 - db_utils - INFO -   Row count in sqlite_sequence: 1
2024-10-31 03:28:14 - db_utils - INFO -   Row count in feedback: 11
2024-10-31 03:28:14 - db_utils - INFO -   Test query result: (1,)
2024-10-31 03:28:14 - db_utils - INFO - Detailed database operations debugging completed
2024-10-31 03:28:14 - db_utils - INFO - Oppdatert skjema for customer
2024-10-31 03:28:14 - db_utils - INFO - Oppdatert skjema for feedback
2024-10-31 03:28:14 - db_utils - INFO - Oppdatert skjema for login_history
2024-10-31 03:28:14 - db_utils - INFO - Oppdatert skjema for stroing
2024-10-31 03:28:14 - db_utils - INFO - Oppdatert skjema for tunbroyting
2024-10-31 03:28:14 - db_utils - INFO - All database schemas verified and updated
2024-10-31 03:28:14 - db_utils - INFO - Oppdatert skjema for customer
2024-10-31 03:28:14 - db_utils - INFO - Oppdatert skjema for feedback
2024-10-31 03:28:14 - db_utils - INFO - Oppdatert skjema for login_history
2024-10-31 03:28:14 - db_utils - INFO - Oppdatert skjema for stroing
2024-10-31 03:28:14 - db_utils - INFO - Oppdatert skjema for tunbroyting
2024-10-31 03:28:14 - db_utils - INFO - All database schemas verified and updated
2024-10-31 03:28:14 - db_utils - INFO - Database already initialized. Skipping.
2024-10-31 03:28:14 - db_utils - INFO - Query executed successfully on login_history.db. Rows affected: -1
2024-10-31 03:28:14 - db_utils - INFO - login_history table structure is correct
2024-10-31 03:28:14 - customer_utils - INFO - Starting cabin user consistency check
2024-10-31 03:28:14 - utils - INFO - Attempting to load passwords from secrets
2024-10-31 03:28:14 - utils - INFO - Successfully loaded passwords. Number of entries: 94
2024-10-31 03:28:14 - customer_utils - INFO - Retrieved 94 passwords
2024-10-31 03:28:14 - customer_utils - INFO - Found 94 customers in database
2024-10-31 03:28:14 - customer_utils - INFO - Consistency check completed
2024-10-31 03:28:14 - customer_utils - INFO - Database connection closed
2024-10-31 03:28:14 - customer_utils - INFO - Validating customers and passwords
2024-10-31 03:28:14 - utils - INFO - Attempting to load passwords from secrets
2024-10-31 03:28:14 - utils - INFO - Successfully loaded passwords. Number of entries: 94
2024-10-31 03:28:14 - customer_utils - INFO - Customer and password validation complete
2024-10-31 03:28:14 - db_utils - INFO - Successfully created indexes for tunbroyting database
2024-10-31 03:28:14 - db_utils - INFO - Successfully created indexes for stroing database
2024-10-31 03:28:14 - db_utils - INFO - Successfully created indexes for feedback database
2024-10-31 03:28:14 - db_utils - INFO - Successfully created indexes for login_history database
2024-10-31 03:28:14 - db_utils - INFO - Successfully created indexes for customer database
2024-10-31 03:28:14 - db_utils - INFO - Database index creation completed
2024-10-31 03:28:14 - __main__ - INFO - Application initialization completed successfully
2024-10-31 03:28:14 - __main__ - INFO - Application initialization completed successfully
2024-10-31 03:28:14 - __main__ - INFO - Application setup complete
2024-10-31 03:28:14 - customer_utils - INFO - Successfully retrieved customer with ID: 999
2024-10-31 03:28:15 - weather_display_utils - ERROR - Feil ved opprettelse av v√¶rgraf: name 'PARAMETERS' is not defined
Traceback (most recent call last):
  File "/Users/tor.inge.jossang@aftenbladet.no/dev/gullingen/weather_display_utils.py", line 200, in create_dynamic_graph
    update_figure_layout(fig, df, GRAPH_CONFIG, len(PARAMETERS))
  File "/Users/tor.inge.jossang@aftenbladet.no/dev/gullingen/weather_display_utils.py", line 367, in update_figure_layout
    param = next((p for p in PARAMETERS if p['row'] == i), None)
                             ^^^^^^^^^^
NameError: name 'PARAMETERS' is not defined
2024-10-31 03:28:15 - __main__ - ERROR - An error occurred during application execution: name 'PARAMETERS' is not defined
Traceback (most recent call last):
  File "/Users/tor.inge.jossang@aftenbladet.no/dev/gullingen/app.py", line 263, in main
    handle_weather_page()
  File "/Users/tor.inge.jossang@aftenbladet.no/dev/gullingen/weather_display_utils.py", line 607, in handle_weather_page
    display_weather_data(weather_data['df'])
  File "/Users/tor.inge.jossang@aftenbladet.no/dev/gullingen/weather_display_utils.py", line 697, in display_weather_data
    fig = create_dynamic_graph(df)
          ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/tor.inge.jossang@aftenbladet.no/dev/gullingen/weather_display_utils.py", line 200, in create_dynamic_graph
    update_figure_layout(fig, df, GRAPH_CONFIG, len(PARAMETERS))
  File "/Users/tor.inge.jossang@aftenbladet.no/dev/gullingen/weather_display_utils.py", line 367, in update_figure_layout
    param = next((p for p in PARAMETERS if p['row'] == i), None)
                             ^^^^^^^^^^
NameError: name 'PARAMETERS' is not defined
2024-10-31 03:28:15 - __main__ - INFO - Application shutting down
2024-10-31 03:29:59 - __main__ - INFO - Added validate_user_input function to app.py
2024-10-31 03:29:59 - __main__ - INFO - Starting application initialization
2024-10-31 03:29:59 - db_utils - INFO - Starting detailed database operations debugging
2024-10-31 03:29:59 - db_utils - INFO - Debugging login_history database:
2024-10-31 03:29:59 - db_utils - INFO -   Database version: 0
2024-10-31 03:29:59 - db_utils - INFO -   Tables in login_history.db: ['login_history']
2024-10-31 03:29:59 - db_utils - INFO -   Structure of login_history table:
2024-10-31 03:29:59 - db_utils - INFO -     Column: id, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:29:59 - db_utils - INFO -     Column: login_time, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:29:59 - db_utils - INFO -     Column: success, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:29:59 - db_utils - INFO -   Indexes in login_history.db: ['idx_login_id', 'idx_login_time']
2024-10-31 03:29:59 - db_utils - INFO -   Row count in login_history: 424
2024-10-31 03:29:59 - db_utils - INFO -   Test query result: (1,)
2024-10-31 03:29:59 - db_utils - INFO - Debugging tunbroyting database:
2024-10-31 03:29:59 - db_utils - INFO -   Database version: 0
2024-10-31 03:29:59 - db_utils - INFO -   Tables in tunbroyting.db: ['tunbroyting_bestillinger']
2024-10-31 03:29:59 - db_utils - INFO -   Structure of tunbroyting_bestillinger table:
2024-10-31 03:29:59 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 03:29:59 - db_utils - INFO -     Column: bruker, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:29:59 - db_utils - INFO -     Column: ankomst_dato, Type: DATE, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:29:59 - db_utils - INFO -     Column: ankomst_tid, Type: TIME, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:29:59 - db_utils - INFO -     Column: avreise_dato, Type: DATE, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:29:59 - db_utils - INFO -     Column: avreise_tid, Type: TIME, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:29:59 - db_utils - INFO -     Column: abonnement_type, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:29:59 - db_utils - INFO -   Indexes in tunbroyting.db: ['idx_tunbroyting_bruker', 'idx_tunbroyting_ankomst_dato', 'idx_tunbroyting_avreise_dato', 'idx_tunbroyting_abonnement']
2024-10-31 03:29:59 - db_utils - INFO -   Row count in tunbroyting_bestillinger: 2
2024-10-31 03:29:59 - db_utils - INFO -   Test query result: (1,)
2024-10-31 03:29:59 - db_utils - INFO - Debugging stroing database:
2024-10-31 03:29:59 - db_utils - INFO -   Database version: 0
2024-10-31 03:29:59 - db_utils - INFO -   Tables in stroing.db: ['sqlite_sequence', 'stroing_bestillinger']
2024-10-31 03:29:59 - db_utils - INFO -   Structure of sqlite_sequence table:
2024-10-31 03:29:59 - db_utils - INFO -     Column: name, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:29:59 - db_utils - INFO -     Column: seq, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:29:59 - db_utils - INFO -   Structure of stroing_bestillinger table:
2024-10-31 03:29:59 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 03:29:59 - db_utils - INFO -     Column: bruker, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:29:59 - db_utils - INFO -     Column: bestillings_dato, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:29:59 - db_utils - INFO -     Column: onske_dato, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:29:59 - db_utils - INFO -   Indexes in stroing.db: ['idx_stroing_bruker', 'idx_stroing_onske_dato', 'idx_stroing_bestillings_dato']
2024-10-31 03:29:59 - db_utils - INFO -   Row count in sqlite_sequence: 1
2024-10-31 03:29:59 - db_utils - INFO -   Row count in stroing_bestillinger: 5
2024-10-31 03:29:59 - db_utils - INFO -   Test query result: (1,)
2024-10-31 03:29:59 - db_utils - INFO - Debugging feedback database:
2024-10-31 03:29:59 - db_utils - INFO -   Database version: 0
2024-10-31 03:29:59 - db_utils - INFO -   Tables in feedback.db: ['sqlite_sequence', 'feedback']
2024-10-31 03:29:59 - db_utils - INFO -   Structure of sqlite_sequence table:
2024-10-31 03:29:59 - db_utils - INFO -     Column: name, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:29:59 - db_utils - INFO -     Column: seq, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:29:59 - db_utils - INFO -   Structure of feedback table:
2024-10-31 03:29:59 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 03:29:59 - db_utils - INFO -     Column: type, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:29:59 - db_utils - INFO -     Column: datetime, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:29:59 - db_utils - INFO -     Column: comment, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:29:59 - db_utils - INFO -     Column: innsender, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:29:59 - db_utils - INFO -     Column: status, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:29:59 - db_utils - INFO -     Column: status_changed_by, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:29:59 - db_utils - INFO -     Column: status_changed_at, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:29:59 - db_utils - INFO -     Column: hidden, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:29:59 - db_utils - INFO -     Column: is_alert, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:29:59 - db_utils - INFO -     Column: display_on_weather, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:29:59 - db_utils - INFO -     Column: expiry_date, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:29:59 - db_utils - INFO -     Column: target_group, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:29:59 - db_utils - INFO -   Indexes in feedback.db: ['idx_feedback_datetime', 'idx_feedback_innsender', 'idx_feedback_status', 'idx_feedback_type']
2024-10-31 03:29:59 - db_utils - INFO -   Row count in sqlite_sequence: 1
2024-10-31 03:29:59 - db_utils - INFO -   Row count in feedback: 11
2024-10-31 03:29:59 - db_utils - INFO -   Test query result: (1,)
2024-10-31 03:29:59 - db_utils - INFO - Detailed database operations debugging completed
2024-10-31 03:29:59 - db_utils - INFO - Oppdatert skjema for customer
2024-10-31 03:29:59 - db_utils - INFO - Oppdatert skjema for feedback
2024-10-31 03:29:59 - db_utils - INFO - Oppdatert skjema for login_history
2024-10-31 03:29:59 - db_utils - INFO - Oppdatert skjema for stroing
2024-10-31 03:29:59 - db_utils - INFO - Oppdatert skjema for tunbroyting
2024-10-31 03:29:59 - db_utils - INFO - All database schemas verified and updated
2024-10-31 03:29:59 - db_utils - INFO - Oppdatert skjema for customer
2024-10-31 03:29:59 - db_utils - INFO - Oppdatert skjema for feedback
2024-10-31 03:29:59 - db_utils - INFO - Oppdatert skjema for login_history
2024-10-31 03:29:59 - db_utils - INFO - Oppdatert skjema for stroing
2024-10-31 03:29:59 - db_utils - INFO - Oppdatert skjema for tunbroyting
2024-10-31 03:29:59 - db_utils - INFO - All database schemas verified and updated
2024-10-31 03:29:59 - db_utils - INFO - Database login_history initialized, updated, and optimized
2024-10-31 03:29:59 - db_utils - INFO - Database tunbroyting initialized, updated, and optimized
2024-10-31 03:29:59 - db_utils - INFO - Database stroing initialized, updated, and optimized
2024-10-31 03:29:59 - db_utils - INFO - Database feedback initialized, updated, and optimized
2024-10-31 03:29:59 - db_utils - INFO - Database customer initialized, updated, and optimized
2024-10-31 03:29:59 - db_utils - INFO - Successfully created indexes for tunbroyting database
2024-10-31 03:29:59 - db_utils - INFO - Successfully created indexes for stroing database
2024-10-31 03:29:59 - db_utils - INFO - Successfully created indexes for feedback database
2024-10-31 03:29:59 - db_utils - INFO - Successfully created indexes for login_history database
2024-10-31 03:29:59 - db_utils - INFO - Successfully created indexes for customer database
2024-10-31 03:29:59 - db_utils - INFO - Database index creation completed
2024-10-31 03:29:59 - db_utils - INFO - Database indexes created
2024-10-31 03:29:59 - db_utils - INFO - Successfully verified connection to stroing.db
2024-10-31 03:29:59 - db_utils - INFO - Successfully verified connection to tunbroyting.db
2024-10-31 03:29:59 - db_utils - INFO - Successfully verified connection to feedback.db
2024-10-31 03:29:59 - db_utils - INFO - Successfully verified connection to login_history.db
2024-10-31 03:29:59 - db_utils - INFO - Successfully verified connection to customer.db
2024-10-31 03:29:59 - db_utils - INFO - Database connections verified
2024-10-31 03:29:59 - db_utils - INFO - All databases initialized, updated, and verified
2024-10-31 03:29:59 - db_utils - INFO - Query executed successfully on login_history.db. Rows affected: -1
2024-10-31 03:29:59 - db_utils - INFO - login_history table structure is correct
2024-10-31 03:29:59 - customer_utils - INFO - Starting cabin user consistency check
2024-10-31 03:29:59 - utils - INFO - Attempting to load passwords from secrets
2024-10-31 03:29:59 - utils - INFO - Successfully loaded passwords. Number of entries: 94
2024-10-31 03:29:59 - customer_utils - INFO - Retrieved 94 passwords
2024-10-31 03:29:59 - customer_utils - INFO - Found 94 customers in database
2024-10-31 03:29:59 - customer_utils - INFO - Consistency check completed
2024-10-31 03:29:59 - customer_utils - INFO - Database connection closed
2024-10-31 03:29:59 - customer_utils - INFO - Validating customers and passwords
2024-10-31 03:29:59 - utils - INFO - Attempting to load passwords from secrets
2024-10-31 03:29:59 - utils - INFO - Successfully loaded passwords. Number of entries: 94
2024-10-31 03:29:59 - customer_utils - INFO - Customer and password validation complete
2024-10-31 03:29:59 - db_utils - INFO - Successfully created indexes for tunbroyting database
2024-10-31 03:29:59 - db_utils - INFO - Successfully created indexes for stroing database
2024-10-31 03:29:59 - db_utils - INFO - Successfully created indexes for feedback database
2024-10-31 03:29:59 - db_utils - INFO - Successfully created indexes for login_history database
2024-10-31 03:29:59 - db_utils - INFO - Successfully created indexes for customer database
2024-10-31 03:29:59 - db_utils - INFO - Database index creation completed
2024-10-31 03:29:59 - __main__ - INFO - Application initialization completed successfully
2024-10-31 03:29:59 - __main__ - INFO - Application initialization completed successfully
2024-10-31 03:29:59 - __main__ - INFO - Application setup complete
2024-10-31 03:29:59 - __main__ - INFO - Application shutting down
2024-10-31 03:30:02 - __main__ - INFO - Added validate_user_input function to app.py
2024-10-31 03:30:02 - __main__ - INFO - Starting application initialization
2024-10-31 03:30:02 - db_utils - INFO - Starting detailed database operations debugging
2024-10-31 03:30:02 - db_utils - INFO - Debugging login_history database:
2024-10-31 03:30:02 - db_utils - INFO -   Database version: 0
2024-10-31 03:30:02 - db_utils - INFO -   Tables in login_history.db: ['login_history']
2024-10-31 03:30:02 - db_utils - INFO -   Structure of login_history table:
2024-10-31 03:30:02 - db_utils - INFO -     Column: id, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:30:02 - db_utils - INFO -     Column: login_time, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:30:02 - db_utils - INFO -     Column: success, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:30:02 - db_utils - INFO -   Indexes in login_history.db: ['idx_login_id', 'idx_login_time']
2024-10-31 03:30:02 - db_utils - INFO -   Row count in login_history: 424
2024-10-31 03:30:02 - db_utils - INFO -   Test query result: (1,)
2024-10-31 03:30:02 - db_utils - INFO - Debugging tunbroyting database:
2024-10-31 03:30:02 - db_utils - INFO -   Database version: 0
2024-10-31 03:30:02 - db_utils - INFO -   Tables in tunbroyting.db: ['tunbroyting_bestillinger']
2024-10-31 03:30:02 - db_utils - INFO -   Structure of tunbroyting_bestillinger table:
2024-10-31 03:30:02 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 03:30:02 - db_utils - INFO -     Column: bruker, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:30:02 - db_utils - INFO -     Column: ankomst_dato, Type: DATE, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:30:02 - db_utils - INFO -     Column: ankomst_tid, Type: TIME, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:30:02 - db_utils - INFO -     Column: avreise_dato, Type: DATE, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:30:02 - db_utils - INFO -     Column: avreise_tid, Type: TIME, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:30:02 - db_utils - INFO -     Column: abonnement_type, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:30:02 - db_utils - INFO -   Indexes in tunbroyting.db: ['idx_tunbroyting_bruker', 'idx_tunbroyting_ankomst_dato', 'idx_tunbroyting_avreise_dato', 'idx_tunbroyting_abonnement']
2024-10-31 03:30:02 - db_utils - INFO -   Row count in tunbroyting_bestillinger: 2
2024-10-31 03:30:02 - db_utils - INFO -   Test query result: (1,)
2024-10-31 03:30:02 - db_utils - INFO - Debugging stroing database:
2024-10-31 03:30:02 - db_utils - INFO -   Database version: 0
2024-10-31 03:30:02 - db_utils - INFO -   Tables in stroing.db: ['sqlite_sequence', 'stroing_bestillinger']
2024-10-31 03:30:02 - db_utils - INFO -   Structure of sqlite_sequence table:
2024-10-31 03:30:02 - db_utils - INFO -     Column: name, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:30:02 - db_utils - INFO -     Column: seq, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:30:02 - db_utils - INFO -   Structure of stroing_bestillinger table:
2024-10-31 03:30:02 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 03:30:02 - db_utils - INFO -     Column: bruker, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:30:02 - db_utils - INFO -     Column: bestillings_dato, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:30:02 - db_utils - INFO -     Column: onske_dato, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:30:02 - db_utils - INFO -   Indexes in stroing.db: ['idx_stroing_bruker', 'idx_stroing_onske_dato', 'idx_stroing_bestillings_dato']
2024-10-31 03:30:02 - db_utils - INFO -   Row count in sqlite_sequence: 1
2024-10-31 03:30:02 - db_utils - INFO -   Row count in stroing_bestillinger: 5
2024-10-31 03:30:02 - db_utils - INFO -   Test query result: (1,)
2024-10-31 03:30:02 - db_utils - INFO - Debugging feedback database:
2024-10-31 03:30:02 - db_utils - INFO -   Database version: 0
2024-10-31 03:30:02 - db_utils - INFO -   Tables in feedback.db: ['sqlite_sequence', 'feedback']
2024-10-31 03:30:02 - db_utils - INFO -   Structure of sqlite_sequence table:
2024-10-31 03:30:02 - db_utils - INFO -     Column: name, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:30:02 - db_utils - INFO -     Column: seq, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:30:02 - db_utils - INFO -   Structure of feedback table:
2024-10-31 03:30:02 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 03:30:02 - db_utils - INFO -     Column: type, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:30:02 - db_utils - INFO -     Column: datetime, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:30:02 - db_utils - INFO -     Column: comment, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:30:02 - db_utils - INFO -     Column: innsender, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:30:02 - db_utils - INFO -     Column: status, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:30:02 - db_utils - INFO -     Column: status_changed_by, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:30:02 - db_utils - INFO -     Column: status_changed_at, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:30:02 - db_utils - INFO -     Column: hidden, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:30:02 - db_utils - INFO -     Column: is_alert, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:30:02 - db_utils - INFO -     Column: display_on_weather, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:30:02 - db_utils - INFO -     Column: expiry_date, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:30:02 - db_utils - INFO -     Column: target_group, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:30:02 - db_utils - INFO -   Indexes in feedback.db: ['idx_feedback_datetime', 'idx_feedback_innsender', 'idx_feedback_status', 'idx_feedback_type']
2024-10-31 03:30:02 - db_utils - INFO -   Row count in sqlite_sequence: 1
2024-10-31 03:30:02 - db_utils - INFO -   Row count in feedback: 11
2024-10-31 03:30:02 - db_utils - INFO -   Test query result: (1,)
2024-10-31 03:30:02 - db_utils - INFO - Detailed database operations debugging completed
2024-10-31 03:30:02 - db_utils - INFO - Oppdatert skjema for customer
2024-10-31 03:30:02 - db_utils - INFO - Oppdatert skjema for feedback
2024-10-31 03:30:02 - db_utils - INFO - Oppdatert skjema for login_history
2024-10-31 03:30:02 - db_utils - INFO - Oppdatert skjema for stroing
2024-10-31 03:30:02 - db_utils - INFO - Oppdatert skjema for tunbroyting
2024-10-31 03:30:02 - db_utils - INFO - All database schemas verified and updated
2024-10-31 03:30:02 - db_utils - INFO - Oppdatert skjema for customer
2024-10-31 03:30:02 - db_utils - INFO - Oppdatert skjema for feedback
2024-10-31 03:30:02 - db_utils - INFO - Oppdatert skjema for login_history
2024-10-31 03:30:02 - db_utils - INFO - Oppdatert skjema for stroing
2024-10-31 03:30:02 - db_utils - INFO - Oppdatert skjema for tunbroyting
2024-10-31 03:30:02 - db_utils - INFO - All database schemas verified and updated
2024-10-31 03:30:02 - db_utils - INFO - Database already initialized. Skipping.
2024-10-31 03:30:02 - db_utils - INFO - Query executed successfully on login_history.db. Rows affected: -1
2024-10-31 03:30:02 - db_utils - INFO - login_history table structure is correct
2024-10-31 03:30:02 - customer_utils - INFO - Starting cabin user consistency check
2024-10-31 03:30:02 - utils - INFO - Attempting to load passwords from secrets
2024-10-31 03:30:02 - utils - INFO - Successfully loaded passwords. Number of entries: 94
2024-10-31 03:30:02 - customer_utils - INFO - Retrieved 94 passwords
2024-10-31 03:30:02 - customer_utils - INFO - Found 94 customers in database
2024-10-31 03:30:02 - customer_utils - INFO - Consistency check completed
2024-10-31 03:30:02 - customer_utils - INFO - Database connection closed
2024-10-31 03:30:02 - customer_utils - INFO - Validating customers and passwords
2024-10-31 03:30:02 - utils - INFO - Attempting to load passwords from secrets
2024-10-31 03:30:02 - utils - INFO - Successfully loaded passwords. Number of entries: 94
2024-10-31 03:30:02 - customer_utils - INFO - Customer and password validation complete
2024-10-31 03:30:02 - db_utils - INFO - Successfully created indexes for tunbroyting database
2024-10-31 03:30:02 - db_utils - INFO - Successfully created indexes for stroing database
2024-10-31 03:30:02 - db_utils - INFO - Successfully created indexes for feedback database
2024-10-31 03:30:02 - db_utils - INFO - Successfully created indexes for login_history database
2024-10-31 03:30:02 - db_utils - INFO - Successfully created indexes for customer database
2024-10-31 03:30:02 - db_utils - INFO - Database index creation completed
2024-10-31 03:30:02 - __main__ - INFO - Application initialization completed successfully
2024-10-31 03:30:02 - __main__ - INFO - Application initialization completed successfully
2024-10-31 03:30:02 - __main__ - INFO - Application setup complete
2024-10-31 03:30:02 - auth_utils - INFO - Login attempt for ID: 999
2024-10-31 03:30:02 - db_utils - INFO - DATABASE_PATH: /Users/tor.inge.jossang@aftenbladet.no/dev/gullingen
2024-10-31 03:30:02 - db_utils - INFO - Full database path: /Users/tor.inge.jossang@aftenbladet.no/dev/gullingen/login_history.db
2024-10-31 03:30:02 - db_utils - INFO - Attempting to create database engine...
2024-10-31 03:30:02 - db_utils - INFO - Database engine created successfully for login_history.db
2024-10-31 03:30:02 - auth_utils - INFO - Rate limit check passed for user 999
2024-10-31 03:30:02 - auth_utils - INFO - User 999 authenticated successfully
2024-10-31 03:30:02 - customer_utils - INFO - Successfully retrieved customer with ID: 999
2024-10-31 03:30:02 - db_utils - INFO - Database file /Users/tor.inge.jossang@aftenbladet.no/dev/gullingen/login_history.db exists.
2024-10-31 03:30:02 - db_utils - INFO - Query executed successfully on login_history.db. Rows affected: 1
2024-10-31 03:30:02 - auth_utils - INFO - Successful login for ID: 999
2024-10-31 03:30:02 - auth_utils - INFO - Successful login and logging for ID: 999
2024-10-31 03:30:02 - db_utils - INFO - DATABASE_PATH: /Users/tor.inge.jossang@aftenbladet.no/dev/gullingen
2024-10-31 03:30:02 - db_utils - INFO - Full database path: /Users/tor.inge.jossang@aftenbladet.no/dev/gullingen/login_history.db
2024-10-31 03:30:02 - db_utils - INFO - Attempting to create database engine...
2024-10-31 03:30:02 - db_utils - INFO - Database engine created successfully for login_history.db
2024-10-31 03:30:02 - auth_utils - INFO - Rate limit reset for user 999
2024-10-31 03:30:02 - __main__ - INFO - Application shutting down
2024-10-31 03:30:02 - __main__ - INFO - Added validate_user_input function to app.py
2024-10-31 03:30:02 - __main__ - INFO - Starting application initialization
2024-10-31 03:30:02 - db_utils - INFO - Starting detailed database operations debugging
2024-10-31 03:30:02 - db_utils - INFO - Debugging login_history database:
2024-10-31 03:30:02 - db_utils - INFO -   Database version: 0
2024-10-31 03:30:02 - db_utils - INFO -   Tables in login_history.db: ['login_history']
2024-10-31 03:30:02 - db_utils - INFO -   Structure of login_history table:
2024-10-31 03:30:02 - db_utils - INFO -     Column: id, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:30:02 - db_utils - INFO -     Column: login_time, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:30:02 - db_utils - INFO -     Column: success, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:30:02 - db_utils - INFO -   Indexes in login_history.db: ['idx_login_id', 'idx_login_time']
2024-10-31 03:30:02 - db_utils - INFO -   Row count in login_history: 425
2024-10-31 03:30:02 - db_utils - INFO -   Test query result: (1,)
2024-10-31 03:30:02 - db_utils - INFO - Debugging tunbroyting database:
2024-10-31 03:30:02 - db_utils - INFO -   Database version: 0
2024-10-31 03:30:02 - db_utils - INFO -   Tables in tunbroyting.db: ['tunbroyting_bestillinger']
2024-10-31 03:30:02 - db_utils - INFO -   Structure of tunbroyting_bestillinger table:
2024-10-31 03:30:02 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 03:30:02 - db_utils - INFO -     Column: bruker, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:30:02 - db_utils - INFO -     Column: ankomst_dato, Type: DATE, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:30:02 - db_utils - INFO -     Column: ankomst_tid, Type: TIME, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:30:02 - db_utils - INFO -     Column: avreise_dato, Type: DATE, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:30:02 - db_utils - INFO -     Column: avreise_tid, Type: TIME, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:30:02 - db_utils - INFO -     Column: abonnement_type, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:30:02 - db_utils - INFO -   Indexes in tunbroyting.db: ['idx_tunbroyting_bruker', 'idx_tunbroyting_ankomst_dato', 'idx_tunbroyting_avreise_dato', 'idx_tunbroyting_abonnement']
2024-10-31 03:30:02 - db_utils - INFO -   Row count in tunbroyting_bestillinger: 2
2024-10-31 03:30:02 - db_utils - INFO -   Test query result: (1,)
2024-10-31 03:30:02 - db_utils - INFO - Debugging stroing database:
2024-10-31 03:30:02 - db_utils - INFO -   Database version: 0
2024-10-31 03:30:02 - db_utils - INFO -   Tables in stroing.db: ['sqlite_sequence', 'stroing_bestillinger']
2024-10-31 03:30:02 - db_utils - INFO -   Structure of sqlite_sequence table:
2024-10-31 03:30:02 - db_utils - INFO -     Column: name, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:30:02 - db_utils - INFO -     Column: seq, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:30:02 - db_utils - INFO -   Structure of stroing_bestillinger table:
2024-10-31 03:30:02 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 03:30:02 - db_utils - INFO -     Column: bruker, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:30:02 - db_utils - INFO -     Column: bestillings_dato, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:30:02 - db_utils - INFO -     Column: onske_dato, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:30:02 - db_utils - INFO -   Indexes in stroing.db: ['idx_stroing_bruker', 'idx_stroing_onske_dato', 'idx_stroing_bestillings_dato']
2024-10-31 03:30:02 - db_utils - INFO -   Row count in sqlite_sequence: 1
2024-10-31 03:30:02 - db_utils - INFO -   Row count in stroing_bestillinger: 5
2024-10-31 03:30:02 - db_utils - INFO -   Test query result: (1,)
2024-10-31 03:30:02 - db_utils - INFO - Debugging feedback database:
2024-10-31 03:30:02 - db_utils - INFO -   Database version: 0
2024-10-31 03:30:02 - db_utils - INFO -   Tables in feedback.db: ['sqlite_sequence', 'feedback']
2024-10-31 03:30:02 - db_utils - INFO -   Structure of sqlite_sequence table:
2024-10-31 03:30:02 - db_utils - INFO -     Column: name, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:30:02 - db_utils - INFO -     Column: seq, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:30:02 - db_utils - INFO -   Structure of feedback table:
2024-10-31 03:30:02 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 03:30:02 - db_utils - INFO -     Column: type, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:30:02 - db_utils - INFO -     Column: datetime, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:30:02 - db_utils - INFO -     Column: comment, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:30:02 - db_utils - INFO -     Column: innsender, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:30:02 - db_utils - INFO -     Column: status, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:30:02 - db_utils - INFO -     Column: status_changed_by, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:30:02 - db_utils - INFO -     Column: status_changed_at, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:30:02 - db_utils - INFO -     Column: hidden, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:30:02 - db_utils - INFO -     Column: is_alert, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:30:02 - db_utils - INFO -     Column: display_on_weather, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:30:02 - db_utils - INFO -     Column: expiry_date, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:30:02 - db_utils - INFO -     Column: target_group, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:30:02 - db_utils - INFO -   Indexes in feedback.db: ['idx_feedback_datetime', 'idx_feedback_innsender', 'idx_feedback_status', 'idx_feedback_type']
2024-10-31 03:30:02 - db_utils - INFO -   Row count in sqlite_sequence: 1
2024-10-31 03:30:02 - db_utils - INFO -   Row count in feedback: 11
2024-10-31 03:30:02 - db_utils - INFO -   Test query result: (1,)
2024-10-31 03:30:02 - db_utils - INFO - Detailed database operations debugging completed
2024-10-31 03:30:02 - db_utils - INFO - Oppdatert skjema for customer
2024-10-31 03:30:02 - db_utils - INFO - Oppdatert skjema for feedback
2024-10-31 03:30:02 - db_utils - INFO - Oppdatert skjema for login_history
2024-10-31 03:30:02 - db_utils - INFO - Oppdatert skjema for stroing
2024-10-31 03:30:02 - db_utils - INFO - Oppdatert skjema for tunbroyting
2024-10-31 03:30:02 - db_utils - INFO - All database schemas verified and updated
2024-10-31 03:30:02 - db_utils - INFO - Oppdatert skjema for customer
2024-10-31 03:30:02 - db_utils - INFO - Oppdatert skjema for feedback
2024-10-31 03:30:02 - db_utils - INFO - Oppdatert skjema for login_history
2024-10-31 03:30:02 - db_utils - INFO - Oppdatert skjema for stroing
2024-10-31 03:30:02 - db_utils - INFO - Oppdatert skjema for tunbroyting
2024-10-31 03:30:02 - db_utils - INFO - All database schemas verified and updated
2024-10-31 03:30:02 - db_utils - INFO - Database already initialized. Skipping.
2024-10-31 03:30:02 - db_utils - INFO - Query executed successfully on login_history.db. Rows affected: -1
2024-10-31 03:30:02 - db_utils - INFO - login_history table structure is correct
2024-10-31 03:30:02 - customer_utils - INFO - Starting cabin user consistency check
2024-10-31 03:30:02 - utils - INFO - Attempting to load passwords from secrets
2024-10-31 03:30:02 - utils - INFO - Successfully loaded passwords. Number of entries: 94
2024-10-31 03:30:02 - customer_utils - INFO - Retrieved 94 passwords
2024-10-31 03:30:02 - customer_utils - INFO - Found 94 customers in database
2024-10-31 03:30:02 - customer_utils - INFO - Consistency check completed
2024-10-31 03:30:02 - customer_utils - INFO - Database connection closed
2024-10-31 03:30:02 - customer_utils - INFO - Validating customers and passwords
2024-10-31 03:30:02 - utils - INFO - Attempting to load passwords from secrets
2024-10-31 03:30:02 - utils - INFO - Successfully loaded passwords. Number of entries: 94
2024-10-31 03:30:02 - customer_utils - INFO - Customer and password validation complete
2024-10-31 03:30:02 - db_utils - INFO - Successfully created indexes for tunbroyting database
2024-10-31 03:30:02 - db_utils - INFO - Successfully created indexes for stroing database
2024-10-31 03:30:02 - db_utils - INFO - Successfully created indexes for feedback database
2024-10-31 03:30:02 - db_utils - INFO - Successfully created indexes for login_history database
2024-10-31 03:30:02 - db_utils - INFO - Successfully created indexes for customer database
2024-10-31 03:30:02 - db_utils - INFO - Database index creation completed
2024-10-31 03:30:02 - __main__ - INFO - Application initialization completed successfully
2024-10-31 03:30:02 - __main__ - INFO - Application initialization completed successfully
2024-10-31 03:30:02 - __main__ - INFO - Application setup complete
2024-10-31 03:30:02 - customer_utils - INFO - Successfully retrieved customer with ID: 999
2024-10-31 03:30:02 - alert_utils - INFO - Fetched 1 alerts. only_today=False, include_expired=False
2024-10-31 03:30:02 - tun_utils - WARNING - hent_bestillinger() is deprecated, use get_bookings() instead
2024-10-31 03:30:02 - tun_utils - INFO - Starting get_bookings with start_date=None, end_date=None
2024-10-31 03:30:02 - tun_utils - INFO - Successfully retrieved 2 bookings
2024-10-31 03:30:02 - __main__ - INFO - Application shutting down
2024-10-31 03:30:03 - __main__ - INFO - Added validate_user_input function to app.py
2024-10-31 03:30:03 - __main__ - INFO - Starting application initialization
2024-10-31 03:30:03 - db_utils - INFO - Starting detailed database operations debugging
2024-10-31 03:30:03 - db_utils - INFO - Debugging login_history database:
2024-10-31 03:30:03 - db_utils - INFO -   Database version: 0
2024-10-31 03:30:03 - db_utils - INFO -   Tables in login_history.db: ['login_history']
2024-10-31 03:30:03 - db_utils - INFO -   Structure of login_history table:
2024-10-31 03:30:03 - db_utils - INFO -     Column: id, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:30:03 - db_utils - INFO -     Column: login_time, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:30:03 - db_utils - INFO -     Column: success, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:30:03 - db_utils - INFO -   Indexes in login_history.db: ['idx_login_id', 'idx_login_time']
2024-10-31 03:30:03 - db_utils - INFO -   Row count in login_history: 425
2024-10-31 03:30:03 - db_utils - INFO -   Test query result: (1,)
2024-10-31 03:30:03 - db_utils - INFO - Debugging tunbroyting database:
2024-10-31 03:30:03 - db_utils - INFO -   Database version: 0
2024-10-31 03:30:03 - db_utils - INFO -   Tables in tunbroyting.db: ['tunbroyting_bestillinger']
2024-10-31 03:30:03 - db_utils - INFO -   Structure of tunbroyting_bestillinger table:
2024-10-31 03:30:03 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 03:30:03 - db_utils - INFO -     Column: bruker, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:30:03 - db_utils - INFO -     Column: ankomst_dato, Type: DATE, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:30:03 - db_utils - INFO -     Column: ankomst_tid, Type: TIME, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:30:03 - db_utils - INFO -     Column: avreise_dato, Type: DATE, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:30:03 - db_utils - INFO -     Column: avreise_tid, Type: TIME, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:30:03 - db_utils - INFO -     Column: abonnement_type, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:30:03 - db_utils - INFO -   Indexes in tunbroyting.db: ['idx_tunbroyting_bruker', 'idx_tunbroyting_ankomst_dato', 'idx_tunbroyting_avreise_dato', 'idx_tunbroyting_abonnement']
2024-10-31 03:30:03 - db_utils - INFO -   Row count in tunbroyting_bestillinger: 2
2024-10-31 03:30:03 - db_utils - INFO -   Test query result: (1,)
2024-10-31 03:30:03 - db_utils - INFO - Debugging stroing database:
2024-10-31 03:30:03 - db_utils - INFO -   Database version: 0
2024-10-31 03:30:03 - db_utils - INFO -   Tables in stroing.db: ['sqlite_sequence', 'stroing_bestillinger']
2024-10-31 03:30:03 - db_utils - INFO -   Structure of sqlite_sequence table:
2024-10-31 03:30:03 - db_utils - INFO -     Column: name, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:30:03 - db_utils - INFO -     Column: seq, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:30:03 - db_utils - INFO -   Structure of stroing_bestillinger table:
2024-10-31 03:30:03 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 03:30:03 - db_utils - INFO -     Column: bruker, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:30:03 - db_utils - INFO -     Column: bestillings_dato, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:30:03 - db_utils - INFO -     Column: onske_dato, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:30:03 - db_utils - INFO -   Indexes in stroing.db: ['idx_stroing_bruker', 'idx_stroing_onske_dato', 'idx_stroing_bestillings_dato']
2024-10-31 03:30:03 - db_utils - INFO -   Row count in sqlite_sequence: 1
2024-10-31 03:30:03 - db_utils - INFO -   Row count in stroing_bestillinger: 5
2024-10-31 03:30:03 - db_utils - INFO -   Test query result: (1,)
2024-10-31 03:30:03 - db_utils - INFO - Debugging feedback database:
2024-10-31 03:30:03 - db_utils - INFO -   Database version: 0
2024-10-31 03:30:03 - db_utils - INFO -   Tables in feedback.db: ['sqlite_sequence', 'feedback']
2024-10-31 03:30:03 - db_utils - INFO -   Structure of sqlite_sequence table:
2024-10-31 03:30:03 - db_utils - INFO -     Column: name, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:30:03 - db_utils - INFO -     Column: seq, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:30:03 - db_utils - INFO -   Structure of feedback table:
2024-10-31 03:30:03 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 03:30:03 - db_utils - INFO -     Column: type, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:30:03 - db_utils - INFO -     Column: datetime, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:30:03 - db_utils - INFO -     Column: comment, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:30:03 - db_utils - INFO -     Column: innsender, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:30:03 - db_utils - INFO -     Column: status, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:30:03 - db_utils - INFO -     Column: status_changed_by, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:30:03 - db_utils - INFO -     Column: status_changed_at, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:30:03 - db_utils - INFO -     Column: hidden, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:30:03 - db_utils - INFO -     Column: is_alert, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:30:03 - db_utils - INFO -     Column: display_on_weather, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:30:03 - db_utils - INFO -     Column: expiry_date, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:30:03 - db_utils - INFO -     Column: target_group, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:30:03 - db_utils - INFO -   Indexes in feedback.db: ['idx_feedback_datetime', 'idx_feedback_innsender', 'idx_feedback_status', 'idx_feedback_type']
2024-10-31 03:30:03 - db_utils - INFO -   Row count in sqlite_sequence: 1
2024-10-31 03:30:03 - db_utils - INFO -   Row count in feedback: 11
2024-10-31 03:30:03 - db_utils - INFO -   Test query result: (1,)
2024-10-31 03:30:03 - db_utils - INFO - Detailed database operations debugging completed
2024-10-31 03:30:03 - db_utils - INFO - Oppdatert skjema for customer
2024-10-31 03:30:03 - db_utils - INFO - Oppdatert skjema for feedback
2024-10-31 03:30:03 - db_utils - INFO - Oppdatert skjema for login_history
2024-10-31 03:30:03 - db_utils - INFO - Oppdatert skjema for stroing
2024-10-31 03:30:03 - db_utils - INFO - Oppdatert skjema for tunbroyting
2024-10-31 03:30:03 - db_utils - INFO - All database schemas verified and updated
2024-10-31 03:30:03 - db_utils - INFO - Oppdatert skjema for customer
2024-10-31 03:30:03 - db_utils - INFO - Oppdatert skjema for feedback
2024-10-31 03:30:03 - db_utils - INFO - Oppdatert skjema for login_history
2024-10-31 03:30:03 - db_utils - INFO - Oppdatert skjema for stroing
2024-10-31 03:30:03 - db_utils - INFO - Oppdatert skjema for tunbroyting
2024-10-31 03:30:03 - db_utils - INFO - All database schemas verified and updated
2024-10-31 03:30:03 - db_utils - INFO - Database already initialized. Skipping.
2024-10-31 03:30:03 - db_utils - INFO - Query executed successfully on login_history.db. Rows affected: -1
2024-10-31 03:30:03 - db_utils - INFO - login_history table structure is correct
2024-10-31 03:30:03 - customer_utils - INFO - Starting cabin user consistency check
2024-10-31 03:30:03 - utils - INFO - Attempting to load passwords from secrets
2024-10-31 03:30:03 - utils - INFO - Successfully loaded passwords. Number of entries: 94
2024-10-31 03:30:03 - customer_utils - INFO - Retrieved 94 passwords
2024-10-31 03:30:03 - customer_utils - INFO - Found 94 customers in database
2024-10-31 03:30:03 - customer_utils - INFO - Consistency check completed
2024-10-31 03:30:03 - customer_utils - INFO - Database connection closed
2024-10-31 03:30:03 - customer_utils - INFO - Validating customers and passwords
2024-10-31 03:30:03 - utils - INFO - Attempting to load passwords from secrets
2024-10-31 03:30:03 - utils - INFO - Successfully loaded passwords. Number of entries: 94
2024-10-31 03:30:03 - customer_utils - INFO - Customer and password validation complete
2024-10-31 03:30:03 - db_utils - INFO - Successfully created indexes for tunbroyting database
2024-10-31 03:30:03 - db_utils - INFO - Successfully created indexes for stroing database
2024-10-31 03:30:03 - db_utils - INFO - Successfully created indexes for feedback database
2024-10-31 03:30:03 - db_utils - INFO - Successfully created indexes for login_history database
2024-10-31 03:30:03 - db_utils - INFO - Successfully created indexes for customer database
2024-10-31 03:30:03 - db_utils - INFO - Database index creation completed
2024-10-31 03:30:03 - __main__ - INFO - Application initialization completed successfully
2024-10-31 03:30:03 - __main__ - INFO - Application initialization completed successfully
2024-10-31 03:30:03 - __main__ - INFO - Application setup complete
2024-10-31 03:30:03 - customer_utils - INFO - Successfully retrieved customer with ID: 999
2024-10-31 03:30:04 - weather_display_utils - ERROR - Feil ved opprettelse av v√¶rgraf: name 'PARAMETERS' is not defined
Traceback (most recent call last):
  File "/Users/tor.inge.jossang@aftenbladet.no/dev/gullingen/weather_display_utils.py", line 200, in create_dynamic_graph
    update_figure_layout(fig, df, GRAPH_CONFIG, len(PARAMETERS))
  File "/Users/tor.inge.jossang@aftenbladet.no/dev/gullingen/weather_display_utils.py", line 367, in update_figure_layout
    param = next((p for p in PARAMETERS if p['row'] == i), None)
                             ^^^^^^^^^^
NameError: name 'PARAMETERS' is not defined
2024-10-31 03:30:04 - __main__ - ERROR - An error occurred during application execution: name 'PARAMETERS' is not defined
Traceback (most recent call last):
  File "/Users/tor.inge.jossang@aftenbladet.no/dev/gullingen/app.py", line 263, in main
    handle_weather_page()
  File "/Users/tor.inge.jossang@aftenbladet.no/dev/gullingen/weather_display_utils.py", line 607, in handle_weather_page
    display_weather_data(weather_data['df'])
  File "/Users/tor.inge.jossang@aftenbladet.no/dev/gullingen/weather_display_utils.py", line 695, in display_weather_data
    fig = create_dynamic_graph(df)
          ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/tor.inge.jossang@aftenbladet.no/dev/gullingen/weather_display_utils.py", line 200, in create_dynamic_graph
    update_figure_layout(fig, df, GRAPH_CONFIG, len(PARAMETERS))
  File "/Users/tor.inge.jossang@aftenbladet.no/dev/gullingen/weather_display_utils.py", line 367, in update_figure_layout
    param = next((p for p in PARAMETERS if p['row'] == i), None)
                             ^^^^^^^^^^
NameError: name 'PARAMETERS' is not defined
2024-10-31 03:30:04 - __main__ - INFO - Application shutting down
2024-10-31 03:32:30 - __main__ - INFO - Added validate_user_input function to app.py
2024-10-31 03:32:30 - __main__ - INFO - Starting application initialization
2024-10-31 03:32:30 - db_utils - INFO - Starting detailed database operations debugging
2024-10-31 03:32:30 - db_utils - INFO - Debugging login_history database:
2024-10-31 03:32:30 - db_utils - INFO -   Database version: 0
2024-10-31 03:32:30 - db_utils - INFO -   Tables in login_history.db: ['login_history']
2024-10-31 03:32:30 - db_utils - INFO -   Structure of login_history table:
2024-10-31 03:32:30 - db_utils - INFO -     Column: id, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:32:30 - db_utils - INFO -     Column: login_time, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:32:30 - db_utils - INFO -     Column: success, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:32:30 - db_utils - INFO -   Indexes in login_history.db: ['idx_login_id', 'idx_login_time']
2024-10-31 03:32:30 - db_utils - INFO -   Row count in login_history: 425
2024-10-31 03:32:30 - db_utils - INFO -   Test query result: (1,)
2024-10-31 03:32:30 - db_utils - INFO - Debugging tunbroyting database:
2024-10-31 03:32:30 - db_utils - INFO -   Database version: 0
2024-10-31 03:32:30 - db_utils - INFO -   Tables in tunbroyting.db: ['tunbroyting_bestillinger']
2024-10-31 03:32:30 - db_utils - INFO -   Structure of tunbroyting_bestillinger table:
2024-10-31 03:32:30 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 03:32:30 - db_utils - INFO -     Column: bruker, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:32:30 - db_utils - INFO -     Column: ankomst_dato, Type: DATE, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:32:30 - db_utils - INFO -     Column: ankomst_tid, Type: TIME, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:32:30 - db_utils - INFO -     Column: avreise_dato, Type: DATE, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:32:30 - db_utils - INFO -     Column: avreise_tid, Type: TIME, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:32:30 - db_utils - INFO -     Column: abonnement_type, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:32:30 - db_utils - INFO -   Indexes in tunbroyting.db: ['idx_tunbroyting_bruker', 'idx_tunbroyting_ankomst_dato', 'idx_tunbroyting_avreise_dato', 'idx_tunbroyting_abonnement']
2024-10-31 03:32:30 - db_utils - INFO -   Row count in tunbroyting_bestillinger: 2
2024-10-31 03:32:30 - db_utils - INFO -   Test query result: (1,)
2024-10-31 03:32:30 - db_utils - INFO - Debugging stroing database:
2024-10-31 03:32:30 - db_utils - INFO -   Database version: 0
2024-10-31 03:32:30 - db_utils - INFO -   Tables in stroing.db: ['sqlite_sequence', 'stroing_bestillinger']
2024-10-31 03:32:30 - db_utils - INFO -   Structure of sqlite_sequence table:
2024-10-31 03:32:30 - db_utils - INFO -     Column: name, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:32:30 - db_utils - INFO -     Column: seq, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:32:30 - db_utils - INFO -   Structure of stroing_bestillinger table:
2024-10-31 03:32:30 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 03:32:30 - db_utils - INFO -     Column: bruker, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:32:30 - db_utils - INFO -     Column: bestillings_dato, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:32:30 - db_utils - INFO -     Column: onske_dato, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:32:30 - db_utils - INFO -   Indexes in stroing.db: ['idx_stroing_bruker', 'idx_stroing_onske_dato', 'idx_stroing_bestillings_dato']
2024-10-31 03:32:30 - db_utils - INFO -   Row count in sqlite_sequence: 1
2024-10-31 03:32:30 - db_utils - INFO -   Row count in stroing_bestillinger: 5
2024-10-31 03:32:30 - db_utils - INFO -   Test query result: (1,)
2024-10-31 03:32:30 - db_utils - INFO - Debugging feedback database:
2024-10-31 03:32:30 - db_utils - INFO -   Database version: 0
2024-10-31 03:32:30 - db_utils - INFO -   Tables in feedback.db: ['sqlite_sequence', 'feedback']
2024-10-31 03:32:30 - db_utils - INFO -   Structure of sqlite_sequence table:
2024-10-31 03:32:30 - db_utils - INFO -     Column: name, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:32:30 - db_utils - INFO -     Column: seq, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:32:30 - db_utils - INFO -   Structure of feedback table:
2024-10-31 03:32:30 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 03:32:30 - db_utils - INFO -     Column: type, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:32:30 - db_utils - INFO -     Column: datetime, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:32:30 - db_utils - INFO -     Column: comment, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:32:30 - db_utils - INFO -     Column: innsender, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:32:30 - db_utils - INFO -     Column: status, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:32:30 - db_utils - INFO -     Column: status_changed_by, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:32:30 - db_utils - INFO -     Column: status_changed_at, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:32:30 - db_utils - INFO -     Column: hidden, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:32:30 - db_utils - INFO -     Column: is_alert, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:32:30 - db_utils - INFO -     Column: display_on_weather, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:32:30 - db_utils - INFO -     Column: expiry_date, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:32:30 - db_utils - INFO -     Column: target_group, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:32:30 - db_utils - INFO -   Indexes in feedback.db: ['idx_feedback_datetime', 'idx_feedback_innsender', 'idx_feedback_status', 'idx_feedback_type']
2024-10-31 03:32:30 - db_utils - INFO -   Row count in sqlite_sequence: 1
2024-10-31 03:32:30 - db_utils - INFO -   Row count in feedback: 11
2024-10-31 03:32:30 - db_utils - INFO -   Test query result: (1,)
2024-10-31 03:32:30 - db_utils - INFO - Detailed database operations debugging completed
2024-10-31 03:32:30 - db_utils - INFO - Oppdatert skjema for customer
2024-10-31 03:32:30 - db_utils - INFO - Oppdatert skjema for feedback
2024-10-31 03:32:30 - db_utils - INFO - Oppdatert skjema for login_history
2024-10-31 03:32:30 - db_utils - INFO - Oppdatert skjema for stroing
2024-10-31 03:32:30 - db_utils - INFO - Oppdatert skjema for tunbroyting
2024-10-31 03:32:30 - db_utils - INFO - All database schemas verified and updated
2024-10-31 03:32:30 - db_utils - INFO - Oppdatert skjema for customer
2024-10-31 03:32:30 - db_utils - INFO - Oppdatert skjema for feedback
2024-10-31 03:32:30 - db_utils - INFO - Oppdatert skjema for login_history
2024-10-31 03:32:30 - db_utils - INFO - Oppdatert skjema for stroing
2024-10-31 03:32:30 - db_utils - INFO - Oppdatert skjema for tunbroyting
2024-10-31 03:32:30 - db_utils - INFO - All database schemas verified and updated
2024-10-31 03:32:30 - db_utils - INFO - Database login_history initialized, updated, and optimized
2024-10-31 03:32:30 - db_utils - INFO - Database tunbroyting initialized, updated, and optimized
2024-10-31 03:32:30 - db_utils - INFO - Database stroing initialized, updated, and optimized
2024-10-31 03:32:30 - db_utils - INFO - Database feedback initialized, updated, and optimized
2024-10-31 03:32:30 - db_utils - INFO - Database customer initialized, updated, and optimized
2024-10-31 03:32:30 - db_utils - INFO - Successfully created indexes for tunbroyting database
2024-10-31 03:32:30 - db_utils - INFO - Successfully created indexes for stroing database
2024-10-31 03:32:30 - db_utils - INFO - Successfully created indexes for feedback database
2024-10-31 03:32:30 - db_utils - INFO - Successfully created indexes for login_history database
2024-10-31 03:32:30 - db_utils - INFO - Successfully created indexes for customer database
2024-10-31 03:32:30 - db_utils - INFO - Database index creation completed
2024-10-31 03:32:30 - db_utils - INFO - Database indexes created
2024-10-31 03:32:30 - db_utils - INFO - Successfully verified connection to stroing.db
2024-10-31 03:32:30 - db_utils - INFO - Successfully verified connection to tunbroyting.db
2024-10-31 03:32:30 - db_utils - INFO - Successfully verified connection to feedback.db
2024-10-31 03:32:30 - db_utils - INFO - Successfully verified connection to login_history.db
2024-10-31 03:32:30 - db_utils - INFO - Successfully verified connection to customer.db
2024-10-31 03:32:30 - db_utils - INFO - Database connections verified
2024-10-31 03:32:30 - db_utils - INFO - All databases initialized, updated, and verified
2024-10-31 03:32:30 - db_utils - INFO - Query executed successfully on login_history.db. Rows affected: -1
2024-10-31 03:32:30 - db_utils - INFO - login_history table structure is correct
2024-10-31 03:32:30 - customer_utils - INFO - Starting cabin user consistency check
2024-10-31 03:32:30 - utils - INFO - Attempting to load passwords from secrets
2024-10-31 03:32:30 - utils - INFO - Successfully loaded passwords. Number of entries: 94
2024-10-31 03:32:30 - customer_utils - INFO - Retrieved 94 passwords
2024-10-31 03:32:30 - customer_utils - INFO - Found 94 customers in database
2024-10-31 03:32:30 - customer_utils - INFO - Consistency check completed
2024-10-31 03:32:30 - customer_utils - INFO - Database connection closed
2024-10-31 03:32:30 - customer_utils - INFO - Validating customers and passwords
2024-10-31 03:32:30 - utils - INFO - Attempting to load passwords from secrets
2024-10-31 03:32:30 - utils - INFO - Successfully loaded passwords. Number of entries: 94
2024-10-31 03:32:30 - customer_utils - INFO - Customer and password validation complete
2024-10-31 03:32:30 - db_utils - INFO - Successfully created indexes for tunbroyting database
2024-10-31 03:32:30 - db_utils - INFO - Successfully created indexes for stroing database
2024-10-31 03:32:30 - db_utils - INFO - Successfully created indexes for feedback database
2024-10-31 03:32:30 - db_utils - INFO - Successfully created indexes for login_history database
2024-10-31 03:32:30 - db_utils - INFO - Successfully created indexes for customer database
2024-10-31 03:32:30 - db_utils - INFO - Database index creation completed
2024-10-31 03:32:30 - __main__ - INFO - Application initialization completed successfully
2024-10-31 03:32:30 - __main__ - INFO - Application initialization completed successfully
2024-10-31 03:32:30 - __main__ - INFO - Application setup complete
2024-10-31 03:32:30 - __main__ - INFO - Application shutting down
2024-10-31 03:32:32 - __main__ - INFO - Added validate_user_input function to app.py
2024-10-31 03:32:32 - __main__ - INFO - Starting application initialization
2024-10-31 03:32:32 - db_utils - INFO - Starting detailed database operations debugging
2024-10-31 03:32:32 - db_utils - INFO - Debugging login_history database:
2024-10-31 03:32:32 - db_utils - INFO -   Database version: 0
2024-10-31 03:32:32 - db_utils - INFO -   Tables in login_history.db: ['login_history']
2024-10-31 03:32:32 - db_utils - INFO -   Structure of login_history table:
2024-10-31 03:32:32 - db_utils - INFO -     Column: id, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:32:32 - db_utils - INFO -     Column: login_time, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:32:32 - db_utils - INFO -     Column: success, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:32:32 - db_utils - INFO -   Indexes in login_history.db: ['idx_login_id', 'idx_login_time']
2024-10-31 03:32:32 - db_utils - INFO -   Row count in login_history: 425
2024-10-31 03:32:32 - db_utils - INFO -   Test query result: (1,)
2024-10-31 03:32:32 - db_utils - INFO - Debugging tunbroyting database:
2024-10-31 03:32:32 - db_utils - INFO -   Database version: 0
2024-10-31 03:32:32 - db_utils - INFO -   Tables in tunbroyting.db: ['tunbroyting_bestillinger']
2024-10-31 03:32:32 - db_utils - INFO -   Structure of tunbroyting_bestillinger table:
2024-10-31 03:32:32 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 03:32:32 - db_utils - INFO -     Column: bruker, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:32:32 - db_utils - INFO -     Column: ankomst_dato, Type: DATE, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:32:32 - db_utils - INFO -     Column: ankomst_tid, Type: TIME, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:32:32 - db_utils - INFO -     Column: avreise_dato, Type: DATE, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:32:32 - db_utils - INFO -     Column: avreise_tid, Type: TIME, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:32:32 - db_utils - INFO -     Column: abonnement_type, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:32:32 - db_utils - INFO -   Indexes in tunbroyting.db: ['idx_tunbroyting_bruker', 'idx_tunbroyting_ankomst_dato', 'idx_tunbroyting_avreise_dato', 'idx_tunbroyting_abonnement']
2024-10-31 03:32:32 - db_utils - INFO -   Row count in tunbroyting_bestillinger: 2
2024-10-31 03:32:32 - db_utils - INFO -   Test query result: (1,)
2024-10-31 03:32:32 - db_utils - INFO - Debugging stroing database:
2024-10-31 03:32:32 - db_utils - INFO -   Database version: 0
2024-10-31 03:32:32 - db_utils - INFO -   Tables in stroing.db: ['sqlite_sequence', 'stroing_bestillinger']
2024-10-31 03:32:32 - db_utils - INFO -   Structure of sqlite_sequence table:
2024-10-31 03:32:32 - db_utils - INFO -     Column: name, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:32:32 - db_utils - INFO -     Column: seq, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:32:32 - db_utils - INFO -   Structure of stroing_bestillinger table:
2024-10-31 03:32:32 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 03:32:32 - db_utils - INFO -     Column: bruker, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:32:32 - db_utils - INFO -     Column: bestillings_dato, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:32:32 - db_utils - INFO -     Column: onske_dato, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:32:32 - db_utils - INFO -   Indexes in stroing.db: ['idx_stroing_bruker', 'idx_stroing_onske_dato', 'idx_stroing_bestillings_dato']
2024-10-31 03:32:32 - db_utils - INFO -   Row count in sqlite_sequence: 1
2024-10-31 03:32:32 - db_utils - INFO -   Row count in stroing_bestillinger: 5
2024-10-31 03:32:32 - db_utils - INFO -   Test query result: (1,)
2024-10-31 03:32:32 - db_utils - INFO - Debugging feedback database:
2024-10-31 03:32:32 - db_utils - INFO -   Database version: 0
2024-10-31 03:32:32 - db_utils - INFO -   Tables in feedback.db: ['sqlite_sequence', 'feedback']
2024-10-31 03:32:32 - db_utils - INFO -   Structure of sqlite_sequence table:
2024-10-31 03:32:32 - db_utils - INFO -     Column: name, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:32:32 - db_utils - INFO -     Column: seq, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:32:32 - db_utils - INFO -   Structure of feedback table:
2024-10-31 03:32:32 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 03:32:32 - db_utils - INFO -     Column: type, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:32:32 - db_utils - INFO -     Column: datetime, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:32:32 - db_utils - INFO -     Column: comment, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:32:32 - db_utils - INFO -     Column: innsender, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:32:32 - db_utils - INFO -     Column: status, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:32:32 - db_utils - INFO -     Column: status_changed_by, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:32:32 - db_utils - INFO -     Column: status_changed_at, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:32:32 - db_utils - INFO -     Column: hidden, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:32:32 - db_utils - INFO -     Column: is_alert, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:32:32 - db_utils - INFO -     Column: display_on_weather, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:32:32 - db_utils - INFO -     Column: expiry_date, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:32:32 - db_utils - INFO -     Column: target_group, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:32:32 - db_utils - INFO -   Indexes in feedback.db: ['idx_feedback_datetime', 'idx_feedback_innsender', 'idx_feedback_status', 'idx_feedback_type']
2024-10-31 03:32:32 - db_utils - INFO -   Row count in sqlite_sequence: 1
2024-10-31 03:32:32 - db_utils - INFO -   Row count in feedback: 11
2024-10-31 03:32:32 - db_utils - INFO -   Test query result: (1,)
2024-10-31 03:32:32 - db_utils - INFO - Detailed database operations debugging completed
2024-10-31 03:32:32 - db_utils - INFO - Oppdatert skjema for customer
2024-10-31 03:32:32 - db_utils - INFO - Oppdatert skjema for feedback
2024-10-31 03:32:32 - db_utils - INFO - Oppdatert skjema for login_history
2024-10-31 03:32:32 - db_utils - INFO - Oppdatert skjema for stroing
2024-10-31 03:32:32 - db_utils - INFO - Oppdatert skjema for tunbroyting
2024-10-31 03:32:32 - db_utils - INFO - All database schemas verified and updated
2024-10-31 03:32:32 - db_utils - INFO - Oppdatert skjema for customer
2024-10-31 03:32:32 - db_utils - INFO - Oppdatert skjema for feedback
2024-10-31 03:32:32 - db_utils - INFO - Oppdatert skjema for login_history
2024-10-31 03:32:32 - db_utils - INFO - Oppdatert skjema for stroing
2024-10-31 03:32:32 - db_utils - INFO - Oppdatert skjema for tunbroyting
2024-10-31 03:32:32 - db_utils - INFO - All database schemas verified and updated
2024-10-31 03:32:32 - db_utils - INFO - Database already initialized. Skipping.
2024-10-31 03:32:32 - db_utils - INFO - Query executed successfully on login_history.db. Rows affected: -1
2024-10-31 03:32:32 - db_utils - INFO - login_history table structure is correct
2024-10-31 03:32:32 - customer_utils - INFO - Starting cabin user consistency check
2024-10-31 03:32:32 - utils - INFO - Attempting to load passwords from secrets
2024-10-31 03:32:32 - utils - INFO - Successfully loaded passwords. Number of entries: 94
2024-10-31 03:32:32 - customer_utils - INFO - Retrieved 94 passwords
2024-10-31 03:32:32 - customer_utils - INFO - Found 94 customers in database
2024-10-31 03:32:32 - customer_utils - INFO - Consistency check completed
2024-10-31 03:32:32 - customer_utils - INFO - Database connection closed
2024-10-31 03:32:32 - customer_utils - INFO - Validating customers and passwords
2024-10-31 03:32:32 - utils - INFO - Attempting to load passwords from secrets
2024-10-31 03:32:32 - utils - INFO - Successfully loaded passwords. Number of entries: 94
2024-10-31 03:32:32 - customer_utils - INFO - Customer and password validation complete
2024-10-31 03:32:32 - db_utils - INFO - Successfully created indexes for tunbroyting database
2024-10-31 03:32:32 - db_utils - INFO - Successfully created indexes for stroing database
2024-10-31 03:32:32 - db_utils - INFO - Successfully created indexes for feedback database
2024-10-31 03:32:32 - db_utils - INFO - Successfully created indexes for login_history database
2024-10-31 03:32:32 - db_utils - INFO - Successfully created indexes for customer database
2024-10-31 03:32:32 - db_utils - INFO - Database index creation completed
2024-10-31 03:32:32 - __main__ - INFO - Application initialization completed successfully
2024-10-31 03:32:32 - __main__ - INFO - Application initialization completed successfully
2024-10-31 03:32:32 - __main__ - INFO - Application setup complete
2024-10-31 03:32:32 - auth_utils - INFO - Login attempt for ID: 999
2024-10-31 03:32:32 - db_utils - INFO - DATABASE_PATH: /Users/tor.inge.jossang@aftenbladet.no/dev/gullingen
2024-10-31 03:32:32 - db_utils - INFO - Full database path: /Users/tor.inge.jossang@aftenbladet.no/dev/gullingen/login_history.db
2024-10-31 03:32:32 - db_utils - INFO - Attempting to create database engine...
2024-10-31 03:32:32 - db_utils - INFO - Database engine created successfully for login_history.db
2024-10-31 03:32:32 - auth_utils - INFO - Rate limit check passed for user 999
2024-10-31 03:32:32 - auth_utils - INFO - User 999 authenticated successfully
2024-10-31 03:32:32 - customer_utils - INFO - Successfully retrieved customer with ID: 999
2024-10-31 03:32:32 - db_utils - INFO - Database file /Users/tor.inge.jossang@aftenbladet.no/dev/gullingen/login_history.db exists.
2024-10-31 03:32:32 - db_utils - INFO - Query executed successfully on login_history.db. Rows affected: 1
2024-10-31 03:32:32 - auth_utils - INFO - Successful login for ID: 999
2024-10-31 03:32:32 - auth_utils - INFO - Successful login and logging for ID: 999
2024-10-31 03:32:32 - db_utils - INFO - DATABASE_PATH: /Users/tor.inge.jossang@aftenbladet.no/dev/gullingen
2024-10-31 03:32:32 - db_utils - INFO - Full database path: /Users/tor.inge.jossang@aftenbladet.no/dev/gullingen/login_history.db
2024-10-31 03:32:32 - db_utils - INFO - Attempting to create database engine...
2024-10-31 03:32:32 - db_utils - INFO - Database engine created successfully for login_history.db
2024-10-31 03:32:32 - auth_utils - INFO - Rate limit reset for user 999
2024-10-31 03:32:32 - __main__ - INFO - Application shutting down
2024-10-31 03:32:32 - __main__ - INFO - Added validate_user_input function to app.py
2024-10-31 03:32:32 - __main__ - INFO - Starting application initialization
2024-10-31 03:32:32 - db_utils - INFO - Starting detailed database operations debugging
2024-10-31 03:32:32 - db_utils - INFO - Debugging login_history database:
2024-10-31 03:32:32 - db_utils - INFO -   Database version: 0
2024-10-31 03:32:32 - db_utils - INFO -   Tables in login_history.db: ['login_history']
2024-10-31 03:32:32 - db_utils - INFO -   Structure of login_history table:
2024-10-31 03:32:32 - db_utils - INFO -     Column: id, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:32:32 - db_utils - INFO -     Column: login_time, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:32:32 - db_utils - INFO -     Column: success, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:32:32 - db_utils - INFO -   Indexes in login_history.db: ['idx_login_id', 'idx_login_time']
2024-10-31 03:32:32 - db_utils - INFO -   Row count in login_history: 426
2024-10-31 03:32:32 - db_utils - INFO -   Test query result: (1,)
2024-10-31 03:32:32 - db_utils - INFO - Debugging tunbroyting database:
2024-10-31 03:32:32 - db_utils - INFO -   Database version: 0
2024-10-31 03:32:32 - db_utils - INFO -   Tables in tunbroyting.db: ['tunbroyting_bestillinger']
2024-10-31 03:32:32 - db_utils - INFO -   Structure of tunbroyting_bestillinger table:
2024-10-31 03:32:32 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 03:32:32 - db_utils - INFO -     Column: bruker, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:32:32 - db_utils - INFO -     Column: ankomst_dato, Type: DATE, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:32:32 - db_utils - INFO -     Column: ankomst_tid, Type: TIME, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:32:32 - db_utils - INFO -     Column: avreise_dato, Type: DATE, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:32:32 - db_utils - INFO -     Column: avreise_tid, Type: TIME, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:32:32 - db_utils - INFO -     Column: abonnement_type, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:32:32 - db_utils - INFO -   Indexes in tunbroyting.db: ['idx_tunbroyting_bruker', 'idx_tunbroyting_ankomst_dato', 'idx_tunbroyting_avreise_dato', 'idx_tunbroyting_abonnement']
2024-10-31 03:32:32 - db_utils - INFO -   Row count in tunbroyting_bestillinger: 2
2024-10-31 03:32:32 - db_utils - INFO -   Test query result: (1,)
2024-10-31 03:32:32 - db_utils - INFO - Debugging stroing database:
2024-10-31 03:32:32 - db_utils - INFO -   Database version: 0
2024-10-31 03:32:32 - db_utils - INFO -   Tables in stroing.db: ['sqlite_sequence', 'stroing_bestillinger']
2024-10-31 03:32:32 - db_utils - INFO -   Structure of sqlite_sequence table:
2024-10-31 03:32:32 - db_utils - INFO -     Column: name, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:32:32 - db_utils - INFO -     Column: seq, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:32:32 - db_utils - INFO -   Structure of stroing_bestillinger table:
2024-10-31 03:32:32 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 03:32:32 - db_utils - INFO -     Column: bruker, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:32:32 - db_utils - INFO -     Column: bestillings_dato, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:32:32 - db_utils - INFO -     Column: onske_dato, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:32:32 - db_utils - INFO -   Indexes in stroing.db: ['idx_stroing_bruker', 'idx_stroing_onske_dato', 'idx_stroing_bestillings_dato']
2024-10-31 03:32:32 - db_utils - INFO -   Row count in sqlite_sequence: 1
2024-10-31 03:32:32 - db_utils - INFO -   Row count in stroing_bestillinger: 5
2024-10-31 03:32:32 - db_utils - INFO -   Test query result: (1,)
2024-10-31 03:32:32 - db_utils - INFO - Debugging feedback database:
2024-10-31 03:32:32 - db_utils - INFO -   Database version: 0
2024-10-31 03:32:32 - db_utils - INFO -   Tables in feedback.db: ['sqlite_sequence', 'feedback']
2024-10-31 03:32:32 - db_utils - INFO -   Structure of sqlite_sequence table:
2024-10-31 03:32:32 - db_utils - INFO -     Column: name, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:32:32 - db_utils - INFO -     Column: seq, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:32:32 - db_utils - INFO -   Structure of feedback table:
2024-10-31 03:32:32 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 03:32:32 - db_utils - INFO -     Column: type, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:32:32 - db_utils - INFO -     Column: datetime, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:32:32 - db_utils - INFO -     Column: comment, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:32:32 - db_utils - INFO -     Column: innsender, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:32:32 - db_utils - INFO -     Column: status, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:32:32 - db_utils - INFO -     Column: status_changed_by, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:32:32 - db_utils - INFO -     Column: status_changed_at, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:32:32 - db_utils - INFO -     Column: hidden, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:32:32 - db_utils - INFO -     Column: is_alert, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:32:32 - db_utils - INFO -     Column: display_on_weather, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:32:32 - db_utils - INFO -     Column: expiry_date, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:32:32 - db_utils - INFO -     Column: target_group, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:32:32 - db_utils - INFO -   Indexes in feedback.db: ['idx_feedback_datetime', 'idx_feedback_innsender', 'idx_feedback_status', 'idx_feedback_type']
2024-10-31 03:32:32 - db_utils - INFO -   Row count in sqlite_sequence: 1
2024-10-31 03:32:32 - db_utils - INFO -   Row count in feedback: 11
2024-10-31 03:32:32 - db_utils - INFO -   Test query result: (1,)
2024-10-31 03:32:32 - db_utils - INFO - Detailed database operations debugging completed
2024-10-31 03:32:32 - db_utils - INFO - Oppdatert skjema for customer
2024-10-31 03:32:32 - db_utils - INFO - Oppdatert skjema for feedback
2024-10-31 03:32:32 - db_utils - INFO - Oppdatert skjema for login_history
2024-10-31 03:32:32 - db_utils - INFO - Oppdatert skjema for stroing
2024-10-31 03:32:32 - db_utils - INFO - Oppdatert skjema for tunbroyting
2024-10-31 03:32:32 - db_utils - INFO - All database schemas verified and updated
2024-10-31 03:32:32 - db_utils - INFO - Oppdatert skjema for customer
2024-10-31 03:32:32 - db_utils - INFO - Oppdatert skjema for feedback
2024-10-31 03:32:32 - db_utils - INFO - Oppdatert skjema for login_history
2024-10-31 03:32:32 - db_utils - INFO - Oppdatert skjema for stroing
2024-10-31 03:32:32 - db_utils - INFO - Oppdatert skjema for tunbroyting
2024-10-31 03:32:32 - db_utils - INFO - All database schemas verified and updated
2024-10-31 03:32:32 - db_utils - INFO - Database already initialized. Skipping.
2024-10-31 03:32:32 - db_utils - INFO - Query executed successfully on login_history.db. Rows affected: -1
2024-10-31 03:32:32 - db_utils - INFO - login_history table structure is correct
2024-10-31 03:32:32 - customer_utils - INFO - Starting cabin user consistency check
2024-10-31 03:32:32 - utils - INFO - Attempting to load passwords from secrets
2024-10-31 03:32:32 - utils - INFO - Successfully loaded passwords. Number of entries: 94
2024-10-31 03:32:32 - customer_utils - INFO - Retrieved 94 passwords
2024-10-31 03:32:32 - customer_utils - INFO - Found 94 customers in database
2024-10-31 03:32:32 - customer_utils - INFO - Consistency check completed
2024-10-31 03:32:32 - customer_utils - INFO - Database connection closed
2024-10-31 03:32:32 - customer_utils - INFO - Validating customers and passwords
2024-10-31 03:32:32 - utils - INFO - Attempting to load passwords from secrets
2024-10-31 03:32:32 - utils - INFO - Successfully loaded passwords. Number of entries: 94
2024-10-31 03:32:32 - customer_utils - INFO - Customer and password validation complete
2024-10-31 03:32:32 - db_utils - INFO - Successfully created indexes for tunbroyting database
2024-10-31 03:32:32 - db_utils - INFO - Successfully created indexes for stroing database
2024-10-31 03:32:32 - db_utils - INFO - Successfully created indexes for feedback database
2024-10-31 03:32:32 - db_utils - INFO - Successfully created indexes for login_history database
2024-10-31 03:32:32 - db_utils - INFO - Successfully created indexes for customer database
2024-10-31 03:32:32 - db_utils - INFO - Database index creation completed
2024-10-31 03:32:32 - __main__ - INFO - Application initialization completed successfully
2024-10-31 03:32:32 - __main__ - INFO - Application initialization completed successfully
2024-10-31 03:32:32 - __main__ - INFO - Application setup complete
2024-10-31 03:32:32 - customer_utils - INFO - Successfully retrieved customer with ID: 999
2024-10-31 03:32:32 - alert_utils - INFO - Fetched 1 alerts. only_today=False, include_expired=False
2024-10-31 03:32:32 - tun_utils - WARNING - hent_bestillinger() is deprecated, use get_bookings() instead
2024-10-31 03:32:32 - tun_utils - INFO - Starting get_bookings with start_date=None, end_date=None
2024-10-31 03:32:32 - tun_utils - INFO - Successfully retrieved 2 bookings
2024-10-31 03:32:32 - __main__ - INFO - Application shutting down
2024-10-31 03:32:33 - __main__ - INFO - Added validate_user_input function to app.py
2024-10-31 03:32:33 - __main__ - INFO - Starting application initialization
2024-10-31 03:32:33 - db_utils - INFO - Starting detailed database operations debugging
2024-10-31 03:32:33 - db_utils - INFO - Debugging login_history database:
2024-10-31 03:32:33 - db_utils - INFO -   Database version: 0
2024-10-31 03:32:33 - db_utils - INFO -   Tables in login_history.db: ['login_history']
2024-10-31 03:32:33 - db_utils - INFO -   Structure of login_history table:
2024-10-31 03:32:33 - db_utils - INFO -     Column: id, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:32:33 - db_utils - INFO -     Column: login_time, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:32:33 - db_utils - INFO -     Column: success, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:32:33 - db_utils - INFO -   Indexes in login_history.db: ['idx_login_id', 'idx_login_time']
2024-10-31 03:32:33 - db_utils - INFO -   Row count in login_history: 426
2024-10-31 03:32:33 - db_utils - INFO -   Test query result: (1,)
2024-10-31 03:32:33 - db_utils - INFO - Debugging tunbroyting database:
2024-10-31 03:32:33 - db_utils - INFO -   Database version: 0
2024-10-31 03:32:33 - db_utils - INFO -   Tables in tunbroyting.db: ['tunbroyting_bestillinger']
2024-10-31 03:32:33 - db_utils - INFO -   Structure of tunbroyting_bestillinger table:
2024-10-31 03:32:33 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 03:32:33 - db_utils - INFO -     Column: bruker, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:32:33 - db_utils - INFO -     Column: ankomst_dato, Type: DATE, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:32:33 - db_utils - INFO -     Column: ankomst_tid, Type: TIME, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:32:33 - db_utils - INFO -     Column: avreise_dato, Type: DATE, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:32:33 - db_utils - INFO -     Column: avreise_tid, Type: TIME, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:32:33 - db_utils - INFO -     Column: abonnement_type, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:32:33 - db_utils - INFO -   Indexes in tunbroyting.db: ['idx_tunbroyting_bruker', 'idx_tunbroyting_ankomst_dato', 'idx_tunbroyting_avreise_dato', 'idx_tunbroyting_abonnement']
2024-10-31 03:32:33 - db_utils - INFO -   Row count in tunbroyting_bestillinger: 2
2024-10-31 03:32:33 - db_utils - INFO -   Test query result: (1,)
2024-10-31 03:32:33 - db_utils - INFO - Debugging stroing database:
2024-10-31 03:32:33 - db_utils - INFO -   Database version: 0
2024-10-31 03:32:33 - db_utils - INFO -   Tables in stroing.db: ['sqlite_sequence', 'stroing_bestillinger']
2024-10-31 03:32:33 - db_utils - INFO -   Structure of sqlite_sequence table:
2024-10-31 03:32:33 - db_utils - INFO -     Column: name, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:32:33 - db_utils - INFO -     Column: seq, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:32:33 - db_utils - INFO -   Structure of stroing_bestillinger table:
2024-10-31 03:32:33 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 03:32:33 - db_utils - INFO -     Column: bruker, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:32:33 - db_utils - INFO -     Column: bestillings_dato, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:32:33 - db_utils - INFO -     Column: onske_dato, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:32:33 - db_utils - INFO -   Indexes in stroing.db: ['idx_stroing_bruker', 'idx_stroing_onske_dato', 'idx_stroing_bestillings_dato']
2024-10-31 03:32:33 - db_utils - INFO -   Row count in sqlite_sequence: 1
2024-10-31 03:32:33 - db_utils - INFO -   Row count in stroing_bestillinger: 5
2024-10-31 03:32:33 - db_utils - INFO -   Test query result: (1,)
2024-10-31 03:32:33 - db_utils - INFO - Debugging feedback database:
2024-10-31 03:32:33 - db_utils - INFO -   Database version: 0
2024-10-31 03:32:33 - db_utils - INFO -   Tables in feedback.db: ['sqlite_sequence', 'feedback']
2024-10-31 03:32:33 - db_utils - INFO -   Structure of sqlite_sequence table:
2024-10-31 03:32:33 - db_utils - INFO -     Column: name, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:32:33 - db_utils - INFO -     Column: seq, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:32:33 - db_utils - INFO -   Structure of feedback table:
2024-10-31 03:32:33 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 03:32:33 - db_utils - INFO -     Column: type, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:32:33 - db_utils - INFO -     Column: datetime, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:32:33 - db_utils - INFO -     Column: comment, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:32:33 - db_utils - INFO -     Column: innsender, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:32:33 - db_utils - INFO -     Column: status, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:32:33 - db_utils - INFO -     Column: status_changed_by, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:32:33 - db_utils - INFO -     Column: status_changed_at, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:32:33 - db_utils - INFO -     Column: hidden, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:32:33 - db_utils - INFO -     Column: is_alert, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:32:33 - db_utils - INFO -     Column: display_on_weather, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:32:33 - db_utils - INFO -     Column: expiry_date, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:32:33 - db_utils - INFO -     Column: target_group, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:32:33 - db_utils - INFO -   Indexes in feedback.db: ['idx_feedback_datetime', 'idx_feedback_innsender', 'idx_feedback_status', 'idx_feedback_type']
2024-10-31 03:32:33 - db_utils - INFO -   Row count in sqlite_sequence: 1
2024-10-31 03:32:33 - db_utils - INFO -   Row count in feedback: 11
2024-10-31 03:32:33 - db_utils - INFO -   Test query result: (1,)
2024-10-31 03:32:33 - db_utils - INFO - Detailed database operations debugging completed
2024-10-31 03:32:33 - db_utils - INFO - Oppdatert skjema for customer
2024-10-31 03:32:33 - db_utils - INFO - Oppdatert skjema for feedback
2024-10-31 03:32:33 - db_utils - INFO - Oppdatert skjema for login_history
2024-10-31 03:32:33 - db_utils - INFO - Oppdatert skjema for stroing
2024-10-31 03:32:33 - db_utils - INFO - Oppdatert skjema for tunbroyting
2024-10-31 03:32:33 - db_utils - INFO - All database schemas verified and updated
2024-10-31 03:32:33 - db_utils - INFO - Oppdatert skjema for customer
2024-10-31 03:32:33 - db_utils - INFO - Oppdatert skjema for feedback
2024-10-31 03:32:33 - db_utils - INFO - Oppdatert skjema for login_history
2024-10-31 03:32:33 - db_utils - INFO - Oppdatert skjema for stroing
2024-10-31 03:32:33 - db_utils - INFO - Oppdatert skjema for tunbroyting
2024-10-31 03:32:33 - db_utils - INFO - All database schemas verified and updated
2024-10-31 03:32:33 - db_utils - INFO - Database already initialized. Skipping.
2024-10-31 03:32:33 - db_utils - INFO - Query executed successfully on login_history.db. Rows affected: -1
2024-10-31 03:32:33 - db_utils - INFO - login_history table structure is correct
2024-10-31 03:32:33 - customer_utils - INFO - Starting cabin user consistency check
2024-10-31 03:32:33 - utils - INFO - Attempting to load passwords from secrets
2024-10-31 03:32:33 - utils - INFO - Successfully loaded passwords. Number of entries: 94
2024-10-31 03:32:33 - customer_utils - INFO - Retrieved 94 passwords
2024-10-31 03:32:33 - customer_utils - INFO - Found 94 customers in database
2024-10-31 03:32:33 - customer_utils - INFO - Consistency check completed
2024-10-31 03:32:33 - customer_utils - INFO - Database connection closed
2024-10-31 03:32:33 - customer_utils - INFO - Validating customers and passwords
2024-10-31 03:32:33 - utils - INFO - Attempting to load passwords from secrets
2024-10-31 03:32:33 - utils - INFO - Successfully loaded passwords. Number of entries: 94
2024-10-31 03:32:33 - customer_utils - INFO - Customer and password validation complete
2024-10-31 03:32:33 - db_utils - INFO - Successfully created indexes for tunbroyting database
2024-10-31 03:32:33 - db_utils - INFO - Successfully created indexes for stroing database
2024-10-31 03:32:33 - db_utils - INFO - Successfully created indexes for feedback database
2024-10-31 03:32:33 - db_utils - INFO - Successfully created indexes for login_history database
2024-10-31 03:32:33 - db_utils - INFO - Successfully created indexes for customer database
2024-10-31 03:32:33 - db_utils - INFO - Database index creation completed
2024-10-31 03:32:33 - __main__ - INFO - Application initialization completed successfully
2024-10-31 03:32:33 - __main__ - INFO - Application initialization completed successfully
2024-10-31 03:32:33 - __main__ - INFO - Application setup complete
2024-10-31 03:32:33 - customer_utils - INFO - Successfully retrieved customer with ID: 999
2024-10-31 03:32:34 - __main__ - INFO - Application shutting down
2024-10-31 03:32:49 - __main__ - INFO - Added validate_user_input function to app.py
2024-10-31 03:32:49 - __main__ - INFO - Starting application initialization
2024-10-31 03:32:49 - db_utils - INFO - Starting detailed database operations debugging
2024-10-31 03:32:49 - db_utils - INFO - Debugging login_history database:
2024-10-31 03:32:49 - db_utils - INFO -   Database version: 0
2024-10-31 03:32:49 - db_utils - INFO -   Tables in login_history.db: ['login_history']
2024-10-31 03:32:49 - db_utils - INFO -   Structure of login_history table:
2024-10-31 03:32:49 - db_utils - INFO -     Column: id, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:32:49 - db_utils - INFO -     Column: login_time, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:32:49 - db_utils - INFO -     Column: success, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:32:49 - db_utils - INFO -   Indexes in login_history.db: ['idx_login_id', 'idx_login_time']
2024-10-31 03:32:49 - db_utils - INFO -   Row count in login_history: 426
2024-10-31 03:32:49 - db_utils - INFO -   Test query result: (1,)
2024-10-31 03:32:49 - db_utils - INFO - Debugging tunbroyting database:
2024-10-31 03:32:49 - db_utils - INFO -   Database version: 0
2024-10-31 03:32:49 - db_utils - INFO -   Tables in tunbroyting.db: ['tunbroyting_bestillinger']
2024-10-31 03:32:49 - db_utils - INFO -   Structure of tunbroyting_bestillinger table:
2024-10-31 03:32:49 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 03:32:49 - db_utils - INFO -     Column: bruker, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:32:49 - db_utils - INFO -     Column: ankomst_dato, Type: DATE, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:32:49 - db_utils - INFO -     Column: ankomst_tid, Type: TIME, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:32:49 - db_utils - INFO -     Column: avreise_dato, Type: DATE, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:32:49 - db_utils - INFO -     Column: avreise_tid, Type: TIME, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:32:49 - db_utils - INFO -     Column: abonnement_type, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:32:49 - db_utils - INFO -   Indexes in tunbroyting.db: ['idx_tunbroyting_bruker', 'idx_tunbroyting_ankomst_dato', 'idx_tunbroyting_avreise_dato', 'idx_tunbroyting_abonnement']
2024-10-31 03:32:49 - db_utils - INFO -   Row count in tunbroyting_bestillinger: 2
2024-10-31 03:32:49 - db_utils - INFO -   Test query result: (1,)
2024-10-31 03:32:49 - db_utils - INFO - Debugging stroing database:
2024-10-31 03:32:49 - db_utils - INFO -   Database version: 0
2024-10-31 03:32:49 - db_utils - INFO -   Tables in stroing.db: ['sqlite_sequence', 'stroing_bestillinger']
2024-10-31 03:32:49 - db_utils - INFO -   Structure of sqlite_sequence table:
2024-10-31 03:32:49 - db_utils - INFO -     Column: name, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:32:49 - db_utils - INFO -     Column: seq, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:32:49 - db_utils - INFO -   Structure of stroing_bestillinger table:
2024-10-31 03:32:49 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 03:32:49 - db_utils - INFO -     Column: bruker, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:32:49 - db_utils - INFO -     Column: bestillings_dato, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:32:49 - db_utils - INFO -     Column: onske_dato, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:32:49 - db_utils - INFO -   Indexes in stroing.db: ['idx_stroing_bruker', 'idx_stroing_onske_dato', 'idx_stroing_bestillings_dato']
2024-10-31 03:32:49 - db_utils - INFO -   Row count in sqlite_sequence: 1
2024-10-31 03:32:49 - db_utils - INFO -   Row count in stroing_bestillinger: 5
2024-10-31 03:32:49 - db_utils - INFO -   Test query result: (1,)
2024-10-31 03:32:49 - db_utils - INFO - Debugging feedback database:
2024-10-31 03:32:49 - db_utils - INFO -   Database version: 0
2024-10-31 03:32:49 - db_utils - INFO -   Tables in feedback.db: ['sqlite_sequence', 'feedback']
2024-10-31 03:32:49 - db_utils - INFO -   Structure of sqlite_sequence table:
2024-10-31 03:32:49 - db_utils - INFO -     Column: name, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:32:49 - db_utils - INFO -     Column: seq, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:32:49 - db_utils - INFO -   Structure of feedback table:
2024-10-31 03:32:49 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 03:32:49 - db_utils - INFO -     Column: type, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:32:49 - db_utils - INFO -     Column: datetime, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:32:49 - db_utils - INFO -     Column: comment, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:32:49 - db_utils - INFO -     Column: innsender, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:32:49 - db_utils - INFO -     Column: status, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:32:49 - db_utils - INFO -     Column: status_changed_by, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:32:49 - db_utils - INFO -     Column: status_changed_at, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:32:49 - db_utils - INFO -     Column: hidden, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:32:49 - db_utils - INFO -     Column: is_alert, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:32:49 - db_utils - INFO -     Column: display_on_weather, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:32:49 - db_utils - INFO -     Column: expiry_date, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:32:49 - db_utils - INFO -     Column: target_group, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:32:49 - db_utils - INFO -   Indexes in feedback.db: ['idx_feedback_datetime', 'idx_feedback_innsender', 'idx_feedback_status', 'idx_feedback_type']
2024-10-31 03:32:49 - db_utils - INFO -   Row count in sqlite_sequence: 1
2024-10-31 03:32:49 - db_utils - INFO -   Row count in feedback: 11
2024-10-31 03:32:49 - db_utils - INFO -   Test query result: (1,)
2024-10-31 03:32:49 - db_utils - INFO - Detailed database operations debugging completed
2024-10-31 03:32:49 - db_utils - INFO - Oppdatert skjema for customer
2024-10-31 03:32:49 - db_utils - INFO - Oppdatert skjema for feedback
2024-10-31 03:32:49 - db_utils - INFO - Oppdatert skjema for login_history
2024-10-31 03:32:49 - db_utils - INFO - Oppdatert skjema for stroing
2024-10-31 03:32:49 - db_utils - INFO - Oppdatert skjema for tunbroyting
2024-10-31 03:32:49 - db_utils - INFO - All database schemas verified and updated
2024-10-31 03:32:49 - db_utils - INFO - Oppdatert skjema for customer
2024-10-31 03:32:49 - db_utils - INFO - Oppdatert skjema for feedback
2024-10-31 03:32:49 - db_utils - INFO - Oppdatert skjema for login_history
2024-10-31 03:32:49 - db_utils - INFO - Oppdatert skjema for stroing
2024-10-31 03:32:49 - db_utils - INFO - Oppdatert skjema for tunbroyting
2024-10-31 03:32:49 - db_utils - INFO - All database schemas verified and updated
2024-10-31 03:32:49 - db_utils - INFO - Database already initialized. Skipping.
2024-10-31 03:32:49 - db_utils - INFO - Query executed successfully on login_history.db. Rows affected: -1
2024-10-31 03:32:49 - db_utils - INFO - login_history table structure is correct
2024-10-31 03:32:49 - customer_utils - INFO - Starting cabin user consistency check
2024-10-31 03:32:49 - utils - INFO - Attempting to load passwords from secrets
2024-10-31 03:32:49 - utils - INFO - Successfully loaded passwords. Number of entries: 94
2024-10-31 03:32:49 - customer_utils - INFO - Retrieved 94 passwords
2024-10-31 03:32:49 - customer_utils - INFO - Found 94 customers in database
2024-10-31 03:32:49 - customer_utils - INFO - Consistency check completed
2024-10-31 03:32:49 - customer_utils - INFO - Database connection closed
2024-10-31 03:32:49 - customer_utils - INFO - Validating customers and passwords
2024-10-31 03:32:49 - utils - INFO - Attempting to load passwords from secrets
2024-10-31 03:32:49 - utils - INFO - Successfully loaded passwords. Number of entries: 94
2024-10-31 03:32:49 - customer_utils - INFO - Customer and password validation complete
2024-10-31 03:32:49 - db_utils - INFO - Successfully created indexes for tunbroyting database
2024-10-31 03:32:49 - db_utils - INFO - Successfully created indexes for stroing database
2024-10-31 03:32:49 - db_utils - INFO - Successfully created indexes for feedback database
2024-10-31 03:32:49 - db_utils - INFO - Successfully created indexes for login_history database
2024-10-31 03:32:49 - db_utils - INFO - Successfully created indexes for customer database
2024-10-31 03:32:49 - db_utils - INFO - Database index creation completed
2024-10-31 03:32:49 - __main__ - INFO - Application initialization completed successfully
2024-10-31 03:32:49 - __main__ - INFO - Application initialization completed successfully
2024-10-31 03:32:49 - __main__ - INFO - Application setup complete
2024-10-31 03:32:49 - customer_utils - INFO - Successfully retrieved customer with ID: 999
2024-10-31 03:32:50 - __main__ - INFO - Application shutting down
2024-10-31 03:51:10 - __main__ - INFO - Added validate_user_input function to app.py
2024-10-31 03:51:10 - __main__ - INFO - Starting application initialization
2024-10-31 03:51:10 - db_utils - INFO - Starting detailed database operations debugging
2024-10-31 03:51:10 - db_utils - INFO - Debugging login_history database:
2024-10-31 03:51:10 - db_utils - INFO -   Database version: 0
2024-10-31 03:51:10 - db_utils - INFO -   Tables in login_history.db: ['login_history']
2024-10-31 03:51:10 - db_utils - INFO -   Structure of login_history table:
2024-10-31 03:51:10 - db_utils - INFO -     Column: id, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:51:10 - db_utils - INFO -     Column: login_time, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:51:10 - db_utils - INFO -     Column: success, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:51:10 - db_utils - INFO -   Indexes in login_history.db: ['idx_login_id', 'idx_login_time']
2024-10-31 03:51:10 - db_utils - INFO -   Row count in login_history: 426
2024-10-31 03:51:10 - db_utils - INFO -   Test query result: (1,)
2024-10-31 03:51:10 - db_utils - INFO - Debugging tunbroyting database:
2024-10-31 03:51:10 - db_utils - INFO -   Database version: 0
2024-10-31 03:51:10 - db_utils - INFO -   Tables in tunbroyting.db: ['tunbroyting_bestillinger']
2024-10-31 03:51:10 - db_utils - INFO -   Structure of tunbroyting_bestillinger table:
2024-10-31 03:51:10 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 03:51:10 - db_utils - INFO -     Column: bruker, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:51:10 - db_utils - INFO -     Column: ankomst_dato, Type: DATE, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:51:10 - db_utils - INFO -     Column: ankomst_tid, Type: TIME, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:51:10 - db_utils - INFO -     Column: avreise_dato, Type: DATE, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:51:10 - db_utils - INFO -     Column: avreise_tid, Type: TIME, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:51:10 - db_utils - INFO -     Column: abonnement_type, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:51:10 - db_utils - INFO -   Indexes in tunbroyting.db: ['idx_tunbroyting_bruker', 'idx_tunbroyting_ankomst_dato', 'idx_tunbroyting_avreise_dato', 'idx_tunbroyting_abonnement']
2024-10-31 03:51:10 - db_utils - INFO -   Row count in tunbroyting_bestillinger: 2
2024-10-31 03:51:10 - db_utils - INFO -   Test query result: (1,)
2024-10-31 03:51:10 - db_utils - INFO - Debugging stroing database:
2024-10-31 03:51:10 - db_utils - INFO -   Database version: 0
2024-10-31 03:51:10 - db_utils - INFO -   Tables in stroing.db: ['sqlite_sequence', 'stroing_bestillinger']
2024-10-31 03:51:10 - db_utils - INFO -   Structure of sqlite_sequence table:
2024-10-31 03:51:10 - db_utils - INFO -     Column: name, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:51:10 - db_utils - INFO -     Column: seq, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:51:10 - db_utils - INFO -   Structure of stroing_bestillinger table:
2024-10-31 03:51:10 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 03:51:10 - db_utils - INFO -     Column: bruker, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:51:10 - db_utils - INFO -     Column: bestillings_dato, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:51:10 - db_utils - INFO -     Column: onske_dato, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:51:10 - db_utils - INFO -   Indexes in stroing.db: ['idx_stroing_bruker', 'idx_stroing_onske_dato', 'idx_stroing_bestillings_dato']
2024-10-31 03:51:10 - db_utils - INFO -   Row count in sqlite_sequence: 1
2024-10-31 03:51:10 - db_utils - INFO -   Row count in stroing_bestillinger: 5
2024-10-31 03:51:10 - db_utils - INFO -   Test query result: (1,)
2024-10-31 03:51:10 - db_utils - INFO - Debugging feedback database:
2024-10-31 03:51:10 - db_utils - INFO -   Database version: 0
2024-10-31 03:51:10 - db_utils - INFO -   Tables in feedback.db: ['sqlite_sequence', 'feedback']
2024-10-31 03:51:10 - db_utils - INFO -   Structure of sqlite_sequence table:
2024-10-31 03:51:10 - db_utils - INFO -     Column: name, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:51:10 - db_utils - INFO -     Column: seq, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:51:10 - db_utils - INFO -   Structure of feedback table:
2024-10-31 03:51:10 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 03:51:10 - db_utils - INFO -     Column: type, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:51:10 - db_utils - INFO -     Column: datetime, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:51:10 - db_utils - INFO -     Column: comment, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:51:10 - db_utils - INFO -     Column: innsender, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:51:10 - db_utils - INFO -     Column: status, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:51:10 - db_utils - INFO -     Column: status_changed_by, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:51:10 - db_utils - INFO -     Column: status_changed_at, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:51:10 - db_utils - INFO -     Column: hidden, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:51:10 - db_utils - INFO -     Column: is_alert, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:51:10 - db_utils - INFO -     Column: display_on_weather, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:51:10 - db_utils - INFO -     Column: expiry_date, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:51:10 - db_utils - INFO -     Column: target_group, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:51:10 - db_utils - INFO -   Indexes in feedback.db: ['idx_feedback_datetime', 'idx_feedback_innsender', 'idx_feedback_status', 'idx_feedback_type']
2024-10-31 03:51:10 - db_utils - INFO -   Row count in sqlite_sequence: 1
2024-10-31 03:51:10 - db_utils - INFO -   Row count in feedback: 11
2024-10-31 03:51:10 - db_utils - INFO -   Test query result: (1,)
2024-10-31 03:51:10 - db_utils - INFO - Detailed database operations debugging completed
2024-10-31 03:51:10 - db_utils - INFO - Oppdatert skjema for customer
2024-10-31 03:51:10 - db_utils - INFO - Oppdatert skjema for feedback
2024-10-31 03:51:10 - db_utils - INFO - Oppdatert skjema for login_history
2024-10-31 03:51:10 - db_utils - INFO - Oppdatert skjema for stroing
2024-10-31 03:51:10 - db_utils - INFO - Oppdatert skjema for tunbroyting
2024-10-31 03:51:10 - db_utils - INFO - All database schemas verified and updated
2024-10-31 03:51:10 - db_utils - INFO - Oppdatert skjema for customer
2024-10-31 03:51:10 - db_utils - INFO - Oppdatert skjema for feedback
2024-10-31 03:51:10 - db_utils - INFO - Oppdatert skjema for login_history
2024-10-31 03:51:10 - db_utils - INFO - Oppdatert skjema for stroing
2024-10-31 03:51:10 - db_utils - INFO - Oppdatert skjema for tunbroyting
2024-10-31 03:51:10 - db_utils - INFO - All database schemas verified and updated
2024-10-31 03:51:10 - db_utils - INFO - Database login_history initialized, updated, and optimized
2024-10-31 03:51:10 - db_utils - INFO - Database tunbroyting initialized, updated, and optimized
2024-10-31 03:51:10 - db_utils - INFO - Database stroing initialized, updated, and optimized
2024-10-31 03:51:10 - db_utils - INFO - Database feedback initialized, updated, and optimized
2024-10-31 03:51:10 - db_utils - INFO - Database customer initialized, updated, and optimized
2024-10-31 03:51:10 - db_utils - INFO - Successfully created indexes for tunbroyting database
2024-10-31 03:51:10 - db_utils - INFO - Successfully created indexes for stroing database
2024-10-31 03:51:10 - db_utils - INFO - Successfully created indexes for feedback database
2024-10-31 03:51:10 - db_utils - INFO - Successfully created indexes for login_history database
2024-10-31 03:51:10 - db_utils - INFO - Successfully created indexes for customer database
2024-10-31 03:51:10 - db_utils - INFO - Database index creation completed
2024-10-31 03:51:10 - db_utils - INFO - Database indexes created
2024-10-31 03:51:10 - db_utils - INFO - Successfully verified connection to stroing.db
2024-10-31 03:51:10 - db_utils - INFO - Successfully verified connection to tunbroyting.db
2024-10-31 03:51:10 - db_utils - INFO - Successfully verified connection to feedback.db
2024-10-31 03:51:10 - db_utils - INFO - Successfully verified connection to login_history.db
2024-10-31 03:51:10 - db_utils - INFO - Successfully verified connection to customer.db
2024-10-31 03:51:10 - db_utils - INFO - Database connections verified
2024-10-31 03:51:10 - db_utils - INFO - All databases initialized, updated, and verified
2024-10-31 03:51:10 - db_utils - INFO - Query executed successfully on login_history.db. Rows affected: -1
2024-10-31 03:51:10 - db_utils - INFO - login_history table structure is correct
2024-10-31 03:51:10 - customer_utils - INFO - Starting cabin user consistency check
2024-10-31 03:51:10 - utils - INFO - Attempting to load passwords from secrets
2024-10-31 03:51:10 - utils - INFO - Successfully loaded passwords. Number of entries: 94
2024-10-31 03:51:10 - customer_utils - INFO - Retrieved 94 passwords
2024-10-31 03:51:10 - customer_utils - INFO - Found 94 customers in database
2024-10-31 03:51:10 - customer_utils - INFO - Consistency check completed
2024-10-31 03:51:10 - customer_utils - INFO - Database connection closed
2024-10-31 03:51:10 - customer_utils - INFO - Validating customers and passwords
2024-10-31 03:51:10 - utils - INFO - Attempting to load passwords from secrets
2024-10-31 03:51:10 - utils - INFO - Successfully loaded passwords. Number of entries: 94
2024-10-31 03:51:10 - customer_utils - INFO - Customer and password validation complete
2024-10-31 03:51:10 - db_utils - INFO - Successfully created indexes for tunbroyting database
2024-10-31 03:51:10 - db_utils - INFO - Successfully created indexes for stroing database
2024-10-31 03:51:10 - db_utils - INFO - Successfully created indexes for feedback database
2024-10-31 03:51:10 - db_utils - INFO - Successfully created indexes for login_history database
2024-10-31 03:51:10 - db_utils - INFO - Successfully created indexes for customer database
2024-10-31 03:51:10 - db_utils - INFO - Database index creation completed
2024-10-31 03:51:10 - __main__ - INFO - Application initialization completed successfully
2024-10-31 03:51:10 - __main__ - INFO - Application initialization completed successfully
2024-10-31 03:51:10 - __main__ - INFO - Application setup complete
2024-10-31 03:51:10 - __main__ - INFO - Application shutting down
2024-10-31 03:51:13 - __main__ - INFO - Added validate_user_input function to app.py
2024-10-31 03:51:13 - __main__ - INFO - Starting application initialization
2024-10-31 03:51:13 - db_utils - INFO - Starting detailed database operations debugging
2024-10-31 03:51:13 - db_utils - INFO - Debugging login_history database:
2024-10-31 03:51:13 - db_utils - INFO -   Database version: 0
2024-10-31 03:51:13 - db_utils - INFO -   Tables in login_history.db: ['login_history']
2024-10-31 03:51:13 - db_utils - INFO -   Structure of login_history table:
2024-10-31 03:51:13 - db_utils - INFO -     Column: id, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:51:13 - db_utils - INFO -     Column: login_time, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:51:13 - db_utils - INFO -     Column: success, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:51:13 - db_utils - INFO -   Indexes in login_history.db: ['idx_login_id', 'idx_login_time']
2024-10-31 03:51:13 - db_utils - INFO -   Row count in login_history: 426
2024-10-31 03:51:13 - db_utils - INFO -   Test query result: (1,)
2024-10-31 03:51:13 - db_utils - INFO - Debugging tunbroyting database:
2024-10-31 03:51:13 - db_utils - INFO -   Database version: 0
2024-10-31 03:51:13 - db_utils - INFO -   Tables in tunbroyting.db: ['tunbroyting_bestillinger']
2024-10-31 03:51:13 - db_utils - INFO -   Structure of tunbroyting_bestillinger table:
2024-10-31 03:51:13 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 03:51:13 - db_utils - INFO -     Column: bruker, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:51:13 - db_utils - INFO -     Column: ankomst_dato, Type: DATE, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:51:13 - db_utils - INFO -     Column: ankomst_tid, Type: TIME, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:51:13 - db_utils - INFO -     Column: avreise_dato, Type: DATE, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:51:13 - db_utils - INFO -     Column: avreise_tid, Type: TIME, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:51:13 - db_utils - INFO -     Column: abonnement_type, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:51:13 - db_utils - INFO -   Indexes in tunbroyting.db: ['idx_tunbroyting_bruker', 'idx_tunbroyting_ankomst_dato', 'idx_tunbroyting_avreise_dato', 'idx_tunbroyting_abonnement']
2024-10-31 03:51:13 - db_utils - INFO -   Row count in tunbroyting_bestillinger: 2
2024-10-31 03:51:13 - db_utils - INFO -   Test query result: (1,)
2024-10-31 03:51:13 - db_utils - INFO - Debugging stroing database:
2024-10-31 03:51:13 - db_utils - INFO -   Database version: 0
2024-10-31 03:51:13 - db_utils - INFO -   Tables in stroing.db: ['sqlite_sequence', 'stroing_bestillinger']
2024-10-31 03:51:13 - db_utils - INFO -   Structure of sqlite_sequence table:
2024-10-31 03:51:13 - db_utils - INFO -     Column: name, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:51:13 - db_utils - INFO -     Column: seq, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:51:13 - db_utils - INFO -   Structure of stroing_bestillinger table:
2024-10-31 03:51:13 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 03:51:13 - db_utils - INFO -     Column: bruker, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:51:13 - db_utils - INFO -     Column: bestillings_dato, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:51:13 - db_utils - INFO -     Column: onske_dato, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:51:13 - db_utils - INFO -   Indexes in stroing.db: ['idx_stroing_bruker', 'idx_stroing_onske_dato', 'idx_stroing_bestillings_dato']
2024-10-31 03:51:13 - db_utils - INFO -   Row count in sqlite_sequence: 1
2024-10-31 03:51:13 - db_utils - INFO -   Row count in stroing_bestillinger: 5
2024-10-31 03:51:13 - db_utils - INFO -   Test query result: (1,)
2024-10-31 03:51:13 - db_utils - INFO - Debugging feedback database:
2024-10-31 03:51:13 - db_utils - INFO -   Database version: 0
2024-10-31 03:51:13 - db_utils - INFO -   Tables in feedback.db: ['sqlite_sequence', 'feedback']
2024-10-31 03:51:13 - db_utils - INFO -   Structure of sqlite_sequence table:
2024-10-31 03:51:13 - db_utils - INFO -     Column: name, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:51:13 - db_utils - INFO -     Column: seq, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:51:13 - db_utils - INFO -   Structure of feedback table:
2024-10-31 03:51:13 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 03:51:13 - db_utils - INFO -     Column: type, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:51:13 - db_utils - INFO -     Column: datetime, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:51:13 - db_utils - INFO -     Column: comment, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:51:13 - db_utils - INFO -     Column: innsender, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:51:13 - db_utils - INFO -     Column: status, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:51:13 - db_utils - INFO -     Column: status_changed_by, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:51:13 - db_utils - INFO -     Column: status_changed_at, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:51:13 - db_utils - INFO -     Column: hidden, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:51:13 - db_utils - INFO -     Column: is_alert, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:51:13 - db_utils - INFO -     Column: display_on_weather, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:51:13 - db_utils - INFO -     Column: expiry_date, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:51:13 - db_utils - INFO -     Column: target_group, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:51:13 - db_utils - INFO -   Indexes in feedback.db: ['idx_feedback_datetime', 'idx_feedback_innsender', 'idx_feedback_status', 'idx_feedback_type']
2024-10-31 03:51:13 - db_utils - INFO -   Row count in sqlite_sequence: 1
2024-10-31 03:51:13 - db_utils - INFO -   Row count in feedback: 11
2024-10-31 03:51:13 - db_utils - INFO -   Test query result: (1,)
2024-10-31 03:51:13 - db_utils - INFO - Detailed database operations debugging completed
2024-10-31 03:51:13 - db_utils - INFO - Oppdatert skjema for customer
2024-10-31 03:51:13 - db_utils - INFO - Oppdatert skjema for feedback
2024-10-31 03:51:13 - db_utils - INFO - Oppdatert skjema for login_history
2024-10-31 03:51:13 - db_utils - INFO - Oppdatert skjema for stroing
2024-10-31 03:51:13 - db_utils - INFO - Oppdatert skjema for tunbroyting
2024-10-31 03:51:13 - db_utils - INFO - All database schemas verified and updated
2024-10-31 03:51:13 - db_utils - INFO - Oppdatert skjema for customer
2024-10-31 03:51:13 - db_utils - INFO - Oppdatert skjema for feedback
2024-10-31 03:51:13 - db_utils - INFO - Oppdatert skjema for login_history
2024-10-31 03:51:13 - db_utils - INFO - Oppdatert skjema for stroing
2024-10-31 03:51:13 - db_utils - INFO - Oppdatert skjema for tunbroyting
2024-10-31 03:51:13 - db_utils - INFO - All database schemas verified and updated
2024-10-31 03:51:13 - db_utils - INFO - Database already initialized. Skipping.
2024-10-31 03:51:13 - db_utils - INFO - Query executed successfully on login_history.db. Rows affected: -1
2024-10-31 03:51:13 - db_utils - INFO - login_history table structure is correct
2024-10-31 03:51:13 - customer_utils - INFO - Starting cabin user consistency check
2024-10-31 03:51:13 - utils - INFO - Attempting to load passwords from secrets
2024-10-31 03:51:13 - utils - INFO - Successfully loaded passwords. Number of entries: 94
2024-10-31 03:51:13 - customer_utils - INFO - Retrieved 94 passwords
2024-10-31 03:51:13 - customer_utils - INFO - Found 94 customers in database
2024-10-31 03:51:13 - customer_utils - INFO - Consistency check completed
2024-10-31 03:51:13 - customer_utils - INFO - Database connection closed
2024-10-31 03:51:13 - customer_utils - INFO - Validating customers and passwords
2024-10-31 03:51:13 - utils - INFO - Attempting to load passwords from secrets
2024-10-31 03:51:13 - utils - INFO - Successfully loaded passwords. Number of entries: 94
2024-10-31 03:51:13 - customer_utils - INFO - Customer and password validation complete
2024-10-31 03:51:13 - db_utils - INFO - Successfully created indexes for tunbroyting database
2024-10-31 03:51:13 - db_utils - INFO - Successfully created indexes for stroing database
2024-10-31 03:51:13 - db_utils - INFO - Successfully created indexes for feedback database
2024-10-31 03:51:13 - db_utils - INFO - Successfully created indexes for login_history database
2024-10-31 03:51:13 - db_utils - INFO - Successfully created indexes for customer database
2024-10-31 03:51:13 - db_utils - INFO - Database index creation completed
2024-10-31 03:51:13 - __main__ - INFO - Application initialization completed successfully
2024-10-31 03:51:13 - __main__ - INFO - Application initialization completed successfully
2024-10-31 03:51:13 - __main__ - INFO - Application setup complete
2024-10-31 03:51:13 - auth_utils - INFO - Login attempt for ID: 999
2024-10-31 03:51:13 - db_utils - INFO - DATABASE_PATH: /Users/tor.inge.jossang@aftenbladet.no/dev/gullingen
2024-10-31 03:51:13 - db_utils - INFO - Full database path: /Users/tor.inge.jossang@aftenbladet.no/dev/gullingen/login_history.db
2024-10-31 03:51:13 - db_utils - INFO - Attempting to create database engine...
2024-10-31 03:51:13 - db_utils - INFO - Database engine created successfully for login_history.db
2024-10-31 03:51:13 - auth_utils - INFO - Rate limit check passed for user 999
2024-10-31 03:51:13 - auth_utils - INFO - User 999 authenticated successfully
2024-10-31 03:51:13 - customer_utils - INFO - Successfully retrieved customer with ID: 999
2024-10-31 03:51:13 - db_utils - INFO - Database file /Users/tor.inge.jossang@aftenbladet.no/dev/gullingen/login_history.db exists.
2024-10-31 03:51:13 - db_utils - INFO - Query executed successfully on login_history.db. Rows affected: 1
2024-10-31 03:51:13 - auth_utils - INFO - Successful login for ID: 999
2024-10-31 03:51:13 - auth_utils - INFO - Successful login and logging for ID: 999
2024-10-31 03:51:13 - db_utils - INFO - DATABASE_PATH: /Users/tor.inge.jossang@aftenbladet.no/dev/gullingen
2024-10-31 03:51:13 - db_utils - INFO - Full database path: /Users/tor.inge.jossang@aftenbladet.no/dev/gullingen/login_history.db
2024-10-31 03:51:13 - db_utils - INFO - Attempting to create database engine...
2024-10-31 03:51:13 - db_utils - INFO - Database engine created successfully for login_history.db
2024-10-31 03:51:13 - auth_utils - INFO - Rate limit reset for user 999
2024-10-31 03:51:13 - __main__ - INFO - Application shutting down
2024-10-31 03:51:13 - __main__ - INFO - Added validate_user_input function to app.py
2024-10-31 03:51:13 - __main__ - INFO - Starting application initialization
2024-10-31 03:51:13 - db_utils - INFO - Starting detailed database operations debugging
2024-10-31 03:51:13 - db_utils - INFO - Debugging login_history database:
2024-10-31 03:51:13 - db_utils - INFO -   Database version: 0
2024-10-31 03:51:13 - db_utils - INFO -   Tables in login_history.db: ['login_history']
2024-10-31 03:51:13 - db_utils - INFO -   Structure of login_history table:
2024-10-31 03:51:13 - db_utils - INFO -     Column: id, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:51:13 - db_utils - INFO -     Column: login_time, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:51:13 - db_utils - INFO -     Column: success, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:51:13 - db_utils - INFO -   Indexes in login_history.db: ['idx_login_id', 'idx_login_time']
2024-10-31 03:51:13 - db_utils - INFO -   Row count in login_history: 427
2024-10-31 03:51:13 - db_utils - INFO -   Test query result: (1,)
2024-10-31 03:51:13 - db_utils - INFO - Debugging tunbroyting database:
2024-10-31 03:51:13 - db_utils - INFO -   Database version: 0
2024-10-31 03:51:13 - db_utils - INFO -   Tables in tunbroyting.db: ['tunbroyting_bestillinger']
2024-10-31 03:51:13 - db_utils - INFO -   Structure of tunbroyting_bestillinger table:
2024-10-31 03:51:13 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 03:51:13 - db_utils - INFO -     Column: bruker, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:51:13 - db_utils - INFO -     Column: ankomst_dato, Type: DATE, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:51:13 - db_utils - INFO -     Column: ankomst_tid, Type: TIME, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:51:13 - db_utils - INFO -     Column: avreise_dato, Type: DATE, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:51:13 - db_utils - INFO -     Column: avreise_tid, Type: TIME, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:51:13 - db_utils - INFO -     Column: abonnement_type, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:51:13 - db_utils - INFO -   Indexes in tunbroyting.db: ['idx_tunbroyting_bruker', 'idx_tunbroyting_ankomst_dato', 'idx_tunbroyting_avreise_dato', 'idx_tunbroyting_abonnement']
2024-10-31 03:51:13 - db_utils - INFO -   Row count in tunbroyting_bestillinger: 2
2024-10-31 03:51:13 - db_utils - INFO -   Test query result: (1,)
2024-10-31 03:51:13 - db_utils - INFO - Debugging stroing database:
2024-10-31 03:51:13 - db_utils - INFO -   Database version: 0
2024-10-31 03:51:13 - db_utils - INFO -   Tables in stroing.db: ['sqlite_sequence', 'stroing_bestillinger']
2024-10-31 03:51:13 - db_utils - INFO -   Structure of sqlite_sequence table:
2024-10-31 03:51:13 - db_utils - INFO -     Column: name, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:51:13 - db_utils - INFO -     Column: seq, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:51:13 - db_utils - INFO -   Structure of stroing_bestillinger table:
2024-10-31 03:51:13 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 03:51:13 - db_utils - INFO -     Column: bruker, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:51:13 - db_utils - INFO -     Column: bestillings_dato, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:51:13 - db_utils - INFO -     Column: onske_dato, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:51:13 - db_utils - INFO -   Indexes in stroing.db: ['idx_stroing_bruker', 'idx_stroing_onske_dato', 'idx_stroing_bestillings_dato']
2024-10-31 03:51:13 - db_utils - INFO -   Row count in sqlite_sequence: 1
2024-10-31 03:51:13 - db_utils - INFO -   Row count in stroing_bestillinger: 5
2024-10-31 03:51:13 - db_utils - INFO -   Test query result: (1,)
2024-10-31 03:51:13 - db_utils - INFO - Debugging feedback database:
2024-10-31 03:51:13 - db_utils - INFO -   Database version: 0
2024-10-31 03:51:13 - db_utils - INFO -   Tables in feedback.db: ['sqlite_sequence', 'feedback']
2024-10-31 03:51:13 - db_utils - INFO -   Structure of sqlite_sequence table:
2024-10-31 03:51:13 - db_utils - INFO -     Column: name, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:51:13 - db_utils - INFO -     Column: seq, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:51:13 - db_utils - INFO -   Structure of feedback table:
2024-10-31 03:51:13 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 03:51:13 - db_utils - INFO -     Column: type, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:51:13 - db_utils - INFO -     Column: datetime, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:51:13 - db_utils - INFO -     Column: comment, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:51:13 - db_utils - INFO -     Column: innsender, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:51:13 - db_utils - INFO -     Column: status, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:51:13 - db_utils - INFO -     Column: status_changed_by, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:51:13 - db_utils - INFO -     Column: status_changed_at, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:51:13 - db_utils - INFO -     Column: hidden, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:51:13 - db_utils - INFO -     Column: is_alert, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:51:13 - db_utils - INFO -     Column: display_on_weather, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:51:13 - db_utils - INFO -     Column: expiry_date, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:51:13 - db_utils - INFO -     Column: target_group, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:51:13 - db_utils - INFO -   Indexes in feedback.db: ['idx_feedback_datetime', 'idx_feedback_innsender', 'idx_feedback_status', 'idx_feedback_type']
2024-10-31 03:51:13 - db_utils - INFO -   Row count in sqlite_sequence: 1
2024-10-31 03:51:13 - db_utils - INFO -   Row count in feedback: 11
2024-10-31 03:51:13 - db_utils - INFO -   Test query result: (1,)
2024-10-31 03:51:13 - db_utils - INFO - Detailed database operations debugging completed
2024-10-31 03:51:13 - db_utils - INFO - Oppdatert skjema for customer
2024-10-31 03:51:13 - db_utils - INFO - Oppdatert skjema for feedback
2024-10-31 03:51:13 - db_utils - INFO - Oppdatert skjema for login_history
2024-10-31 03:51:13 - db_utils - INFO - Oppdatert skjema for stroing
2024-10-31 03:51:13 - db_utils - INFO - Oppdatert skjema for tunbroyting
2024-10-31 03:51:13 - db_utils - INFO - All database schemas verified and updated
2024-10-31 03:51:13 - db_utils - INFO - Oppdatert skjema for customer
2024-10-31 03:51:13 - db_utils - INFO - Oppdatert skjema for feedback
2024-10-31 03:51:13 - db_utils - INFO - Oppdatert skjema for login_history
2024-10-31 03:51:13 - db_utils - INFO - Oppdatert skjema for stroing
2024-10-31 03:51:13 - db_utils - INFO - Oppdatert skjema for tunbroyting
2024-10-31 03:51:13 - db_utils - INFO - All database schemas verified and updated
2024-10-31 03:51:13 - db_utils - INFO - Database already initialized. Skipping.
2024-10-31 03:51:13 - db_utils - INFO - Query executed successfully on login_history.db. Rows affected: -1
2024-10-31 03:51:13 - db_utils - INFO - login_history table structure is correct
2024-10-31 03:51:13 - customer_utils - INFO - Starting cabin user consistency check
2024-10-31 03:51:13 - utils - INFO - Attempting to load passwords from secrets
2024-10-31 03:51:13 - utils - INFO - Successfully loaded passwords. Number of entries: 94
2024-10-31 03:51:13 - customer_utils - INFO - Retrieved 94 passwords
2024-10-31 03:51:13 - customer_utils - INFO - Found 94 customers in database
2024-10-31 03:51:13 - customer_utils - INFO - Consistency check completed
2024-10-31 03:51:13 - customer_utils - INFO - Database connection closed
2024-10-31 03:51:13 - customer_utils - INFO - Validating customers and passwords
2024-10-31 03:51:13 - utils - INFO - Attempting to load passwords from secrets
2024-10-31 03:51:13 - utils - INFO - Successfully loaded passwords. Number of entries: 94
2024-10-31 03:51:13 - customer_utils - INFO - Customer and password validation complete
2024-10-31 03:51:13 - db_utils - INFO - Successfully created indexes for tunbroyting database
2024-10-31 03:51:13 - db_utils - INFO - Successfully created indexes for stroing database
2024-10-31 03:51:13 - db_utils - INFO - Successfully created indexes for feedback database
2024-10-31 03:51:13 - db_utils - INFO - Successfully created indexes for login_history database
2024-10-31 03:51:13 - db_utils - INFO - Successfully created indexes for customer database
2024-10-31 03:51:13 - db_utils - INFO - Database index creation completed
2024-10-31 03:51:13 - __main__ - INFO - Application initialization completed successfully
2024-10-31 03:51:13 - __main__ - INFO - Application initialization completed successfully
2024-10-31 03:51:13 - __main__ - INFO - Application setup complete
2024-10-31 03:51:13 - customer_utils - INFO - Successfully retrieved customer with ID: 999
2024-10-31 03:51:13 - alert_utils - INFO - Fetched 1 alerts. only_today=False, include_expired=False
2024-10-31 03:51:13 - tun_utils - WARNING - hent_bestillinger() is deprecated, use get_bookings() instead
2024-10-31 03:51:13 - tun_utils - INFO - Starting get_bookings with start_date=None, end_date=None
2024-10-31 03:51:13 - tun_utils - INFO - Successfully retrieved 2 bookings
2024-10-31 03:51:13 - __main__ - INFO - Application shutting down
2024-10-31 03:51:14 - __main__ - INFO - Added validate_user_input function to app.py
2024-10-31 03:51:14 - __main__ - INFO - Starting application initialization
2024-10-31 03:51:14 - db_utils - INFO - Starting detailed database operations debugging
2024-10-31 03:51:14 - db_utils - INFO - Debugging login_history database:
2024-10-31 03:51:14 - db_utils - INFO -   Database version: 0
2024-10-31 03:51:14 - db_utils - INFO -   Tables in login_history.db: ['login_history']
2024-10-31 03:51:14 - db_utils - INFO -   Structure of login_history table:
2024-10-31 03:51:14 - db_utils - INFO -     Column: id, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:51:14 - db_utils - INFO -     Column: login_time, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:51:14 - db_utils - INFO -     Column: success, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:51:14 - db_utils - INFO -   Indexes in login_history.db: ['idx_login_id', 'idx_login_time']
2024-10-31 03:51:14 - db_utils - INFO -   Row count in login_history: 427
2024-10-31 03:51:14 - db_utils - INFO -   Test query result: (1,)
2024-10-31 03:51:14 - db_utils - INFO - Debugging tunbroyting database:
2024-10-31 03:51:14 - db_utils - INFO -   Database version: 0
2024-10-31 03:51:14 - db_utils - INFO -   Tables in tunbroyting.db: ['tunbroyting_bestillinger']
2024-10-31 03:51:14 - db_utils - INFO -   Structure of tunbroyting_bestillinger table:
2024-10-31 03:51:14 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 03:51:14 - db_utils - INFO -     Column: bruker, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:51:14 - db_utils - INFO -     Column: ankomst_dato, Type: DATE, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:51:14 - db_utils - INFO -     Column: ankomst_tid, Type: TIME, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:51:14 - db_utils - INFO -     Column: avreise_dato, Type: DATE, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:51:14 - db_utils - INFO -     Column: avreise_tid, Type: TIME, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:51:14 - db_utils - INFO -     Column: abonnement_type, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:51:14 - db_utils - INFO -   Indexes in tunbroyting.db: ['idx_tunbroyting_bruker', 'idx_tunbroyting_ankomst_dato', 'idx_tunbroyting_avreise_dato', 'idx_tunbroyting_abonnement']
2024-10-31 03:51:14 - db_utils - INFO -   Row count in tunbroyting_bestillinger: 2
2024-10-31 03:51:14 - db_utils - INFO -   Test query result: (1,)
2024-10-31 03:51:14 - db_utils - INFO - Debugging stroing database:
2024-10-31 03:51:14 - db_utils - INFO -   Database version: 0
2024-10-31 03:51:14 - db_utils - INFO -   Tables in stroing.db: ['sqlite_sequence', 'stroing_bestillinger']
2024-10-31 03:51:14 - db_utils - INFO -   Structure of sqlite_sequence table:
2024-10-31 03:51:14 - db_utils - INFO -     Column: name, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:51:14 - db_utils - INFO -     Column: seq, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:51:14 - db_utils - INFO -   Structure of stroing_bestillinger table:
2024-10-31 03:51:14 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 03:51:14 - db_utils - INFO -     Column: bruker, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:51:14 - db_utils - INFO -     Column: bestillings_dato, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:51:14 - db_utils - INFO -     Column: onske_dato, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:51:14 - db_utils - INFO -   Indexes in stroing.db: ['idx_stroing_bruker', 'idx_stroing_onske_dato', 'idx_stroing_bestillings_dato']
2024-10-31 03:51:14 - db_utils - INFO -   Row count in sqlite_sequence: 1
2024-10-31 03:51:14 - db_utils - INFO -   Row count in stroing_bestillinger: 5
2024-10-31 03:51:14 - db_utils - INFO -   Test query result: (1,)
2024-10-31 03:51:14 - db_utils - INFO - Debugging feedback database:
2024-10-31 03:51:14 - db_utils - INFO -   Database version: 0
2024-10-31 03:51:14 - db_utils - INFO -   Tables in feedback.db: ['sqlite_sequence', 'feedback']
2024-10-31 03:51:14 - db_utils - INFO -   Structure of sqlite_sequence table:
2024-10-31 03:51:14 - db_utils - INFO -     Column: name, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:51:14 - db_utils - INFO -     Column: seq, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:51:14 - db_utils - INFO -   Structure of feedback table:
2024-10-31 03:51:14 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 03:51:14 - db_utils - INFO -     Column: type, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:51:14 - db_utils - INFO -     Column: datetime, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:51:14 - db_utils - INFO -     Column: comment, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:51:14 - db_utils - INFO -     Column: innsender, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:51:14 - db_utils - INFO -     Column: status, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:51:14 - db_utils - INFO -     Column: status_changed_by, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:51:14 - db_utils - INFO -     Column: status_changed_at, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:51:14 - db_utils - INFO -     Column: hidden, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:51:14 - db_utils - INFO -     Column: is_alert, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:51:14 - db_utils - INFO -     Column: display_on_weather, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:51:14 - db_utils - INFO -     Column: expiry_date, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:51:14 - db_utils - INFO -     Column: target_group, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:51:14 - db_utils - INFO -   Indexes in feedback.db: ['idx_feedback_datetime', 'idx_feedback_innsender', 'idx_feedback_status', 'idx_feedback_type']
2024-10-31 03:51:14 - db_utils - INFO -   Row count in sqlite_sequence: 1
2024-10-31 03:51:14 - db_utils - INFO -   Row count in feedback: 11
2024-10-31 03:51:14 - db_utils - INFO -   Test query result: (1,)
2024-10-31 03:51:14 - db_utils - INFO - Detailed database operations debugging completed
2024-10-31 03:51:14 - db_utils - INFO - Oppdatert skjema for customer
2024-10-31 03:51:14 - db_utils - INFO - Oppdatert skjema for feedback
2024-10-31 03:51:14 - db_utils - INFO - Oppdatert skjema for login_history
2024-10-31 03:51:14 - db_utils - INFO - Oppdatert skjema for stroing
2024-10-31 03:51:14 - db_utils - INFO - Oppdatert skjema for tunbroyting
2024-10-31 03:51:14 - db_utils - INFO - All database schemas verified and updated
2024-10-31 03:51:14 - db_utils - INFO - Oppdatert skjema for customer
2024-10-31 03:51:14 - db_utils - INFO - Oppdatert skjema for feedback
2024-10-31 03:51:14 - db_utils - INFO - Oppdatert skjema for login_history
2024-10-31 03:51:14 - db_utils - INFO - Oppdatert skjema for stroing
2024-10-31 03:51:14 - db_utils - INFO - Oppdatert skjema for tunbroyting
2024-10-31 03:51:14 - db_utils - INFO - All database schemas verified and updated
2024-10-31 03:51:14 - db_utils - INFO - Database already initialized. Skipping.
2024-10-31 03:51:14 - db_utils - INFO - Query executed successfully on login_history.db. Rows affected: -1
2024-10-31 03:51:14 - db_utils - INFO - login_history table structure is correct
2024-10-31 03:51:14 - customer_utils - INFO - Starting cabin user consistency check
2024-10-31 03:51:14 - utils - INFO - Attempting to load passwords from secrets
2024-10-31 03:51:14 - utils - INFO - Successfully loaded passwords. Number of entries: 94
2024-10-31 03:51:14 - customer_utils - INFO - Retrieved 94 passwords
2024-10-31 03:51:14 - customer_utils - INFO - Found 94 customers in database
2024-10-31 03:51:14 - customer_utils - INFO - Consistency check completed
2024-10-31 03:51:14 - customer_utils - INFO - Database connection closed
2024-10-31 03:51:14 - customer_utils - INFO - Validating customers and passwords
2024-10-31 03:51:14 - utils - INFO - Attempting to load passwords from secrets
2024-10-31 03:51:14 - utils - INFO - Successfully loaded passwords. Number of entries: 94
2024-10-31 03:51:14 - customer_utils - INFO - Customer and password validation complete
2024-10-31 03:51:14 - db_utils - INFO - Successfully created indexes for tunbroyting database
2024-10-31 03:51:14 - db_utils - INFO - Successfully created indexes for stroing database
2024-10-31 03:51:14 - db_utils - INFO - Successfully created indexes for feedback database
2024-10-31 03:51:14 - db_utils - INFO - Successfully created indexes for login_history database
2024-10-31 03:51:14 - db_utils - INFO - Successfully created indexes for customer database
2024-10-31 03:51:14 - db_utils - INFO - Database index creation completed
2024-10-31 03:51:14 - __main__ - INFO - Application initialization completed successfully
2024-10-31 03:51:14 - __main__ - INFO - Application initialization completed successfully
2024-10-31 03:51:14 - __main__ - INFO - Application setup complete
2024-10-31 03:51:14 - customer_utils - INFO - Successfully retrieved customer with ID: 999
2024-10-31 03:51:16 - __main__ - INFO - Application shutting down
2024-10-31 03:51:44 - __main__ - INFO - Added validate_user_input function to app.py
2024-10-31 03:51:44 - __main__ - INFO - Starting application initialization
2024-10-31 03:51:44 - db_utils - INFO - Starting detailed database operations debugging
2024-10-31 03:51:44 - db_utils - INFO - Debugging login_history database:
2024-10-31 03:51:44 - db_utils - INFO -   Database version: 0
2024-10-31 03:51:44 - db_utils - INFO -   Tables in login_history.db: ['login_history']
2024-10-31 03:51:44 - db_utils - INFO -   Structure of login_history table:
2024-10-31 03:51:44 - db_utils - INFO -     Column: id, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:51:44 - db_utils - INFO -     Column: login_time, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:51:44 - db_utils - INFO -     Column: success, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:51:44 - db_utils - INFO -   Indexes in login_history.db: ['idx_login_id', 'idx_login_time']
2024-10-31 03:51:44 - db_utils - INFO -   Row count in login_history: 427
2024-10-31 03:51:44 - db_utils - INFO -   Test query result: (1,)
2024-10-31 03:51:44 - db_utils - INFO - Debugging tunbroyting database:
2024-10-31 03:51:44 - db_utils - INFO -   Database version: 0
2024-10-31 03:51:44 - db_utils - INFO -   Tables in tunbroyting.db: ['tunbroyting_bestillinger']
2024-10-31 03:51:44 - db_utils - INFO -   Structure of tunbroyting_bestillinger table:
2024-10-31 03:51:44 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 03:51:44 - db_utils - INFO -     Column: bruker, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:51:44 - db_utils - INFO -     Column: ankomst_dato, Type: DATE, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:51:44 - db_utils - INFO -     Column: ankomst_tid, Type: TIME, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:51:44 - db_utils - INFO -     Column: avreise_dato, Type: DATE, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:51:44 - db_utils - INFO -     Column: avreise_tid, Type: TIME, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:51:44 - db_utils - INFO -     Column: abonnement_type, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:51:44 - db_utils - INFO -   Indexes in tunbroyting.db: ['idx_tunbroyting_bruker', 'idx_tunbroyting_ankomst_dato', 'idx_tunbroyting_avreise_dato', 'idx_tunbroyting_abonnement']
2024-10-31 03:51:44 - db_utils - INFO -   Row count in tunbroyting_bestillinger: 2
2024-10-31 03:51:44 - db_utils - INFO -   Test query result: (1,)
2024-10-31 03:51:44 - db_utils - INFO - Debugging stroing database:
2024-10-31 03:51:44 - db_utils - INFO -   Database version: 0
2024-10-31 03:51:44 - db_utils - INFO -   Tables in stroing.db: ['sqlite_sequence', 'stroing_bestillinger']
2024-10-31 03:51:44 - db_utils - INFO -   Structure of sqlite_sequence table:
2024-10-31 03:51:44 - db_utils - INFO -     Column: name, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:51:44 - db_utils - INFO -     Column: seq, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:51:44 - db_utils - INFO -   Structure of stroing_bestillinger table:
2024-10-31 03:51:44 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 03:51:44 - db_utils - INFO -     Column: bruker, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:51:44 - db_utils - INFO -     Column: bestillings_dato, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:51:44 - db_utils - INFO -     Column: onske_dato, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:51:44 - db_utils - INFO -   Indexes in stroing.db: ['idx_stroing_bruker', 'idx_stroing_onske_dato', 'idx_stroing_bestillings_dato']
2024-10-31 03:51:44 - db_utils - INFO -   Row count in sqlite_sequence: 1
2024-10-31 03:51:44 - db_utils - INFO -   Row count in stroing_bestillinger: 5
2024-10-31 03:51:44 - db_utils - INFO -   Test query result: (1,)
2024-10-31 03:51:44 - db_utils - INFO - Debugging feedback database:
2024-10-31 03:51:44 - db_utils - INFO -   Database version: 0
2024-10-31 03:51:44 - db_utils - INFO -   Tables in feedback.db: ['sqlite_sequence', 'feedback']
2024-10-31 03:51:44 - db_utils - INFO -   Structure of sqlite_sequence table:
2024-10-31 03:51:44 - db_utils - INFO -     Column: name, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:51:44 - db_utils - INFO -     Column: seq, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:51:44 - db_utils - INFO -   Structure of feedback table:
2024-10-31 03:51:44 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 03:51:44 - db_utils - INFO -     Column: type, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:51:44 - db_utils - INFO -     Column: datetime, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:51:44 - db_utils - INFO -     Column: comment, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:51:44 - db_utils - INFO -     Column: innsender, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:51:44 - db_utils - INFO -     Column: status, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:51:44 - db_utils - INFO -     Column: status_changed_by, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:51:44 - db_utils - INFO -     Column: status_changed_at, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:51:44 - db_utils - INFO -     Column: hidden, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:51:44 - db_utils - INFO -     Column: is_alert, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:51:44 - db_utils - INFO -     Column: display_on_weather, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:51:44 - db_utils - INFO -     Column: expiry_date, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:51:44 - db_utils - INFO -     Column: target_group, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:51:44 - db_utils - INFO -   Indexes in feedback.db: ['idx_feedback_datetime', 'idx_feedback_innsender', 'idx_feedback_status', 'idx_feedback_type']
2024-10-31 03:51:44 - db_utils - INFO -   Row count in sqlite_sequence: 1
2024-10-31 03:51:44 - db_utils - INFO -   Row count in feedback: 11
2024-10-31 03:51:44 - db_utils - INFO -   Test query result: (1,)
2024-10-31 03:51:44 - db_utils - INFO - Detailed database operations debugging completed
2024-10-31 03:51:44 - db_utils - INFO - Oppdatert skjema for customer
2024-10-31 03:51:44 - db_utils - INFO - Oppdatert skjema for feedback
2024-10-31 03:51:44 - db_utils - INFO - Oppdatert skjema for login_history
2024-10-31 03:51:44 - db_utils - INFO - Oppdatert skjema for stroing
2024-10-31 03:51:44 - db_utils - INFO - Oppdatert skjema for tunbroyting
2024-10-31 03:51:44 - db_utils - INFO - All database schemas verified and updated
2024-10-31 03:51:44 - db_utils - INFO - Oppdatert skjema for customer
2024-10-31 03:51:44 - db_utils - INFO - Oppdatert skjema for feedback
2024-10-31 03:51:44 - db_utils - INFO - Oppdatert skjema for login_history
2024-10-31 03:51:44 - db_utils - INFO - Oppdatert skjema for stroing
2024-10-31 03:51:44 - db_utils - INFO - Oppdatert skjema for tunbroyting
2024-10-31 03:51:44 - db_utils - INFO - All database schemas verified and updated
2024-10-31 03:51:44 - db_utils - INFO - Database already initialized. Skipping.
2024-10-31 03:51:44 - db_utils - INFO - Query executed successfully on login_history.db. Rows affected: -1
2024-10-31 03:51:44 - db_utils - INFO - login_history table structure is correct
2024-10-31 03:51:44 - customer_utils - INFO - Starting cabin user consistency check
2024-10-31 03:51:44 - utils - INFO - Attempting to load passwords from secrets
2024-10-31 03:51:44 - utils - INFO - Successfully loaded passwords. Number of entries: 94
2024-10-31 03:51:44 - customer_utils - INFO - Retrieved 94 passwords
2024-10-31 03:51:44 - customer_utils - INFO - Found 94 customers in database
2024-10-31 03:51:44 - customer_utils - INFO - Consistency check completed
2024-10-31 03:51:44 - customer_utils - INFO - Database connection closed
2024-10-31 03:51:44 - customer_utils - INFO - Validating customers and passwords
2024-10-31 03:51:44 - utils - INFO - Attempting to load passwords from secrets
2024-10-31 03:51:44 - utils - INFO - Successfully loaded passwords. Number of entries: 94
2024-10-31 03:51:44 - customer_utils - INFO - Customer and password validation complete
2024-10-31 03:51:44 - db_utils - INFO - Successfully created indexes for tunbroyting database
2024-10-31 03:51:44 - db_utils - INFO - Successfully created indexes for stroing database
2024-10-31 03:51:44 - db_utils - INFO - Successfully created indexes for feedback database
2024-10-31 03:51:44 - db_utils - INFO - Successfully created indexes for login_history database
2024-10-31 03:51:44 - db_utils - INFO - Successfully created indexes for customer database
2024-10-31 03:51:44 - db_utils - INFO - Database index creation completed
2024-10-31 03:51:44 - __main__ - INFO - Application initialization completed successfully
2024-10-31 03:51:44 - __main__ - INFO - Application initialization completed successfully
2024-10-31 03:51:44 - __main__ - INFO - Application setup complete
2024-10-31 03:51:44 - customer_utils - INFO - Successfully retrieved customer with ID: 999
2024-10-31 03:51:45 - __main__ - INFO - Application shutting down
2024-10-31 03:51:54 - __main__ - INFO - Added validate_user_input function to app.py
2024-10-31 03:51:54 - __main__ - INFO - Starting application initialization
2024-10-31 03:51:54 - db_utils - INFO - Starting detailed database operations debugging
2024-10-31 03:51:54 - db_utils - INFO - Debugging login_history database:
2024-10-31 03:51:54 - db_utils - INFO -   Database version: 0
2024-10-31 03:51:54 - db_utils - INFO -   Tables in login_history.db: ['login_history']
2024-10-31 03:51:54 - db_utils - INFO -   Structure of login_history table:
2024-10-31 03:51:54 - db_utils - INFO -     Column: id, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:51:54 - db_utils - INFO -     Column: login_time, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:51:54 - db_utils - INFO -     Column: success, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:51:54 - db_utils - INFO -   Indexes in login_history.db: ['idx_login_id', 'idx_login_time']
2024-10-31 03:51:54 - db_utils - INFO -   Row count in login_history: 427
2024-10-31 03:51:54 - db_utils - INFO -   Test query result: (1,)
2024-10-31 03:51:54 - db_utils - INFO - Debugging tunbroyting database:
2024-10-31 03:51:54 - db_utils - INFO -   Database version: 0
2024-10-31 03:51:54 - db_utils - INFO -   Tables in tunbroyting.db: ['tunbroyting_bestillinger']
2024-10-31 03:51:54 - db_utils - INFO -   Structure of tunbroyting_bestillinger table:
2024-10-31 03:51:54 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 03:51:54 - db_utils - INFO -     Column: bruker, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:51:54 - db_utils - INFO -     Column: ankomst_dato, Type: DATE, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:51:54 - db_utils - INFO -     Column: ankomst_tid, Type: TIME, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:51:54 - db_utils - INFO -     Column: avreise_dato, Type: DATE, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:51:54 - db_utils - INFO -     Column: avreise_tid, Type: TIME, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:51:54 - db_utils - INFO -     Column: abonnement_type, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:51:54 - db_utils - INFO -   Indexes in tunbroyting.db: ['idx_tunbroyting_bruker', 'idx_tunbroyting_ankomst_dato', 'idx_tunbroyting_avreise_dato', 'idx_tunbroyting_abonnement']
2024-10-31 03:51:54 - db_utils - INFO -   Row count in tunbroyting_bestillinger: 2
2024-10-31 03:51:54 - db_utils - INFO -   Test query result: (1,)
2024-10-31 03:51:54 - db_utils - INFO - Debugging stroing database:
2024-10-31 03:51:54 - db_utils - INFO -   Database version: 0
2024-10-31 03:51:54 - db_utils - INFO -   Tables in stroing.db: ['sqlite_sequence', 'stroing_bestillinger']
2024-10-31 03:51:54 - db_utils - INFO -   Structure of sqlite_sequence table:
2024-10-31 03:51:54 - db_utils - INFO -     Column: name, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:51:54 - db_utils - INFO -     Column: seq, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:51:54 - db_utils - INFO -   Structure of stroing_bestillinger table:
2024-10-31 03:51:54 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 03:51:54 - db_utils - INFO -     Column: bruker, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:51:54 - db_utils - INFO -     Column: bestillings_dato, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:51:54 - db_utils - INFO -     Column: onske_dato, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:51:54 - db_utils - INFO -   Indexes in stroing.db: ['idx_stroing_bruker', 'idx_stroing_onske_dato', 'idx_stroing_bestillings_dato']
2024-10-31 03:51:54 - db_utils - INFO -   Row count in sqlite_sequence: 1
2024-10-31 03:51:54 - db_utils - INFO -   Row count in stroing_bestillinger: 5
2024-10-31 03:51:54 - db_utils - INFO -   Test query result: (1,)
2024-10-31 03:51:54 - db_utils - INFO - Debugging feedback database:
2024-10-31 03:51:54 - db_utils - INFO -   Database version: 0
2024-10-31 03:51:54 - db_utils - INFO -   Tables in feedback.db: ['sqlite_sequence', 'feedback']
2024-10-31 03:51:54 - db_utils - INFO -   Structure of sqlite_sequence table:
2024-10-31 03:51:54 - db_utils - INFO -     Column: name, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:51:54 - db_utils - INFO -     Column: seq, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:51:54 - db_utils - INFO -   Structure of feedback table:
2024-10-31 03:51:54 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 03:51:54 - db_utils - INFO -     Column: type, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:51:54 - db_utils - INFO -     Column: datetime, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:51:54 - db_utils - INFO -     Column: comment, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:51:54 - db_utils - INFO -     Column: innsender, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:51:54 - db_utils - INFO -     Column: status, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:51:54 - db_utils - INFO -     Column: status_changed_by, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:51:54 - db_utils - INFO -     Column: status_changed_at, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:51:54 - db_utils - INFO -     Column: hidden, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:51:54 - db_utils - INFO -     Column: is_alert, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:51:54 - db_utils - INFO -     Column: display_on_weather, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:51:54 - db_utils - INFO -     Column: expiry_date, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:51:54 - db_utils - INFO -     Column: target_group, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:51:54 - db_utils - INFO -   Indexes in feedback.db: ['idx_feedback_datetime', 'idx_feedback_innsender', 'idx_feedback_status', 'idx_feedback_type']
2024-10-31 03:51:54 - db_utils - INFO -   Row count in sqlite_sequence: 1
2024-10-31 03:51:54 - db_utils - INFO -   Row count in feedback: 11
2024-10-31 03:51:54 - db_utils - INFO -   Test query result: (1,)
2024-10-31 03:51:54 - db_utils - INFO - Detailed database operations debugging completed
2024-10-31 03:51:54 - db_utils - INFO - Oppdatert skjema for customer
2024-10-31 03:51:54 - db_utils - INFO - Oppdatert skjema for feedback
2024-10-31 03:51:54 - db_utils - INFO - Oppdatert skjema for login_history
2024-10-31 03:51:54 - db_utils - INFO - Oppdatert skjema for stroing
2024-10-31 03:51:54 - db_utils - INFO - Oppdatert skjema for tunbroyting
2024-10-31 03:51:54 - db_utils - INFO - All database schemas verified and updated
2024-10-31 03:51:54 - db_utils - INFO - Oppdatert skjema for customer
2024-10-31 03:51:54 - db_utils - INFO - Oppdatert skjema for feedback
2024-10-31 03:51:54 - db_utils - INFO - Oppdatert skjema for login_history
2024-10-31 03:51:54 - db_utils - INFO - Oppdatert skjema for stroing
2024-10-31 03:51:54 - db_utils - INFO - Oppdatert skjema for tunbroyting
2024-10-31 03:51:54 - db_utils - INFO - All database schemas verified and updated
2024-10-31 03:51:54 - db_utils - INFO - Database already initialized. Skipping.
2024-10-31 03:51:54 - db_utils - INFO - Query executed successfully on login_history.db. Rows affected: -1
2024-10-31 03:51:54 - db_utils - INFO - login_history table structure is correct
2024-10-31 03:51:54 - customer_utils - INFO - Starting cabin user consistency check
2024-10-31 03:51:54 - utils - INFO - Attempting to load passwords from secrets
2024-10-31 03:51:54 - utils - INFO - Successfully loaded passwords. Number of entries: 94
2024-10-31 03:51:54 - customer_utils - INFO - Retrieved 94 passwords
2024-10-31 03:51:54 - customer_utils - INFO - Found 94 customers in database
2024-10-31 03:51:54 - customer_utils - INFO - Consistency check completed
2024-10-31 03:51:54 - customer_utils - INFO - Database connection closed
2024-10-31 03:51:54 - customer_utils - INFO - Validating customers and passwords
2024-10-31 03:51:54 - utils - INFO - Attempting to load passwords from secrets
2024-10-31 03:51:54 - utils - INFO - Successfully loaded passwords. Number of entries: 94
2024-10-31 03:51:54 - customer_utils - INFO - Customer and password validation complete
2024-10-31 03:51:54 - db_utils - INFO - Successfully created indexes for tunbroyting database
2024-10-31 03:51:54 - db_utils - INFO - Successfully created indexes for stroing database
2024-10-31 03:51:54 - db_utils - INFO - Successfully created indexes for feedback database
2024-10-31 03:51:54 - db_utils - INFO - Successfully created indexes for login_history database
2024-10-31 03:51:54 - db_utils - INFO - Successfully created indexes for customer database
2024-10-31 03:51:54 - db_utils - INFO - Database index creation completed
2024-10-31 03:51:54 - __main__ - INFO - Application initialization completed successfully
2024-10-31 03:51:54 - __main__ - INFO - Application initialization completed successfully
2024-10-31 03:51:54 - __main__ - INFO - Application setup complete
2024-10-31 03:51:54 - customer_utils - INFO - Successfully retrieved customer with ID: 999
2024-10-31 03:51:56 - __main__ - INFO - Application shutting down
2024-10-31 03:52:13 - __main__ - INFO - Added validate_user_input function to app.py
2024-10-31 03:52:13 - __main__ - INFO - Starting application initialization
2024-10-31 03:52:13 - db_utils - INFO - Starting detailed database operations debugging
2024-10-31 03:52:13 - db_utils - INFO - Debugging login_history database:
2024-10-31 03:52:13 - db_utils - INFO -   Database version: 0
2024-10-31 03:52:13 - db_utils - INFO -   Tables in login_history.db: ['login_history']
2024-10-31 03:52:13 - db_utils - INFO -   Structure of login_history table:
2024-10-31 03:52:13 - db_utils - INFO -     Column: id, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:52:13 - db_utils - INFO -     Column: login_time, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:52:13 - db_utils - INFO -     Column: success, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:52:13 - db_utils - INFO -   Indexes in login_history.db: ['idx_login_id', 'idx_login_time']
2024-10-31 03:52:13 - db_utils - INFO -   Row count in login_history: 427
2024-10-31 03:52:13 - db_utils - INFO -   Test query result: (1,)
2024-10-31 03:52:13 - db_utils - INFO - Debugging tunbroyting database:
2024-10-31 03:52:13 - db_utils - INFO -   Database version: 0
2024-10-31 03:52:13 - db_utils - INFO -   Tables in tunbroyting.db: ['tunbroyting_bestillinger']
2024-10-31 03:52:13 - db_utils - INFO -   Structure of tunbroyting_bestillinger table:
2024-10-31 03:52:13 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 03:52:13 - db_utils - INFO -     Column: bruker, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:52:13 - db_utils - INFO -     Column: ankomst_dato, Type: DATE, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:52:13 - db_utils - INFO -     Column: ankomst_tid, Type: TIME, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:52:13 - db_utils - INFO -     Column: avreise_dato, Type: DATE, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:52:13 - db_utils - INFO -     Column: avreise_tid, Type: TIME, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:52:13 - db_utils - INFO -     Column: abonnement_type, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:52:13 - db_utils - INFO -   Indexes in tunbroyting.db: ['idx_tunbroyting_bruker', 'idx_tunbroyting_ankomst_dato', 'idx_tunbroyting_avreise_dato', 'idx_tunbroyting_abonnement']
2024-10-31 03:52:13 - db_utils - INFO -   Row count in tunbroyting_bestillinger: 2
2024-10-31 03:52:13 - db_utils - INFO -   Test query result: (1,)
2024-10-31 03:52:13 - db_utils - INFO - Debugging stroing database:
2024-10-31 03:52:13 - db_utils - INFO -   Database version: 0
2024-10-31 03:52:13 - db_utils - INFO -   Tables in stroing.db: ['sqlite_sequence', 'stroing_bestillinger']
2024-10-31 03:52:13 - db_utils - INFO -   Structure of sqlite_sequence table:
2024-10-31 03:52:13 - db_utils - INFO -     Column: name, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:52:13 - db_utils - INFO -     Column: seq, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:52:13 - db_utils - INFO -   Structure of stroing_bestillinger table:
2024-10-31 03:52:13 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 03:52:13 - db_utils - INFO -     Column: bruker, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:52:13 - db_utils - INFO -     Column: bestillings_dato, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:52:13 - db_utils - INFO -     Column: onske_dato, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:52:13 - db_utils - INFO -   Indexes in stroing.db: ['idx_stroing_bruker', 'idx_stroing_onske_dato', 'idx_stroing_bestillings_dato']
2024-10-31 03:52:13 - db_utils - INFO -   Row count in sqlite_sequence: 1
2024-10-31 03:52:13 - db_utils - INFO -   Row count in stroing_bestillinger: 5
2024-10-31 03:52:13 - db_utils - INFO -   Test query result: (1,)
2024-10-31 03:52:13 - db_utils - INFO - Debugging feedback database:
2024-10-31 03:52:13 - db_utils - INFO -   Database version: 0
2024-10-31 03:52:13 - db_utils - INFO -   Tables in feedback.db: ['sqlite_sequence', 'feedback']
2024-10-31 03:52:13 - db_utils - INFO -   Structure of sqlite_sequence table:
2024-10-31 03:52:13 - db_utils - INFO -     Column: name, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:52:13 - db_utils - INFO -     Column: seq, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:52:13 - db_utils - INFO -   Structure of feedback table:
2024-10-31 03:52:13 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 03:52:13 - db_utils - INFO -     Column: type, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:52:13 - db_utils - INFO -     Column: datetime, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:52:13 - db_utils - INFO -     Column: comment, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:52:13 - db_utils - INFO -     Column: innsender, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:52:13 - db_utils - INFO -     Column: status, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:52:13 - db_utils - INFO -     Column: status_changed_by, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:52:13 - db_utils - INFO -     Column: status_changed_at, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:52:13 - db_utils - INFO -     Column: hidden, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:52:13 - db_utils - INFO -     Column: is_alert, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:52:13 - db_utils - INFO -     Column: display_on_weather, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:52:13 - db_utils - INFO -     Column: expiry_date, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:52:13 - db_utils - INFO -     Column: target_group, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:52:13 - db_utils - INFO -   Indexes in feedback.db: ['idx_feedback_datetime', 'idx_feedback_innsender', 'idx_feedback_status', 'idx_feedback_type']
2024-10-31 03:52:13 - db_utils - INFO -   Row count in sqlite_sequence: 1
2024-10-31 03:52:13 - db_utils - INFO -   Row count in feedback: 11
2024-10-31 03:52:13 - db_utils - INFO -   Test query result: (1,)
2024-10-31 03:52:13 - db_utils - INFO - Detailed database operations debugging completed
2024-10-31 03:52:13 - db_utils - INFO - Oppdatert skjema for customer
2024-10-31 03:52:13 - db_utils - INFO - Oppdatert skjema for feedback
2024-10-31 03:52:13 - db_utils - INFO - Oppdatert skjema for login_history
2024-10-31 03:52:13 - db_utils - INFO - Oppdatert skjema for stroing
2024-10-31 03:52:13 - db_utils - INFO - Oppdatert skjema for tunbroyting
2024-10-31 03:52:13 - db_utils - INFO - All database schemas verified and updated
2024-10-31 03:52:13 - db_utils - INFO - Oppdatert skjema for customer
2024-10-31 03:52:13 - db_utils - INFO - Oppdatert skjema for feedback
2024-10-31 03:52:13 - db_utils - INFO - Oppdatert skjema for login_history
2024-10-31 03:52:13 - db_utils - INFO - Oppdatert skjema for stroing
2024-10-31 03:52:13 - db_utils - INFO - Oppdatert skjema for tunbroyting
2024-10-31 03:52:13 - db_utils - INFO - All database schemas verified and updated
2024-10-31 03:52:13 - db_utils - INFO - Database already initialized. Skipping.
2024-10-31 03:52:13 - db_utils - INFO - Query executed successfully on login_history.db. Rows affected: -1
2024-10-31 03:52:13 - db_utils - INFO - login_history table structure is correct
2024-10-31 03:52:13 - customer_utils - INFO - Starting cabin user consistency check
2024-10-31 03:52:13 - utils - INFO - Attempting to load passwords from secrets
2024-10-31 03:52:13 - utils - INFO - Successfully loaded passwords. Number of entries: 94
2024-10-31 03:52:13 - customer_utils - INFO - Retrieved 94 passwords
2024-10-31 03:52:13 - customer_utils - INFO - Found 94 customers in database
2024-10-31 03:52:13 - customer_utils - INFO - Consistency check completed
2024-10-31 03:52:13 - customer_utils - INFO - Database connection closed
2024-10-31 03:52:13 - customer_utils - INFO - Validating customers and passwords
2024-10-31 03:52:13 - utils - INFO - Attempting to load passwords from secrets
2024-10-31 03:52:13 - utils - INFO - Successfully loaded passwords. Number of entries: 94
2024-10-31 03:52:13 - customer_utils - INFO - Customer and password validation complete
2024-10-31 03:52:13 - db_utils - INFO - Successfully created indexes for tunbroyting database
2024-10-31 03:52:13 - db_utils - INFO - Successfully created indexes for stroing database
2024-10-31 03:52:13 - db_utils - INFO - Successfully created indexes for feedback database
2024-10-31 03:52:13 - db_utils - INFO - Successfully created indexes for login_history database
2024-10-31 03:52:13 - db_utils - INFO - Successfully created indexes for customer database
2024-10-31 03:52:13 - db_utils - INFO - Database index creation completed
2024-10-31 03:52:13 - __main__ - INFO - Application initialization completed successfully
2024-10-31 03:52:13 - __main__ - INFO - Application initialization completed successfully
2024-10-31 03:52:13 - __main__ - INFO - Application setup complete
2024-10-31 03:52:13 - customer_utils - INFO - Successfully retrieved customer with ID: 999
2024-10-31 03:52:14 - __main__ - INFO - Application shutting down
2024-10-31 03:52:33 - __main__ - INFO - Added validate_user_input function to app.py
2024-10-31 03:52:33 - __main__ - INFO - Starting application initialization
2024-10-31 03:52:33 - db_utils - INFO - Starting detailed database operations debugging
2024-10-31 03:52:33 - db_utils - INFO - Debugging login_history database:
2024-10-31 03:52:33 - db_utils - INFO -   Database version: 0
2024-10-31 03:52:33 - db_utils - INFO -   Tables in login_history.db: ['login_history']
2024-10-31 03:52:33 - db_utils - INFO -   Structure of login_history table:
2024-10-31 03:52:33 - db_utils - INFO -     Column: id, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:52:33 - db_utils - INFO -     Column: login_time, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:52:33 - db_utils - INFO -     Column: success, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:52:33 - db_utils - INFO -   Indexes in login_history.db: ['idx_login_id', 'idx_login_time']
2024-10-31 03:52:33 - db_utils - INFO -   Row count in login_history: 427
2024-10-31 03:52:33 - db_utils - INFO -   Test query result: (1,)
2024-10-31 03:52:33 - db_utils - INFO - Debugging tunbroyting database:
2024-10-31 03:52:33 - db_utils - INFO -   Database version: 0
2024-10-31 03:52:33 - db_utils - INFO -   Tables in tunbroyting.db: ['tunbroyting_bestillinger']
2024-10-31 03:52:33 - db_utils - INFO -   Structure of tunbroyting_bestillinger table:
2024-10-31 03:52:33 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 03:52:33 - db_utils - INFO -     Column: bruker, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:52:33 - db_utils - INFO -     Column: ankomst_dato, Type: DATE, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:52:33 - db_utils - INFO -     Column: ankomst_tid, Type: TIME, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:52:33 - db_utils - INFO -     Column: avreise_dato, Type: DATE, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:52:33 - db_utils - INFO -     Column: avreise_tid, Type: TIME, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:52:33 - db_utils - INFO -     Column: abonnement_type, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:52:33 - db_utils - INFO -   Indexes in tunbroyting.db: ['idx_tunbroyting_bruker', 'idx_tunbroyting_ankomst_dato', 'idx_tunbroyting_avreise_dato', 'idx_tunbroyting_abonnement']
2024-10-31 03:52:33 - db_utils - INFO -   Row count in tunbroyting_bestillinger: 2
2024-10-31 03:52:33 - db_utils - INFO -   Test query result: (1,)
2024-10-31 03:52:33 - db_utils - INFO - Debugging stroing database:
2024-10-31 03:52:33 - db_utils - INFO -   Database version: 0
2024-10-31 03:52:33 - db_utils - INFO -   Tables in stroing.db: ['sqlite_sequence', 'stroing_bestillinger']
2024-10-31 03:52:33 - db_utils - INFO -   Structure of sqlite_sequence table:
2024-10-31 03:52:33 - db_utils - INFO -     Column: name, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:52:33 - db_utils - INFO -     Column: seq, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:52:33 - db_utils - INFO -   Structure of stroing_bestillinger table:
2024-10-31 03:52:33 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 03:52:33 - db_utils - INFO -     Column: bruker, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:52:33 - db_utils - INFO -     Column: bestillings_dato, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:52:33 - db_utils - INFO -     Column: onske_dato, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:52:33 - db_utils - INFO -   Indexes in stroing.db: ['idx_stroing_bruker', 'idx_stroing_onske_dato', 'idx_stroing_bestillings_dato']
2024-10-31 03:52:33 - db_utils - INFO -   Row count in sqlite_sequence: 1
2024-10-31 03:52:33 - db_utils - INFO -   Row count in stroing_bestillinger: 5
2024-10-31 03:52:33 - db_utils - INFO -   Test query result: (1,)
2024-10-31 03:52:33 - db_utils - INFO - Debugging feedback database:
2024-10-31 03:52:33 - db_utils - INFO -   Database version: 0
2024-10-31 03:52:33 - db_utils - INFO -   Tables in feedback.db: ['sqlite_sequence', 'feedback']
2024-10-31 03:52:33 - db_utils - INFO -   Structure of sqlite_sequence table:
2024-10-31 03:52:33 - db_utils - INFO -     Column: name, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:52:33 - db_utils - INFO -     Column: seq, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:52:33 - db_utils - INFO -   Structure of feedback table:
2024-10-31 03:52:33 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 03:52:33 - db_utils - INFO -     Column: type, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:52:33 - db_utils - INFO -     Column: datetime, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:52:33 - db_utils - INFO -     Column: comment, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:52:33 - db_utils - INFO -     Column: innsender, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:52:33 - db_utils - INFO -     Column: status, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:52:33 - db_utils - INFO -     Column: status_changed_by, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:52:33 - db_utils - INFO -     Column: status_changed_at, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:52:33 - db_utils - INFO -     Column: hidden, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:52:33 - db_utils - INFO -     Column: is_alert, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:52:33 - db_utils - INFO -     Column: display_on_weather, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:52:33 - db_utils - INFO -     Column: expiry_date, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:52:33 - db_utils - INFO -     Column: target_group, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:52:33 - db_utils - INFO -   Indexes in feedback.db: ['idx_feedback_datetime', 'idx_feedback_innsender', 'idx_feedback_status', 'idx_feedback_type']
2024-10-31 03:52:33 - db_utils - INFO -   Row count in sqlite_sequence: 1
2024-10-31 03:52:33 - db_utils - INFO -   Row count in feedback: 11
2024-10-31 03:52:33 - db_utils - INFO -   Test query result: (1,)
2024-10-31 03:52:33 - db_utils - INFO - Detailed database operations debugging completed
2024-10-31 03:52:33 - db_utils - INFO - Oppdatert skjema for customer
2024-10-31 03:52:33 - db_utils - INFO - Oppdatert skjema for feedback
2024-10-31 03:52:33 - db_utils - INFO - Oppdatert skjema for login_history
2024-10-31 03:52:33 - db_utils - INFO - Oppdatert skjema for stroing
2024-10-31 03:52:33 - db_utils - INFO - Oppdatert skjema for tunbroyting
2024-10-31 03:52:33 - db_utils - INFO - All database schemas verified and updated
2024-10-31 03:52:33 - db_utils - INFO - Oppdatert skjema for customer
2024-10-31 03:52:33 - db_utils - INFO - Oppdatert skjema for feedback
2024-10-31 03:52:33 - db_utils - INFO - Oppdatert skjema for login_history
2024-10-31 03:52:33 - db_utils - INFO - Oppdatert skjema for stroing
2024-10-31 03:52:33 - db_utils - INFO - Oppdatert skjema for tunbroyting
2024-10-31 03:52:33 - db_utils - INFO - All database schemas verified and updated
2024-10-31 03:52:33 - db_utils - INFO - Database already initialized. Skipping.
2024-10-31 03:52:33 - db_utils - INFO - Query executed successfully on login_history.db. Rows affected: -1
2024-10-31 03:52:33 - db_utils - INFO - login_history table structure is correct
2024-10-31 03:52:33 - customer_utils - INFO - Starting cabin user consistency check
2024-10-31 03:52:33 - utils - INFO - Attempting to load passwords from secrets
2024-10-31 03:52:33 - utils - INFO - Successfully loaded passwords. Number of entries: 94
2024-10-31 03:52:33 - customer_utils - INFO - Retrieved 94 passwords
2024-10-31 03:52:33 - customer_utils - INFO - Found 94 customers in database
2024-10-31 03:52:33 - customer_utils - INFO - Consistency check completed
2024-10-31 03:52:33 - customer_utils - INFO - Database connection closed
2024-10-31 03:52:33 - customer_utils - INFO - Validating customers and passwords
2024-10-31 03:52:33 - utils - INFO - Attempting to load passwords from secrets
2024-10-31 03:52:33 - utils - INFO - Successfully loaded passwords. Number of entries: 94
2024-10-31 03:52:33 - customer_utils - INFO - Customer and password validation complete
2024-10-31 03:52:33 - db_utils - INFO - Successfully created indexes for tunbroyting database
2024-10-31 03:52:33 - db_utils - INFO - Successfully created indexes for stroing database
2024-10-31 03:52:33 - db_utils - INFO - Successfully created indexes for feedback database
2024-10-31 03:52:33 - db_utils - INFO - Successfully created indexes for login_history database
2024-10-31 03:52:33 - db_utils - INFO - Successfully created indexes for customer database
2024-10-31 03:52:33 - db_utils - INFO - Database index creation completed
2024-10-31 03:52:33 - __main__ - INFO - Application initialization completed successfully
2024-10-31 03:52:33 - __main__ - INFO - Application initialization completed successfully
2024-10-31 03:52:33 - __main__ - INFO - Application setup complete
2024-10-31 03:52:33 - customer_utils - INFO - Successfully retrieved customer with ID: 999
2024-10-31 03:52:38 - __main__ - INFO - Application shutting down
2024-10-31 03:52:39 - __main__ - INFO - Added validate_user_input function to app.py
2024-10-31 03:52:39 - __main__ - INFO - Starting application initialization
2024-10-31 03:52:39 - db_utils - INFO - Starting detailed database operations debugging
2024-10-31 03:52:39 - db_utils - INFO - Debugging login_history database:
2024-10-31 03:52:39 - db_utils - INFO -   Database version: 0
2024-10-31 03:52:39 - db_utils - INFO -   Tables in login_history.db: ['login_history']
2024-10-31 03:52:39 - db_utils - INFO -   Structure of login_history table:
2024-10-31 03:52:39 - db_utils - INFO -     Column: id, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:52:39 - db_utils - INFO -     Column: login_time, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:52:39 - db_utils - INFO -     Column: success, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:52:39 - db_utils - INFO -   Indexes in login_history.db: ['idx_login_id', 'idx_login_time']
2024-10-31 03:52:39 - db_utils - INFO -   Row count in login_history: 427
2024-10-31 03:52:39 - db_utils - INFO -   Test query result: (1,)
2024-10-31 03:52:39 - db_utils - INFO - Debugging tunbroyting database:
2024-10-31 03:52:39 - db_utils - INFO -   Database version: 0
2024-10-31 03:52:39 - db_utils - INFO -   Tables in tunbroyting.db: ['tunbroyting_bestillinger']
2024-10-31 03:52:39 - db_utils - INFO -   Structure of tunbroyting_bestillinger table:
2024-10-31 03:52:39 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 03:52:39 - db_utils - INFO -     Column: bruker, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:52:39 - db_utils - INFO -     Column: ankomst_dato, Type: DATE, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:52:39 - db_utils - INFO -     Column: ankomst_tid, Type: TIME, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:52:39 - db_utils - INFO -     Column: avreise_dato, Type: DATE, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:52:39 - db_utils - INFO -     Column: avreise_tid, Type: TIME, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:52:39 - db_utils - INFO -     Column: abonnement_type, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:52:39 - db_utils - INFO -   Indexes in tunbroyting.db: ['idx_tunbroyting_bruker', 'idx_tunbroyting_ankomst_dato', 'idx_tunbroyting_avreise_dato', 'idx_tunbroyting_abonnement']
2024-10-31 03:52:39 - db_utils - INFO -   Row count in tunbroyting_bestillinger: 2
2024-10-31 03:52:39 - db_utils - INFO -   Test query result: (1,)
2024-10-31 03:52:39 - db_utils - INFO - Debugging stroing database:
2024-10-31 03:52:39 - db_utils - INFO -   Database version: 0
2024-10-31 03:52:39 - db_utils - INFO -   Tables in stroing.db: ['sqlite_sequence', 'stroing_bestillinger']
2024-10-31 03:52:39 - db_utils - INFO -   Structure of sqlite_sequence table:
2024-10-31 03:52:39 - db_utils - INFO -     Column: name, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:52:39 - db_utils - INFO -     Column: seq, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:52:39 - db_utils - INFO -   Structure of stroing_bestillinger table:
2024-10-31 03:52:39 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 03:52:39 - db_utils - INFO -     Column: bruker, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:52:39 - db_utils - INFO -     Column: bestillings_dato, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:52:39 - db_utils - INFO -     Column: onske_dato, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:52:39 - db_utils - INFO -   Indexes in stroing.db: ['idx_stroing_bruker', 'idx_stroing_onske_dato', 'idx_stroing_bestillings_dato']
2024-10-31 03:52:39 - db_utils - INFO -   Row count in sqlite_sequence: 1
2024-10-31 03:52:39 - db_utils - INFO -   Row count in stroing_bestillinger: 5
2024-10-31 03:52:39 - db_utils - INFO -   Test query result: (1,)
2024-10-31 03:52:39 - db_utils - INFO - Debugging feedback database:
2024-10-31 03:52:39 - db_utils - INFO -   Database version: 0
2024-10-31 03:52:39 - db_utils - INFO -   Tables in feedback.db: ['sqlite_sequence', 'feedback']
2024-10-31 03:52:39 - db_utils - INFO -   Structure of sqlite_sequence table:
2024-10-31 03:52:39 - db_utils - INFO -     Column: name, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:52:39 - db_utils - INFO -     Column: seq, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:52:39 - db_utils - INFO -   Structure of feedback table:
2024-10-31 03:52:39 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 03:52:39 - db_utils - INFO -     Column: type, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:52:39 - db_utils - INFO -     Column: datetime, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:52:39 - db_utils - INFO -     Column: comment, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:52:39 - db_utils - INFO -     Column: innsender, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:52:39 - db_utils - INFO -     Column: status, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:52:39 - db_utils - INFO -     Column: status_changed_by, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:52:39 - db_utils - INFO -     Column: status_changed_at, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:52:39 - db_utils - INFO -     Column: hidden, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:52:39 - db_utils - INFO -     Column: is_alert, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:52:39 - db_utils - INFO -     Column: display_on_weather, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:52:39 - db_utils - INFO -     Column: expiry_date, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:52:39 - db_utils - INFO -     Column: target_group, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:52:39 - db_utils - INFO -   Indexes in feedback.db: ['idx_feedback_datetime', 'idx_feedback_innsender', 'idx_feedback_status', 'idx_feedback_type']
2024-10-31 03:52:39 - db_utils - INFO -   Row count in sqlite_sequence: 1
2024-10-31 03:52:39 - db_utils - INFO -   Row count in feedback: 11
2024-10-31 03:52:39 - db_utils - INFO -   Test query result: (1,)
2024-10-31 03:52:39 - db_utils - INFO - Detailed database operations debugging completed
2024-10-31 03:52:39 - db_utils - INFO - Oppdatert skjema for customer
2024-10-31 03:52:39 - db_utils - INFO - Oppdatert skjema for feedback
2024-10-31 03:52:39 - db_utils - INFO - Oppdatert skjema for login_history
2024-10-31 03:52:39 - db_utils - INFO - Oppdatert skjema for stroing
2024-10-31 03:52:39 - db_utils - INFO - Oppdatert skjema for tunbroyting
2024-10-31 03:52:39 - db_utils - INFO - All database schemas verified and updated
2024-10-31 03:52:39 - db_utils - INFO - Oppdatert skjema for customer
2024-10-31 03:52:39 - db_utils - INFO - Oppdatert skjema for feedback
2024-10-31 03:52:39 - db_utils - INFO - Oppdatert skjema for login_history
2024-10-31 03:52:39 - db_utils - INFO - Oppdatert skjema for stroing
2024-10-31 03:52:39 - db_utils - INFO - Oppdatert skjema for tunbroyting
2024-10-31 03:52:39 - db_utils - INFO - All database schemas verified and updated
2024-10-31 03:52:39 - db_utils - INFO - Database already initialized. Skipping.
2024-10-31 03:52:39 - db_utils - INFO - Query executed successfully on login_history.db. Rows affected: -1
2024-10-31 03:52:39 - db_utils - INFO - login_history table structure is correct
2024-10-31 03:52:39 - customer_utils - INFO - Starting cabin user consistency check
2024-10-31 03:52:39 - utils - INFO - Attempting to load passwords from secrets
2024-10-31 03:52:39 - utils - INFO - Successfully loaded passwords. Number of entries: 94
2024-10-31 03:52:39 - customer_utils - INFO - Retrieved 94 passwords
2024-10-31 03:52:39 - customer_utils - INFO - Found 94 customers in database
2024-10-31 03:52:39 - customer_utils - INFO - Consistency check completed
2024-10-31 03:52:39 - customer_utils - INFO - Database connection closed
2024-10-31 03:52:39 - customer_utils - INFO - Validating customers and passwords
2024-10-31 03:52:39 - utils - INFO - Attempting to load passwords from secrets
2024-10-31 03:52:39 - utils - INFO - Successfully loaded passwords. Number of entries: 94
2024-10-31 03:52:39 - customer_utils - INFO - Customer and password validation complete
2024-10-31 03:52:39 - db_utils - INFO - Successfully created indexes for tunbroyting database
2024-10-31 03:52:39 - db_utils - INFO - Successfully created indexes for stroing database
2024-10-31 03:52:39 - db_utils - INFO - Successfully created indexes for feedback database
2024-10-31 03:52:39 - db_utils - INFO - Successfully created indexes for login_history database
2024-10-31 03:52:39 - db_utils - INFO - Successfully created indexes for customer database
2024-10-31 03:52:39 - db_utils - INFO - Database index creation completed
2024-10-31 03:52:39 - __main__ - INFO - Application initialization completed successfully
2024-10-31 03:52:39 - __main__ - INFO - Application initialization completed successfully
2024-10-31 03:52:39 - __main__ - INFO - Application setup complete
2024-10-31 03:52:39 - customer_utils - INFO - Successfully retrieved customer with ID: 999
2024-10-31 03:52:40 - __main__ - INFO - Application shutting down
2024-10-31 03:52:54 - __main__ - INFO - Added validate_user_input function to app.py
2024-10-31 03:52:54 - __main__ - INFO - Starting application initialization
2024-10-31 03:52:54 - db_utils - INFO - Starting detailed database operations debugging
2024-10-31 03:52:54 - db_utils - INFO - Debugging login_history database:
2024-10-31 03:52:54 - db_utils - INFO -   Database version: 0
2024-10-31 03:52:54 - db_utils - INFO -   Tables in login_history.db: ['login_history']
2024-10-31 03:52:54 - db_utils - INFO -   Structure of login_history table:
2024-10-31 03:52:54 - db_utils - INFO -     Column: id, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:52:54 - db_utils - INFO -     Column: login_time, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:52:54 - db_utils - INFO -     Column: success, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:52:54 - db_utils - INFO -   Indexes in login_history.db: ['idx_login_id', 'idx_login_time']
2024-10-31 03:52:54 - db_utils - INFO -   Row count in login_history: 427
2024-10-31 03:52:54 - db_utils - INFO -   Test query result: (1,)
2024-10-31 03:52:54 - db_utils - INFO - Debugging tunbroyting database:
2024-10-31 03:52:54 - db_utils - INFO -   Database version: 0
2024-10-31 03:52:54 - db_utils - INFO -   Tables in tunbroyting.db: ['tunbroyting_bestillinger']
2024-10-31 03:52:54 - db_utils - INFO -   Structure of tunbroyting_bestillinger table:
2024-10-31 03:52:54 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 03:52:54 - db_utils - INFO -     Column: bruker, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:52:54 - db_utils - INFO -     Column: ankomst_dato, Type: DATE, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:52:54 - db_utils - INFO -     Column: ankomst_tid, Type: TIME, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:52:54 - db_utils - INFO -     Column: avreise_dato, Type: DATE, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:52:54 - db_utils - INFO -     Column: avreise_tid, Type: TIME, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:52:54 - db_utils - INFO -     Column: abonnement_type, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:52:54 - db_utils - INFO -   Indexes in tunbroyting.db: ['idx_tunbroyting_bruker', 'idx_tunbroyting_ankomst_dato', 'idx_tunbroyting_avreise_dato', 'idx_tunbroyting_abonnement']
2024-10-31 03:52:54 - db_utils - INFO -   Row count in tunbroyting_bestillinger: 2
2024-10-31 03:52:54 - db_utils - INFO -   Test query result: (1,)
2024-10-31 03:52:54 - db_utils - INFO - Debugging stroing database:
2024-10-31 03:52:54 - db_utils - INFO -   Database version: 0
2024-10-31 03:52:54 - db_utils - INFO -   Tables in stroing.db: ['sqlite_sequence', 'stroing_bestillinger']
2024-10-31 03:52:54 - db_utils - INFO -   Structure of sqlite_sequence table:
2024-10-31 03:52:54 - db_utils - INFO -     Column: name, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:52:54 - db_utils - INFO -     Column: seq, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:52:54 - db_utils - INFO -   Structure of stroing_bestillinger table:
2024-10-31 03:52:54 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 03:52:54 - db_utils - INFO -     Column: bruker, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:52:54 - db_utils - INFO -     Column: bestillings_dato, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:52:54 - db_utils - INFO -     Column: onske_dato, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:52:54 - db_utils - INFO -   Indexes in stroing.db: ['idx_stroing_bruker', 'idx_stroing_onske_dato', 'idx_stroing_bestillings_dato']
2024-10-31 03:52:54 - db_utils - INFO -   Row count in sqlite_sequence: 1
2024-10-31 03:52:54 - db_utils - INFO -   Row count in stroing_bestillinger: 5
2024-10-31 03:52:54 - db_utils - INFO -   Test query result: (1,)
2024-10-31 03:52:54 - db_utils - INFO - Debugging feedback database:
2024-10-31 03:52:54 - db_utils - INFO -   Database version: 0
2024-10-31 03:52:54 - db_utils - INFO -   Tables in feedback.db: ['sqlite_sequence', 'feedback']
2024-10-31 03:52:54 - db_utils - INFO -   Structure of sqlite_sequence table:
2024-10-31 03:52:54 - db_utils - INFO -     Column: name, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:52:54 - db_utils - INFO -     Column: seq, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:52:54 - db_utils - INFO -   Structure of feedback table:
2024-10-31 03:52:54 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 03:52:54 - db_utils - INFO -     Column: type, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:52:54 - db_utils - INFO -     Column: datetime, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:52:54 - db_utils - INFO -     Column: comment, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:52:54 - db_utils - INFO -     Column: innsender, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:52:54 - db_utils - INFO -     Column: status, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:52:54 - db_utils - INFO -     Column: status_changed_by, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:52:54 - db_utils - INFO -     Column: status_changed_at, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:52:54 - db_utils - INFO -     Column: hidden, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:52:54 - db_utils - INFO -     Column: is_alert, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:52:54 - db_utils - INFO -     Column: display_on_weather, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:52:54 - db_utils - INFO -     Column: expiry_date, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:52:54 - db_utils - INFO -     Column: target_group, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 03:52:54 - db_utils - INFO -   Indexes in feedback.db: ['idx_feedback_datetime', 'idx_feedback_innsender', 'idx_feedback_status', 'idx_feedback_type']
2024-10-31 03:52:54 - db_utils - INFO -   Row count in sqlite_sequence: 1
2024-10-31 03:52:54 - db_utils - INFO -   Row count in feedback: 11
2024-10-31 03:52:54 - db_utils - INFO -   Test query result: (1,)
2024-10-31 03:52:54 - db_utils - INFO - Detailed database operations debugging completed
2024-10-31 03:52:54 - db_utils - INFO - Oppdatert skjema for customer
2024-10-31 03:52:54 - db_utils - INFO - Oppdatert skjema for feedback
2024-10-31 03:52:54 - db_utils - INFO - Oppdatert skjema for login_history
2024-10-31 03:52:54 - db_utils - INFO - Oppdatert skjema for stroing
2024-10-31 03:52:54 - db_utils - INFO - Oppdatert skjema for tunbroyting
2024-10-31 03:52:54 - db_utils - INFO - All database schemas verified and updated
2024-10-31 03:52:54 - db_utils - INFO - Oppdatert skjema for customer
2024-10-31 03:52:54 - db_utils - INFO - Oppdatert skjema for feedback
2024-10-31 03:52:54 - db_utils - INFO - Oppdatert skjema for login_history
2024-10-31 03:52:54 - db_utils - INFO - Oppdatert skjema for stroing
2024-10-31 03:52:54 - db_utils - INFO - Oppdatert skjema for tunbroyting
2024-10-31 03:52:54 - db_utils - INFO - All database schemas verified and updated
2024-10-31 03:52:54 - db_utils - INFO - Database already initialized. Skipping.
2024-10-31 03:52:54 - db_utils - INFO - Query executed successfully on login_history.db. Rows affected: -1
2024-10-31 03:52:54 - db_utils - INFO - login_history table structure is correct
2024-10-31 03:52:54 - customer_utils - INFO - Starting cabin user consistency check
2024-10-31 03:52:54 - utils - INFO - Attempting to load passwords from secrets
2024-10-31 03:52:54 - utils - INFO - Successfully loaded passwords. Number of entries: 94
2024-10-31 03:52:54 - customer_utils - INFO - Retrieved 94 passwords
2024-10-31 03:52:54 - customer_utils - INFO - Found 94 customers in database
2024-10-31 03:52:54 - customer_utils - INFO - Consistency check completed
2024-10-31 03:52:54 - customer_utils - INFO - Database connection closed
2024-10-31 03:52:54 - customer_utils - INFO - Validating customers and passwords
2024-10-31 03:52:54 - utils - INFO - Attempting to load passwords from secrets
2024-10-31 03:52:54 - utils - INFO - Successfully loaded passwords. Number of entries: 94
2024-10-31 03:52:54 - customer_utils - INFO - Customer and password validation complete
2024-10-31 03:52:54 - db_utils - INFO - Successfully created indexes for tunbroyting database
2024-10-31 03:52:54 - db_utils - INFO - Successfully created indexes for stroing database
2024-10-31 03:52:54 - db_utils - INFO - Successfully created indexes for feedback database
2024-10-31 03:52:54 - db_utils - INFO - Successfully created indexes for login_history database
2024-10-31 03:52:54 - db_utils - INFO - Successfully created indexes for customer database
2024-10-31 03:52:54 - db_utils - INFO - Database index creation completed
2024-10-31 03:52:54 - __main__ - INFO - Application initialization completed successfully
2024-10-31 03:52:54 - __main__ - INFO - Application initialization completed successfully
2024-10-31 03:52:54 - __main__ - INFO - Application setup complete
2024-10-31 03:52:54 - customer_utils - INFO - Successfully retrieved customer with ID: 999
2024-10-31 03:53:03 - __main__ - INFO - Application shutting down
2024-10-31 04:03:21 - db_utils - INFO - Starting to close all database connections
2024-10-31 04:03:21 - db_utils - INFO - Finished closing all database connections and cleaning up files
2024-10-31 04:06:20 - __main__ - INFO - Added validate_user_input function to app.py
2024-10-31 04:06:20 - __main__ - INFO - Starting application initialization
2024-10-31 04:06:20 - db_utils - INFO - Starting detailed database operations debugging
2024-10-31 04:06:20 - db_utils - INFO - Debugging login_history database:
2024-10-31 04:06:20 - db_utils - INFO -   Database version: 0
2024-10-31 04:06:20 - db_utils - INFO -   Tables in login_history.db: ['login_history']
2024-10-31 04:06:20 - db_utils - INFO -   Structure of login_history table:
2024-10-31 04:06:20 - db_utils - INFO -     Column: id, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:06:20 - db_utils - INFO -     Column: login_time, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:06:20 - db_utils - INFO -     Column: success, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:06:20 - db_utils - INFO -   Indexes in login_history.db: ['idx_login_id', 'idx_login_time']
2024-10-31 04:06:20 - db_utils - INFO -   Row count in login_history: 427
2024-10-31 04:06:20 - db_utils - INFO -   Test query result: (1,)
2024-10-31 04:06:20 - db_utils - INFO - Debugging tunbroyting database:
2024-10-31 04:06:20 - db_utils - INFO -   Database version: 0
2024-10-31 04:06:20 - db_utils - INFO -   Tables in tunbroyting.db: ['tunbroyting_bestillinger']
2024-10-31 04:06:20 - db_utils - INFO -   Structure of tunbroyting_bestillinger table:
2024-10-31 04:06:20 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 04:06:20 - db_utils - INFO -     Column: bruker, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:06:20 - db_utils - INFO -     Column: ankomst_dato, Type: DATE, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:06:20 - db_utils - INFO -     Column: ankomst_tid, Type: TIME, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:06:20 - db_utils - INFO -     Column: avreise_dato, Type: DATE, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:06:20 - db_utils - INFO -     Column: avreise_tid, Type: TIME, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:06:20 - db_utils - INFO -     Column: abonnement_type, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:06:20 - db_utils - INFO -   Indexes in tunbroyting.db: ['idx_tunbroyting_bruker', 'idx_tunbroyting_ankomst_dato', 'idx_tunbroyting_avreise_dato', 'idx_tunbroyting_abonnement']
2024-10-31 04:06:20 - db_utils - INFO -   Row count in tunbroyting_bestillinger: 2
2024-10-31 04:06:20 - db_utils - INFO -   Test query result: (1,)
2024-10-31 04:06:20 - db_utils - INFO - Debugging stroing database:
2024-10-31 04:06:20 - db_utils - INFO -   Database version: 0
2024-10-31 04:06:20 - db_utils - INFO -   Tables in stroing.db: ['sqlite_sequence', 'stroing_bestillinger']
2024-10-31 04:06:20 - db_utils - INFO -   Structure of sqlite_sequence table:
2024-10-31 04:06:20 - db_utils - INFO -     Column: name, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:06:20 - db_utils - INFO -     Column: seq, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:06:20 - db_utils - INFO -   Structure of stroing_bestillinger table:
2024-10-31 04:06:20 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 04:06:20 - db_utils - INFO -     Column: bruker, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:06:20 - db_utils - INFO -     Column: bestillings_dato, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:06:20 - db_utils - INFO -     Column: onske_dato, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:06:20 - db_utils - INFO -   Indexes in stroing.db: ['idx_stroing_bruker', 'idx_stroing_onske_dato', 'idx_stroing_bestillings_dato']
2024-10-31 04:06:20 - db_utils - INFO -   Row count in sqlite_sequence: 1
2024-10-31 04:06:20 - db_utils - INFO -   Row count in stroing_bestillinger: 5
2024-10-31 04:06:20 - db_utils - INFO -   Test query result: (1,)
2024-10-31 04:06:20 - db_utils - INFO - Debugging feedback database:
2024-10-31 04:06:20 - db_utils - INFO -   Database version: 0
2024-10-31 04:06:20 - db_utils - INFO -   Tables in feedback.db: ['sqlite_sequence', 'feedback']
2024-10-31 04:06:20 - db_utils - INFO -   Structure of sqlite_sequence table:
2024-10-31 04:06:20 - db_utils - INFO -     Column: name, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:06:20 - db_utils - INFO -     Column: seq, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:06:20 - db_utils - INFO -   Structure of feedback table:
2024-10-31 04:06:20 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 04:06:20 - db_utils - INFO -     Column: type, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:06:20 - db_utils - INFO -     Column: datetime, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:06:20 - db_utils - INFO -     Column: comment, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:06:20 - db_utils - INFO -     Column: innsender, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:06:20 - db_utils - INFO -     Column: status, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:06:20 - db_utils - INFO -     Column: status_changed_by, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:06:20 - db_utils - INFO -     Column: status_changed_at, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:06:20 - db_utils - INFO -     Column: hidden, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:06:20 - db_utils - INFO -     Column: is_alert, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:06:20 - db_utils - INFO -     Column: display_on_weather, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:06:20 - db_utils - INFO -     Column: expiry_date, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:06:20 - db_utils - INFO -     Column: target_group, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:06:20 - db_utils - INFO -   Indexes in feedback.db: ['idx_feedback_datetime', 'idx_feedback_innsender', 'idx_feedback_status', 'idx_feedback_type']
2024-10-31 04:06:20 - db_utils - INFO -   Row count in sqlite_sequence: 1
2024-10-31 04:06:20 - db_utils - INFO -   Row count in feedback: 11
2024-10-31 04:06:20 - db_utils - INFO -   Test query result: (1,)
2024-10-31 04:06:20 - db_utils - INFO - Detailed database operations debugging completed
2024-10-31 04:06:20 - db_utils - INFO - Oppdatert skjema for customer
2024-10-31 04:06:20 - db_utils - INFO - Oppdatert skjema for feedback
2024-10-31 04:06:20 - db_utils - INFO - Oppdatert skjema for login_history
2024-10-31 04:06:20 - db_utils - INFO - Oppdatert skjema for stroing
2024-10-31 04:06:20 - db_utils - INFO - Oppdatert skjema for tunbroyting
2024-10-31 04:06:20 - db_utils - INFO - All database schemas verified and updated
2024-10-31 04:06:20 - db_utils - INFO - Oppdatert skjema for customer
2024-10-31 04:06:20 - db_utils - INFO - Oppdatert skjema for feedback
2024-10-31 04:06:20 - db_utils - INFO - Oppdatert skjema for login_history
2024-10-31 04:06:20 - db_utils - INFO - Oppdatert skjema for stroing
2024-10-31 04:06:20 - db_utils - INFO - Oppdatert skjema for tunbroyting
2024-10-31 04:06:20 - db_utils - INFO - All database schemas verified and updated
2024-10-31 04:06:20 - db_utils - INFO - Database login_history initialized, updated, and optimized
2024-10-31 04:06:20 - db_utils - INFO - Database tunbroyting initialized, updated, and optimized
2024-10-31 04:06:20 - db_utils - INFO - Database stroing initialized, updated, and optimized
2024-10-31 04:06:20 - db_utils - INFO - Database feedback initialized, updated, and optimized
2024-10-31 04:06:20 - db_utils - INFO - Database customer initialized, updated, and optimized
2024-10-31 04:06:20 - db_utils - INFO - Successfully created indexes for tunbroyting database
2024-10-31 04:06:20 - db_utils - INFO - Successfully created indexes for stroing database
2024-10-31 04:06:20 - db_utils - INFO - Successfully created indexes for feedback database
2024-10-31 04:06:20 - db_utils - INFO - Successfully created indexes for login_history database
2024-10-31 04:06:20 - db_utils - INFO - Successfully created indexes for customer database
2024-10-31 04:06:20 - db_utils - INFO - Database index creation completed
2024-10-31 04:06:20 - db_utils - INFO - Database indexes created
2024-10-31 04:06:20 - db_utils - INFO - Successfully verified connection to stroing.db
2024-10-31 04:06:20 - db_utils - INFO - Successfully verified connection to tunbroyting.db
2024-10-31 04:06:20 - db_utils - INFO - Successfully verified connection to feedback.db
2024-10-31 04:06:20 - db_utils - INFO - Successfully verified connection to login_history.db
2024-10-31 04:06:20 - db_utils - INFO - Successfully verified connection to customer.db
2024-10-31 04:06:20 - db_utils - INFO - Database connections verified
2024-10-31 04:06:20 - db_utils - INFO - All databases initialized, updated, and verified
2024-10-31 04:06:20 - db_utils - INFO - Query executed successfully on login_history.db. Rows affected: -1
2024-10-31 04:06:20 - db_utils - INFO - login_history table structure is correct
2024-10-31 04:06:20 - customer_utils - INFO - Starting cabin user consistency check
2024-10-31 04:06:20 - utils - INFO - Attempting to load passwords from secrets
2024-10-31 04:06:20 - utils - INFO - Successfully loaded passwords. Number of entries: 94
2024-10-31 04:06:20 - customer_utils - INFO - Retrieved 94 passwords
2024-10-31 04:06:20 - customer_utils - INFO - Found 94 customers in database
2024-10-31 04:06:20 - customer_utils - INFO - Consistency check completed
2024-10-31 04:06:20 - customer_utils - INFO - Database connection closed
2024-10-31 04:06:20 - customer_utils - INFO - Validating customers and passwords
2024-10-31 04:06:20 - utils - INFO - Attempting to load passwords from secrets
2024-10-31 04:06:20 - utils - INFO - Successfully loaded passwords. Number of entries: 94
2024-10-31 04:06:20 - customer_utils - INFO - Customer and password validation complete
2024-10-31 04:06:20 - db_utils - INFO - Successfully created indexes for tunbroyting database
2024-10-31 04:06:20 - db_utils - INFO - Successfully created indexes for stroing database
2024-10-31 04:06:20 - db_utils - INFO - Successfully created indexes for feedback database
2024-10-31 04:06:20 - db_utils - INFO - Successfully created indexes for login_history database
2024-10-31 04:06:20 - db_utils - INFO - Successfully created indexes for customer database
2024-10-31 04:06:20 - db_utils - INFO - Database index creation completed
2024-10-31 04:06:20 - __main__ - INFO - Application initialization completed successfully
2024-10-31 04:06:20 - __main__ - INFO - Application initialization completed successfully
2024-10-31 04:06:20 - __main__ - INFO - Application setup complete
2024-10-31 04:06:20 - __main__ - INFO - Application shutting down
2024-10-31 04:06:28 - __main__ - INFO - Added validate_user_input function to app.py
2024-10-31 04:06:28 - __main__ - INFO - Starting application initialization
2024-10-31 04:06:28 - db_utils - INFO - Starting detailed database operations debugging
2024-10-31 04:06:28 - db_utils - INFO - Debugging login_history database:
2024-10-31 04:06:28 - db_utils - INFO -   Database version: 0
2024-10-31 04:06:28 - db_utils - INFO -   Tables in login_history.db: ['login_history']
2024-10-31 04:06:28 - db_utils - INFO -   Structure of login_history table:
2024-10-31 04:06:28 - db_utils - INFO -     Column: id, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:06:28 - db_utils - INFO -     Column: login_time, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:06:28 - db_utils - INFO -     Column: success, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:06:28 - db_utils - INFO -   Indexes in login_history.db: ['idx_login_id', 'idx_login_time']
2024-10-31 04:06:28 - db_utils - INFO -   Row count in login_history: 427
2024-10-31 04:06:28 - db_utils - INFO -   Test query result: (1,)
2024-10-31 04:06:28 - db_utils - INFO - Debugging tunbroyting database:
2024-10-31 04:06:28 - db_utils - INFO -   Database version: 0
2024-10-31 04:06:28 - db_utils - INFO -   Tables in tunbroyting.db: ['tunbroyting_bestillinger']
2024-10-31 04:06:28 - db_utils - INFO -   Structure of tunbroyting_bestillinger table:
2024-10-31 04:06:28 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 04:06:28 - db_utils - INFO -     Column: bruker, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:06:28 - db_utils - INFO -     Column: ankomst_dato, Type: DATE, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:06:28 - db_utils - INFO -     Column: ankomst_tid, Type: TIME, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:06:28 - db_utils - INFO -     Column: avreise_dato, Type: DATE, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:06:28 - db_utils - INFO -     Column: avreise_tid, Type: TIME, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:06:28 - db_utils - INFO -     Column: abonnement_type, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:06:28 - db_utils - INFO -   Indexes in tunbroyting.db: ['idx_tunbroyting_bruker', 'idx_tunbroyting_ankomst_dato', 'idx_tunbroyting_avreise_dato', 'idx_tunbroyting_abonnement']
2024-10-31 04:06:28 - db_utils - INFO -   Row count in tunbroyting_bestillinger: 2
2024-10-31 04:06:28 - db_utils - INFO -   Test query result: (1,)
2024-10-31 04:06:28 - db_utils - INFO - Debugging stroing database:
2024-10-31 04:06:28 - db_utils - INFO -   Database version: 0
2024-10-31 04:06:28 - db_utils - INFO -   Tables in stroing.db: ['sqlite_sequence', 'stroing_bestillinger']
2024-10-31 04:06:28 - db_utils - INFO -   Structure of sqlite_sequence table:
2024-10-31 04:06:28 - db_utils - INFO -     Column: name, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:06:28 - db_utils - INFO -     Column: seq, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:06:28 - db_utils - INFO -   Structure of stroing_bestillinger table:
2024-10-31 04:06:28 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 04:06:28 - db_utils - INFO -     Column: bruker, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:06:28 - db_utils - INFO -     Column: bestillings_dato, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:06:28 - db_utils - INFO -     Column: onske_dato, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:06:28 - db_utils - INFO -   Indexes in stroing.db: ['idx_stroing_bruker', 'idx_stroing_onske_dato', 'idx_stroing_bestillings_dato']
2024-10-31 04:06:28 - db_utils - INFO -   Row count in sqlite_sequence: 1
2024-10-31 04:06:28 - db_utils - INFO -   Row count in stroing_bestillinger: 5
2024-10-31 04:06:28 - db_utils - INFO -   Test query result: (1,)
2024-10-31 04:06:28 - db_utils - INFO - Debugging feedback database:
2024-10-31 04:06:28 - db_utils - INFO -   Database version: 0
2024-10-31 04:06:28 - db_utils - INFO -   Tables in feedback.db: ['sqlite_sequence', 'feedback']
2024-10-31 04:06:28 - db_utils - INFO -   Structure of sqlite_sequence table:
2024-10-31 04:06:28 - db_utils - INFO -     Column: name, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:06:28 - db_utils - INFO -     Column: seq, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:06:28 - db_utils - INFO -   Structure of feedback table:
2024-10-31 04:06:28 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 04:06:28 - db_utils - INFO -     Column: type, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:06:28 - db_utils - INFO -     Column: datetime, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:06:28 - db_utils - INFO -     Column: comment, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:06:28 - db_utils - INFO -     Column: innsender, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:06:28 - db_utils - INFO -     Column: status, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:06:28 - db_utils - INFO -     Column: status_changed_by, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:06:28 - db_utils - INFO -     Column: status_changed_at, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:06:28 - db_utils - INFO -     Column: hidden, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:06:28 - db_utils - INFO -     Column: is_alert, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:06:28 - db_utils - INFO -     Column: display_on_weather, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:06:28 - db_utils - INFO -     Column: expiry_date, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:06:28 - db_utils - INFO -     Column: target_group, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:06:28 - db_utils - INFO -   Indexes in feedback.db: ['idx_feedback_datetime', 'idx_feedback_innsender', 'idx_feedback_status', 'idx_feedback_type']
2024-10-31 04:06:28 - db_utils - INFO -   Row count in sqlite_sequence: 1
2024-10-31 04:06:28 - db_utils - INFO -   Row count in feedback: 11
2024-10-31 04:06:28 - db_utils - INFO -   Test query result: (1,)
2024-10-31 04:06:28 - db_utils - INFO - Detailed database operations debugging completed
2024-10-31 04:06:28 - db_utils - INFO - Oppdatert skjema for customer
2024-10-31 04:06:28 - db_utils - INFO - Oppdatert skjema for feedback
2024-10-31 04:06:28 - db_utils - INFO - Oppdatert skjema for login_history
2024-10-31 04:06:28 - db_utils - INFO - Oppdatert skjema for stroing
2024-10-31 04:06:28 - db_utils - INFO - Oppdatert skjema for tunbroyting
2024-10-31 04:06:28 - db_utils - INFO - All database schemas verified and updated
2024-10-31 04:06:28 - db_utils - INFO - Oppdatert skjema for customer
2024-10-31 04:06:28 - db_utils - INFO - Oppdatert skjema for feedback
2024-10-31 04:06:28 - db_utils - INFO - Oppdatert skjema for login_history
2024-10-31 04:06:28 - db_utils - INFO - Oppdatert skjema for stroing
2024-10-31 04:06:28 - db_utils - INFO - Oppdatert skjema for tunbroyting
2024-10-31 04:06:28 - db_utils - INFO - All database schemas verified and updated
2024-10-31 04:06:28 - db_utils - INFO - Database already initialized. Skipping.
2024-10-31 04:06:28 - db_utils - INFO - Query executed successfully on login_history.db. Rows affected: -1
2024-10-31 04:06:28 - db_utils - INFO - login_history table structure is correct
2024-10-31 04:06:28 - customer_utils - INFO - Starting cabin user consistency check
2024-10-31 04:06:28 - utils - INFO - Attempting to load passwords from secrets
2024-10-31 04:06:28 - utils - INFO - Successfully loaded passwords. Number of entries: 94
2024-10-31 04:06:28 - customer_utils - INFO - Retrieved 94 passwords
2024-10-31 04:06:28 - customer_utils - INFO - Found 94 customers in database
2024-10-31 04:06:28 - customer_utils - INFO - Consistency check completed
2024-10-31 04:06:28 - customer_utils - INFO - Database connection closed
2024-10-31 04:06:28 - customer_utils - INFO - Validating customers and passwords
2024-10-31 04:06:28 - utils - INFO - Attempting to load passwords from secrets
2024-10-31 04:06:28 - utils - INFO - Successfully loaded passwords. Number of entries: 94
2024-10-31 04:06:28 - customer_utils - INFO - Customer and password validation complete
2024-10-31 04:06:28 - db_utils - INFO - Successfully created indexes for tunbroyting database
2024-10-31 04:06:28 - db_utils - INFO - Successfully created indexes for stroing database
2024-10-31 04:06:28 - db_utils - INFO - Successfully created indexes for feedback database
2024-10-31 04:06:28 - db_utils - INFO - Successfully created indexes for login_history database
2024-10-31 04:06:28 - db_utils - INFO - Successfully created indexes for customer database
2024-10-31 04:06:28 - db_utils - INFO - Database index creation completed
2024-10-31 04:06:28 - __main__ - INFO - Application initialization completed successfully
2024-10-31 04:06:28 - __main__ - INFO - Application initialization completed successfully
2024-10-31 04:06:28 - __main__ - INFO - Application setup complete
2024-10-31 04:06:28 - auth_utils - INFO - Login attempt for ID: 999
2024-10-31 04:06:28 - db_utils - INFO - DATABASE_PATH: /Users/tor.inge.jossang@aftenbladet.no/dev/gullingen
2024-10-31 04:06:28 - db_utils - INFO - Full database path: /Users/tor.inge.jossang@aftenbladet.no/dev/gullingen/login_history.db
2024-10-31 04:06:28 - db_utils - INFO - Attempting to create database engine...
2024-10-31 04:06:28 - db_utils - INFO - Database engine created successfully for login_history.db
2024-10-31 04:06:28 - auth_utils - INFO - Rate limit check passed for user 999
2024-10-31 04:06:28 - auth_utils - INFO - User 999 authenticated successfully
2024-10-31 04:06:28 - customer_utils - INFO - Successfully retrieved customer with ID: 999
2024-10-31 04:06:28 - db_utils - INFO - Database file /Users/tor.inge.jossang@aftenbladet.no/dev/gullingen/login_history.db exists.
2024-10-31 04:06:28 - db_utils - INFO - Query executed successfully on login_history.db. Rows affected: 1
2024-10-31 04:06:28 - auth_utils - INFO - Successful login for ID: 999
2024-10-31 04:06:28 - auth_utils - INFO - Successful login and logging for ID: 999
2024-10-31 04:06:28 - db_utils - INFO - DATABASE_PATH: /Users/tor.inge.jossang@aftenbladet.no/dev/gullingen
2024-10-31 04:06:28 - db_utils - INFO - Full database path: /Users/tor.inge.jossang@aftenbladet.no/dev/gullingen/login_history.db
2024-10-31 04:06:28 - db_utils - INFO - Attempting to create database engine...
2024-10-31 04:06:28 - db_utils - INFO - Database engine created successfully for login_history.db
2024-10-31 04:06:28 - auth_utils - INFO - Rate limit reset for user 999
2024-10-31 04:06:28 - __main__ - INFO - Application shutting down
2024-10-31 04:06:29 - __main__ - INFO - Added validate_user_input function to app.py
2024-10-31 04:06:29 - __main__ - INFO - Starting application initialization
2024-10-31 04:06:29 - db_utils - INFO - Starting detailed database operations debugging
2024-10-31 04:06:29 - db_utils - INFO - Debugging login_history database:
2024-10-31 04:06:29 - db_utils - INFO -   Database version: 0
2024-10-31 04:06:29 - db_utils - INFO -   Tables in login_history.db: ['login_history']
2024-10-31 04:06:29 - db_utils - INFO -   Structure of login_history table:
2024-10-31 04:06:29 - db_utils - INFO -     Column: id, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:06:29 - db_utils - INFO -     Column: login_time, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:06:29 - db_utils - INFO -     Column: success, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:06:29 - db_utils - INFO -   Indexes in login_history.db: ['idx_login_id', 'idx_login_time']
2024-10-31 04:06:29 - db_utils - INFO -   Row count in login_history: 428
2024-10-31 04:06:29 - db_utils - INFO -   Test query result: (1,)
2024-10-31 04:06:29 - db_utils - INFO - Debugging tunbroyting database:
2024-10-31 04:06:29 - db_utils - INFO -   Database version: 0
2024-10-31 04:06:29 - db_utils - INFO -   Tables in tunbroyting.db: ['tunbroyting_bestillinger']
2024-10-31 04:06:29 - db_utils - INFO -   Structure of tunbroyting_bestillinger table:
2024-10-31 04:06:29 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 04:06:29 - db_utils - INFO -     Column: bruker, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:06:29 - db_utils - INFO -     Column: ankomst_dato, Type: DATE, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:06:29 - db_utils - INFO -     Column: ankomst_tid, Type: TIME, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:06:29 - db_utils - INFO -     Column: avreise_dato, Type: DATE, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:06:29 - db_utils - INFO -     Column: avreise_tid, Type: TIME, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:06:29 - db_utils - INFO -     Column: abonnement_type, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:06:29 - db_utils - INFO -   Indexes in tunbroyting.db: ['idx_tunbroyting_bruker', 'idx_tunbroyting_ankomst_dato', 'idx_tunbroyting_avreise_dato', 'idx_tunbroyting_abonnement']
2024-10-31 04:06:29 - db_utils - INFO -   Row count in tunbroyting_bestillinger: 2
2024-10-31 04:06:29 - db_utils - INFO -   Test query result: (1,)
2024-10-31 04:06:29 - db_utils - INFO - Debugging stroing database:
2024-10-31 04:06:29 - db_utils - INFO -   Database version: 0
2024-10-31 04:06:29 - db_utils - INFO -   Tables in stroing.db: ['sqlite_sequence', 'stroing_bestillinger']
2024-10-31 04:06:29 - db_utils - INFO -   Structure of sqlite_sequence table:
2024-10-31 04:06:29 - db_utils - INFO -     Column: name, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:06:29 - db_utils - INFO -     Column: seq, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:06:29 - db_utils - INFO -   Structure of stroing_bestillinger table:
2024-10-31 04:06:29 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 04:06:29 - db_utils - INFO -     Column: bruker, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:06:29 - db_utils - INFO -     Column: bestillings_dato, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:06:29 - db_utils - INFO -     Column: onske_dato, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:06:29 - db_utils - INFO -   Indexes in stroing.db: ['idx_stroing_bruker', 'idx_stroing_onske_dato', 'idx_stroing_bestillings_dato']
2024-10-31 04:06:29 - db_utils - INFO -   Row count in sqlite_sequence: 1
2024-10-31 04:06:29 - db_utils - INFO -   Row count in stroing_bestillinger: 5
2024-10-31 04:06:29 - db_utils - INFO -   Test query result: (1,)
2024-10-31 04:06:29 - db_utils - INFO - Debugging feedback database:
2024-10-31 04:06:29 - db_utils - INFO -   Database version: 0
2024-10-31 04:06:29 - db_utils - INFO -   Tables in feedback.db: ['sqlite_sequence', 'feedback']
2024-10-31 04:06:29 - db_utils - INFO -   Structure of sqlite_sequence table:
2024-10-31 04:06:29 - db_utils - INFO -     Column: name, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:06:29 - db_utils - INFO -     Column: seq, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:06:29 - db_utils - INFO -   Structure of feedback table:
2024-10-31 04:06:29 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 04:06:29 - db_utils - INFO -     Column: type, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:06:29 - db_utils - INFO -     Column: datetime, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:06:29 - db_utils - INFO -     Column: comment, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:06:29 - db_utils - INFO -     Column: innsender, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:06:29 - db_utils - INFO -     Column: status, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:06:29 - db_utils - INFO -     Column: status_changed_by, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:06:29 - db_utils - INFO -     Column: status_changed_at, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:06:29 - db_utils - INFO -     Column: hidden, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:06:29 - db_utils - INFO -     Column: is_alert, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:06:29 - db_utils - INFO -     Column: display_on_weather, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:06:29 - db_utils - INFO -     Column: expiry_date, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:06:29 - db_utils - INFO -     Column: target_group, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:06:29 - db_utils - INFO -   Indexes in feedback.db: ['idx_feedback_datetime', 'idx_feedback_innsender', 'idx_feedback_status', 'idx_feedback_type']
2024-10-31 04:06:29 - db_utils - INFO -   Row count in sqlite_sequence: 1
2024-10-31 04:06:29 - db_utils - INFO -   Row count in feedback: 11
2024-10-31 04:06:29 - db_utils - INFO -   Test query result: (1,)
2024-10-31 04:06:29 - db_utils - INFO - Detailed database operations debugging completed
2024-10-31 04:06:29 - db_utils - INFO - Oppdatert skjema for customer
2024-10-31 04:06:29 - db_utils - INFO - Oppdatert skjema for feedback
2024-10-31 04:06:29 - db_utils - INFO - Oppdatert skjema for login_history
2024-10-31 04:06:29 - db_utils - INFO - Oppdatert skjema for stroing
2024-10-31 04:06:29 - db_utils - INFO - Oppdatert skjema for tunbroyting
2024-10-31 04:06:29 - db_utils - INFO - All database schemas verified and updated
2024-10-31 04:06:29 - db_utils - INFO - Oppdatert skjema for customer
2024-10-31 04:06:29 - db_utils - INFO - Oppdatert skjema for feedback
2024-10-31 04:06:29 - db_utils - INFO - Oppdatert skjema for login_history
2024-10-31 04:06:29 - db_utils - INFO - Oppdatert skjema for stroing
2024-10-31 04:06:29 - db_utils - INFO - Oppdatert skjema for tunbroyting
2024-10-31 04:06:29 - db_utils - INFO - All database schemas verified and updated
2024-10-31 04:06:29 - db_utils - INFO - Database already initialized. Skipping.
2024-10-31 04:06:29 - db_utils - INFO - Query executed successfully on login_history.db. Rows affected: -1
2024-10-31 04:06:29 - db_utils - INFO - login_history table structure is correct
2024-10-31 04:06:29 - customer_utils - INFO - Starting cabin user consistency check
2024-10-31 04:06:29 - utils - INFO - Attempting to load passwords from secrets
2024-10-31 04:06:29 - utils - INFO - Successfully loaded passwords. Number of entries: 94
2024-10-31 04:06:29 - customer_utils - INFO - Retrieved 94 passwords
2024-10-31 04:06:29 - customer_utils - INFO - Found 94 customers in database
2024-10-31 04:06:29 - customer_utils - INFO - Consistency check completed
2024-10-31 04:06:29 - customer_utils - INFO - Database connection closed
2024-10-31 04:06:29 - customer_utils - INFO - Validating customers and passwords
2024-10-31 04:06:29 - utils - INFO - Attempting to load passwords from secrets
2024-10-31 04:06:29 - utils - INFO - Successfully loaded passwords. Number of entries: 94
2024-10-31 04:06:29 - customer_utils - INFO - Customer and password validation complete
2024-10-31 04:06:29 - db_utils - INFO - Successfully created indexes for tunbroyting database
2024-10-31 04:06:29 - db_utils - INFO - Successfully created indexes for stroing database
2024-10-31 04:06:29 - db_utils - INFO - Successfully created indexes for feedback database
2024-10-31 04:06:29 - db_utils - INFO - Successfully created indexes for login_history database
2024-10-31 04:06:29 - db_utils - INFO - Successfully created indexes for customer database
2024-10-31 04:06:29 - db_utils - INFO - Database index creation completed
2024-10-31 04:06:29 - __main__ - INFO - Application initialization completed successfully
2024-10-31 04:06:29 - __main__ - INFO - Application initialization completed successfully
2024-10-31 04:06:29 - __main__ - INFO - Application setup complete
2024-10-31 04:06:29 - customer_utils - INFO - Successfully retrieved customer with ID: 999
2024-10-31 04:06:29 - alert_utils - INFO - Fetched 1 alerts. only_today=False, include_expired=False
2024-10-31 04:06:29 - tun_utils - WARNING - hent_bestillinger() is deprecated, use get_bookings() instead
2024-10-31 04:06:29 - tun_utils - INFO - Starting get_bookings with start_date=None, end_date=None
2024-10-31 04:06:29 - tun_utils - INFO - Successfully retrieved 2 bookings
2024-10-31 04:06:29 - __main__ - INFO - Application shutting down
2024-10-31 04:06:32 - __main__ - INFO - Added validate_user_input function to app.py
2024-10-31 04:06:32 - __main__ - INFO - Starting application initialization
2024-10-31 04:06:32 - db_utils - INFO - Starting detailed database operations debugging
2024-10-31 04:06:32 - db_utils - INFO - Debugging login_history database:
2024-10-31 04:06:32 - db_utils - INFO -   Database version: 0
2024-10-31 04:06:32 - db_utils - INFO -   Tables in login_history.db: ['login_history']
2024-10-31 04:06:32 - db_utils - INFO -   Structure of login_history table:
2024-10-31 04:06:32 - db_utils - INFO -     Column: id, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:06:32 - db_utils - INFO -     Column: login_time, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:06:32 - db_utils - INFO -     Column: success, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:06:32 - db_utils - INFO -   Indexes in login_history.db: ['idx_login_id', 'idx_login_time']
2024-10-31 04:06:32 - db_utils - INFO -   Row count in login_history: 428
2024-10-31 04:06:32 - db_utils - INFO -   Test query result: (1,)
2024-10-31 04:06:32 - db_utils - INFO - Debugging tunbroyting database:
2024-10-31 04:06:32 - db_utils - INFO -   Database version: 0
2024-10-31 04:06:32 - db_utils - INFO -   Tables in tunbroyting.db: ['tunbroyting_bestillinger']
2024-10-31 04:06:32 - db_utils - INFO -   Structure of tunbroyting_bestillinger table:
2024-10-31 04:06:32 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 04:06:32 - db_utils - INFO -     Column: bruker, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:06:32 - db_utils - INFO -     Column: ankomst_dato, Type: DATE, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:06:32 - db_utils - INFO -     Column: ankomst_tid, Type: TIME, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:06:32 - db_utils - INFO -     Column: avreise_dato, Type: DATE, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:06:32 - db_utils - INFO -     Column: avreise_tid, Type: TIME, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:06:32 - db_utils - INFO -     Column: abonnement_type, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:06:32 - db_utils - INFO -   Indexes in tunbroyting.db: ['idx_tunbroyting_bruker', 'idx_tunbroyting_ankomst_dato', 'idx_tunbroyting_avreise_dato', 'idx_tunbroyting_abonnement']
2024-10-31 04:06:32 - db_utils - INFO -   Row count in tunbroyting_bestillinger: 2
2024-10-31 04:06:32 - db_utils - INFO -   Test query result: (1,)
2024-10-31 04:06:32 - db_utils - INFO - Debugging stroing database:
2024-10-31 04:06:32 - db_utils - INFO -   Database version: 0
2024-10-31 04:06:32 - db_utils - INFO -   Tables in stroing.db: ['sqlite_sequence', 'stroing_bestillinger']
2024-10-31 04:06:32 - db_utils - INFO -   Structure of sqlite_sequence table:
2024-10-31 04:06:32 - db_utils - INFO -     Column: name, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:06:32 - db_utils - INFO -     Column: seq, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:06:32 - db_utils - INFO -   Structure of stroing_bestillinger table:
2024-10-31 04:06:32 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 04:06:32 - db_utils - INFO -     Column: bruker, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:06:32 - db_utils - INFO -     Column: bestillings_dato, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:06:32 - db_utils - INFO -     Column: onske_dato, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:06:32 - db_utils - INFO -   Indexes in stroing.db: ['idx_stroing_bruker', 'idx_stroing_onske_dato', 'idx_stroing_bestillings_dato']
2024-10-31 04:06:32 - db_utils - INFO -   Row count in sqlite_sequence: 1
2024-10-31 04:06:32 - db_utils - INFO -   Row count in stroing_bestillinger: 5
2024-10-31 04:06:32 - db_utils - INFO -   Test query result: (1,)
2024-10-31 04:06:32 - db_utils - INFO - Debugging feedback database:
2024-10-31 04:06:32 - db_utils - INFO -   Database version: 0
2024-10-31 04:06:32 - db_utils - INFO -   Tables in feedback.db: ['sqlite_sequence', 'feedback']
2024-10-31 04:06:32 - db_utils - INFO -   Structure of sqlite_sequence table:
2024-10-31 04:06:32 - db_utils - INFO -     Column: name, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:06:32 - db_utils - INFO -     Column: seq, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:06:32 - db_utils - INFO -   Structure of feedback table:
2024-10-31 04:06:32 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 04:06:32 - db_utils - INFO -     Column: type, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:06:32 - db_utils - INFO -     Column: datetime, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:06:32 - db_utils - INFO -     Column: comment, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:06:32 - db_utils - INFO -     Column: innsender, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:06:32 - db_utils - INFO -     Column: status, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:06:32 - db_utils - INFO -     Column: status_changed_by, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:06:32 - db_utils - INFO -     Column: status_changed_at, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:06:32 - db_utils - INFO -     Column: hidden, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:06:32 - db_utils - INFO -     Column: is_alert, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:06:32 - db_utils - INFO -     Column: display_on_weather, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:06:32 - db_utils - INFO -     Column: expiry_date, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:06:32 - db_utils - INFO -     Column: target_group, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:06:32 - db_utils - INFO -   Indexes in feedback.db: ['idx_feedback_datetime', 'idx_feedback_innsender', 'idx_feedback_status', 'idx_feedback_type']
2024-10-31 04:06:32 - db_utils - INFO -   Row count in sqlite_sequence: 1
2024-10-31 04:06:32 - db_utils - INFO -   Row count in feedback: 11
2024-10-31 04:06:32 - db_utils - INFO -   Test query result: (1,)
2024-10-31 04:06:32 - db_utils - INFO - Detailed database operations debugging completed
2024-10-31 04:06:32 - db_utils - INFO - Oppdatert skjema for customer
2024-10-31 04:06:32 - db_utils - INFO - Oppdatert skjema for feedback
2024-10-31 04:06:32 - db_utils - INFO - Oppdatert skjema for login_history
2024-10-31 04:06:32 - db_utils - INFO - Oppdatert skjema for stroing
2024-10-31 04:06:32 - db_utils - INFO - Oppdatert skjema for tunbroyting
2024-10-31 04:06:32 - db_utils - INFO - All database schemas verified and updated
2024-10-31 04:06:32 - db_utils - INFO - Oppdatert skjema for customer
2024-10-31 04:06:32 - db_utils - INFO - Oppdatert skjema for feedback
2024-10-31 04:06:32 - db_utils - INFO - Oppdatert skjema for login_history
2024-10-31 04:06:32 - db_utils - INFO - Oppdatert skjema for stroing
2024-10-31 04:06:32 - db_utils - INFO - Oppdatert skjema for tunbroyting
2024-10-31 04:06:32 - db_utils - INFO - All database schemas verified and updated
2024-10-31 04:06:32 - db_utils - INFO - Database already initialized. Skipping.
2024-10-31 04:06:32 - db_utils - INFO - Query executed successfully on login_history.db. Rows affected: -1
2024-10-31 04:06:32 - db_utils - INFO - login_history table structure is correct
2024-10-31 04:06:32 - customer_utils - INFO - Starting cabin user consistency check
2024-10-31 04:06:32 - utils - INFO - Attempting to load passwords from secrets
2024-10-31 04:06:32 - utils - INFO - Successfully loaded passwords. Number of entries: 94
2024-10-31 04:06:32 - customer_utils - INFO - Retrieved 94 passwords
2024-10-31 04:06:32 - customer_utils - INFO - Found 94 customers in database
2024-10-31 04:06:32 - customer_utils - INFO - Consistency check completed
2024-10-31 04:06:32 - customer_utils - INFO - Database connection closed
2024-10-31 04:06:32 - customer_utils - INFO - Validating customers and passwords
2024-10-31 04:06:32 - utils - INFO - Attempting to load passwords from secrets
2024-10-31 04:06:32 - utils - INFO - Successfully loaded passwords. Number of entries: 94
2024-10-31 04:06:32 - customer_utils - INFO - Customer and password validation complete
2024-10-31 04:06:32 - db_utils - INFO - Successfully created indexes for tunbroyting database
2024-10-31 04:06:32 - db_utils - INFO - Successfully created indexes for stroing database
2024-10-31 04:06:32 - db_utils - INFO - Successfully created indexes for feedback database
2024-10-31 04:06:32 - db_utils - INFO - Successfully created indexes for login_history database
2024-10-31 04:06:32 - db_utils - INFO - Successfully created indexes for customer database
2024-10-31 04:06:32 - db_utils - INFO - Database index creation completed
2024-10-31 04:06:32 - __main__ - INFO - Application initialization completed successfully
2024-10-31 04:06:32 - __main__ - INFO - Application initialization completed successfully
2024-10-31 04:06:32 - __main__ - INFO - Application setup complete
2024-10-31 04:06:32 - customer_utils - INFO - Successfully retrieved customer with ID: 999
2024-10-31 04:06:33 - __main__ - INFO - Application shutting down
2024-10-31 04:12:07 - __main__ - INFO - Added validate_user_input function to app.py
2024-10-31 04:12:07 - __main__ - INFO - Starting application initialization
2024-10-31 04:12:07 - db_utils - INFO - Starting detailed database operations debugging
2024-10-31 04:12:07 - db_utils - INFO - Debugging login_history database:
2024-10-31 04:12:07 - db_utils - INFO -   Database version: 0
2024-10-31 04:12:07 - db_utils - INFO -   Tables in login_history.db: ['login_history']
2024-10-31 04:12:07 - db_utils - INFO -   Structure of login_history table:
2024-10-31 04:12:07 - db_utils - INFO -     Column: id, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:12:07 - db_utils - INFO -     Column: login_time, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:12:07 - db_utils - INFO -     Column: success, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:12:07 - db_utils - INFO -   Indexes in login_history.db: ['idx_login_id', 'idx_login_time']
2024-10-31 04:12:07 - db_utils - INFO -   Row count in login_history: 428
2024-10-31 04:12:07 - db_utils - INFO -   Test query result: (1,)
2024-10-31 04:12:07 - db_utils - INFO - Debugging tunbroyting database:
2024-10-31 04:12:07 - db_utils - INFO -   Database version: 0
2024-10-31 04:12:07 - db_utils - INFO -   Tables in tunbroyting.db: ['tunbroyting_bestillinger']
2024-10-31 04:12:07 - db_utils - INFO -   Structure of tunbroyting_bestillinger table:
2024-10-31 04:12:07 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 04:12:07 - db_utils - INFO -     Column: bruker, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:12:07 - db_utils - INFO -     Column: ankomst_dato, Type: DATE, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:12:07 - db_utils - INFO -     Column: ankomst_tid, Type: TIME, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:12:07 - db_utils - INFO -     Column: avreise_dato, Type: DATE, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:12:07 - db_utils - INFO -     Column: avreise_tid, Type: TIME, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:12:07 - db_utils - INFO -     Column: abonnement_type, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:12:07 - db_utils - INFO -   Indexes in tunbroyting.db: ['idx_tunbroyting_bruker', 'idx_tunbroyting_ankomst_dato', 'idx_tunbroyting_avreise_dato', 'idx_tunbroyting_abonnement']
2024-10-31 04:12:07 - db_utils - INFO -   Row count in tunbroyting_bestillinger: 2
2024-10-31 04:12:07 - db_utils - INFO -   Test query result: (1,)
2024-10-31 04:12:07 - db_utils - INFO - Debugging stroing database:
2024-10-31 04:12:07 - db_utils - INFO -   Database version: 0
2024-10-31 04:12:07 - db_utils - INFO -   Tables in stroing.db: ['sqlite_sequence', 'stroing_bestillinger']
2024-10-31 04:12:07 - db_utils - INFO -   Structure of sqlite_sequence table:
2024-10-31 04:12:07 - db_utils - INFO -     Column: name, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:12:07 - db_utils - INFO -     Column: seq, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:12:07 - db_utils - INFO -   Structure of stroing_bestillinger table:
2024-10-31 04:12:07 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 04:12:07 - db_utils - INFO -     Column: bruker, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:12:07 - db_utils - INFO -     Column: bestillings_dato, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:12:07 - db_utils - INFO -     Column: onske_dato, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:12:07 - db_utils - INFO -   Indexes in stroing.db: ['idx_stroing_bruker', 'idx_stroing_onske_dato', 'idx_stroing_bestillings_dato']
2024-10-31 04:12:07 - db_utils - INFO -   Row count in sqlite_sequence: 1
2024-10-31 04:12:07 - db_utils - INFO -   Row count in stroing_bestillinger: 5
2024-10-31 04:12:07 - db_utils - INFO -   Test query result: (1,)
2024-10-31 04:12:07 - db_utils - INFO - Debugging feedback database:
2024-10-31 04:12:07 - db_utils - INFO -   Database version: 0
2024-10-31 04:12:07 - db_utils - INFO -   Tables in feedback.db: ['sqlite_sequence', 'feedback']
2024-10-31 04:12:07 - db_utils - INFO -   Structure of sqlite_sequence table:
2024-10-31 04:12:07 - db_utils - INFO -     Column: name, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:12:07 - db_utils - INFO -     Column: seq, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:12:07 - db_utils - INFO -   Structure of feedback table:
2024-10-31 04:12:07 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 04:12:07 - db_utils - INFO -     Column: type, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:12:07 - db_utils - INFO -     Column: datetime, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:12:07 - db_utils - INFO -     Column: comment, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:12:07 - db_utils - INFO -     Column: innsender, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:12:07 - db_utils - INFO -     Column: status, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:12:07 - db_utils - INFO -     Column: status_changed_by, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:12:07 - db_utils - INFO -     Column: status_changed_at, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:12:07 - db_utils - INFO -     Column: hidden, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:12:07 - db_utils - INFO -     Column: is_alert, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:12:07 - db_utils - INFO -     Column: display_on_weather, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:12:07 - db_utils - INFO -     Column: expiry_date, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:12:07 - db_utils - INFO -     Column: target_group, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:12:07 - db_utils - INFO -   Indexes in feedback.db: ['idx_feedback_datetime', 'idx_feedback_innsender', 'idx_feedback_status', 'idx_feedback_type']
2024-10-31 04:12:07 - db_utils - INFO -   Row count in sqlite_sequence: 1
2024-10-31 04:12:07 - db_utils - INFO -   Row count in feedback: 11
2024-10-31 04:12:07 - db_utils - INFO -   Test query result: (1,)
2024-10-31 04:12:07 - db_utils - INFO - Detailed database operations debugging completed
2024-10-31 04:12:07 - db_utils - INFO - Oppdatert skjema for customer
2024-10-31 04:12:07 - db_utils - INFO - Oppdatert skjema for feedback
2024-10-31 04:12:07 - db_utils - INFO - Oppdatert skjema for login_history
2024-10-31 04:12:07 - db_utils - INFO - Oppdatert skjema for stroing
2024-10-31 04:12:07 - db_utils - INFO - Oppdatert skjema for tunbroyting
2024-10-31 04:12:07 - db_utils - INFO - All database schemas verified and updated
2024-10-31 04:12:07 - db_utils - INFO - Oppdatert skjema for customer
2024-10-31 04:12:07 - db_utils - INFO - Oppdatert skjema for feedback
2024-10-31 04:12:07 - db_utils - INFO - Oppdatert skjema for login_history
2024-10-31 04:12:07 - db_utils - INFO - Oppdatert skjema for stroing
2024-10-31 04:12:07 - db_utils - INFO - Oppdatert skjema for tunbroyting
2024-10-31 04:12:07 - db_utils - INFO - All database schemas verified and updated
2024-10-31 04:12:07 - db_utils - INFO - Database login_history initialized, updated, and optimized
2024-10-31 04:12:07 - db_utils - INFO - Database tunbroyting initialized, updated, and optimized
2024-10-31 04:12:07 - db_utils - INFO - Database stroing initialized, updated, and optimized
2024-10-31 04:12:07 - db_utils - INFO - Database feedback initialized, updated, and optimized
2024-10-31 04:12:07 - db_utils - INFO - Database customer initialized, updated, and optimized
2024-10-31 04:12:07 - db_utils - INFO - Successfully created indexes for tunbroyting database
2024-10-31 04:12:07 - db_utils - INFO - Successfully created indexes for stroing database
2024-10-31 04:12:07 - db_utils - INFO - Successfully created indexes for feedback database
2024-10-31 04:12:07 - db_utils - INFO - Successfully created indexes for login_history database
2024-10-31 04:12:07 - db_utils - INFO - Successfully created indexes for customer database
2024-10-31 04:12:07 - db_utils - INFO - Database index creation completed
2024-10-31 04:12:07 - db_utils - INFO - Database indexes created
2024-10-31 04:12:07 - db_utils - INFO - Successfully verified connection to stroing.db
2024-10-31 04:12:07 - db_utils - INFO - Successfully verified connection to tunbroyting.db
2024-10-31 04:12:07 - db_utils - INFO - Successfully verified connection to feedback.db
2024-10-31 04:12:07 - db_utils - INFO - Successfully verified connection to login_history.db
2024-10-31 04:12:07 - db_utils - INFO - Successfully verified connection to customer.db
2024-10-31 04:12:07 - db_utils - INFO - Database connections verified
2024-10-31 04:12:07 - db_utils - INFO - All databases initialized, updated, and verified
2024-10-31 04:12:07 - db_utils - INFO - Query executed successfully on login_history.db. Rows affected: -1
2024-10-31 04:12:07 - db_utils - INFO - login_history table structure is correct
2024-10-31 04:12:07 - customer_utils - INFO - Starting cabin user consistency check
2024-10-31 04:12:07 - utils - INFO - Attempting to load passwords from secrets
2024-10-31 04:12:07 - utils - INFO - Successfully loaded passwords. Number of entries: 94
2024-10-31 04:12:07 - customer_utils - INFO - Retrieved 94 passwords
2024-10-31 04:12:07 - customer_utils - INFO - Found 94 customers in database
2024-10-31 04:12:07 - customer_utils - INFO - Consistency check completed
2024-10-31 04:12:07 - customer_utils - INFO - Database connection closed
2024-10-31 04:12:07 - customer_utils - INFO - Validating customers and passwords
2024-10-31 04:12:07 - utils - INFO - Attempting to load passwords from secrets
2024-10-31 04:12:07 - utils - INFO - Successfully loaded passwords. Number of entries: 94
2024-10-31 04:12:07 - customer_utils - INFO - Customer and password validation complete
2024-10-31 04:12:07 - db_utils - INFO - Successfully created indexes for tunbroyting database
2024-10-31 04:12:07 - db_utils - INFO - Successfully created indexes for stroing database
2024-10-31 04:12:07 - db_utils - INFO - Successfully created indexes for feedback database
2024-10-31 04:12:07 - db_utils - INFO - Successfully created indexes for login_history database
2024-10-31 04:12:07 - db_utils - INFO - Successfully created indexes for customer database
2024-10-31 04:12:07 - db_utils - INFO - Database index creation completed
2024-10-31 04:12:07 - __main__ - INFO - Application initialization completed successfully
2024-10-31 04:12:07 - __main__ - INFO - Application initialization completed successfully
2024-10-31 04:12:07 - __main__ - INFO - Application setup complete
2024-10-31 04:12:07 - __main__ - INFO - Application shutting down
2024-10-31 04:12:10 - __main__ - INFO - Added validate_user_input function to app.py
2024-10-31 04:12:10 - __main__ - INFO - Starting application initialization
2024-10-31 04:12:10 - db_utils - INFO - Starting detailed database operations debugging
2024-10-31 04:12:10 - db_utils - INFO - Debugging login_history database:
2024-10-31 04:12:10 - db_utils - INFO -   Database version: 0
2024-10-31 04:12:10 - db_utils - INFO -   Tables in login_history.db: ['login_history']
2024-10-31 04:12:10 - db_utils - INFO -   Structure of login_history table:
2024-10-31 04:12:10 - db_utils - INFO -     Column: id, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:12:10 - db_utils - INFO -     Column: login_time, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:12:10 - db_utils - INFO -     Column: success, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:12:10 - db_utils - INFO -   Indexes in login_history.db: ['idx_login_id', 'idx_login_time']
2024-10-31 04:12:10 - db_utils - INFO -   Row count in login_history: 428
2024-10-31 04:12:10 - db_utils - INFO -   Test query result: (1,)
2024-10-31 04:12:10 - db_utils - INFO - Debugging tunbroyting database:
2024-10-31 04:12:10 - db_utils - INFO -   Database version: 0
2024-10-31 04:12:10 - db_utils - INFO -   Tables in tunbroyting.db: ['tunbroyting_bestillinger']
2024-10-31 04:12:10 - db_utils - INFO -   Structure of tunbroyting_bestillinger table:
2024-10-31 04:12:10 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 04:12:10 - db_utils - INFO -     Column: bruker, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:12:10 - db_utils - INFO -     Column: ankomst_dato, Type: DATE, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:12:10 - db_utils - INFO -     Column: ankomst_tid, Type: TIME, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:12:10 - db_utils - INFO -     Column: avreise_dato, Type: DATE, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:12:10 - db_utils - INFO -     Column: avreise_tid, Type: TIME, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:12:10 - db_utils - INFO -     Column: abonnement_type, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:12:10 - db_utils - INFO -   Indexes in tunbroyting.db: ['idx_tunbroyting_bruker', 'idx_tunbroyting_ankomst_dato', 'idx_tunbroyting_avreise_dato', 'idx_tunbroyting_abonnement']
2024-10-31 04:12:10 - db_utils - INFO -   Row count in tunbroyting_bestillinger: 2
2024-10-31 04:12:10 - db_utils - INFO -   Test query result: (1,)
2024-10-31 04:12:10 - db_utils - INFO - Debugging stroing database:
2024-10-31 04:12:10 - db_utils - INFO -   Database version: 0
2024-10-31 04:12:10 - db_utils - INFO -   Tables in stroing.db: ['sqlite_sequence', 'stroing_bestillinger']
2024-10-31 04:12:10 - db_utils - INFO -   Structure of sqlite_sequence table:
2024-10-31 04:12:10 - db_utils - INFO -     Column: name, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:12:10 - db_utils - INFO -     Column: seq, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:12:10 - db_utils - INFO -   Structure of stroing_bestillinger table:
2024-10-31 04:12:10 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 04:12:10 - db_utils - INFO -     Column: bruker, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:12:10 - db_utils - INFO -     Column: bestillings_dato, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:12:10 - db_utils - INFO -     Column: onske_dato, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:12:10 - db_utils - INFO -   Indexes in stroing.db: ['idx_stroing_bruker', 'idx_stroing_onske_dato', 'idx_stroing_bestillings_dato']
2024-10-31 04:12:10 - db_utils - INFO -   Row count in sqlite_sequence: 1
2024-10-31 04:12:10 - db_utils - INFO -   Row count in stroing_bestillinger: 5
2024-10-31 04:12:10 - db_utils - INFO -   Test query result: (1,)
2024-10-31 04:12:10 - db_utils - INFO - Debugging feedback database:
2024-10-31 04:12:10 - db_utils - INFO -   Database version: 0
2024-10-31 04:12:10 - db_utils - INFO -   Tables in feedback.db: ['sqlite_sequence', 'feedback']
2024-10-31 04:12:10 - db_utils - INFO -   Structure of sqlite_sequence table:
2024-10-31 04:12:10 - db_utils - INFO -     Column: name, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:12:10 - db_utils - INFO -     Column: seq, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:12:10 - db_utils - INFO -   Structure of feedback table:
2024-10-31 04:12:10 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 04:12:10 - db_utils - INFO -     Column: type, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:12:10 - db_utils - INFO -     Column: datetime, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:12:10 - db_utils - INFO -     Column: comment, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:12:10 - db_utils - INFO -     Column: innsender, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:12:10 - db_utils - INFO -     Column: status, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:12:10 - db_utils - INFO -     Column: status_changed_by, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:12:10 - db_utils - INFO -     Column: status_changed_at, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:12:10 - db_utils - INFO -     Column: hidden, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:12:10 - db_utils - INFO -     Column: is_alert, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:12:10 - db_utils - INFO -     Column: display_on_weather, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:12:10 - db_utils - INFO -     Column: expiry_date, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:12:10 - db_utils - INFO -     Column: target_group, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:12:10 - db_utils - INFO -   Indexes in feedback.db: ['idx_feedback_datetime', 'idx_feedback_innsender', 'idx_feedback_status', 'idx_feedback_type']
2024-10-31 04:12:10 - db_utils - INFO -   Row count in sqlite_sequence: 1
2024-10-31 04:12:10 - db_utils - INFO -   Row count in feedback: 11
2024-10-31 04:12:10 - db_utils - INFO -   Test query result: (1,)
2024-10-31 04:12:10 - db_utils - INFO - Detailed database operations debugging completed
2024-10-31 04:12:10 - db_utils - INFO - Oppdatert skjema for customer
2024-10-31 04:12:10 - db_utils - INFO - Oppdatert skjema for feedback
2024-10-31 04:12:10 - db_utils - INFO - Oppdatert skjema for login_history
2024-10-31 04:12:10 - db_utils - INFO - Oppdatert skjema for stroing
2024-10-31 04:12:10 - db_utils - INFO - Oppdatert skjema for tunbroyting
2024-10-31 04:12:10 - db_utils - INFO - All database schemas verified and updated
2024-10-31 04:12:10 - db_utils - INFO - Oppdatert skjema for customer
2024-10-31 04:12:10 - db_utils - INFO - Oppdatert skjema for feedback
2024-10-31 04:12:10 - db_utils - INFO - Oppdatert skjema for login_history
2024-10-31 04:12:10 - db_utils - INFO - Oppdatert skjema for stroing
2024-10-31 04:12:10 - db_utils - INFO - Oppdatert skjema for tunbroyting
2024-10-31 04:12:10 - db_utils - INFO - All database schemas verified and updated
2024-10-31 04:12:10 - db_utils - INFO - Database already initialized. Skipping.
2024-10-31 04:12:10 - db_utils - INFO - Query executed successfully on login_history.db. Rows affected: -1
2024-10-31 04:12:10 - db_utils - INFO - login_history table structure is correct
2024-10-31 04:12:10 - customer_utils - INFO - Starting cabin user consistency check
2024-10-31 04:12:10 - utils - INFO - Attempting to load passwords from secrets
2024-10-31 04:12:10 - utils - INFO - Successfully loaded passwords. Number of entries: 94
2024-10-31 04:12:10 - customer_utils - INFO - Retrieved 94 passwords
2024-10-31 04:12:10 - customer_utils - INFO - Found 94 customers in database
2024-10-31 04:12:10 - customer_utils - INFO - Consistency check completed
2024-10-31 04:12:10 - customer_utils - INFO - Database connection closed
2024-10-31 04:12:10 - customer_utils - INFO - Validating customers and passwords
2024-10-31 04:12:10 - utils - INFO - Attempting to load passwords from secrets
2024-10-31 04:12:10 - utils - INFO - Successfully loaded passwords. Number of entries: 94
2024-10-31 04:12:10 - customer_utils - INFO - Customer and password validation complete
2024-10-31 04:12:10 - db_utils - INFO - Successfully created indexes for tunbroyting database
2024-10-31 04:12:10 - db_utils - INFO - Successfully created indexes for stroing database
2024-10-31 04:12:10 - db_utils - INFO - Successfully created indexes for feedback database
2024-10-31 04:12:10 - db_utils - INFO - Successfully created indexes for login_history database
2024-10-31 04:12:10 - db_utils - INFO - Successfully created indexes for customer database
2024-10-31 04:12:10 - db_utils - INFO - Database index creation completed
2024-10-31 04:12:10 - __main__ - INFO - Application initialization completed successfully
2024-10-31 04:12:10 - __main__ - INFO - Application initialization completed successfully
2024-10-31 04:12:10 - __main__ - INFO - Application setup complete
2024-10-31 04:12:10 - auth_utils - INFO - Login attempt for ID: 999
2024-10-31 04:12:10 - db_utils - INFO - DATABASE_PATH: /Users/tor.inge.jossang@aftenbladet.no/dev/gullingen
2024-10-31 04:12:10 - db_utils - INFO - Full database path: /Users/tor.inge.jossang@aftenbladet.no/dev/gullingen/login_history.db
2024-10-31 04:12:10 - db_utils - INFO - Attempting to create database engine...
2024-10-31 04:12:10 - db_utils - INFO - Database engine created successfully for login_history.db
2024-10-31 04:12:10 - auth_utils - INFO - Rate limit check passed for user 999
2024-10-31 04:12:10 - auth_utils - INFO - User 999 authenticated successfully
2024-10-31 04:12:10 - customer_utils - INFO - Successfully retrieved customer with ID: 999
2024-10-31 04:12:10 - db_utils - INFO - Database file /Users/tor.inge.jossang@aftenbladet.no/dev/gullingen/login_history.db exists.
2024-10-31 04:12:10 - db_utils - INFO - Query executed successfully on login_history.db. Rows affected: 1
2024-10-31 04:12:10 - auth_utils - INFO - Successful login for ID: 999
2024-10-31 04:12:10 - auth_utils - INFO - Successful login and logging for ID: 999
2024-10-31 04:12:10 - db_utils - INFO - DATABASE_PATH: /Users/tor.inge.jossang@aftenbladet.no/dev/gullingen
2024-10-31 04:12:10 - db_utils - INFO - Full database path: /Users/tor.inge.jossang@aftenbladet.no/dev/gullingen/login_history.db
2024-10-31 04:12:10 - db_utils - INFO - Attempting to create database engine...
2024-10-31 04:12:10 - db_utils - INFO - Database engine created successfully for login_history.db
2024-10-31 04:12:10 - auth_utils - INFO - Rate limit reset for user 999
2024-10-31 04:12:10 - __main__ - INFO - Application shutting down
2024-10-31 04:12:10 - __main__ - INFO - Added validate_user_input function to app.py
2024-10-31 04:12:10 - __main__ - INFO - Starting application initialization
2024-10-31 04:12:10 - db_utils - INFO - Starting detailed database operations debugging
2024-10-31 04:12:10 - db_utils - INFO - Debugging login_history database:
2024-10-31 04:12:10 - db_utils - INFO -   Database version: 0
2024-10-31 04:12:10 - db_utils - INFO -   Tables in login_history.db: ['login_history']
2024-10-31 04:12:10 - db_utils - INFO -   Structure of login_history table:
2024-10-31 04:12:10 - db_utils - INFO -     Column: id, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:12:10 - db_utils - INFO -     Column: login_time, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:12:10 - db_utils - INFO -     Column: success, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:12:10 - db_utils - INFO -   Indexes in login_history.db: ['idx_login_id', 'idx_login_time']
2024-10-31 04:12:10 - db_utils - INFO -   Row count in login_history: 429
2024-10-31 04:12:10 - db_utils - INFO -   Test query result: (1,)
2024-10-31 04:12:10 - db_utils - INFO - Debugging tunbroyting database:
2024-10-31 04:12:10 - db_utils - INFO -   Database version: 0
2024-10-31 04:12:10 - db_utils - INFO -   Tables in tunbroyting.db: ['tunbroyting_bestillinger']
2024-10-31 04:12:10 - db_utils - INFO -   Structure of tunbroyting_bestillinger table:
2024-10-31 04:12:10 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 04:12:10 - db_utils - INFO -     Column: bruker, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:12:10 - db_utils - INFO -     Column: ankomst_dato, Type: DATE, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:12:10 - db_utils - INFO -     Column: ankomst_tid, Type: TIME, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:12:10 - db_utils - INFO -     Column: avreise_dato, Type: DATE, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:12:10 - db_utils - INFO -     Column: avreise_tid, Type: TIME, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:12:10 - db_utils - INFO -     Column: abonnement_type, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:12:10 - db_utils - INFO -   Indexes in tunbroyting.db: ['idx_tunbroyting_bruker', 'idx_tunbroyting_ankomst_dato', 'idx_tunbroyting_avreise_dato', 'idx_tunbroyting_abonnement']
2024-10-31 04:12:10 - db_utils - INFO -   Row count in tunbroyting_bestillinger: 2
2024-10-31 04:12:10 - db_utils - INFO -   Test query result: (1,)
2024-10-31 04:12:10 - db_utils - INFO - Debugging stroing database:
2024-10-31 04:12:10 - db_utils - INFO -   Database version: 0
2024-10-31 04:12:10 - db_utils - INFO -   Tables in stroing.db: ['sqlite_sequence', 'stroing_bestillinger']
2024-10-31 04:12:10 - db_utils - INFO -   Structure of sqlite_sequence table:
2024-10-31 04:12:10 - db_utils - INFO -     Column: name, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:12:10 - db_utils - INFO -     Column: seq, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:12:10 - db_utils - INFO -   Structure of stroing_bestillinger table:
2024-10-31 04:12:10 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 04:12:10 - db_utils - INFO -     Column: bruker, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:12:10 - db_utils - INFO -     Column: bestillings_dato, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:12:10 - db_utils - INFO -     Column: onske_dato, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:12:10 - db_utils - INFO -   Indexes in stroing.db: ['idx_stroing_bruker', 'idx_stroing_onske_dato', 'idx_stroing_bestillings_dato']
2024-10-31 04:12:10 - db_utils - INFO -   Row count in sqlite_sequence: 1
2024-10-31 04:12:10 - db_utils - INFO -   Row count in stroing_bestillinger: 5
2024-10-31 04:12:10 - db_utils - INFO -   Test query result: (1,)
2024-10-31 04:12:10 - db_utils - INFO - Debugging feedback database:
2024-10-31 04:12:10 - db_utils - INFO -   Database version: 0
2024-10-31 04:12:10 - db_utils - INFO -   Tables in feedback.db: ['sqlite_sequence', 'feedback']
2024-10-31 04:12:10 - db_utils - INFO -   Structure of sqlite_sequence table:
2024-10-31 04:12:10 - db_utils - INFO -     Column: name, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:12:10 - db_utils - INFO -     Column: seq, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:12:10 - db_utils - INFO -   Structure of feedback table:
2024-10-31 04:12:10 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 04:12:10 - db_utils - INFO -     Column: type, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:12:10 - db_utils - INFO -     Column: datetime, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:12:10 - db_utils - INFO -     Column: comment, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:12:10 - db_utils - INFO -     Column: innsender, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:12:10 - db_utils - INFO -     Column: status, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:12:10 - db_utils - INFO -     Column: status_changed_by, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:12:10 - db_utils - INFO -     Column: status_changed_at, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:12:10 - db_utils - INFO -     Column: hidden, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:12:10 - db_utils - INFO -     Column: is_alert, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:12:10 - db_utils - INFO -     Column: display_on_weather, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:12:10 - db_utils - INFO -     Column: expiry_date, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:12:10 - db_utils - INFO -     Column: target_group, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:12:10 - db_utils - INFO -   Indexes in feedback.db: ['idx_feedback_datetime', 'idx_feedback_innsender', 'idx_feedback_status', 'idx_feedback_type']
2024-10-31 04:12:10 - db_utils - INFO -   Row count in sqlite_sequence: 1
2024-10-31 04:12:10 - db_utils - INFO -   Row count in feedback: 11
2024-10-31 04:12:10 - db_utils - INFO -   Test query result: (1,)
2024-10-31 04:12:10 - db_utils - INFO - Detailed database operations debugging completed
2024-10-31 04:12:10 - db_utils - INFO - Oppdatert skjema for customer
2024-10-31 04:12:10 - db_utils - INFO - Oppdatert skjema for feedback
2024-10-31 04:12:10 - db_utils - INFO - Oppdatert skjema for login_history
2024-10-31 04:12:10 - db_utils - INFO - Oppdatert skjema for stroing
2024-10-31 04:12:10 - db_utils - INFO - Oppdatert skjema for tunbroyting
2024-10-31 04:12:10 - db_utils - INFO - All database schemas verified and updated
2024-10-31 04:12:10 - db_utils - INFO - Oppdatert skjema for customer
2024-10-31 04:12:10 - db_utils - INFO - Oppdatert skjema for feedback
2024-10-31 04:12:10 - db_utils - INFO - Oppdatert skjema for login_history
2024-10-31 04:12:10 - db_utils - INFO - Oppdatert skjema for stroing
2024-10-31 04:12:10 - db_utils - INFO - Oppdatert skjema for tunbroyting
2024-10-31 04:12:10 - db_utils - INFO - All database schemas verified and updated
2024-10-31 04:12:10 - db_utils - INFO - Database already initialized. Skipping.
2024-10-31 04:12:10 - db_utils - INFO - Query executed successfully on login_history.db. Rows affected: -1
2024-10-31 04:12:10 - db_utils - INFO - login_history table structure is correct
2024-10-31 04:12:10 - customer_utils - INFO - Starting cabin user consistency check
2024-10-31 04:12:10 - utils - INFO - Attempting to load passwords from secrets
2024-10-31 04:12:10 - utils - INFO - Successfully loaded passwords. Number of entries: 94
2024-10-31 04:12:10 - customer_utils - INFO - Retrieved 94 passwords
2024-10-31 04:12:10 - customer_utils - INFO - Found 94 customers in database
2024-10-31 04:12:10 - customer_utils - INFO - Consistency check completed
2024-10-31 04:12:10 - customer_utils - INFO - Database connection closed
2024-10-31 04:12:10 - customer_utils - INFO - Validating customers and passwords
2024-10-31 04:12:10 - utils - INFO - Attempting to load passwords from secrets
2024-10-31 04:12:10 - utils - INFO - Successfully loaded passwords. Number of entries: 94
2024-10-31 04:12:10 - customer_utils - INFO - Customer and password validation complete
2024-10-31 04:12:10 - db_utils - INFO - Successfully created indexes for tunbroyting database
2024-10-31 04:12:10 - db_utils - INFO - Successfully created indexes for stroing database
2024-10-31 04:12:10 - db_utils - INFO - Successfully created indexes for feedback database
2024-10-31 04:12:10 - db_utils - INFO - Successfully created indexes for login_history database
2024-10-31 04:12:10 - db_utils - INFO - Successfully created indexes for customer database
2024-10-31 04:12:10 - db_utils - INFO - Database index creation completed
2024-10-31 04:12:10 - __main__ - INFO - Application initialization completed successfully
2024-10-31 04:12:10 - __main__ - INFO - Application initialization completed successfully
2024-10-31 04:12:10 - __main__ - INFO - Application setup complete
2024-10-31 04:12:10 - customer_utils - INFO - Successfully retrieved customer with ID: 999
2024-10-31 04:12:10 - alert_utils - INFO - Fetched 1 alerts. only_today=False, include_expired=False
2024-10-31 04:12:10 - tun_utils - WARNING - hent_bestillinger() is deprecated, use get_bookings() instead
2024-10-31 04:12:10 - tun_utils - INFO - Starting get_bookings with start_date=None, end_date=None
2024-10-31 04:12:10 - tun_utils - INFO - Successfully retrieved 2 bookings
2024-10-31 04:12:10 - __main__ - INFO - Application shutting down
2024-10-31 04:12:12 - __main__ - INFO - Added validate_user_input function to app.py
2024-10-31 04:12:12 - __main__ - INFO - Starting application initialization
2024-10-31 04:12:12 - db_utils - INFO - Starting detailed database operations debugging
2024-10-31 04:12:12 - db_utils - INFO - Debugging login_history database:
2024-10-31 04:12:12 - db_utils - INFO -   Database version: 0
2024-10-31 04:12:12 - db_utils - INFO -   Tables in login_history.db: ['login_history']
2024-10-31 04:12:12 - db_utils - INFO -   Structure of login_history table:
2024-10-31 04:12:12 - db_utils - INFO -     Column: id, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:12:12 - db_utils - INFO -     Column: login_time, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:12:12 - db_utils - INFO -     Column: success, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:12:12 - db_utils - INFO -   Indexes in login_history.db: ['idx_login_id', 'idx_login_time']
2024-10-31 04:12:12 - db_utils - INFO -   Row count in login_history: 429
2024-10-31 04:12:12 - db_utils - INFO -   Test query result: (1,)
2024-10-31 04:12:12 - db_utils - INFO - Debugging tunbroyting database:
2024-10-31 04:12:12 - db_utils - INFO -   Database version: 0
2024-10-31 04:12:12 - db_utils - INFO -   Tables in tunbroyting.db: ['tunbroyting_bestillinger']
2024-10-31 04:12:12 - db_utils - INFO -   Structure of tunbroyting_bestillinger table:
2024-10-31 04:12:12 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 04:12:12 - db_utils - INFO -     Column: bruker, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:12:12 - db_utils - INFO -     Column: ankomst_dato, Type: DATE, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:12:12 - db_utils - INFO -     Column: ankomst_tid, Type: TIME, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:12:12 - db_utils - INFO -     Column: avreise_dato, Type: DATE, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:12:12 - db_utils - INFO -     Column: avreise_tid, Type: TIME, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:12:12 - db_utils - INFO -     Column: abonnement_type, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:12:12 - db_utils - INFO -   Indexes in tunbroyting.db: ['idx_tunbroyting_bruker', 'idx_tunbroyting_ankomst_dato', 'idx_tunbroyting_avreise_dato', 'idx_tunbroyting_abonnement']
2024-10-31 04:12:12 - db_utils - INFO -   Row count in tunbroyting_bestillinger: 2
2024-10-31 04:12:12 - db_utils - INFO -   Test query result: (1,)
2024-10-31 04:12:12 - db_utils - INFO - Debugging stroing database:
2024-10-31 04:12:12 - db_utils - INFO -   Database version: 0
2024-10-31 04:12:12 - db_utils - INFO -   Tables in stroing.db: ['sqlite_sequence', 'stroing_bestillinger']
2024-10-31 04:12:12 - db_utils - INFO -   Structure of sqlite_sequence table:
2024-10-31 04:12:12 - db_utils - INFO -     Column: name, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:12:12 - db_utils - INFO -     Column: seq, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:12:12 - db_utils - INFO -   Structure of stroing_bestillinger table:
2024-10-31 04:12:12 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 04:12:12 - db_utils - INFO -     Column: bruker, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:12:12 - db_utils - INFO -     Column: bestillings_dato, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:12:12 - db_utils - INFO -     Column: onske_dato, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:12:12 - db_utils - INFO -   Indexes in stroing.db: ['idx_stroing_bruker', 'idx_stroing_onske_dato', 'idx_stroing_bestillings_dato']
2024-10-31 04:12:12 - db_utils - INFO -   Row count in sqlite_sequence: 1
2024-10-31 04:12:12 - db_utils - INFO -   Row count in stroing_bestillinger: 5
2024-10-31 04:12:12 - db_utils - INFO -   Test query result: (1,)
2024-10-31 04:12:12 - db_utils - INFO - Debugging feedback database:
2024-10-31 04:12:12 - db_utils - INFO -   Database version: 0
2024-10-31 04:12:12 - db_utils - INFO -   Tables in feedback.db: ['sqlite_sequence', 'feedback']
2024-10-31 04:12:12 - db_utils - INFO -   Structure of sqlite_sequence table:
2024-10-31 04:12:12 - db_utils - INFO -     Column: name, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:12:12 - db_utils - INFO -     Column: seq, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:12:12 - db_utils - INFO -   Structure of feedback table:
2024-10-31 04:12:12 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 04:12:12 - db_utils - INFO -     Column: type, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:12:12 - db_utils - INFO -     Column: datetime, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:12:12 - db_utils - INFO -     Column: comment, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:12:12 - db_utils - INFO -     Column: innsender, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:12:12 - db_utils - INFO -     Column: status, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:12:12 - db_utils - INFO -     Column: status_changed_by, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:12:12 - db_utils - INFO -     Column: status_changed_at, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:12:12 - db_utils - INFO -     Column: hidden, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:12:12 - db_utils - INFO -     Column: is_alert, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:12:12 - db_utils - INFO -     Column: display_on_weather, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:12:12 - db_utils - INFO -     Column: expiry_date, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:12:12 - db_utils - INFO -     Column: target_group, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:12:12 - db_utils - INFO -   Indexes in feedback.db: ['idx_feedback_datetime', 'idx_feedback_innsender', 'idx_feedback_status', 'idx_feedback_type']
2024-10-31 04:12:12 - db_utils - INFO -   Row count in sqlite_sequence: 1
2024-10-31 04:12:12 - db_utils - INFO -   Row count in feedback: 11
2024-10-31 04:12:12 - db_utils - INFO -   Test query result: (1,)
2024-10-31 04:12:12 - db_utils - INFO - Detailed database operations debugging completed
2024-10-31 04:12:12 - db_utils - INFO - Oppdatert skjema for customer
2024-10-31 04:12:12 - db_utils - INFO - Oppdatert skjema for feedback
2024-10-31 04:12:12 - db_utils - INFO - Oppdatert skjema for login_history
2024-10-31 04:12:12 - db_utils - INFO - Oppdatert skjema for stroing
2024-10-31 04:12:12 - db_utils - INFO - Oppdatert skjema for tunbroyting
2024-10-31 04:12:12 - db_utils - INFO - All database schemas verified and updated
2024-10-31 04:12:12 - db_utils - INFO - Oppdatert skjema for customer
2024-10-31 04:12:12 - db_utils - INFO - Oppdatert skjema for feedback
2024-10-31 04:12:12 - db_utils - INFO - Oppdatert skjema for login_history
2024-10-31 04:12:12 - db_utils - INFO - Oppdatert skjema for stroing
2024-10-31 04:12:12 - db_utils - INFO - Oppdatert skjema for tunbroyting
2024-10-31 04:12:12 - db_utils - INFO - All database schemas verified and updated
2024-10-31 04:12:12 - db_utils - INFO - Database already initialized. Skipping.
2024-10-31 04:12:12 - db_utils - INFO - Query executed successfully on login_history.db. Rows affected: -1
2024-10-31 04:12:12 - db_utils - INFO - login_history table structure is correct
2024-10-31 04:12:12 - customer_utils - INFO - Starting cabin user consistency check
2024-10-31 04:12:12 - utils - INFO - Attempting to load passwords from secrets
2024-10-31 04:12:12 - utils - INFO - Successfully loaded passwords. Number of entries: 94
2024-10-31 04:12:12 - customer_utils - INFO - Retrieved 94 passwords
2024-10-31 04:12:12 - customer_utils - INFO - Found 94 customers in database
2024-10-31 04:12:12 - customer_utils - INFO - Consistency check completed
2024-10-31 04:12:12 - customer_utils - INFO - Database connection closed
2024-10-31 04:12:12 - customer_utils - INFO - Validating customers and passwords
2024-10-31 04:12:12 - utils - INFO - Attempting to load passwords from secrets
2024-10-31 04:12:12 - utils - INFO - Successfully loaded passwords. Number of entries: 94
2024-10-31 04:12:12 - customer_utils - INFO - Customer and password validation complete
2024-10-31 04:12:12 - db_utils - INFO - Successfully created indexes for tunbroyting database
2024-10-31 04:12:12 - db_utils - INFO - Successfully created indexes for stroing database
2024-10-31 04:12:12 - db_utils - INFO - Successfully created indexes for feedback database
2024-10-31 04:12:12 - db_utils - INFO - Successfully created indexes for login_history database
2024-10-31 04:12:12 - db_utils - INFO - Successfully created indexes for customer database
2024-10-31 04:12:12 - db_utils - INFO - Database index creation completed
2024-10-31 04:12:12 - __main__ - INFO - Application initialization completed successfully
2024-10-31 04:12:12 - __main__ - INFO - Application initialization completed successfully
2024-10-31 04:12:12 - __main__ - INFO - Application setup complete
2024-10-31 04:12:12 - customer_utils - INFO - Successfully retrieved customer with ID: 999
2024-10-31 04:12:13 - __main__ - INFO - Application shutting down
2024-10-31 04:16:00 - __main__ - INFO - Added validate_user_input function to app.py
2024-10-31 04:16:00 - __main__ - INFO - Starting application initialization
2024-10-31 04:16:00 - db_utils - INFO - Starting detailed database operations debugging
2024-10-31 04:16:00 - db_utils - INFO - Debugging login_history database:
2024-10-31 04:16:00 - db_utils - INFO -   Database version: 0
2024-10-31 04:16:00 - db_utils - INFO -   Tables in login_history.db: ['login_history']
2024-10-31 04:16:00 - db_utils - INFO -   Structure of login_history table:
2024-10-31 04:16:00 - db_utils - INFO -     Column: id, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:16:00 - db_utils - INFO -     Column: login_time, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:16:00 - db_utils - INFO -     Column: success, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:16:00 - db_utils - INFO -   Indexes in login_history.db: ['idx_login_id', 'idx_login_time']
2024-10-31 04:16:00 - db_utils - INFO -   Row count in login_history: 429
2024-10-31 04:16:00 - db_utils - INFO -   Test query result: (1,)
2024-10-31 04:16:00 - db_utils - INFO - Debugging tunbroyting database:
2024-10-31 04:16:00 - db_utils - INFO -   Database version: 0
2024-10-31 04:16:00 - db_utils - INFO -   Tables in tunbroyting.db: ['tunbroyting_bestillinger']
2024-10-31 04:16:00 - db_utils - INFO -   Structure of tunbroyting_bestillinger table:
2024-10-31 04:16:00 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 04:16:00 - db_utils - INFO -     Column: bruker, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:16:00 - db_utils - INFO -     Column: ankomst_dato, Type: DATE, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:16:00 - db_utils - INFO -     Column: ankomst_tid, Type: TIME, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:16:00 - db_utils - INFO -     Column: avreise_dato, Type: DATE, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:16:00 - db_utils - INFO -     Column: avreise_tid, Type: TIME, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:16:00 - db_utils - INFO -     Column: abonnement_type, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:16:00 - db_utils - INFO -   Indexes in tunbroyting.db: ['idx_tunbroyting_bruker', 'idx_tunbroyting_ankomst_dato', 'idx_tunbroyting_avreise_dato', 'idx_tunbroyting_abonnement']
2024-10-31 04:16:00 - db_utils - INFO -   Row count in tunbroyting_bestillinger: 2
2024-10-31 04:16:00 - db_utils - INFO -   Test query result: (1,)
2024-10-31 04:16:00 - db_utils - INFO - Debugging stroing database:
2024-10-31 04:16:00 - db_utils - INFO -   Database version: 0
2024-10-31 04:16:00 - db_utils - INFO -   Tables in stroing.db: ['sqlite_sequence', 'stroing_bestillinger']
2024-10-31 04:16:00 - db_utils - INFO -   Structure of sqlite_sequence table:
2024-10-31 04:16:00 - db_utils - INFO -     Column: name, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:16:00 - db_utils - INFO -     Column: seq, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:16:00 - db_utils - INFO -   Structure of stroing_bestillinger table:
2024-10-31 04:16:00 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 04:16:00 - db_utils - INFO -     Column: bruker, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:16:00 - db_utils - INFO -     Column: bestillings_dato, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:16:00 - db_utils - INFO -     Column: onske_dato, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:16:00 - db_utils - INFO -   Indexes in stroing.db: ['idx_stroing_bruker', 'idx_stroing_onske_dato', 'idx_stroing_bestillings_dato']
2024-10-31 04:16:00 - db_utils - INFO -   Row count in sqlite_sequence: 1
2024-10-31 04:16:00 - db_utils - INFO -   Row count in stroing_bestillinger: 5
2024-10-31 04:16:00 - db_utils - INFO -   Test query result: (1,)
2024-10-31 04:16:00 - db_utils - INFO - Debugging feedback database:
2024-10-31 04:16:00 - db_utils - INFO -   Database version: 0
2024-10-31 04:16:00 - db_utils - INFO -   Tables in feedback.db: ['sqlite_sequence', 'feedback']
2024-10-31 04:16:00 - db_utils - INFO -   Structure of sqlite_sequence table:
2024-10-31 04:16:00 - db_utils - INFO -     Column: name, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:16:00 - db_utils - INFO -     Column: seq, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:16:00 - db_utils - INFO -   Structure of feedback table:
2024-10-31 04:16:00 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 04:16:00 - db_utils - INFO -     Column: type, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:16:00 - db_utils - INFO -     Column: datetime, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:16:00 - db_utils - INFO -     Column: comment, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:16:00 - db_utils - INFO -     Column: innsender, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:16:00 - db_utils - INFO -     Column: status, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:16:00 - db_utils - INFO -     Column: status_changed_by, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:16:00 - db_utils - INFO -     Column: status_changed_at, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:16:00 - db_utils - INFO -     Column: hidden, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:16:00 - db_utils - INFO -     Column: is_alert, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:16:00 - db_utils - INFO -     Column: display_on_weather, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:16:00 - db_utils - INFO -     Column: expiry_date, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:16:00 - db_utils - INFO -     Column: target_group, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:16:00 - db_utils - INFO -   Indexes in feedback.db: ['idx_feedback_datetime', 'idx_feedback_innsender', 'idx_feedback_status', 'idx_feedback_type']
2024-10-31 04:16:00 - db_utils - INFO -   Row count in sqlite_sequence: 1
2024-10-31 04:16:00 - db_utils - INFO -   Row count in feedback: 11
2024-10-31 04:16:00 - db_utils - INFO -   Test query result: (1,)
2024-10-31 04:16:00 - db_utils - INFO - Detailed database operations debugging completed
2024-10-31 04:16:00 - db_utils - INFO - Oppdatert skjema for customer
2024-10-31 04:16:00 - db_utils - INFO - Oppdatert skjema for feedback
2024-10-31 04:16:00 - db_utils - INFO - Oppdatert skjema for login_history
2024-10-31 04:16:00 - db_utils - INFO - Oppdatert skjema for stroing
2024-10-31 04:16:00 - db_utils - INFO - Oppdatert skjema for tunbroyting
2024-10-31 04:16:00 - db_utils - INFO - All database schemas verified and updated
2024-10-31 04:16:00 - db_utils - INFO - Oppdatert skjema for customer
2024-10-31 04:16:00 - db_utils - INFO - Oppdatert skjema for feedback
2024-10-31 04:16:00 - db_utils - INFO - Oppdatert skjema for login_history
2024-10-31 04:16:00 - db_utils - INFO - Oppdatert skjema for stroing
2024-10-31 04:16:00 - db_utils - INFO - Oppdatert skjema for tunbroyting
2024-10-31 04:16:00 - db_utils - INFO - All database schemas verified and updated
2024-10-31 04:16:00 - db_utils - INFO - Database login_history initialized, updated, and optimized
2024-10-31 04:16:00 - db_utils - INFO - Database tunbroyting initialized, updated, and optimized
2024-10-31 04:16:00 - db_utils - INFO - Database stroing initialized, updated, and optimized
2024-10-31 04:16:00 - db_utils - INFO - Database feedback initialized, updated, and optimized
2024-10-31 04:16:00 - db_utils - INFO - Database customer initialized, updated, and optimized
2024-10-31 04:16:00 - db_utils - INFO - Successfully created indexes for tunbroyting database
2024-10-31 04:16:00 - db_utils - INFO - Successfully created indexes for stroing database
2024-10-31 04:16:00 - db_utils - INFO - Successfully created indexes for feedback database
2024-10-31 04:16:00 - db_utils - INFO - Successfully created indexes for login_history database
2024-10-31 04:16:00 - db_utils - INFO - Successfully created indexes for customer database
2024-10-31 04:16:00 - db_utils - INFO - Database index creation completed
2024-10-31 04:16:00 - db_utils - INFO - Database indexes created
2024-10-31 04:16:00 - db_utils - INFO - Successfully verified connection to stroing.db
2024-10-31 04:16:00 - db_utils - INFO - Successfully verified connection to tunbroyting.db
2024-10-31 04:16:00 - db_utils - INFO - Successfully verified connection to feedback.db
2024-10-31 04:16:00 - db_utils - INFO - Successfully verified connection to login_history.db
2024-10-31 04:16:00 - db_utils - INFO - Successfully verified connection to customer.db
2024-10-31 04:16:00 - db_utils - INFO - Database connections verified
2024-10-31 04:16:00 - db_utils - INFO - All databases initialized, updated, and verified
2024-10-31 04:16:00 - db_utils - INFO - Query executed successfully on login_history.db. Rows affected: -1
2024-10-31 04:16:00 - db_utils - INFO - login_history table structure is correct
2024-10-31 04:16:00 - customer_utils - INFO - Starting cabin user consistency check
2024-10-31 04:16:00 - utils - INFO - Attempting to load passwords from secrets
2024-10-31 04:16:00 - utils - INFO - Successfully loaded passwords. Number of entries: 94
2024-10-31 04:16:00 - customer_utils - INFO - Retrieved 94 passwords
2024-10-31 04:16:00 - customer_utils - INFO - Found 94 customers in database
2024-10-31 04:16:00 - customer_utils - INFO - Consistency check completed
2024-10-31 04:16:00 - customer_utils - INFO - Database connection closed
2024-10-31 04:16:00 - customer_utils - INFO - Validating customers and passwords
2024-10-31 04:16:00 - utils - INFO - Attempting to load passwords from secrets
2024-10-31 04:16:00 - utils - INFO - Successfully loaded passwords. Number of entries: 94
2024-10-31 04:16:00 - customer_utils - INFO - Customer and password validation complete
2024-10-31 04:16:00 - db_utils - INFO - Successfully created indexes for tunbroyting database
2024-10-31 04:16:00 - db_utils - INFO - Successfully created indexes for stroing database
2024-10-31 04:16:00 - db_utils - INFO - Successfully created indexes for feedback database
2024-10-31 04:16:00 - db_utils - INFO - Successfully created indexes for login_history database
2024-10-31 04:16:00 - db_utils - INFO - Successfully created indexes for customer database
2024-10-31 04:16:00 - db_utils - INFO - Database index creation completed
2024-10-31 04:16:00 - __main__ - INFO - Application initialization completed successfully
2024-10-31 04:16:00 - __main__ - INFO - Application initialization completed successfully
2024-10-31 04:16:00 - __main__ - INFO - Application setup complete
2024-10-31 04:16:00 - __main__ - INFO - Application shutting down
2024-10-31 04:16:02 - __main__ - INFO - Added validate_user_input function to app.py
2024-10-31 04:16:02 - __main__ - INFO - Starting application initialization
2024-10-31 04:16:02 - db_utils - INFO - Starting detailed database operations debugging
2024-10-31 04:16:02 - db_utils - INFO - Debugging login_history database:
2024-10-31 04:16:02 - db_utils - INFO -   Database version: 0
2024-10-31 04:16:02 - db_utils - INFO -   Tables in login_history.db: ['login_history']
2024-10-31 04:16:02 - db_utils - INFO -   Structure of login_history table:
2024-10-31 04:16:02 - db_utils - INFO -     Column: id, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:16:02 - db_utils - INFO -     Column: login_time, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:16:02 - db_utils - INFO -     Column: success, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:16:02 - db_utils - INFO -   Indexes in login_history.db: ['idx_login_id', 'idx_login_time']
2024-10-31 04:16:02 - db_utils - INFO -   Row count in login_history: 429
2024-10-31 04:16:02 - db_utils - INFO -   Test query result: (1,)
2024-10-31 04:16:02 - db_utils - INFO - Debugging tunbroyting database:
2024-10-31 04:16:02 - db_utils - INFO -   Database version: 0
2024-10-31 04:16:02 - db_utils - INFO -   Tables in tunbroyting.db: ['tunbroyting_bestillinger']
2024-10-31 04:16:02 - db_utils - INFO -   Structure of tunbroyting_bestillinger table:
2024-10-31 04:16:02 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 04:16:02 - db_utils - INFO -     Column: bruker, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:16:02 - db_utils - INFO -     Column: ankomst_dato, Type: DATE, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:16:02 - db_utils - INFO -     Column: ankomst_tid, Type: TIME, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:16:02 - db_utils - INFO -     Column: avreise_dato, Type: DATE, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:16:02 - db_utils - INFO -     Column: avreise_tid, Type: TIME, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:16:02 - db_utils - INFO -     Column: abonnement_type, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:16:02 - db_utils - INFO -   Indexes in tunbroyting.db: ['idx_tunbroyting_bruker', 'idx_tunbroyting_ankomst_dato', 'idx_tunbroyting_avreise_dato', 'idx_tunbroyting_abonnement']
2024-10-31 04:16:02 - db_utils - INFO -   Row count in tunbroyting_bestillinger: 2
2024-10-31 04:16:02 - db_utils - INFO -   Test query result: (1,)
2024-10-31 04:16:02 - db_utils - INFO - Debugging stroing database:
2024-10-31 04:16:02 - db_utils - INFO -   Database version: 0
2024-10-31 04:16:02 - db_utils - INFO -   Tables in stroing.db: ['sqlite_sequence', 'stroing_bestillinger']
2024-10-31 04:16:02 - db_utils - INFO -   Structure of sqlite_sequence table:
2024-10-31 04:16:02 - db_utils - INFO -     Column: name, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:16:02 - db_utils - INFO -     Column: seq, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:16:02 - db_utils - INFO -   Structure of stroing_bestillinger table:
2024-10-31 04:16:02 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 04:16:02 - db_utils - INFO -     Column: bruker, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:16:02 - db_utils - INFO -     Column: bestillings_dato, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:16:02 - db_utils - INFO -     Column: onske_dato, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:16:02 - db_utils - INFO -   Indexes in stroing.db: ['idx_stroing_bruker', 'idx_stroing_onske_dato', 'idx_stroing_bestillings_dato']
2024-10-31 04:16:02 - db_utils - INFO -   Row count in sqlite_sequence: 1
2024-10-31 04:16:02 - db_utils - INFO -   Row count in stroing_bestillinger: 5
2024-10-31 04:16:02 - db_utils - INFO -   Test query result: (1,)
2024-10-31 04:16:02 - db_utils - INFO - Debugging feedback database:
2024-10-31 04:16:02 - db_utils - INFO -   Database version: 0
2024-10-31 04:16:02 - db_utils - INFO -   Tables in feedback.db: ['sqlite_sequence', 'feedback']
2024-10-31 04:16:02 - db_utils - INFO -   Structure of sqlite_sequence table:
2024-10-31 04:16:02 - db_utils - INFO -     Column: name, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:16:02 - db_utils - INFO -     Column: seq, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:16:02 - db_utils - INFO -   Structure of feedback table:
2024-10-31 04:16:02 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 04:16:02 - db_utils - INFO -     Column: type, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:16:02 - db_utils - INFO -     Column: datetime, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:16:02 - db_utils - INFO -     Column: comment, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:16:02 - db_utils - INFO -     Column: innsender, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:16:02 - db_utils - INFO -     Column: status, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:16:02 - db_utils - INFO -     Column: status_changed_by, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:16:02 - db_utils - INFO -     Column: status_changed_at, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:16:02 - db_utils - INFO -     Column: hidden, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:16:02 - db_utils - INFO -     Column: is_alert, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:16:02 - db_utils - INFO -     Column: display_on_weather, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:16:02 - db_utils - INFO -     Column: expiry_date, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:16:02 - db_utils - INFO -     Column: target_group, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:16:02 - db_utils - INFO -   Indexes in feedback.db: ['idx_feedback_datetime', 'idx_feedback_innsender', 'idx_feedback_status', 'idx_feedback_type']
2024-10-31 04:16:02 - db_utils - INFO -   Row count in sqlite_sequence: 1
2024-10-31 04:16:02 - db_utils - INFO -   Row count in feedback: 11
2024-10-31 04:16:02 - db_utils - INFO -   Test query result: (1,)
2024-10-31 04:16:02 - db_utils - INFO - Detailed database operations debugging completed
2024-10-31 04:16:02 - db_utils - INFO - Oppdatert skjema for customer
2024-10-31 04:16:02 - db_utils - INFO - Oppdatert skjema for feedback
2024-10-31 04:16:02 - db_utils - INFO - Oppdatert skjema for login_history
2024-10-31 04:16:02 - db_utils - INFO - Oppdatert skjema for stroing
2024-10-31 04:16:02 - db_utils - INFO - Oppdatert skjema for tunbroyting
2024-10-31 04:16:02 - db_utils - INFO - All database schemas verified and updated
2024-10-31 04:16:02 - db_utils - INFO - Oppdatert skjema for customer
2024-10-31 04:16:02 - db_utils - INFO - Oppdatert skjema for feedback
2024-10-31 04:16:02 - db_utils - INFO - Oppdatert skjema for login_history
2024-10-31 04:16:02 - db_utils - INFO - Oppdatert skjema for stroing
2024-10-31 04:16:02 - db_utils - INFO - Oppdatert skjema for tunbroyting
2024-10-31 04:16:02 - db_utils - INFO - All database schemas verified and updated
2024-10-31 04:16:02 - db_utils - INFO - Database already initialized. Skipping.
2024-10-31 04:16:02 - db_utils - INFO - Query executed successfully on login_history.db. Rows affected: -1
2024-10-31 04:16:03 - db_utils - INFO - login_history table structure is correct
2024-10-31 04:16:03 - customer_utils - INFO - Starting cabin user consistency check
2024-10-31 04:16:03 - utils - INFO - Attempting to load passwords from secrets
2024-10-31 04:16:03 - utils - INFO - Successfully loaded passwords. Number of entries: 94
2024-10-31 04:16:03 - customer_utils - INFO - Retrieved 94 passwords
2024-10-31 04:16:03 - customer_utils - INFO - Found 94 customers in database
2024-10-31 04:16:03 - customer_utils - INFO - Consistency check completed
2024-10-31 04:16:03 - customer_utils - INFO - Database connection closed
2024-10-31 04:16:03 - customer_utils - INFO - Validating customers and passwords
2024-10-31 04:16:03 - utils - INFO - Attempting to load passwords from secrets
2024-10-31 04:16:03 - utils - INFO - Successfully loaded passwords. Number of entries: 94
2024-10-31 04:16:03 - customer_utils - INFO - Customer and password validation complete
2024-10-31 04:16:03 - db_utils - INFO - Successfully created indexes for tunbroyting database
2024-10-31 04:16:03 - db_utils - INFO - Successfully created indexes for stroing database
2024-10-31 04:16:03 - db_utils - INFO - Successfully created indexes for feedback database
2024-10-31 04:16:03 - db_utils - INFO - Successfully created indexes for login_history database
2024-10-31 04:16:03 - db_utils - INFO - Successfully created indexes for customer database
2024-10-31 04:16:03 - db_utils - INFO - Database index creation completed
2024-10-31 04:16:03 - __main__ - INFO - Application initialization completed successfully
2024-10-31 04:16:03 - __main__ - INFO - Application initialization completed successfully
2024-10-31 04:16:03 - __main__ - INFO - Application setup complete
2024-10-31 04:16:03 - auth_utils - INFO - Login attempt for ID: 999
2024-10-31 04:16:03 - db_utils - INFO - DATABASE_PATH: /Users/tor.inge.jossang@aftenbladet.no/dev/gullingen
2024-10-31 04:16:03 - db_utils - INFO - Full database path: /Users/tor.inge.jossang@aftenbladet.no/dev/gullingen/login_history.db
2024-10-31 04:16:03 - db_utils - INFO - Attempting to create database engine...
2024-10-31 04:16:03 - db_utils - INFO - Database engine created successfully for login_history.db
2024-10-31 04:16:03 - auth_utils - INFO - Rate limit check passed for user 999
2024-10-31 04:16:03 - auth_utils - INFO - User 999 authenticated successfully
2024-10-31 04:16:03 - customer_utils - INFO - Successfully retrieved customer with ID: 999
2024-10-31 04:16:03 - db_utils - INFO - Database file /Users/tor.inge.jossang@aftenbladet.no/dev/gullingen/login_history.db exists.
2024-10-31 04:16:03 - db_utils - INFO - Query executed successfully on login_history.db. Rows affected: 1
2024-10-31 04:16:03 - auth_utils - INFO - Successful login for ID: 999
2024-10-31 04:16:03 - auth_utils - INFO - Successful login and logging for ID: 999
2024-10-31 04:16:03 - db_utils - INFO - DATABASE_PATH: /Users/tor.inge.jossang@aftenbladet.no/dev/gullingen
2024-10-31 04:16:03 - db_utils - INFO - Full database path: /Users/tor.inge.jossang@aftenbladet.no/dev/gullingen/login_history.db
2024-10-31 04:16:03 - db_utils - INFO - Attempting to create database engine...
2024-10-31 04:16:03 - db_utils - INFO - Database engine created successfully for login_history.db
2024-10-31 04:16:03 - auth_utils - INFO - Rate limit reset for user 999
2024-10-31 04:16:03 - __main__ - INFO - Application shutting down
2024-10-31 04:16:03 - __main__ - INFO - Added validate_user_input function to app.py
2024-10-31 04:16:03 - __main__ - INFO - Starting application initialization
2024-10-31 04:16:03 - db_utils - INFO - Starting detailed database operations debugging
2024-10-31 04:16:03 - db_utils - INFO - Debugging login_history database:
2024-10-31 04:16:03 - db_utils - INFO -   Database version: 0
2024-10-31 04:16:03 - db_utils - INFO -   Tables in login_history.db: ['login_history']
2024-10-31 04:16:03 - db_utils - INFO -   Structure of login_history table:
2024-10-31 04:16:03 - db_utils - INFO -     Column: id, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:16:03 - db_utils - INFO -     Column: login_time, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:16:03 - db_utils - INFO -     Column: success, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:16:03 - db_utils - INFO -   Indexes in login_history.db: ['idx_login_id', 'idx_login_time']
2024-10-31 04:16:03 - db_utils - INFO -   Row count in login_history: 430
2024-10-31 04:16:03 - db_utils - INFO -   Test query result: (1,)
2024-10-31 04:16:03 - db_utils - INFO - Debugging tunbroyting database:
2024-10-31 04:16:03 - db_utils - INFO -   Database version: 0
2024-10-31 04:16:03 - db_utils - INFO -   Tables in tunbroyting.db: ['tunbroyting_bestillinger']
2024-10-31 04:16:03 - db_utils - INFO -   Structure of tunbroyting_bestillinger table:
2024-10-31 04:16:03 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 04:16:03 - db_utils - INFO -     Column: bruker, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:16:03 - db_utils - INFO -     Column: ankomst_dato, Type: DATE, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:16:03 - db_utils - INFO -     Column: ankomst_tid, Type: TIME, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:16:03 - db_utils - INFO -     Column: avreise_dato, Type: DATE, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:16:03 - db_utils - INFO -     Column: avreise_tid, Type: TIME, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:16:03 - db_utils - INFO -     Column: abonnement_type, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:16:03 - db_utils - INFO -   Indexes in tunbroyting.db: ['idx_tunbroyting_bruker', 'idx_tunbroyting_ankomst_dato', 'idx_tunbroyting_avreise_dato', 'idx_tunbroyting_abonnement']
2024-10-31 04:16:03 - db_utils - INFO -   Row count in tunbroyting_bestillinger: 2
2024-10-31 04:16:03 - db_utils - INFO -   Test query result: (1,)
2024-10-31 04:16:03 - db_utils - INFO - Debugging stroing database:
2024-10-31 04:16:03 - db_utils - INFO -   Database version: 0
2024-10-31 04:16:03 - db_utils - INFO -   Tables in stroing.db: ['sqlite_sequence', 'stroing_bestillinger']
2024-10-31 04:16:03 - db_utils - INFO -   Structure of sqlite_sequence table:
2024-10-31 04:16:03 - db_utils - INFO -     Column: name, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:16:03 - db_utils - INFO -     Column: seq, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:16:03 - db_utils - INFO -   Structure of stroing_bestillinger table:
2024-10-31 04:16:03 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 04:16:03 - db_utils - INFO -     Column: bruker, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:16:03 - db_utils - INFO -     Column: bestillings_dato, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:16:03 - db_utils - INFO -     Column: onske_dato, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:16:03 - db_utils - INFO -   Indexes in stroing.db: ['idx_stroing_bruker', 'idx_stroing_onske_dato', 'idx_stroing_bestillings_dato']
2024-10-31 04:16:03 - db_utils - INFO -   Row count in sqlite_sequence: 1
2024-10-31 04:16:03 - db_utils - INFO -   Row count in stroing_bestillinger: 5
2024-10-31 04:16:03 - db_utils - INFO -   Test query result: (1,)
2024-10-31 04:16:03 - db_utils - INFO - Debugging feedback database:
2024-10-31 04:16:03 - db_utils - INFO -   Database version: 0
2024-10-31 04:16:03 - db_utils - INFO -   Tables in feedback.db: ['sqlite_sequence', 'feedback']
2024-10-31 04:16:03 - db_utils - INFO -   Structure of sqlite_sequence table:
2024-10-31 04:16:03 - db_utils - INFO -     Column: name, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:16:03 - db_utils - INFO -     Column: seq, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:16:03 - db_utils - INFO -   Structure of feedback table:
2024-10-31 04:16:03 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 04:16:03 - db_utils - INFO -     Column: type, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:16:03 - db_utils - INFO -     Column: datetime, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:16:03 - db_utils - INFO -     Column: comment, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:16:03 - db_utils - INFO -     Column: innsender, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:16:03 - db_utils - INFO -     Column: status, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:16:03 - db_utils - INFO -     Column: status_changed_by, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:16:03 - db_utils - INFO -     Column: status_changed_at, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:16:03 - db_utils - INFO -     Column: hidden, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:16:03 - db_utils - INFO -     Column: is_alert, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:16:03 - db_utils - INFO -     Column: display_on_weather, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:16:03 - db_utils - INFO -     Column: expiry_date, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:16:03 - db_utils - INFO -     Column: target_group, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:16:03 - db_utils - INFO -   Indexes in feedback.db: ['idx_feedback_datetime', 'idx_feedback_innsender', 'idx_feedback_status', 'idx_feedback_type']
2024-10-31 04:16:03 - db_utils - INFO -   Row count in sqlite_sequence: 1
2024-10-31 04:16:03 - db_utils - INFO -   Row count in feedback: 11
2024-10-31 04:16:03 - db_utils - INFO -   Test query result: (1,)
2024-10-31 04:16:03 - db_utils - INFO - Detailed database operations debugging completed
2024-10-31 04:16:03 - db_utils - INFO - Oppdatert skjema for customer
2024-10-31 04:16:03 - db_utils - INFO - Oppdatert skjema for feedback
2024-10-31 04:16:03 - db_utils - INFO - Oppdatert skjema for login_history
2024-10-31 04:16:03 - db_utils - INFO - Oppdatert skjema for stroing
2024-10-31 04:16:03 - db_utils - INFO - Oppdatert skjema for tunbroyting
2024-10-31 04:16:03 - db_utils - INFO - All database schemas verified and updated
2024-10-31 04:16:03 - db_utils - INFO - Oppdatert skjema for customer
2024-10-31 04:16:03 - db_utils - INFO - Oppdatert skjema for feedback
2024-10-31 04:16:03 - db_utils - INFO - Oppdatert skjema for login_history
2024-10-31 04:16:03 - db_utils - INFO - Oppdatert skjema for stroing
2024-10-31 04:16:03 - db_utils - INFO - Oppdatert skjema for tunbroyting
2024-10-31 04:16:03 - db_utils - INFO - All database schemas verified and updated
2024-10-31 04:16:03 - db_utils - INFO - Database already initialized. Skipping.
2024-10-31 04:16:03 - db_utils - INFO - Query executed successfully on login_history.db. Rows affected: -1
2024-10-31 04:16:03 - db_utils - INFO - login_history table structure is correct
2024-10-31 04:16:03 - customer_utils - INFO - Starting cabin user consistency check
2024-10-31 04:16:03 - utils - INFO - Attempting to load passwords from secrets
2024-10-31 04:16:03 - utils - INFO - Successfully loaded passwords. Number of entries: 94
2024-10-31 04:16:03 - customer_utils - INFO - Retrieved 94 passwords
2024-10-31 04:16:03 - customer_utils - INFO - Found 94 customers in database
2024-10-31 04:16:03 - customer_utils - INFO - Consistency check completed
2024-10-31 04:16:03 - customer_utils - INFO - Database connection closed
2024-10-31 04:16:03 - customer_utils - INFO - Validating customers and passwords
2024-10-31 04:16:03 - utils - INFO - Attempting to load passwords from secrets
2024-10-31 04:16:03 - utils - INFO - Successfully loaded passwords. Number of entries: 94
2024-10-31 04:16:03 - customer_utils - INFO - Customer and password validation complete
2024-10-31 04:16:03 - db_utils - INFO - Successfully created indexes for tunbroyting database
2024-10-31 04:16:03 - db_utils - INFO - Successfully created indexes for stroing database
2024-10-31 04:16:03 - db_utils - INFO - Successfully created indexes for feedback database
2024-10-31 04:16:03 - db_utils - INFO - Successfully created indexes for login_history database
2024-10-31 04:16:03 - db_utils - INFO - Successfully created indexes for customer database
2024-10-31 04:16:03 - db_utils - INFO - Database index creation completed
2024-10-31 04:16:03 - __main__ - INFO - Application initialization completed successfully
2024-10-31 04:16:03 - __main__ - INFO - Application initialization completed successfully
2024-10-31 04:16:03 - __main__ - INFO - Application setup complete
2024-10-31 04:16:03 - customer_utils - INFO - Successfully retrieved customer with ID: 999
2024-10-31 04:16:03 - alert_utils - INFO - Fetched 1 alerts. only_today=False, include_expired=False
2024-10-31 04:16:03 - tun_utils - WARNING - hent_bestillinger() is deprecated, use get_bookings() instead
2024-10-31 04:16:03 - tun_utils - INFO - Starting get_bookings with start_date=None, end_date=None
2024-10-31 04:16:03 - tun_utils - INFO - Successfully retrieved 2 bookings
2024-10-31 04:16:03 - __main__ - INFO - Application shutting down
2024-10-31 04:16:04 - __main__ - INFO - Added validate_user_input function to app.py
2024-10-31 04:16:04 - __main__ - INFO - Starting application initialization
2024-10-31 04:16:04 - db_utils - INFO - Starting detailed database operations debugging
2024-10-31 04:16:04 - db_utils - INFO - Debugging login_history database:
2024-10-31 04:16:04 - db_utils - INFO -   Database version: 0
2024-10-31 04:16:04 - db_utils - INFO -   Tables in login_history.db: ['login_history']
2024-10-31 04:16:04 - db_utils - INFO -   Structure of login_history table:
2024-10-31 04:16:04 - db_utils - INFO -     Column: id, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:16:04 - db_utils - INFO -     Column: login_time, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:16:04 - db_utils - INFO -     Column: success, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:16:04 - db_utils - INFO -   Indexes in login_history.db: ['idx_login_id', 'idx_login_time']
2024-10-31 04:16:04 - db_utils - INFO -   Row count in login_history: 430
2024-10-31 04:16:04 - db_utils - INFO -   Test query result: (1,)
2024-10-31 04:16:04 - db_utils - INFO - Debugging tunbroyting database:
2024-10-31 04:16:04 - db_utils - INFO -   Database version: 0
2024-10-31 04:16:04 - db_utils - INFO -   Tables in tunbroyting.db: ['tunbroyting_bestillinger']
2024-10-31 04:16:04 - db_utils - INFO -   Structure of tunbroyting_bestillinger table:
2024-10-31 04:16:04 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 04:16:04 - db_utils - INFO -     Column: bruker, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:16:04 - db_utils - INFO -     Column: ankomst_dato, Type: DATE, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:16:04 - db_utils - INFO -     Column: ankomst_tid, Type: TIME, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:16:04 - db_utils - INFO -     Column: avreise_dato, Type: DATE, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:16:04 - db_utils - INFO -     Column: avreise_tid, Type: TIME, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:16:04 - db_utils - INFO -     Column: abonnement_type, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:16:04 - db_utils - INFO -   Indexes in tunbroyting.db: ['idx_tunbroyting_bruker', 'idx_tunbroyting_ankomst_dato', 'idx_tunbroyting_avreise_dato', 'idx_tunbroyting_abonnement']
2024-10-31 04:16:04 - db_utils - INFO -   Row count in tunbroyting_bestillinger: 2
2024-10-31 04:16:04 - db_utils - INFO -   Test query result: (1,)
2024-10-31 04:16:04 - db_utils - INFO - Debugging stroing database:
2024-10-31 04:16:04 - db_utils - INFO -   Database version: 0
2024-10-31 04:16:04 - db_utils - INFO -   Tables in stroing.db: ['sqlite_sequence', 'stroing_bestillinger']
2024-10-31 04:16:04 - db_utils - INFO -   Structure of sqlite_sequence table:
2024-10-31 04:16:04 - db_utils - INFO -     Column: name, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:16:04 - db_utils - INFO -     Column: seq, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:16:04 - db_utils - INFO -   Structure of stroing_bestillinger table:
2024-10-31 04:16:04 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 04:16:04 - db_utils - INFO -     Column: bruker, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:16:04 - db_utils - INFO -     Column: bestillings_dato, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:16:04 - db_utils - INFO -     Column: onske_dato, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:16:04 - db_utils - INFO -   Indexes in stroing.db: ['idx_stroing_bruker', 'idx_stroing_onske_dato', 'idx_stroing_bestillings_dato']
2024-10-31 04:16:04 - db_utils - INFO -   Row count in sqlite_sequence: 1
2024-10-31 04:16:04 - db_utils - INFO -   Row count in stroing_bestillinger: 5
2024-10-31 04:16:04 - db_utils - INFO -   Test query result: (1,)
2024-10-31 04:16:04 - db_utils - INFO - Debugging feedback database:
2024-10-31 04:16:04 - db_utils - INFO -   Database version: 0
2024-10-31 04:16:04 - db_utils - INFO -   Tables in feedback.db: ['sqlite_sequence', 'feedback']
2024-10-31 04:16:04 - db_utils - INFO -   Structure of sqlite_sequence table:
2024-10-31 04:16:04 - db_utils - INFO -     Column: name, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:16:04 - db_utils - INFO -     Column: seq, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:16:04 - db_utils - INFO -   Structure of feedback table:
2024-10-31 04:16:04 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 04:16:04 - db_utils - INFO -     Column: type, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:16:04 - db_utils - INFO -     Column: datetime, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:16:04 - db_utils - INFO -     Column: comment, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:16:04 - db_utils - INFO -     Column: innsender, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:16:04 - db_utils - INFO -     Column: status, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:16:04 - db_utils - INFO -     Column: status_changed_by, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:16:04 - db_utils - INFO -     Column: status_changed_at, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:16:04 - db_utils - INFO -     Column: hidden, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:16:04 - db_utils - INFO -     Column: is_alert, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:16:04 - db_utils - INFO -     Column: display_on_weather, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:16:04 - db_utils - INFO -     Column: expiry_date, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:16:04 - db_utils - INFO -     Column: target_group, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:16:04 - db_utils - INFO -   Indexes in feedback.db: ['idx_feedback_datetime', 'idx_feedback_innsender', 'idx_feedback_status', 'idx_feedback_type']
2024-10-31 04:16:04 - db_utils - INFO -   Row count in sqlite_sequence: 1
2024-10-31 04:16:04 - db_utils - INFO -   Row count in feedback: 11
2024-10-31 04:16:04 - db_utils - INFO -   Test query result: (1,)
2024-10-31 04:16:04 - db_utils - INFO - Detailed database operations debugging completed
2024-10-31 04:16:04 - db_utils - INFO - Oppdatert skjema for customer
2024-10-31 04:16:04 - db_utils - INFO - Oppdatert skjema for feedback
2024-10-31 04:16:04 - db_utils - INFO - Oppdatert skjema for login_history
2024-10-31 04:16:04 - db_utils - INFO - Oppdatert skjema for stroing
2024-10-31 04:16:04 - db_utils - INFO - Oppdatert skjema for tunbroyting
2024-10-31 04:16:04 - db_utils - INFO - All database schemas verified and updated
2024-10-31 04:16:04 - db_utils - INFO - Oppdatert skjema for customer
2024-10-31 04:16:04 - db_utils - INFO - Oppdatert skjema for feedback
2024-10-31 04:16:04 - db_utils - INFO - Oppdatert skjema for login_history
2024-10-31 04:16:04 - db_utils - INFO - Oppdatert skjema for stroing
2024-10-31 04:16:04 - db_utils - INFO - Oppdatert skjema for tunbroyting
2024-10-31 04:16:04 - db_utils - INFO - All database schemas verified and updated
2024-10-31 04:16:04 - db_utils - INFO - Database already initialized. Skipping.
2024-10-31 04:16:04 - db_utils - INFO - Query executed successfully on login_history.db. Rows affected: -1
2024-10-31 04:16:04 - db_utils - INFO - login_history table structure is correct
2024-10-31 04:16:04 - customer_utils - INFO - Starting cabin user consistency check
2024-10-31 04:16:04 - utils - INFO - Attempting to load passwords from secrets
2024-10-31 04:16:04 - utils - INFO - Successfully loaded passwords. Number of entries: 94
2024-10-31 04:16:04 - customer_utils - INFO - Retrieved 94 passwords
2024-10-31 04:16:04 - customer_utils - INFO - Found 94 customers in database
2024-10-31 04:16:04 - customer_utils - INFO - Consistency check completed
2024-10-31 04:16:04 - customer_utils - INFO - Database connection closed
2024-10-31 04:16:04 - customer_utils - INFO - Validating customers and passwords
2024-10-31 04:16:04 - utils - INFO - Attempting to load passwords from secrets
2024-10-31 04:16:04 - utils - INFO - Successfully loaded passwords. Number of entries: 94
2024-10-31 04:16:04 - customer_utils - INFO - Customer and password validation complete
2024-10-31 04:16:04 - db_utils - INFO - Successfully created indexes for tunbroyting database
2024-10-31 04:16:04 - db_utils - INFO - Successfully created indexes for stroing database
2024-10-31 04:16:04 - db_utils - INFO - Successfully created indexes for feedback database
2024-10-31 04:16:04 - db_utils - INFO - Successfully created indexes for login_history database
2024-10-31 04:16:04 - db_utils - INFO - Successfully created indexes for customer database
2024-10-31 04:16:04 - db_utils - INFO - Database index creation completed
2024-10-31 04:16:04 - __main__ - INFO - Application initialization completed successfully
2024-10-31 04:16:04 - __main__ - INFO - Application initialization completed successfully
2024-10-31 04:16:04 - __main__ - INFO - Application setup complete
2024-10-31 04:16:04 - customer_utils - INFO - Successfully retrieved customer with ID: 999
2024-10-31 04:16:05 - __main__ - INFO - Application shutting down
2024-10-31 04:20:00 - __main__ - INFO - Added validate_user_input function to app.py
2024-10-31 04:20:00 - __main__ - INFO - Starting application initialization
2024-10-31 04:20:00 - db_utils - INFO - Starting detailed database operations debugging
2024-10-31 04:20:00 - db_utils - INFO - Debugging login_history database:
2024-10-31 04:20:00 - db_utils - INFO -   Database version: 0
2024-10-31 04:20:00 - db_utils - INFO -   Tables in login_history.db: ['login_history']
2024-10-31 04:20:00 - db_utils - INFO -   Structure of login_history table:
2024-10-31 04:20:00 - db_utils - INFO -     Column: id, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:20:00 - db_utils - INFO -     Column: login_time, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:20:00 - db_utils - INFO -     Column: success, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:20:00 - db_utils - INFO -   Indexes in login_history.db: ['idx_login_id', 'idx_login_time']
2024-10-31 04:20:00 - db_utils - INFO -   Row count in login_history: 430
2024-10-31 04:20:00 - db_utils - INFO -   Test query result: (1,)
2024-10-31 04:20:00 - db_utils - INFO - Debugging tunbroyting database:
2024-10-31 04:20:00 - db_utils - INFO -   Database version: 0
2024-10-31 04:20:00 - db_utils - INFO -   Tables in tunbroyting.db: ['tunbroyting_bestillinger']
2024-10-31 04:20:00 - db_utils - INFO -   Structure of tunbroyting_bestillinger table:
2024-10-31 04:20:00 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 04:20:00 - db_utils - INFO -     Column: bruker, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:20:00 - db_utils - INFO -     Column: ankomst_dato, Type: DATE, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:20:00 - db_utils - INFO -     Column: ankomst_tid, Type: TIME, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:20:00 - db_utils - INFO -     Column: avreise_dato, Type: DATE, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:20:00 - db_utils - INFO -     Column: avreise_tid, Type: TIME, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:20:00 - db_utils - INFO -     Column: abonnement_type, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:20:00 - db_utils - INFO -   Indexes in tunbroyting.db: ['idx_tunbroyting_bruker', 'idx_tunbroyting_ankomst_dato', 'idx_tunbroyting_avreise_dato', 'idx_tunbroyting_abonnement']
2024-10-31 04:20:00 - db_utils - INFO -   Row count in tunbroyting_bestillinger: 2
2024-10-31 04:20:00 - db_utils - INFO -   Test query result: (1,)
2024-10-31 04:20:00 - db_utils - INFO - Debugging stroing database:
2024-10-31 04:20:00 - db_utils - INFO -   Database version: 0
2024-10-31 04:20:00 - db_utils - INFO -   Tables in stroing.db: ['sqlite_sequence', 'stroing_bestillinger']
2024-10-31 04:20:00 - db_utils - INFO -   Structure of sqlite_sequence table:
2024-10-31 04:20:00 - db_utils - INFO -     Column: name, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:20:00 - db_utils - INFO -     Column: seq, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:20:00 - db_utils - INFO -   Structure of stroing_bestillinger table:
2024-10-31 04:20:00 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 04:20:00 - db_utils - INFO -     Column: bruker, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:20:00 - db_utils - INFO -     Column: bestillings_dato, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:20:00 - db_utils - INFO -     Column: onske_dato, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:20:00 - db_utils - INFO -   Indexes in stroing.db: ['idx_stroing_bruker', 'idx_stroing_onske_dato', 'idx_stroing_bestillings_dato']
2024-10-31 04:20:00 - db_utils - INFO -   Row count in sqlite_sequence: 1
2024-10-31 04:20:00 - db_utils - INFO -   Row count in stroing_bestillinger: 5
2024-10-31 04:20:00 - db_utils - INFO -   Test query result: (1,)
2024-10-31 04:20:00 - db_utils - INFO - Debugging feedback database:
2024-10-31 04:20:00 - db_utils - INFO -   Database version: 0
2024-10-31 04:20:00 - db_utils - INFO -   Tables in feedback.db: ['sqlite_sequence', 'feedback']
2024-10-31 04:20:00 - db_utils - INFO -   Structure of sqlite_sequence table:
2024-10-31 04:20:00 - db_utils - INFO -     Column: name, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:20:00 - db_utils - INFO -     Column: seq, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:20:00 - db_utils - INFO -   Structure of feedback table:
2024-10-31 04:20:00 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 04:20:00 - db_utils - INFO -     Column: type, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:20:00 - db_utils - INFO -     Column: datetime, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:20:00 - db_utils - INFO -     Column: comment, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:20:00 - db_utils - INFO -     Column: innsender, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:20:00 - db_utils - INFO -     Column: status, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:20:00 - db_utils - INFO -     Column: status_changed_by, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:20:00 - db_utils - INFO -     Column: status_changed_at, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:20:00 - db_utils - INFO -     Column: hidden, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:20:00 - db_utils - INFO -     Column: is_alert, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:20:00 - db_utils - INFO -     Column: display_on_weather, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:20:00 - db_utils - INFO -     Column: expiry_date, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:20:00 - db_utils - INFO -     Column: target_group, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:20:00 - db_utils - INFO -   Indexes in feedback.db: ['idx_feedback_datetime', 'idx_feedback_innsender', 'idx_feedback_status', 'idx_feedback_type']
2024-10-31 04:20:00 - db_utils - INFO -   Row count in sqlite_sequence: 1
2024-10-31 04:20:00 - db_utils - INFO -   Row count in feedback: 11
2024-10-31 04:20:00 - db_utils - INFO -   Test query result: (1,)
2024-10-31 04:20:00 - db_utils - INFO - Detailed database operations debugging completed
2024-10-31 04:20:00 - db_utils - INFO - Oppdatert skjema for customer
2024-10-31 04:20:00 - db_utils - INFO - Oppdatert skjema for feedback
2024-10-31 04:20:00 - db_utils - INFO - Oppdatert skjema for login_history
2024-10-31 04:20:00 - db_utils - INFO - Oppdatert skjema for stroing
2024-10-31 04:20:00 - db_utils - INFO - Oppdatert skjema for tunbroyting
2024-10-31 04:20:00 - db_utils - INFO - All database schemas verified and updated
2024-10-31 04:20:00 - db_utils - INFO - Oppdatert skjema for customer
2024-10-31 04:20:00 - db_utils - INFO - Oppdatert skjema for feedback
2024-10-31 04:20:00 - db_utils - INFO - Oppdatert skjema for login_history
2024-10-31 04:20:00 - db_utils - INFO - Oppdatert skjema for stroing
2024-10-31 04:20:00 - db_utils - INFO - Oppdatert skjema for tunbroyting
2024-10-31 04:20:00 - db_utils - INFO - All database schemas verified and updated
2024-10-31 04:20:00 - db_utils - INFO - Database login_history initialized, updated, and optimized
2024-10-31 04:20:00 - db_utils - INFO - Database tunbroyting initialized, updated, and optimized
2024-10-31 04:20:00 - db_utils - INFO - Database stroing initialized, updated, and optimized
2024-10-31 04:20:00 - db_utils - INFO - Database feedback initialized, updated, and optimized
2024-10-31 04:20:00 - db_utils - INFO - Database customer initialized, updated, and optimized
2024-10-31 04:20:00 - db_utils - INFO - Successfully created indexes for tunbroyting database
2024-10-31 04:20:00 - db_utils - INFO - Successfully created indexes for stroing database
2024-10-31 04:20:00 - db_utils - INFO - Successfully created indexes for feedback database
2024-10-31 04:20:00 - db_utils - INFO - Successfully created indexes for login_history database
2024-10-31 04:20:00 - db_utils - INFO - Successfully created indexes for customer database
2024-10-31 04:20:00 - db_utils - INFO - Database index creation completed
2024-10-31 04:20:00 - db_utils - INFO - Database indexes created
2024-10-31 04:20:00 - db_utils - INFO - Successfully verified connection to stroing.db
2024-10-31 04:20:00 - db_utils - INFO - Successfully verified connection to tunbroyting.db
2024-10-31 04:20:00 - db_utils - INFO - Successfully verified connection to feedback.db
2024-10-31 04:20:00 - db_utils - INFO - Successfully verified connection to login_history.db
2024-10-31 04:20:00 - db_utils - INFO - Successfully verified connection to customer.db
2024-10-31 04:20:00 - db_utils - INFO - Database connections verified
2024-10-31 04:20:00 - db_utils - INFO - All databases initialized, updated, and verified
2024-10-31 04:20:00 - db_utils - INFO - Query executed successfully on login_history.db. Rows affected: -1
2024-10-31 04:20:00 - db_utils - INFO - login_history table structure is correct
2024-10-31 04:20:00 - customer_utils - INFO - Starting cabin user consistency check
2024-10-31 04:20:00 - utils - INFO - Attempting to load passwords from secrets
2024-10-31 04:20:00 - utils - INFO - Successfully loaded passwords. Number of entries: 94
2024-10-31 04:20:00 - customer_utils - INFO - Retrieved 94 passwords
2024-10-31 04:20:00 - customer_utils - INFO - Found 94 customers in database
2024-10-31 04:20:00 - customer_utils - INFO - Consistency check completed
2024-10-31 04:20:00 - customer_utils - INFO - Database connection closed
2024-10-31 04:20:00 - customer_utils - INFO - Validating customers and passwords
2024-10-31 04:20:00 - utils - INFO - Attempting to load passwords from secrets
2024-10-31 04:20:00 - utils - INFO - Successfully loaded passwords. Number of entries: 94
2024-10-31 04:20:00 - customer_utils - INFO - Customer and password validation complete
2024-10-31 04:20:00 - db_utils - INFO - Successfully created indexes for tunbroyting database
2024-10-31 04:20:00 - db_utils - INFO - Successfully created indexes for stroing database
2024-10-31 04:20:00 - db_utils - INFO - Successfully created indexes for feedback database
2024-10-31 04:20:00 - db_utils - INFO - Successfully created indexes for login_history database
2024-10-31 04:20:00 - db_utils - INFO - Successfully created indexes for customer database
2024-10-31 04:20:00 - db_utils - INFO - Database index creation completed
2024-10-31 04:20:00 - __main__ - INFO - Application initialization completed successfully
2024-10-31 04:20:00 - __main__ - INFO - Application initialization completed successfully
2024-10-31 04:20:00 - __main__ - INFO - Application setup complete
2024-10-31 04:20:00 - __main__ - INFO - Application shutting down
2024-10-31 04:20:03 - __main__ - INFO - Added validate_user_input function to app.py
2024-10-31 04:20:03 - __main__ - INFO - Starting application initialization
2024-10-31 04:20:03 - db_utils - INFO - Starting detailed database operations debugging
2024-10-31 04:20:03 - db_utils - INFO - Debugging login_history database:
2024-10-31 04:20:03 - db_utils - INFO -   Database version: 0
2024-10-31 04:20:03 - db_utils - INFO -   Tables in login_history.db: ['login_history']
2024-10-31 04:20:03 - db_utils - INFO -   Structure of login_history table:
2024-10-31 04:20:03 - db_utils - INFO -     Column: id, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:20:03 - db_utils - INFO -     Column: login_time, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:20:03 - db_utils - INFO -     Column: success, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:20:03 - db_utils - INFO -   Indexes in login_history.db: ['idx_login_id', 'idx_login_time']
2024-10-31 04:20:03 - db_utils - INFO -   Row count in login_history: 430
2024-10-31 04:20:03 - db_utils - INFO -   Test query result: (1,)
2024-10-31 04:20:03 - db_utils - INFO - Debugging tunbroyting database:
2024-10-31 04:20:03 - db_utils - INFO -   Database version: 0
2024-10-31 04:20:03 - db_utils - INFO -   Tables in tunbroyting.db: ['tunbroyting_bestillinger']
2024-10-31 04:20:03 - db_utils - INFO -   Structure of tunbroyting_bestillinger table:
2024-10-31 04:20:03 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 04:20:03 - db_utils - INFO -     Column: bruker, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:20:03 - db_utils - INFO -     Column: ankomst_dato, Type: DATE, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:20:03 - db_utils - INFO -     Column: ankomst_tid, Type: TIME, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:20:03 - db_utils - INFO -     Column: avreise_dato, Type: DATE, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:20:03 - db_utils - INFO -     Column: avreise_tid, Type: TIME, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:20:03 - db_utils - INFO -     Column: abonnement_type, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:20:03 - db_utils - INFO -   Indexes in tunbroyting.db: ['idx_tunbroyting_bruker', 'idx_tunbroyting_ankomst_dato', 'idx_tunbroyting_avreise_dato', 'idx_tunbroyting_abonnement']
2024-10-31 04:20:03 - db_utils - INFO -   Row count in tunbroyting_bestillinger: 2
2024-10-31 04:20:03 - db_utils - INFO -   Test query result: (1,)
2024-10-31 04:20:03 - db_utils - INFO - Debugging stroing database:
2024-10-31 04:20:03 - db_utils - INFO -   Database version: 0
2024-10-31 04:20:03 - db_utils - INFO -   Tables in stroing.db: ['sqlite_sequence', 'stroing_bestillinger']
2024-10-31 04:20:03 - db_utils - INFO -   Structure of sqlite_sequence table:
2024-10-31 04:20:03 - db_utils - INFO -     Column: name, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:20:03 - db_utils - INFO -     Column: seq, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:20:03 - db_utils - INFO -   Structure of stroing_bestillinger table:
2024-10-31 04:20:03 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 04:20:03 - db_utils - INFO -     Column: bruker, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:20:03 - db_utils - INFO -     Column: bestillings_dato, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:20:03 - db_utils - INFO -     Column: onske_dato, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:20:03 - db_utils - INFO -   Indexes in stroing.db: ['idx_stroing_bruker', 'idx_stroing_onske_dato', 'idx_stroing_bestillings_dato']
2024-10-31 04:20:03 - db_utils - INFO -   Row count in sqlite_sequence: 1
2024-10-31 04:20:03 - db_utils - INFO -   Row count in stroing_bestillinger: 5
2024-10-31 04:20:03 - db_utils - INFO -   Test query result: (1,)
2024-10-31 04:20:03 - db_utils - INFO - Debugging feedback database:
2024-10-31 04:20:03 - db_utils - INFO -   Database version: 0
2024-10-31 04:20:03 - db_utils - INFO -   Tables in feedback.db: ['sqlite_sequence', 'feedback']
2024-10-31 04:20:03 - db_utils - INFO -   Structure of sqlite_sequence table:
2024-10-31 04:20:03 - db_utils - INFO -     Column: name, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:20:03 - db_utils - INFO -     Column: seq, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:20:03 - db_utils - INFO -   Structure of feedback table:
2024-10-31 04:20:03 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 04:20:03 - db_utils - INFO -     Column: type, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:20:03 - db_utils - INFO -     Column: datetime, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:20:03 - db_utils - INFO -     Column: comment, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:20:03 - db_utils - INFO -     Column: innsender, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:20:03 - db_utils - INFO -     Column: status, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:20:03 - db_utils - INFO -     Column: status_changed_by, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:20:03 - db_utils - INFO -     Column: status_changed_at, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:20:03 - db_utils - INFO -     Column: hidden, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:20:03 - db_utils - INFO -     Column: is_alert, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:20:03 - db_utils - INFO -     Column: display_on_weather, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:20:03 - db_utils - INFO -     Column: expiry_date, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:20:03 - db_utils - INFO -     Column: target_group, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:20:03 - db_utils - INFO -   Indexes in feedback.db: ['idx_feedback_datetime', 'idx_feedback_innsender', 'idx_feedback_status', 'idx_feedback_type']
2024-10-31 04:20:03 - db_utils - INFO -   Row count in sqlite_sequence: 1
2024-10-31 04:20:03 - db_utils - INFO -   Row count in feedback: 11
2024-10-31 04:20:03 - db_utils - INFO -   Test query result: (1,)
2024-10-31 04:20:03 - db_utils - INFO - Detailed database operations debugging completed
2024-10-31 04:20:03 - db_utils - INFO - Oppdatert skjema for customer
2024-10-31 04:20:03 - db_utils - INFO - Oppdatert skjema for feedback
2024-10-31 04:20:03 - db_utils - INFO - Oppdatert skjema for login_history
2024-10-31 04:20:03 - db_utils - INFO - Oppdatert skjema for stroing
2024-10-31 04:20:03 - db_utils - INFO - Oppdatert skjema for tunbroyting
2024-10-31 04:20:03 - db_utils - INFO - All database schemas verified and updated
2024-10-31 04:20:03 - db_utils - INFO - Oppdatert skjema for customer
2024-10-31 04:20:03 - db_utils - INFO - Oppdatert skjema for feedback
2024-10-31 04:20:03 - db_utils - INFO - Oppdatert skjema for login_history
2024-10-31 04:20:03 - db_utils - INFO - Oppdatert skjema for stroing
2024-10-31 04:20:03 - db_utils - INFO - Oppdatert skjema for tunbroyting
2024-10-31 04:20:03 - db_utils - INFO - All database schemas verified and updated
2024-10-31 04:20:03 - db_utils - INFO - Database already initialized. Skipping.
2024-10-31 04:20:03 - db_utils - INFO - Query executed successfully on login_history.db. Rows affected: -1
2024-10-31 04:20:03 - db_utils - INFO - login_history table structure is correct
2024-10-31 04:20:03 - customer_utils - INFO - Starting cabin user consistency check
2024-10-31 04:20:03 - utils - INFO - Attempting to load passwords from secrets
2024-10-31 04:20:03 - utils - INFO - Successfully loaded passwords. Number of entries: 94
2024-10-31 04:20:03 - customer_utils - INFO - Retrieved 94 passwords
2024-10-31 04:20:03 - customer_utils - INFO - Found 94 customers in database
2024-10-31 04:20:03 - customer_utils - INFO - Consistency check completed
2024-10-31 04:20:03 - customer_utils - INFO - Database connection closed
2024-10-31 04:20:03 - customer_utils - INFO - Validating customers and passwords
2024-10-31 04:20:03 - utils - INFO - Attempting to load passwords from secrets
2024-10-31 04:20:03 - utils - INFO - Successfully loaded passwords. Number of entries: 94
2024-10-31 04:20:03 - customer_utils - INFO - Customer and password validation complete
2024-10-31 04:20:03 - db_utils - INFO - Successfully created indexes for tunbroyting database
2024-10-31 04:20:03 - db_utils - INFO - Successfully created indexes for stroing database
2024-10-31 04:20:03 - db_utils - INFO - Successfully created indexes for feedback database
2024-10-31 04:20:03 - db_utils - INFO - Successfully created indexes for login_history database
2024-10-31 04:20:03 - db_utils - INFO - Successfully created indexes for customer database
2024-10-31 04:20:03 - db_utils - INFO - Database index creation completed
2024-10-31 04:20:03 - __main__ - INFO - Application initialization completed successfully
2024-10-31 04:20:03 - __main__ - INFO - Application initialization completed successfully
2024-10-31 04:20:03 - __main__ - INFO - Application setup complete
2024-10-31 04:20:03 - auth_utils - INFO - Login attempt for ID: 999
2024-10-31 04:20:03 - db_utils - INFO - DATABASE_PATH: /Users/tor.inge.jossang@aftenbladet.no/dev/gullingen
2024-10-31 04:20:03 - db_utils - INFO - Full database path: /Users/tor.inge.jossang@aftenbladet.no/dev/gullingen/login_history.db
2024-10-31 04:20:03 - db_utils - INFO - Attempting to create database engine...
2024-10-31 04:20:03 - db_utils - INFO - Database engine created successfully for login_history.db
2024-10-31 04:20:03 - auth_utils - INFO - Rate limit check passed for user 999
2024-10-31 04:20:03 - auth_utils - INFO - User 999 authenticated successfully
2024-10-31 04:20:03 - customer_utils - INFO - Successfully retrieved customer with ID: 999
2024-10-31 04:20:03 - db_utils - INFO - Database file /Users/tor.inge.jossang@aftenbladet.no/dev/gullingen/login_history.db exists.
2024-10-31 04:20:03 - db_utils - INFO - Query executed successfully on login_history.db. Rows affected: 1
2024-10-31 04:20:03 - auth_utils - INFO - Successful login for ID: 999
2024-10-31 04:20:03 - auth_utils - INFO - Successful login and logging for ID: 999
2024-10-31 04:20:03 - db_utils - INFO - DATABASE_PATH: /Users/tor.inge.jossang@aftenbladet.no/dev/gullingen
2024-10-31 04:20:03 - db_utils - INFO - Full database path: /Users/tor.inge.jossang@aftenbladet.no/dev/gullingen/login_history.db
2024-10-31 04:20:03 - db_utils - INFO - Attempting to create database engine...
2024-10-31 04:20:03 - db_utils - INFO - Database engine created successfully for login_history.db
2024-10-31 04:20:03 - auth_utils - INFO - Rate limit reset for user 999
2024-10-31 04:20:03 - __main__ - INFO - Application shutting down
2024-10-31 04:20:03 - __main__ - INFO - Added validate_user_input function to app.py
2024-10-31 04:20:03 - __main__ - INFO - Starting application initialization
2024-10-31 04:20:03 - db_utils - INFO - Starting detailed database operations debugging
2024-10-31 04:20:03 - db_utils - INFO - Debugging login_history database:
2024-10-31 04:20:03 - db_utils - INFO -   Database version: 0
2024-10-31 04:20:03 - db_utils - INFO -   Tables in login_history.db: ['login_history']
2024-10-31 04:20:03 - db_utils - INFO -   Structure of login_history table:
2024-10-31 04:20:03 - db_utils - INFO -     Column: id, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:20:03 - db_utils - INFO -     Column: login_time, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:20:03 - db_utils - INFO -     Column: success, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:20:03 - db_utils - INFO -   Indexes in login_history.db: ['idx_login_id', 'idx_login_time']
2024-10-31 04:20:03 - db_utils - INFO -   Row count in login_history: 431
2024-10-31 04:20:03 - db_utils - INFO -   Test query result: (1,)
2024-10-31 04:20:03 - db_utils - INFO - Debugging tunbroyting database:
2024-10-31 04:20:03 - db_utils - INFO -   Database version: 0
2024-10-31 04:20:03 - db_utils - INFO -   Tables in tunbroyting.db: ['tunbroyting_bestillinger']
2024-10-31 04:20:03 - db_utils - INFO -   Structure of tunbroyting_bestillinger table:
2024-10-31 04:20:03 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 04:20:03 - db_utils - INFO -     Column: bruker, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:20:03 - db_utils - INFO -     Column: ankomst_dato, Type: DATE, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:20:03 - db_utils - INFO -     Column: ankomst_tid, Type: TIME, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:20:03 - db_utils - INFO -     Column: avreise_dato, Type: DATE, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:20:03 - db_utils - INFO -     Column: avreise_tid, Type: TIME, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:20:03 - db_utils - INFO -     Column: abonnement_type, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:20:03 - db_utils - INFO -   Indexes in tunbroyting.db: ['idx_tunbroyting_bruker', 'idx_tunbroyting_ankomst_dato', 'idx_tunbroyting_avreise_dato', 'idx_tunbroyting_abonnement']
2024-10-31 04:20:03 - db_utils - INFO -   Row count in tunbroyting_bestillinger: 2
2024-10-31 04:20:03 - db_utils - INFO -   Test query result: (1,)
2024-10-31 04:20:03 - db_utils - INFO - Debugging stroing database:
2024-10-31 04:20:03 - db_utils - INFO -   Database version: 0
2024-10-31 04:20:03 - db_utils - INFO -   Tables in stroing.db: ['sqlite_sequence', 'stroing_bestillinger']
2024-10-31 04:20:03 - db_utils - INFO -   Structure of sqlite_sequence table:
2024-10-31 04:20:03 - db_utils - INFO -     Column: name, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:20:03 - db_utils - INFO -     Column: seq, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:20:03 - db_utils - INFO -   Structure of stroing_bestillinger table:
2024-10-31 04:20:03 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 04:20:03 - db_utils - INFO -     Column: bruker, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:20:03 - db_utils - INFO -     Column: bestillings_dato, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:20:03 - db_utils - INFO -     Column: onske_dato, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:20:03 - db_utils - INFO -   Indexes in stroing.db: ['idx_stroing_bruker', 'idx_stroing_onske_dato', 'idx_stroing_bestillings_dato']
2024-10-31 04:20:03 - db_utils - INFO -   Row count in sqlite_sequence: 1
2024-10-31 04:20:03 - db_utils - INFO -   Row count in stroing_bestillinger: 5
2024-10-31 04:20:03 - db_utils - INFO -   Test query result: (1,)
2024-10-31 04:20:03 - db_utils - INFO - Debugging feedback database:
2024-10-31 04:20:03 - db_utils - INFO -   Database version: 0
2024-10-31 04:20:03 - db_utils - INFO -   Tables in feedback.db: ['sqlite_sequence', 'feedback']
2024-10-31 04:20:03 - db_utils - INFO -   Structure of sqlite_sequence table:
2024-10-31 04:20:03 - db_utils - INFO -     Column: name, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:20:03 - db_utils - INFO -     Column: seq, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:20:03 - db_utils - INFO -   Structure of feedback table:
2024-10-31 04:20:03 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 04:20:03 - db_utils - INFO -     Column: type, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:20:03 - db_utils - INFO -     Column: datetime, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:20:03 - db_utils - INFO -     Column: comment, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:20:03 - db_utils - INFO -     Column: innsender, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:20:03 - db_utils - INFO -     Column: status, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:20:03 - db_utils - INFO -     Column: status_changed_by, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:20:03 - db_utils - INFO -     Column: status_changed_at, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:20:03 - db_utils - INFO -     Column: hidden, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:20:03 - db_utils - INFO -     Column: is_alert, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:20:03 - db_utils - INFO -     Column: display_on_weather, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:20:03 - db_utils - INFO -     Column: expiry_date, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:20:03 - db_utils - INFO -     Column: target_group, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:20:03 - db_utils - INFO -   Indexes in feedback.db: ['idx_feedback_datetime', 'idx_feedback_innsender', 'idx_feedback_status', 'idx_feedback_type']
2024-10-31 04:20:03 - db_utils - INFO -   Row count in sqlite_sequence: 1
2024-10-31 04:20:03 - db_utils - INFO -   Row count in feedback: 11
2024-10-31 04:20:03 - db_utils - INFO -   Test query result: (1,)
2024-10-31 04:20:03 - db_utils - INFO - Detailed database operations debugging completed
2024-10-31 04:20:03 - db_utils - INFO - Oppdatert skjema for customer
2024-10-31 04:20:03 - db_utils - INFO - Oppdatert skjema for feedback
2024-10-31 04:20:03 - db_utils - INFO - Oppdatert skjema for login_history
2024-10-31 04:20:03 - db_utils - INFO - Oppdatert skjema for stroing
2024-10-31 04:20:03 - db_utils - INFO - Oppdatert skjema for tunbroyting
2024-10-31 04:20:03 - db_utils - INFO - All database schemas verified and updated
2024-10-31 04:20:03 - db_utils - INFO - Oppdatert skjema for customer
2024-10-31 04:20:03 - db_utils - INFO - Oppdatert skjema for feedback
2024-10-31 04:20:03 - db_utils - INFO - Oppdatert skjema for login_history
2024-10-31 04:20:03 - db_utils - INFO - Oppdatert skjema for stroing
2024-10-31 04:20:03 - db_utils - INFO - Oppdatert skjema for tunbroyting
2024-10-31 04:20:03 - db_utils - INFO - All database schemas verified and updated
2024-10-31 04:20:03 - db_utils - INFO - Database already initialized. Skipping.
2024-10-31 04:20:03 - db_utils - INFO - Query executed successfully on login_history.db. Rows affected: -1
2024-10-31 04:20:03 - db_utils - INFO - login_history table structure is correct
2024-10-31 04:20:03 - customer_utils - INFO - Starting cabin user consistency check
2024-10-31 04:20:03 - utils - INFO - Attempting to load passwords from secrets
2024-10-31 04:20:03 - utils - INFO - Successfully loaded passwords. Number of entries: 94
2024-10-31 04:20:03 - customer_utils - INFO - Retrieved 94 passwords
2024-10-31 04:20:03 - customer_utils - INFO - Found 94 customers in database
2024-10-31 04:20:03 - customer_utils - INFO - Consistency check completed
2024-10-31 04:20:03 - customer_utils - INFO - Database connection closed
2024-10-31 04:20:03 - customer_utils - INFO - Validating customers and passwords
2024-10-31 04:20:03 - utils - INFO - Attempting to load passwords from secrets
2024-10-31 04:20:03 - utils - INFO - Successfully loaded passwords. Number of entries: 94
2024-10-31 04:20:03 - customer_utils - INFO - Customer and password validation complete
2024-10-31 04:20:03 - db_utils - INFO - Successfully created indexes for tunbroyting database
2024-10-31 04:20:03 - db_utils - INFO - Successfully created indexes for stroing database
2024-10-31 04:20:03 - db_utils - INFO - Successfully created indexes for feedback database
2024-10-31 04:20:03 - db_utils - INFO - Successfully created indexes for login_history database
2024-10-31 04:20:03 - db_utils - INFO - Successfully created indexes for customer database
2024-10-31 04:20:03 - db_utils - INFO - Database index creation completed
2024-10-31 04:20:03 - __main__ - INFO - Application initialization completed successfully
2024-10-31 04:20:03 - __main__ - INFO - Application initialization completed successfully
2024-10-31 04:20:03 - __main__ - INFO - Application setup complete
2024-10-31 04:20:03 - customer_utils - INFO - Successfully retrieved customer with ID: 999
2024-10-31 04:20:03 - alert_utils - INFO - Fetched 1 alerts. only_today=False, include_expired=False
2024-10-31 04:20:03 - tun_utils - WARNING - hent_bestillinger() is deprecated, use get_bookings() instead
2024-10-31 04:20:03 - tun_utils - INFO - Starting get_bookings with start_date=None, end_date=None
2024-10-31 04:20:03 - tun_utils - INFO - Successfully retrieved 2 bookings
2024-10-31 04:20:03 - __main__ - INFO - Application shutting down
2024-10-31 04:20:04 - __main__ - INFO - Added validate_user_input function to app.py
2024-10-31 04:20:04 - __main__ - INFO - Starting application initialization
2024-10-31 04:20:04 - db_utils - INFO - Starting detailed database operations debugging
2024-10-31 04:20:04 - db_utils - INFO - Debugging login_history database:
2024-10-31 04:20:04 - db_utils - INFO -   Database version: 0
2024-10-31 04:20:04 - db_utils - INFO -   Tables in login_history.db: ['login_history']
2024-10-31 04:20:04 - db_utils - INFO -   Structure of login_history table:
2024-10-31 04:20:04 - db_utils - INFO -     Column: id, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:20:04 - db_utils - INFO -     Column: login_time, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:20:04 - db_utils - INFO -     Column: success, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:20:04 - db_utils - INFO -   Indexes in login_history.db: ['idx_login_id', 'idx_login_time']
2024-10-31 04:20:04 - db_utils - INFO -   Row count in login_history: 431
2024-10-31 04:20:04 - db_utils - INFO -   Test query result: (1,)
2024-10-31 04:20:04 - db_utils - INFO - Debugging tunbroyting database:
2024-10-31 04:20:04 - db_utils - INFO -   Database version: 0
2024-10-31 04:20:04 - db_utils - INFO -   Tables in tunbroyting.db: ['tunbroyting_bestillinger']
2024-10-31 04:20:04 - db_utils - INFO -   Structure of tunbroyting_bestillinger table:
2024-10-31 04:20:04 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 04:20:04 - db_utils - INFO -     Column: bruker, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:20:04 - db_utils - INFO -     Column: ankomst_dato, Type: DATE, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:20:04 - db_utils - INFO -     Column: ankomst_tid, Type: TIME, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:20:04 - db_utils - INFO -     Column: avreise_dato, Type: DATE, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:20:04 - db_utils - INFO -     Column: avreise_tid, Type: TIME, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:20:04 - db_utils - INFO -     Column: abonnement_type, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:20:04 - db_utils - INFO -   Indexes in tunbroyting.db: ['idx_tunbroyting_bruker', 'idx_tunbroyting_ankomst_dato', 'idx_tunbroyting_avreise_dato', 'idx_tunbroyting_abonnement']
2024-10-31 04:20:04 - db_utils - INFO -   Row count in tunbroyting_bestillinger: 2
2024-10-31 04:20:04 - db_utils - INFO -   Test query result: (1,)
2024-10-31 04:20:04 - db_utils - INFO - Debugging stroing database:
2024-10-31 04:20:04 - db_utils - INFO -   Database version: 0
2024-10-31 04:20:04 - db_utils - INFO -   Tables in stroing.db: ['sqlite_sequence', 'stroing_bestillinger']
2024-10-31 04:20:04 - db_utils - INFO -   Structure of sqlite_sequence table:
2024-10-31 04:20:04 - db_utils - INFO -     Column: name, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:20:04 - db_utils - INFO -     Column: seq, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:20:04 - db_utils - INFO -   Structure of stroing_bestillinger table:
2024-10-31 04:20:04 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 04:20:04 - db_utils - INFO -     Column: bruker, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:20:04 - db_utils - INFO -     Column: bestillings_dato, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:20:04 - db_utils - INFO -     Column: onske_dato, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:20:04 - db_utils - INFO -   Indexes in stroing.db: ['idx_stroing_bruker', 'idx_stroing_onske_dato', 'idx_stroing_bestillings_dato']
2024-10-31 04:20:04 - db_utils - INFO -   Row count in sqlite_sequence: 1
2024-10-31 04:20:04 - db_utils - INFO -   Row count in stroing_bestillinger: 5
2024-10-31 04:20:04 - db_utils - INFO -   Test query result: (1,)
2024-10-31 04:20:04 - db_utils - INFO - Debugging feedback database:
2024-10-31 04:20:04 - db_utils - INFO -   Database version: 0
2024-10-31 04:20:04 - db_utils - INFO -   Tables in feedback.db: ['sqlite_sequence', 'feedback']
2024-10-31 04:20:04 - db_utils - INFO -   Structure of sqlite_sequence table:
2024-10-31 04:20:04 - db_utils - INFO -     Column: name, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:20:04 - db_utils - INFO -     Column: seq, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:20:04 - db_utils - INFO -   Structure of feedback table:
2024-10-31 04:20:04 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 04:20:04 - db_utils - INFO -     Column: type, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:20:04 - db_utils - INFO -     Column: datetime, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:20:04 - db_utils - INFO -     Column: comment, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:20:04 - db_utils - INFO -     Column: innsender, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:20:04 - db_utils - INFO -     Column: status, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:20:04 - db_utils - INFO -     Column: status_changed_by, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:20:04 - db_utils - INFO -     Column: status_changed_at, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:20:04 - db_utils - INFO -     Column: hidden, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:20:04 - db_utils - INFO -     Column: is_alert, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:20:04 - db_utils - INFO -     Column: display_on_weather, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:20:04 - db_utils - INFO -     Column: expiry_date, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:20:04 - db_utils - INFO -     Column: target_group, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:20:04 - db_utils - INFO -   Indexes in feedback.db: ['idx_feedback_datetime', 'idx_feedback_innsender', 'idx_feedback_status', 'idx_feedback_type']
2024-10-31 04:20:04 - db_utils - INFO -   Row count in sqlite_sequence: 1
2024-10-31 04:20:04 - db_utils - INFO -   Row count in feedback: 11
2024-10-31 04:20:04 - db_utils - INFO -   Test query result: (1,)
2024-10-31 04:20:04 - db_utils - INFO - Detailed database operations debugging completed
2024-10-31 04:20:04 - db_utils - INFO - Oppdatert skjema for customer
2024-10-31 04:20:04 - db_utils - INFO - Oppdatert skjema for feedback
2024-10-31 04:20:04 - db_utils - INFO - Oppdatert skjema for login_history
2024-10-31 04:20:04 - db_utils - INFO - Oppdatert skjema for stroing
2024-10-31 04:20:04 - db_utils - INFO - Oppdatert skjema for tunbroyting
2024-10-31 04:20:04 - db_utils - INFO - All database schemas verified and updated
2024-10-31 04:20:04 - db_utils - INFO - Oppdatert skjema for customer
2024-10-31 04:20:04 - db_utils - INFO - Oppdatert skjema for feedback
2024-10-31 04:20:04 - db_utils - INFO - Oppdatert skjema for login_history
2024-10-31 04:20:04 - db_utils - INFO - Oppdatert skjema for stroing
2024-10-31 04:20:04 - db_utils - INFO - Oppdatert skjema for tunbroyting
2024-10-31 04:20:04 - db_utils - INFO - All database schemas verified and updated
2024-10-31 04:20:04 - db_utils - INFO - Database already initialized. Skipping.
2024-10-31 04:20:04 - db_utils - INFO - Query executed successfully on login_history.db. Rows affected: -1
2024-10-31 04:20:04 - db_utils - INFO - login_history table structure is correct
2024-10-31 04:20:04 - customer_utils - INFO - Starting cabin user consistency check
2024-10-31 04:20:04 - utils - INFO - Attempting to load passwords from secrets
2024-10-31 04:20:04 - utils - INFO - Successfully loaded passwords. Number of entries: 94
2024-10-31 04:20:04 - customer_utils - INFO - Retrieved 94 passwords
2024-10-31 04:20:04 - customer_utils - INFO - Found 94 customers in database
2024-10-31 04:20:04 - customer_utils - INFO - Consistency check completed
2024-10-31 04:20:04 - customer_utils - INFO - Database connection closed
2024-10-31 04:20:04 - customer_utils - INFO - Validating customers and passwords
2024-10-31 04:20:04 - utils - INFO - Attempting to load passwords from secrets
2024-10-31 04:20:04 - utils - INFO - Successfully loaded passwords. Number of entries: 94
2024-10-31 04:20:04 - customer_utils - INFO - Customer and password validation complete
2024-10-31 04:20:04 - db_utils - INFO - Successfully created indexes for tunbroyting database
2024-10-31 04:20:04 - db_utils - INFO - Successfully created indexes for stroing database
2024-10-31 04:20:04 - db_utils - INFO - Successfully created indexes for feedback database
2024-10-31 04:20:04 - db_utils - INFO - Successfully created indexes for login_history database
2024-10-31 04:20:04 - db_utils - INFO - Successfully created indexes for customer database
2024-10-31 04:20:04 - db_utils - INFO - Database index creation completed
2024-10-31 04:20:04 - __main__ - INFO - Application initialization completed successfully
2024-10-31 04:20:04 - __main__ - INFO - Application initialization completed successfully
2024-10-31 04:20:04 - __main__ - INFO - Application setup complete
2024-10-31 04:20:04 - customer_utils - INFO - Successfully retrieved customer with ID: 999
2024-10-31 04:20:04 - __main__ - ERROR - An error occurred during application execution: name 'get_available_columns' is not defined
Traceback (most recent call last):
  File "/Users/tor.inge.jossang@aftenbladet.no/dev/gullingen/app.py", line 263, in main
    handle_weather_page()
  File "/Users/tor.inge.jossang@aftenbladet.no/dev/gullingen/weather_display_utils.py", line 480, in handle_weather_page
    available_columns = get_available_columns()
                        ^^^^^^^^^^^^^^^^^^^^^
NameError: name 'get_available_columns' is not defined
2024-10-31 04:20:04 - __main__ - INFO - Application shutting down
2024-10-31 04:21:55 - __main__ - INFO - Added validate_user_input function to app.py
2024-10-31 04:21:55 - __main__ - INFO - Starting application initialization
2024-10-31 04:21:55 - db_utils - INFO - Starting detailed database operations debugging
2024-10-31 04:21:55 - db_utils - INFO - Debugging login_history database:
2024-10-31 04:21:55 - db_utils - INFO -   Database version: 0
2024-10-31 04:21:55 - db_utils - INFO -   Tables in login_history.db: ['login_history']
2024-10-31 04:21:55 - db_utils - INFO -   Structure of login_history table:
2024-10-31 04:21:55 - db_utils - INFO -     Column: id, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:21:55 - db_utils - INFO -     Column: login_time, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:21:55 - db_utils - INFO -     Column: success, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:21:55 - db_utils - INFO -   Indexes in login_history.db: ['idx_login_id', 'idx_login_time']
2024-10-31 04:21:55 - db_utils - INFO -   Row count in login_history: 431
2024-10-31 04:21:55 - db_utils - INFO -   Test query result: (1,)
2024-10-31 04:21:55 - db_utils - INFO - Debugging tunbroyting database:
2024-10-31 04:21:55 - db_utils - INFO -   Database version: 0
2024-10-31 04:21:55 - db_utils - INFO -   Tables in tunbroyting.db: ['tunbroyting_bestillinger']
2024-10-31 04:21:55 - db_utils - INFO -   Structure of tunbroyting_bestillinger table:
2024-10-31 04:21:55 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 04:21:55 - db_utils - INFO -     Column: bruker, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:21:55 - db_utils - INFO -     Column: ankomst_dato, Type: DATE, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:21:55 - db_utils - INFO -     Column: ankomst_tid, Type: TIME, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:21:55 - db_utils - INFO -     Column: avreise_dato, Type: DATE, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:21:55 - db_utils - INFO -     Column: avreise_tid, Type: TIME, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:21:55 - db_utils - INFO -     Column: abonnement_type, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:21:55 - db_utils - INFO -   Indexes in tunbroyting.db: ['idx_tunbroyting_bruker', 'idx_tunbroyting_ankomst_dato', 'idx_tunbroyting_avreise_dato', 'idx_tunbroyting_abonnement']
2024-10-31 04:21:55 - db_utils - INFO -   Row count in tunbroyting_bestillinger: 2
2024-10-31 04:21:55 - db_utils - INFO -   Test query result: (1,)
2024-10-31 04:21:55 - db_utils - INFO - Debugging stroing database:
2024-10-31 04:21:55 - db_utils - INFO -   Database version: 0
2024-10-31 04:21:55 - db_utils - INFO -   Tables in stroing.db: ['sqlite_sequence', 'stroing_bestillinger']
2024-10-31 04:21:55 - db_utils - INFO -   Structure of sqlite_sequence table:
2024-10-31 04:21:55 - db_utils - INFO -     Column: name, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:21:55 - db_utils - INFO -     Column: seq, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:21:55 - db_utils - INFO -   Structure of stroing_bestillinger table:
2024-10-31 04:21:55 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 04:21:55 - db_utils - INFO -     Column: bruker, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:21:55 - db_utils - INFO -     Column: bestillings_dato, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:21:55 - db_utils - INFO -     Column: onske_dato, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:21:55 - db_utils - INFO -   Indexes in stroing.db: ['idx_stroing_bruker', 'idx_stroing_onske_dato', 'idx_stroing_bestillings_dato']
2024-10-31 04:21:55 - db_utils - INFO -   Row count in sqlite_sequence: 1
2024-10-31 04:21:55 - db_utils - INFO -   Row count in stroing_bestillinger: 5
2024-10-31 04:21:55 - db_utils - INFO -   Test query result: (1,)
2024-10-31 04:21:55 - db_utils - INFO - Debugging feedback database:
2024-10-31 04:21:55 - db_utils - INFO -   Database version: 0
2024-10-31 04:21:55 - db_utils - INFO -   Tables in feedback.db: ['sqlite_sequence', 'feedback']
2024-10-31 04:21:55 - db_utils - INFO -   Structure of sqlite_sequence table:
2024-10-31 04:21:55 - db_utils - INFO -     Column: name, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:21:55 - db_utils - INFO -     Column: seq, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:21:55 - db_utils - INFO -   Structure of feedback table:
2024-10-31 04:21:55 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 04:21:55 - db_utils - INFO -     Column: type, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:21:55 - db_utils - INFO -     Column: datetime, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:21:55 - db_utils - INFO -     Column: comment, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:21:55 - db_utils - INFO -     Column: innsender, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:21:55 - db_utils - INFO -     Column: status, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:21:55 - db_utils - INFO -     Column: status_changed_by, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:21:55 - db_utils - INFO -     Column: status_changed_at, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:21:55 - db_utils - INFO -     Column: hidden, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:21:55 - db_utils - INFO -     Column: is_alert, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:21:55 - db_utils - INFO -     Column: display_on_weather, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:21:55 - db_utils - INFO -     Column: expiry_date, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:21:55 - db_utils - INFO -     Column: target_group, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:21:55 - db_utils - INFO -   Indexes in feedback.db: ['idx_feedback_datetime', 'idx_feedback_innsender', 'idx_feedback_status', 'idx_feedback_type']
2024-10-31 04:21:55 - db_utils - INFO -   Row count in sqlite_sequence: 1
2024-10-31 04:21:55 - db_utils - INFO -   Row count in feedback: 11
2024-10-31 04:21:55 - db_utils - INFO -   Test query result: (1,)
2024-10-31 04:21:55 - db_utils - INFO - Detailed database operations debugging completed
2024-10-31 04:21:55 - db_utils - INFO - Oppdatert skjema for customer
2024-10-31 04:21:55 - db_utils - INFO - Oppdatert skjema for feedback
2024-10-31 04:21:55 - db_utils - INFO - Oppdatert skjema for login_history
2024-10-31 04:21:55 - db_utils - INFO - Oppdatert skjema for stroing
2024-10-31 04:21:55 - db_utils - INFO - Oppdatert skjema for tunbroyting
2024-10-31 04:21:55 - db_utils - INFO - All database schemas verified and updated
2024-10-31 04:21:55 - db_utils - INFO - Oppdatert skjema for customer
2024-10-31 04:21:55 - db_utils - INFO - Oppdatert skjema for feedback
2024-10-31 04:21:55 - db_utils - INFO - Oppdatert skjema for login_history
2024-10-31 04:21:55 - db_utils - INFO - Oppdatert skjema for stroing
2024-10-31 04:21:55 - db_utils - INFO - Oppdatert skjema for tunbroyting
2024-10-31 04:21:55 - db_utils - INFO - All database schemas verified and updated
2024-10-31 04:21:55 - db_utils - INFO - Database login_history initialized, updated, and optimized
2024-10-31 04:21:55 - db_utils - INFO - Database tunbroyting initialized, updated, and optimized
2024-10-31 04:21:55 - db_utils - INFO - Database stroing initialized, updated, and optimized
2024-10-31 04:21:55 - db_utils - INFO - Database feedback initialized, updated, and optimized
2024-10-31 04:21:55 - db_utils - INFO - Database customer initialized, updated, and optimized
2024-10-31 04:21:55 - db_utils - INFO - Successfully created indexes for tunbroyting database
2024-10-31 04:21:55 - db_utils - INFO - Successfully created indexes for stroing database
2024-10-31 04:21:55 - db_utils - INFO - Successfully created indexes for feedback database
2024-10-31 04:21:55 - db_utils - INFO - Successfully created indexes for login_history database
2024-10-31 04:21:55 - db_utils - INFO - Successfully created indexes for customer database
2024-10-31 04:21:55 - db_utils - INFO - Database index creation completed
2024-10-31 04:21:55 - db_utils - INFO - Database indexes created
2024-10-31 04:21:55 - db_utils - INFO - Successfully verified connection to stroing.db
2024-10-31 04:21:55 - db_utils - INFO - Successfully verified connection to tunbroyting.db
2024-10-31 04:21:55 - db_utils - INFO - Successfully verified connection to feedback.db
2024-10-31 04:21:55 - db_utils - INFO - Successfully verified connection to login_history.db
2024-10-31 04:21:55 - db_utils - INFO - Successfully verified connection to customer.db
2024-10-31 04:21:55 - db_utils - INFO - Database connections verified
2024-10-31 04:21:55 - db_utils - INFO - All databases initialized, updated, and verified
2024-10-31 04:21:55 - db_utils - INFO - Query executed successfully on login_history.db. Rows affected: -1
2024-10-31 04:21:55 - db_utils - INFO - login_history table structure is correct
2024-10-31 04:21:55 - customer_utils - INFO - Starting cabin user consistency check
2024-10-31 04:21:55 - utils - INFO - Attempting to load passwords from secrets
2024-10-31 04:21:55 - utils - INFO - Successfully loaded passwords. Number of entries: 94
2024-10-31 04:21:55 - customer_utils - INFO - Retrieved 94 passwords
2024-10-31 04:21:55 - customer_utils - INFO - Found 94 customers in database
2024-10-31 04:21:55 - customer_utils - INFO - Consistency check completed
2024-10-31 04:21:55 - customer_utils - INFO - Database connection closed
2024-10-31 04:21:55 - customer_utils - INFO - Validating customers and passwords
2024-10-31 04:21:55 - utils - INFO - Attempting to load passwords from secrets
2024-10-31 04:21:55 - utils - INFO - Successfully loaded passwords. Number of entries: 94
2024-10-31 04:21:55 - customer_utils - INFO - Customer and password validation complete
2024-10-31 04:21:55 - db_utils - INFO - Successfully created indexes for tunbroyting database
2024-10-31 04:21:55 - db_utils - INFO - Successfully created indexes for stroing database
2024-10-31 04:21:55 - db_utils - INFO - Successfully created indexes for feedback database
2024-10-31 04:21:55 - db_utils - INFO - Successfully created indexes for login_history database
2024-10-31 04:21:55 - db_utils - INFO - Successfully created indexes for customer database
2024-10-31 04:21:55 - db_utils - INFO - Database index creation completed
2024-10-31 04:21:55 - __main__ - INFO - Application initialization completed successfully
2024-10-31 04:21:55 - __main__ - INFO - Application initialization completed successfully
2024-10-31 04:21:55 - __main__ - INFO - Application setup complete
2024-10-31 04:21:55 - __main__ - INFO - Application shutting down
2024-10-31 04:21:58 - __main__ - INFO - Added validate_user_input function to app.py
2024-10-31 04:21:58 - __main__ - INFO - Starting application initialization
2024-10-31 04:21:58 - db_utils - INFO - Starting detailed database operations debugging
2024-10-31 04:21:58 - db_utils - INFO - Debugging login_history database:
2024-10-31 04:21:58 - db_utils - INFO -   Database version: 0
2024-10-31 04:21:58 - db_utils - INFO -   Tables in login_history.db: ['login_history']
2024-10-31 04:21:58 - db_utils - INFO -   Structure of login_history table:
2024-10-31 04:21:58 - db_utils - INFO -     Column: id, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:21:58 - db_utils - INFO -     Column: login_time, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:21:58 - db_utils - INFO -     Column: success, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:21:58 - db_utils - INFO -   Indexes in login_history.db: ['idx_login_id', 'idx_login_time']
2024-10-31 04:21:58 - db_utils - INFO -   Row count in login_history: 431
2024-10-31 04:21:58 - db_utils - INFO -   Test query result: (1,)
2024-10-31 04:21:58 - db_utils - INFO - Debugging tunbroyting database:
2024-10-31 04:21:58 - db_utils - INFO -   Database version: 0
2024-10-31 04:21:58 - db_utils - INFO -   Tables in tunbroyting.db: ['tunbroyting_bestillinger']
2024-10-31 04:21:58 - db_utils - INFO -   Structure of tunbroyting_bestillinger table:
2024-10-31 04:21:58 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 04:21:58 - db_utils - INFO -     Column: bruker, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:21:58 - db_utils - INFO -     Column: ankomst_dato, Type: DATE, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:21:58 - db_utils - INFO -     Column: ankomst_tid, Type: TIME, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:21:58 - db_utils - INFO -     Column: avreise_dato, Type: DATE, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:21:58 - db_utils - INFO -     Column: avreise_tid, Type: TIME, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:21:58 - db_utils - INFO -     Column: abonnement_type, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:21:58 - db_utils - INFO -   Indexes in tunbroyting.db: ['idx_tunbroyting_bruker', 'idx_tunbroyting_ankomst_dato', 'idx_tunbroyting_avreise_dato', 'idx_tunbroyting_abonnement']
2024-10-31 04:21:58 - db_utils - INFO -   Row count in tunbroyting_bestillinger: 2
2024-10-31 04:21:58 - db_utils - INFO -   Test query result: (1,)
2024-10-31 04:21:58 - db_utils - INFO - Debugging stroing database:
2024-10-31 04:21:58 - db_utils - INFO -   Database version: 0
2024-10-31 04:21:58 - db_utils - INFO -   Tables in stroing.db: ['sqlite_sequence', 'stroing_bestillinger']
2024-10-31 04:21:58 - db_utils - INFO -   Structure of sqlite_sequence table:
2024-10-31 04:21:58 - db_utils - INFO -     Column: name, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:21:58 - db_utils - INFO -     Column: seq, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:21:58 - db_utils - INFO -   Structure of stroing_bestillinger table:
2024-10-31 04:21:58 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 04:21:58 - db_utils - INFO -     Column: bruker, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:21:58 - db_utils - INFO -     Column: bestillings_dato, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:21:58 - db_utils - INFO -     Column: onske_dato, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:21:58 - db_utils - INFO -   Indexes in stroing.db: ['idx_stroing_bruker', 'idx_stroing_onske_dato', 'idx_stroing_bestillings_dato']
2024-10-31 04:21:58 - db_utils - INFO -   Row count in sqlite_sequence: 1
2024-10-31 04:21:58 - db_utils - INFO -   Row count in stroing_bestillinger: 5
2024-10-31 04:21:58 - db_utils - INFO -   Test query result: (1,)
2024-10-31 04:21:58 - db_utils - INFO - Debugging feedback database:
2024-10-31 04:21:58 - db_utils - INFO -   Database version: 0
2024-10-31 04:21:58 - db_utils - INFO -   Tables in feedback.db: ['sqlite_sequence', 'feedback']
2024-10-31 04:21:58 - db_utils - INFO -   Structure of sqlite_sequence table:
2024-10-31 04:21:58 - db_utils - INFO -     Column: name, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:21:58 - db_utils - INFO -     Column: seq, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:21:58 - db_utils - INFO -   Structure of feedback table:
2024-10-31 04:21:58 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 04:21:58 - db_utils - INFO -     Column: type, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:21:58 - db_utils - INFO -     Column: datetime, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:21:58 - db_utils - INFO -     Column: comment, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:21:58 - db_utils - INFO -     Column: innsender, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:21:58 - db_utils - INFO -     Column: status, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:21:58 - db_utils - INFO -     Column: status_changed_by, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:21:58 - db_utils - INFO -     Column: status_changed_at, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:21:58 - db_utils - INFO -     Column: hidden, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:21:58 - db_utils - INFO -     Column: is_alert, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:21:58 - db_utils - INFO -     Column: display_on_weather, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:21:58 - db_utils - INFO -     Column: expiry_date, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:21:58 - db_utils - INFO -     Column: target_group, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:21:58 - db_utils - INFO -   Indexes in feedback.db: ['idx_feedback_datetime', 'idx_feedback_innsender', 'idx_feedback_status', 'idx_feedback_type']
2024-10-31 04:21:58 - db_utils - INFO -   Row count in sqlite_sequence: 1
2024-10-31 04:21:58 - db_utils - INFO -   Row count in feedback: 11
2024-10-31 04:21:58 - db_utils - INFO -   Test query result: (1,)
2024-10-31 04:21:58 - db_utils - INFO - Detailed database operations debugging completed
2024-10-31 04:21:58 - db_utils - INFO - Oppdatert skjema for customer
2024-10-31 04:21:58 - db_utils - INFO - Oppdatert skjema for feedback
2024-10-31 04:21:58 - db_utils - INFO - Oppdatert skjema for login_history
2024-10-31 04:21:58 - db_utils - INFO - Oppdatert skjema for stroing
2024-10-31 04:21:58 - db_utils - INFO - Oppdatert skjema for tunbroyting
2024-10-31 04:21:58 - db_utils - INFO - All database schemas verified and updated
2024-10-31 04:21:58 - db_utils - INFO - Oppdatert skjema for customer
2024-10-31 04:21:58 - db_utils - INFO - Oppdatert skjema for feedback
2024-10-31 04:21:58 - db_utils - INFO - Oppdatert skjema for login_history
2024-10-31 04:21:58 - db_utils - INFO - Oppdatert skjema for stroing
2024-10-31 04:21:58 - db_utils - INFO - Oppdatert skjema for tunbroyting
2024-10-31 04:21:58 - db_utils - INFO - All database schemas verified and updated
2024-10-31 04:21:58 - db_utils - INFO - Database already initialized. Skipping.
2024-10-31 04:21:58 - db_utils - INFO - Query executed successfully on login_history.db. Rows affected: -1
2024-10-31 04:21:58 - db_utils - INFO - login_history table structure is correct
2024-10-31 04:21:58 - customer_utils - INFO - Starting cabin user consistency check
2024-10-31 04:21:58 - utils - INFO - Attempting to load passwords from secrets
2024-10-31 04:21:58 - utils - INFO - Successfully loaded passwords. Number of entries: 94
2024-10-31 04:21:58 - customer_utils - INFO - Retrieved 94 passwords
2024-10-31 04:21:58 - customer_utils - INFO - Found 94 customers in database
2024-10-31 04:21:58 - customer_utils - INFO - Consistency check completed
2024-10-31 04:21:58 - customer_utils - INFO - Database connection closed
2024-10-31 04:21:58 - customer_utils - INFO - Validating customers and passwords
2024-10-31 04:21:58 - utils - INFO - Attempting to load passwords from secrets
2024-10-31 04:21:58 - utils - INFO - Successfully loaded passwords. Number of entries: 94
2024-10-31 04:21:58 - customer_utils - INFO - Customer and password validation complete
2024-10-31 04:21:58 - db_utils - INFO - Successfully created indexes for tunbroyting database
2024-10-31 04:21:58 - db_utils - INFO - Successfully created indexes for stroing database
2024-10-31 04:21:58 - db_utils - INFO - Successfully created indexes for feedback database
2024-10-31 04:21:58 - db_utils - INFO - Successfully created indexes for login_history database
2024-10-31 04:21:58 - db_utils - INFO - Successfully created indexes for customer database
2024-10-31 04:21:58 - db_utils - INFO - Database index creation completed
2024-10-31 04:21:58 - __main__ - INFO - Application initialization completed successfully
2024-10-31 04:21:58 - __main__ - INFO - Application initialization completed successfully
2024-10-31 04:21:58 - __main__ - INFO - Application setup complete
2024-10-31 04:21:58 - auth_utils - INFO - Login attempt for ID: 999
2024-10-31 04:21:58 - db_utils - INFO - DATABASE_PATH: /Users/tor.inge.jossang@aftenbladet.no/dev/gullingen
2024-10-31 04:21:58 - db_utils - INFO - Full database path: /Users/tor.inge.jossang@aftenbladet.no/dev/gullingen/login_history.db
2024-10-31 04:21:58 - db_utils - INFO - Attempting to create database engine...
2024-10-31 04:21:58 - db_utils - INFO - Database engine created successfully for login_history.db
2024-10-31 04:21:58 - auth_utils - INFO - Rate limit check passed for user 999
2024-10-31 04:21:58 - auth_utils - INFO - User 999 authenticated successfully
2024-10-31 04:21:58 - customer_utils - INFO - Successfully retrieved customer with ID: 999
2024-10-31 04:21:58 - db_utils - INFO - Database file /Users/tor.inge.jossang@aftenbladet.no/dev/gullingen/login_history.db exists.
2024-10-31 04:21:58 - db_utils - INFO - Query executed successfully on login_history.db. Rows affected: 1
2024-10-31 04:21:58 - auth_utils - INFO - Successful login for ID: 999
2024-10-31 04:21:58 - auth_utils - INFO - Successful login and logging for ID: 999
2024-10-31 04:21:58 - db_utils - INFO - DATABASE_PATH: /Users/tor.inge.jossang@aftenbladet.no/dev/gullingen
2024-10-31 04:21:58 - db_utils - INFO - Full database path: /Users/tor.inge.jossang@aftenbladet.no/dev/gullingen/login_history.db
2024-10-31 04:21:58 - db_utils - INFO - Attempting to create database engine...
2024-10-31 04:21:58 - db_utils - INFO - Database engine created successfully for login_history.db
2024-10-31 04:21:58 - auth_utils - INFO - Rate limit reset for user 999
2024-10-31 04:21:58 - __main__ - INFO - Application shutting down
2024-10-31 04:21:58 - __main__ - INFO - Added validate_user_input function to app.py
2024-10-31 04:21:58 - __main__ - INFO - Starting application initialization
2024-10-31 04:21:58 - db_utils - INFO - Starting detailed database operations debugging
2024-10-31 04:21:58 - db_utils - INFO - Debugging login_history database:
2024-10-31 04:21:58 - db_utils - INFO -   Database version: 0
2024-10-31 04:21:58 - db_utils - INFO -   Tables in login_history.db: ['login_history']
2024-10-31 04:21:58 - db_utils - INFO -   Structure of login_history table:
2024-10-31 04:21:58 - db_utils - INFO -     Column: id, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:21:58 - db_utils - INFO -     Column: login_time, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:21:58 - db_utils - INFO -     Column: success, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:21:58 - db_utils - INFO -   Indexes in login_history.db: ['idx_login_id', 'idx_login_time']
2024-10-31 04:21:58 - db_utils - INFO -   Row count in login_history: 432
2024-10-31 04:21:58 - db_utils - INFO -   Test query result: (1,)
2024-10-31 04:21:58 - db_utils - INFO - Debugging tunbroyting database:
2024-10-31 04:21:58 - db_utils - INFO -   Database version: 0
2024-10-31 04:21:58 - db_utils - INFO -   Tables in tunbroyting.db: ['tunbroyting_bestillinger']
2024-10-31 04:21:58 - db_utils - INFO -   Structure of tunbroyting_bestillinger table:
2024-10-31 04:21:58 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 04:21:58 - db_utils - INFO -     Column: bruker, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:21:58 - db_utils - INFO -     Column: ankomst_dato, Type: DATE, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:21:58 - db_utils - INFO -     Column: ankomst_tid, Type: TIME, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:21:58 - db_utils - INFO -     Column: avreise_dato, Type: DATE, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:21:58 - db_utils - INFO -     Column: avreise_tid, Type: TIME, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:21:58 - db_utils - INFO -     Column: abonnement_type, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:21:58 - db_utils - INFO -   Indexes in tunbroyting.db: ['idx_tunbroyting_bruker', 'idx_tunbroyting_ankomst_dato', 'idx_tunbroyting_avreise_dato', 'idx_tunbroyting_abonnement']
2024-10-31 04:21:58 - db_utils - INFO -   Row count in tunbroyting_bestillinger: 2
2024-10-31 04:21:58 - db_utils - INFO -   Test query result: (1,)
2024-10-31 04:21:58 - db_utils - INFO - Debugging stroing database:
2024-10-31 04:21:58 - db_utils - INFO -   Database version: 0
2024-10-31 04:21:58 - db_utils - INFO -   Tables in stroing.db: ['sqlite_sequence', 'stroing_bestillinger']
2024-10-31 04:21:58 - db_utils - INFO -   Structure of sqlite_sequence table:
2024-10-31 04:21:58 - db_utils - INFO -     Column: name, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:21:58 - db_utils - INFO -     Column: seq, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:21:58 - db_utils - INFO -   Structure of stroing_bestillinger table:
2024-10-31 04:21:58 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 04:21:58 - db_utils - INFO -     Column: bruker, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:21:58 - db_utils - INFO -     Column: bestillings_dato, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:21:58 - db_utils - INFO -     Column: onske_dato, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:21:58 - db_utils - INFO -   Indexes in stroing.db: ['idx_stroing_bruker', 'idx_stroing_onske_dato', 'idx_stroing_bestillings_dato']
2024-10-31 04:21:58 - db_utils - INFO -   Row count in sqlite_sequence: 1
2024-10-31 04:21:58 - db_utils - INFO -   Row count in stroing_bestillinger: 5
2024-10-31 04:21:58 - db_utils - INFO -   Test query result: (1,)
2024-10-31 04:21:58 - db_utils - INFO - Debugging feedback database:
2024-10-31 04:21:58 - db_utils - INFO -   Database version: 0
2024-10-31 04:21:58 - db_utils - INFO -   Tables in feedback.db: ['sqlite_sequence', 'feedback']
2024-10-31 04:21:58 - db_utils - INFO -   Structure of sqlite_sequence table:
2024-10-31 04:21:58 - db_utils - INFO -     Column: name, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:21:58 - db_utils - INFO -     Column: seq, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:21:58 - db_utils - INFO -   Structure of feedback table:
2024-10-31 04:21:58 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 04:21:58 - db_utils - INFO -     Column: type, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:21:58 - db_utils - INFO -     Column: datetime, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:21:58 - db_utils - INFO -     Column: comment, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:21:58 - db_utils - INFO -     Column: innsender, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:21:58 - db_utils - INFO -     Column: status, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:21:58 - db_utils - INFO -     Column: status_changed_by, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:21:58 - db_utils - INFO -     Column: status_changed_at, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:21:58 - db_utils - INFO -     Column: hidden, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:21:58 - db_utils - INFO -     Column: is_alert, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:21:58 - db_utils - INFO -     Column: display_on_weather, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:21:58 - db_utils - INFO -     Column: expiry_date, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:21:58 - db_utils - INFO -     Column: target_group, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:21:58 - db_utils - INFO -   Indexes in feedback.db: ['idx_feedback_datetime', 'idx_feedback_innsender', 'idx_feedback_status', 'idx_feedback_type']
2024-10-31 04:21:58 - db_utils - INFO -   Row count in sqlite_sequence: 1
2024-10-31 04:21:58 - db_utils - INFO -   Row count in feedback: 11
2024-10-31 04:21:58 - db_utils - INFO -   Test query result: (1,)
2024-10-31 04:21:58 - db_utils - INFO - Detailed database operations debugging completed
2024-10-31 04:21:58 - db_utils - INFO - Oppdatert skjema for customer
2024-10-31 04:21:58 - db_utils - INFO - Oppdatert skjema for feedback
2024-10-31 04:21:58 - db_utils - INFO - Oppdatert skjema for login_history
2024-10-31 04:21:58 - db_utils - INFO - Oppdatert skjema for stroing
2024-10-31 04:21:58 - db_utils - INFO - Oppdatert skjema for tunbroyting
2024-10-31 04:21:58 - db_utils - INFO - All database schemas verified and updated
2024-10-31 04:21:58 - db_utils - INFO - Oppdatert skjema for customer
2024-10-31 04:21:58 - db_utils - INFO - Oppdatert skjema for feedback
2024-10-31 04:21:58 - db_utils - INFO - Oppdatert skjema for login_history
2024-10-31 04:21:58 - db_utils - INFO - Oppdatert skjema for stroing
2024-10-31 04:21:58 - db_utils - INFO - Oppdatert skjema for tunbroyting
2024-10-31 04:21:58 - db_utils - INFO - All database schemas verified and updated
2024-10-31 04:21:58 - db_utils - INFO - Database already initialized. Skipping.
2024-10-31 04:21:58 - db_utils - INFO - Query executed successfully on login_history.db. Rows affected: -1
2024-10-31 04:21:58 - db_utils - INFO - login_history table structure is correct
2024-10-31 04:21:58 - customer_utils - INFO - Starting cabin user consistency check
2024-10-31 04:21:58 - utils - INFO - Attempting to load passwords from secrets
2024-10-31 04:21:58 - utils - INFO - Successfully loaded passwords. Number of entries: 94
2024-10-31 04:21:58 - customer_utils - INFO - Retrieved 94 passwords
2024-10-31 04:21:58 - customer_utils - INFO - Found 94 customers in database
2024-10-31 04:21:58 - customer_utils - INFO - Consistency check completed
2024-10-31 04:21:58 - customer_utils - INFO - Database connection closed
2024-10-31 04:21:58 - customer_utils - INFO - Validating customers and passwords
2024-10-31 04:21:58 - utils - INFO - Attempting to load passwords from secrets
2024-10-31 04:21:58 - utils - INFO - Successfully loaded passwords. Number of entries: 94
2024-10-31 04:21:58 - customer_utils - INFO - Customer and password validation complete
2024-10-31 04:21:58 - db_utils - INFO - Successfully created indexes for tunbroyting database
2024-10-31 04:21:58 - db_utils - INFO - Successfully created indexes for stroing database
2024-10-31 04:21:58 - db_utils - INFO - Successfully created indexes for feedback database
2024-10-31 04:21:58 - db_utils - INFO - Successfully created indexes for login_history database
2024-10-31 04:21:58 - db_utils - INFO - Successfully created indexes for customer database
2024-10-31 04:21:58 - db_utils - INFO - Database index creation completed
2024-10-31 04:21:58 - __main__ - INFO - Application initialization completed successfully
2024-10-31 04:21:58 - __main__ - INFO - Application initialization completed successfully
2024-10-31 04:21:58 - __main__ - INFO - Application setup complete
2024-10-31 04:21:58 - customer_utils - INFO - Successfully retrieved customer with ID: 999
2024-10-31 04:21:58 - alert_utils - INFO - Fetched 1 alerts. only_today=False, include_expired=False
2024-10-31 04:21:58 - tun_utils - WARNING - hent_bestillinger() is deprecated, use get_bookings() instead
2024-10-31 04:21:58 - tun_utils - INFO - Starting get_bookings with start_date=None, end_date=None
2024-10-31 04:21:58 - tun_utils - INFO - Successfully retrieved 2 bookings
2024-10-31 04:21:58 - __main__ - INFO - Application shutting down
2024-10-31 04:22:00 - __main__ - INFO - Added validate_user_input function to app.py
2024-10-31 04:22:00 - __main__ - INFO - Starting application initialization
2024-10-31 04:22:00 - db_utils - INFO - Starting detailed database operations debugging
2024-10-31 04:22:00 - db_utils - INFO - Debugging login_history database:
2024-10-31 04:22:00 - db_utils - INFO -   Database version: 0
2024-10-31 04:22:00 - db_utils - INFO -   Tables in login_history.db: ['login_history']
2024-10-31 04:22:00 - db_utils - INFO -   Structure of login_history table:
2024-10-31 04:22:00 - db_utils - INFO -     Column: id, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:22:00 - db_utils - INFO -     Column: login_time, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:22:00 - db_utils - INFO -     Column: success, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:22:00 - db_utils - INFO -   Indexes in login_history.db: ['idx_login_id', 'idx_login_time']
2024-10-31 04:22:00 - db_utils - INFO -   Row count in login_history: 432
2024-10-31 04:22:00 - db_utils - INFO -   Test query result: (1,)
2024-10-31 04:22:00 - db_utils - INFO - Debugging tunbroyting database:
2024-10-31 04:22:00 - db_utils - INFO -   Database version: 0
2024-10-31 04:22:00 - db_utils - INFO -   Tables in tunbroyting.db: ['tunbroyting_bestillinger']
2024-10-31 04:22:00 - db_utils - INFO -   Structure of tunbroyting_bestillinger table:
2024-10-31 04:22:00 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 04:22:00 - db_utils - INFO -     Column: bruker, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:22:00 - db_utils - INFO -     Column: ankomst_dato, Type: DATE, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:22:00 - db_utils - INFO -     Column: ankomst_tid, Type: TIME, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:22:00 - db_utils - INFO -     Column: avreise_dato, Type: DATE, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:22:00 - db_utils - INFO -     Column: avreise_tid, Type: TIME, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:22:00 - db_utils - INFO -     Column: abonnement_type, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:22:00 - db_utils - INFO -   Indexes in tunbroyting.db: ['idx_tunbroyting_bruker', 'idx_tunbroyting_ankomst_dato', 'idx_tunbroyting_avreise_dato', 'idx_tunbroyting_abonnement']
2024-10-31 04:22:00 - db_utils - INFO -   Row count in tunbroyting_bestillinger: 2
2024-10-31 04:22:00 - db_utils - INFO -   Test query result: (1,)
2024-10-31 04:22:00 - db_utils - INFO - Debugging stroing database:
2024-10-31 04:22:00 - db_utils - INFO -   Database version: 0
2024-10-31 04:22:00 - db_utils - INFO -   Tables in stroing.db: ['sqlite_sequence', 'stroing_bestillinger']
2024-10-31 04:22:00 - db_utils - INFO -   Structure of sqlite_sequence table:
2024-10-31 04:22:00 - db_utils - INFO -     Column: name, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:22:00 - db_utils - INFO -     Column: seq, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:22:00 - db_utils - INFO -   Structure of stroing_bestillinger table:
2024-10-31 04:22:00 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 04:22:00 - db_utils - INFO -     Column: bruker, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:22:00 - db_utils - INFO -     Column: bestillings_dato, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:22:00 - db_utils - INFO -     Column: onske_dato, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:22:00 - db_utils - INFO -   Indexes in stroing.db: ['idx_stroing_bruker', 'idx_stroing_onske_dato', 'idx_stroing_bestillings_dato']
2024-10-31 04:22:00 - db_utils - INFO -   Row count in sqlite_sequence: 1
2024-10-31 04:22:00 - db_utils - INFO -   Row count in stroing_bestillinger: 5
2024-10-31 04:22:00 - db_utils - INFO -   Test query result: (1,)
2024-10-31 04:22:00 - db_utils - INFO - Debugging feedback database:
2024-10-31 04:22:00 - db_utils - INFO -   Database version: 0
2024-10-31 04:22:00 - db_utils - INFO -   Tables in feedback.db: ['sqlite_sequence', 'feedback']
2024-10-31 04:22:00 - db_utils - INFO -   Structure of sqlite_sequence table:
2024-10-31 04:22:00 - db_utils - INFO -     Column: name, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:22:00 - db_utils - INFO -     Column: seq, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:22:00 - db_utils - INFO -   Structure of feedback table:
2024-10-31 04:22:00 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 04:22:00 - db_utils - INFO -     Column: type, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:22:00 - db_utils - INFO -     Column: datetime, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:22:00 - db_utils - INFO -     Column: comment, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:22:00 - db_utils - INFO -     Column: innsender, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:22:00 - db_utils - INFO -     Column: status, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:22:00 - db_utils - INFO -     Column: status_changed_by, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:22:00 - db_utils - INFO -     Column: status_changed_at, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:22:00 - db_utils - INFO -     Column: hidden, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:22:00 - db_utils - INFO -     Column: is_alert, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:22:00 - db_utils - INFO -     Column: display_on_weather, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:22:00 - db_utils - INFO -     Column: expiry_date, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:22:00 - db_utils - INFO -     Column: target_group, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:22:00 - db_utils - INFO -   Indexes in feedback.db: ['idx_feedback_datetime', 'idx_feedback_innsender', 'idx_feedback_status', 'idx_feedback_type']
2024-10-31 04:22:00 - db_utils - INFO -   Row count in sqlite_sequence: 1
2024-10-31 04:22:00 - db_utils - INFO -   Row count in feedback: 11
2024-10-31 04:22:00 - db_utils - INFO -   Test query result: (1,)
2024-10-31 04:22:00 - db_utils - INFO - Detailed database operations debugging completed
2024-10-31 04:22:00 - db_utils - INFO - Oppdatert skjema for customer
2024-10-31 04:22:00 - db_utils - INFO - Oppdatert skjema for feedback
2024-10-31 04:22:00 - db_utils - INFO - Oppdatert skjema for login_history
2024-10-31 04:22:00 - db_utils - INFO - Oppdatert skjema for stroing
2024-10-31 04:22:00 - db_utils - INFO - Oppdatert skjema for tunbroyting
2024-10-31 04:22:00 - db_utils - INFO - All database schemas verified and updated
2024-10-31 04:22:00 - db_utils - INFO - Oppdatert skjema for customer
2024-10-31 04:22:00 - db_utils - INFO - Oppdatert skjema for feedback
2024-10-31 04:22:00 - db_utils - INFO - Oppdatert skjema for login_history
2024-10-31 04:22:00 - db_utils - INFO - Oppdatert skjema for stroing
2024-10-31 04:22:00 - db_utils - INFO - Oppdatert skjema for tunbroyting
2024-10-31 04:22:00 - db_utils - INFO - All database schemas verified and updated
2024-10-31 04:22:00 - db_utils - INFO - Database already initialized. Skipping.
2024-10-31 04:22:00 - db_utils - INFO - Query executed successfully on login_history.db. Rows affected: -1
2024-10-31 04:22:00 - db_utils - INFO - login_history table structure is correct
2024-10-31 04:22:00 - customer_utils - INFO - Starting cabin user consistency check
2024-10-31 04:22:00 - utils - INFO - Attempting to load passwords from secrets
2024-10-31 04:22:00 - utils - INFO - Successfully loaded passwords. Number of entries: 94
2024-10-31 04:22:00 - customer_utils - INFO - Retrieved 94 passwords
2024-10-31 04:22:00 - customer_utils - INFO - Found 94 customers in database
2024-10-31 04:22:00 - customer_utils - INFO - Consistency check completed
2024-10-31 04:22:00 - customer_utils - INFO - Database connection closed
2024-10-31 04:22:00 - customer_utils - INFO - Validating customers and passwords
2024-10-31 04:22:00 - utils - INFO - Attempting to load passwords from secrets
2024-10-31 04:22:00 - utils - INFO - Successfully loaded passwords. Number of entries: 94
2024-10-31 04:22:00 - customer_utils - INFO - Customer and password validation complete
2024-10-31 04:22:00 - db_utils - INFO - Successfully created indexes for tunbroyting database
2024-10-31 04:22:00 - db_utils - INFO - Successfully created indexes for stroing database
2024-10-31 04:22:00 - db_utils - INFO - Successfully created indexes for feedback database
2024-10-31 04:22:00 - db_utils - INFO - Successfully created indexes for login_history database
2024-10-31 04:22:00 - db_utils - INFO - Successfully created indexes for customer database
2024-10-31 04:22:00 - db_utils - INFO - Database index creation completed
2024-10-31 04:22:00 - __main__ - INFO - Application initialization completed successfully
2024-10-31 04:22:00 - __main__ - INFO - Application initialization completed successfully
2024-10-31 04:22:00 - __main__ - INFO - Application setup complete
2024-10-31 04:22:00 - customer_utils - INFO - Successfully retrieved customer with ID: 999
2024-10-31 04:22:01 - weather_display_utils - ERROR - Uventet feil i display_weather_data: 'snow_precipitation'
Traceback (most recent call last):
  File "/Users/tor.inge.jossang@aftenbladet.no/dev/gullingen/new_clean_env/lib/python3.12/site-packages/pandas/core/indexes/base.py", line 3805, in get_loc
    return self._engine.get_loc(casted_key)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "index.pyx", line 167, in pandas._libs.index.IndexEngine.get_loc
  File "index.pyx", line 196, in pandas._libs.index.IndexEngine.get_loc
  File "pandas/_libs/hashtable_class_helper.pxi", line 7081, in pandas._libs.hashtable.PyObjectHashTable.get_item
  File "pandas/_libs/hashtable_class_helper.pxi", line 7089, in pandas._libs.hashtable.PyObjectHashTable.get_item
KeyError: 'snow_precipitation'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/tor.inge.jossang@aftenbladet.no/dev/gullingen/weather_display_utils.py", line 46, in display_weather_data
    fig = create_improved_graph(df)
          ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/tor.inge.jossang@aftenbladet.no/dev/gullingen/weather_display_utils.py", line 96, in create_improved_graph
    "data": df["snow_precipitation"],
            ~~^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/tor.inge.jossang@aftenbladet.no/dev/gullingen/new_clean_env/lib/python3.12/site-packages/pandas/core/frame.py", line 4102, in __getitem__
    indexer = self.columns.get_loc(key)
              ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/tor.inge.jossang@aftenbladet.no/dev/gullingen/new_clean_env/lib/python3.12/site-packages/pandas/core/indexes/base.py", line 3812, in get_loc
    raise KeyError(key) from err
KeyError: 'snow_precipitation'
2024-10-31 04:22:01 - __main__ - INFO - Application shutting down
2024-10-31 04:23:08 - __main__ - INFO - Added validate_user_input function to app.py
2024-10-31 04:23:08 - __main__ - INFO - Starting application initialization
2024-10-31 04:23:08 - db_utils - INFO - Starting detailed database operations debugging
2024-10-31 04:23:08 - db_utils - INFO - Debugging login_history database:
2024-10-31 04:23:08 - db_utils - INFO -   Database version: 0
2024-10-31 04:23:08 - db_utils - INFO -   Tables in login_history.db: ['login_history']
2024-10-31 04:23:08 - db_utils - INFO -   Structure of login_history table:
2024-10-31 04:23:08 - db_utils - INFO -     Column: id, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:23:08 - db_utils - INFO -     Column: login_time, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:23:08 - db_utils - INFO -     Column: success, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:23:08 - db_utils - INFO -   Indexes in login_history.db: ['idx_login_id', 'idx_login_time']
2024-10-31 04:23:08 - db_utils - INFO -   Row count in login_history: 432
2024-10-31 04:23:08 - db_utils - INFO -   Test query result: (1,)
2024-10-31 04:23:08 - db_utils - INFO - Debugging tunbroyting database:
2024-10-31 04:23:08 - db_utils - INFO -   Database version: 0
2024-10-31 04:23:08 - db_utils - INFO -   Tables in tunbroyting.db: ['tunbroyting_bestillinger']
2024-10-31 04:23:08 - db_utils - INFO -   Structure of tunbroyting_bestillinger table:
2024-10-31 04:23:08 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 04:23:08 - db_utils - INFO -     Column: bruker, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:23:08 - db_utils - INFO -     Column: ankomst_dato, Type: DATE, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:23:08 - db_utils - INFO -     Column: ankomst_tid, Type: TIME, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:23:08 - db_utils - INFO -     Column: avreise_dato, Type: DATE, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:23:08 - db_utils - INFO -     Column: avreise_tid, Type: TIME, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:23:08 - db_utils - INFO -     Column: abonnement_type, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:23:08 - db_utils - INFO -   Indexes in tunbroyting.db: ['idx_tunbroyting_bruker', 'idx_tunbroyting_ankomst_dato', 'idx_tunbroyting_avreise_dato', 'idx_tunbroyting_abonnement']
2024-10-31 04:23:08 - db_utils - INFO -   Row count in tunbroyting_bestillinger: 2
2024-10-31 04:23:08 - db_utils - INFO -   Test query result: (1,)
2024-10-31 04:23:08 - db_utils - INFO - Debugging stroing database:
2024-10-31 04:23:08 - db_utils - INFO -   Database version: 0
2024-10-31 04:23:08 - db_utils - INFO -   Tables in stroing.db: ['sqlite_sequence', 'stroing_bestillinger']
2024-10-31 04:23:08 - db_utils - INFO -   Structure of sqlite_sequence table:
2024-10-31 04:23:08 - db_utils - INFO -     Column: name, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:23:08 - db_utils - INFO -     Column: seq, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:23:08 - db_utils - INFO -   Structure of stroing_bestillinger table:
2024-10-31 04:23:08 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 04:23:08 - db_utils - INFO -     Column: bruker, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:23:08 - db_utils - INFO -     Column: bestillings_dato, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:23:08 - db_utils - INFO -     Column: onske_dato, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:23:08 - db_utils - INFO -   Indexes in stroing.db: ['idx_stroing_bruker', 'idx_stroing_onske_dato', 'idx_stroing_bestillings_dato']
2024-10-31 04:23:08 - db_utils - INFO -   Row count in sqlite_sequence: 1
2024-10-31 04:23:08 - db_utils - INFO -   Row count in stroing_bestillinger: 5
2024-10-31 04:23:08 - db_utils - INFO -   Test query result: (1,)
2024-10-31 04:23:08 - db_utils - INFO - Debugging feedback database:
2024-10-31 04:23:08 - db_utils - INFO -   Database version: 0
2024-10-31 04:23:08 - db_utils - INFO -   Tables in feedback.db: ['sqlite_sequence', 'feedback']
2024-10-31 04:23:08 - db_utils - INFO -   Structure of sqlite_sequence table:
2024-10-31 04:23:08 - db_utils - INFO -     Column: name, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:23:08 - db_utils - INFO -     Column: seq, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:23:08 - db_utils - INFO -   Structure of feedback table:
2024-10-31 04:23:08 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 04:23:08 - db_utils - INFO -     Column: type, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:23:08 - db_utils - INFO -     Column: datetime, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:23:08 - db_utils - INFO -     Column: comment, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:23:08 - db_utils - INFO -     Column: innsender, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:23:08 - db_utils - INFO -     Column: status, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:23:08 - db_utils - INFO -     Column: status_changed_by, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:23:08 - db_utils - INFO -     Column: status_changed_at, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:23:08 - db_utils - INFO -     Column: hidden, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:23:08 - db_utils - INFO -     Column: is_alert, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:23:08 - db_utils - INFO -     Column: display_on_weather, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:23:08 - db_utils - INFO -     Column: expiry_date, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:23:08 - db_utils - INFO -     Column: target_group, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:23:08 - db_utils - INFO -   Indexes in feedback.db: ['idx_feedback_datetime', 'idx_feedback_innsender', 'idx_feedback_status', 'idx_feedback_type']
2024-10-31 04:23:08 - db_utils - INFO -   Row count in sqlite_sequence: 1
2024-10-31 04:23:08 - db_utils - INFO -   Row count in feedback: 11
2024-10-31 04:23:08 - db_utils - INFO -   Test query result: (1,)
2024-10-31 04:23:08 - db_utils - INFO - Detailed database operations debugging completed
2024-10-31 04:23:08 - db_utils - INFO - Oppdatert skjema for customer
2024-10-31 04:23:08 - db_utils - INFO - Oppdatert skjema for feedback
2024-10-31 04:23:08 - db_utils - INFO - Oppdatert skjema for login_history
2024-10-31 04:23:08 - db_utils - INFO - Oppdatert skjema for stroing
2024-10-31 04:23:08 - db_utils - INFO - Oppdatert skjema for tunbroyting
2024-10-31 04:23:08 - db_utils - INFO - All database schemas verified and updated
2024-10-31 04:23:08 - db_utils - INFO - Oppdatert skjema for customer
2024-10-31 04:23:08 - db_utils - INFO - Oppdatert skjema for feedback
2024-10-31 04:23:08 - db_utils - INFO - Oppdatert skjema for login_history
2024-10-31 04:23:08 - db_utils - INFO - Oppdatert skjema for stroing
2024-10-31 04:23:08 - db_utils - INFO - Oppdatert skjema for tunbroyting
2024-10-31 04:23:08 - db_utils - INFO - All database schemas verified and updated
2024-10-31 04:23:08 - db_utils - INFO - Database login_history initialized, updated, and optimized
2024-10-31 04:23:08 - db_utils - INFO - Database tunbroyting initialized, updated, and optimized
2024-10-31 04:23:08 - db_utils - INFO - Database stroing initialized, updated, and optimized
2024-10-31 04:23:08 - db_utils - INFO - Database feedback initialized, updated, and optimized
2024-10-31 04:23:08 - db_utils - INFO - Database customer initialized, updated, and optimized
2024-10-31 04:23:08 - db_utils - INFO - Successfully created indexes for tunbroyting database
2024-10-31 04:23:08 - db_utils - INFO - Successfully created indexes for stroing database
2024-10-31 04:23:08 - db_utils - INFO - Successfully created indexes for feedback database
2024-10-31 04:23:08 - db_utils - INFO - Successfully created indexes for login_history database
2024-10-31 04:23:08 - db_utils - INFO - Successfully created indexes for customer database
2024-10-31 04:23:08 - db_utils - INFO - Database index creation completed
2024-10-31 04:23:08 - db_utils - INFO - Database indexes created
2024-10-31 04:23:08 - db_utils - INFO - Successfully verified connection to stroing.db
2024-10-31 04:23:08 - db_utils - INFO - Successfully verified connection to tunbroyting.db
2024-10-31 04:23:08 - db_utils - INFO - Successfully verified connection to feedback.db
2024-10-31 04:23:08 - db_utils - INFO - Successfully verified connection to login_history.db
2024-10-31 04:23:08 - db_utils - INFO - Successfully verified connection to customer.db
2024-10-31 04:23:08 - db_utils - INFO - Database connections verified
2024-10-31 04:23:08 - db_utils - INFO - All databases initialized, updated, and verified
2024-10-31 04:23:08 - db_utils - INFO - Query executed successfully on login_history.db. Rows affected: -1
2024-10-31 04:23:08 - db_utils - INFO - login_history table structure is correct
2024-10-31 04:23:08 - customer_utils - INFO - Starting cabin user consistency check
2024-10-31 04:23:08 - utils - INFO - Attempting to load passwords from secrets
2024-10-31 04:23:08 - utils - INFO - Successfully loaded passwords. Number of entries: 94
2024-10-31 04:23:08 - customer_utils - INFO - Retrieved 94 passwords
2024-10-31 04:23:08 - customer_utils - INFO - Found 94 customers in database
2024-10-31 04:23:08 - customer_utils - INFO - Consistency check completed
2024-10-31 04:23:08 - customer_utils - INFO - Database connection closed
2024-10-31 04:23:08 - customer_utils - INFO - Validating customers and passwords
2024-10-31 04:23:08 - utils - INFO - Attempting to load passwords from secrets
2024-10-31 04:23:08 - utils - INFO - Successfully loaded passwords. Number of entries: 94
2024-10-31 04:23:08 - customer_utils - INFO - Customer and password validation complete
2024-10-31 04:23:08 - db_utils - INFO - Successfully created indexes for tunbroyting database
2024-10-31 04:23:08 - db_utils - INFO - Successfully created indexes for stroing database
2024-10-31 04:23:08 - db_utils - INFO - Successfully created indexes for feedback database
2024-10-31 04:23:08 - db_utils - INFO - Successfully created indexes for login_history database
2024-10-31 04:23:08 - db_utils - INFO - Successfully created indexes for customer database
2024-10-31 04:23:08 - db_utils - INFO - Database index creation completed
2024-10-31 04:23:08 - __main__ - INFO - Application initialization completed successfully
2024-10-31 04:23:08 - __main__ - INFO - Application initialization completed successfully
2024-10-31 04:23:08 - __main__ - INFO - Application setup complete
2024-10-31 04:23:08 - __main__ - INFO - Application shutting down
2024-10-31 04:23:10 - __main__ - INFO - Added validate_user_input function to app.py
2024-10-31 04:23:10 - __main__ - INFO - Starting application initialization
2024-10-31 04:23:10 - db_utils - INFO - Starting detailed database operations debugging
2024-10-31 04:23:10 - db_utils - INFO - Debugging login_history database:
2024-10-31 04:23:10 - db_utils - INFO -   Database version: 0
2024-10-31 04:23:10 - db_utils - INFO -   Tables in login_history.db: ['login_history']
2024-10-31 04:23:10 - db_utils - INFO -   Structure of login_history table:
2024-10-31 04:23:10 - db_utils - INFO -     Column: id, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:23:10 - db_utils - INFO -     Column: login_time, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:23:10 - db_utils - INFO -     Column: success, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:23:10 - db_utils - INFO -   Indexes in login_history.db: ['idx_login_id', 'idx_login_time']
2024-10-31 04:23:10 - db_utils - INFO -   Row count in login_history: 432
2024-10-31 04:23:10 - db_utils - INFO -   Test query result: (1,)
2024-10-31 04:23:10 - db_utils - INFO - Debugging tunbroyting database:
2024-10-31 04:23:10 - db_utils - INFO -   Database version: 0
2024-10-31 04:23:10 - db_utils - INFO -   Tables in tunbroyting.db: ['tunbroyting_bestillinger']
2024-10-31 04:23:10 - db_utils - INFO -   Structure of tunbroyting_bestillinger table:
2024-10-31 04:23:10 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 04:23:10 - db_utils - INFO -     Column: bruker, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:23:10 - db_utils - INFO -     Column: ankomst_dato, Type: DATE, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:23:10 - db_utils - INFO -     Column: ankomst_tid, Type: TIME, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:23:10 - db_utils - INFO -     Column: avreise_dato, Type: DATE, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:23:10 - db_utils - INFO -     Column: avreise_tid, Type: TIME, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:23:10 - db_utils - INFO -     Column: abonnement_type, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:23:10 - db_utils - INFO -   Indexes in tunbroyting.db: ['idx_tunbroyting_bruker', 'idx_tunbroyting_ankomst_dato', 'idx_tunbroyting_avreise_dato', 'idx_tunbroyting_abonnement']
2024-10-31 04:23:10 - db_utils - INFO -   Row count in tunbroyting_bestillinger: 2
2024-10-31 04:23:10 - db_utils - INFO -   Test query result: (1,)
2024-10-31 04:23:10 - db_utils - INFO - Debugging stroing database:
2024-10-31 04:23:10 - db_utils - INFO -   Database version: 0
2024-10-31 04:23:10 - db_utils - INFO -   Tables in stroing.db: ['sqlite_sequence', 'stroing_bestillinger']
2024-10-31 04:23:10 - db_utils - INFO -   Structure of sqlite_sequence table:
2024-10-31 04:23:10 - db_utils - INFO -     Column: name, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:23:10 - db_utils - INFO -     Column: seq, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:23:10 - db_utils - INFO -   Structure of stroing_bestillinger table:
2024-10-31 04:23:10 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 04:23:10 - db_utils - INFO -     Column: bruker, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:23:10 - db_utils - INFO -     Column: bestillings_dato, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:23:10 - db_utils - INFO -     Column: onske_dato, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:23:10 - db_utils - INFO -   Indexes in stroing.db: ['idx_stroing_bruker', 'idx_stroing_onske_dato', 'idx_stroing_bestillings_dato']
2024-10-31 04:23:10 - db_utils - INFO -   Row count in sqlite_sequence: 1
2024-10-31 04:23:10 - db_utils - INFO -   Row count in stroing_bestillinger: 5
2024-10-31 04:23:10 - db_utils - INFO -   Test query result: (1,)
2024-10-31 04:23:10 - db_utils - INFO - Debugging feedback database:
2024-10-31 04:23:10 - db_utils - INFO -   Database version: 0
2024-10-31 04:23:10 - db_utils - INFO -   Tables in feedback.db: ['sqlite_sequence', 'feedback']
2024-10-31 04:23:10 - db_utils - INFO -   Structure of sqlite_sequence table:
2024-10-31 04:23:10 - db_utils - INFO -     Column: name, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:23:10 - db_utils - INFO -     Column: seq, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:23:10 - db_utils - INFO -   Structure of feedback table:
2024-10-31 04:23:10 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 04:23:10 - db_utils - INFO -     Column: type, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:23:10 - db_utils - INFO -     Column: datetime, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:23:10 - db_utils - INFO -     Column: comment, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:23:10 - db_utils - INFO -     Column: innsender, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:23:10 - db_utils - INFO -     Column: status, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:23:10 - db_utils - INFO -     Column: status_changed_by, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:23:10 - db_utils - INFO -     Column: status_changed_at, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:23:10 - db_utils - INFO -     Column: hidden, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:23:10 - db_utils - INFO -     Column: is_alert, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:23:10 - db_utils - INFO -     Column: display_on_weather, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:23:10 - db_utils - INFO -     Column: expiry_date, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:23:10 - db_utils - INFO -     Column: target_group, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:23:10 - db_utils - INFO -   Indexes in feedback.db: ['idx_feedback_datetime', 'idx_feedback_innsender', 'idx_feedback_status', 'idx_feedback_type']
2024-10-31 04:23:10 - db_utils - INFO -   Row count in sqlite_sequence: 1
2024-10-31 04:23:10 - db_utils - INFO -   Row count in feedback: 11
2024-10-31 04:23:10 - db_utils - INFO -   Test query result: (1,)
2024-10-31 04:23:10 - db_utils - INFO - Detailed database operations debugging completed
2024-10-31 04:23:10 - db_utils - INFO - Oppdatert skjema for customer
2024-10-31 04:23:10 - db_utils - INFO - Oppdatert skjema for feedback
2024-10-31 04:23:10 - db_utils - INFO - Oppdatert skjema for login_history
2024-10-31 04:23:10 - db_utils - INFO - Oppdatert skjema for stroing
2024-10-31 04:23:10 - db_utils - INFO - Oppdatert skjema for tunbroyting
2024-10-31 04:23:10 - db_utils - INFO - All database schemas verified and updated
2024-10-31 04:23:10 - db_utils - INFO - Oppdatert skjema for customer
2024-10-31 04:23:10 - db_utils - INFO - Oppdatert skjema for feedback
2024-10-31 04:23:10 - db_utils - INFO - Oppdatert skjema for login_history
2024-10-31 04:23:10 - db_utils - INFO - Oppdatert skjema for stroing
2024-10-31 04:23:10 - db_utils - INFO - Oppdatert skjema for tunbroyting
2024-10-31 04:23:10 - db_utils - INFO - All database schemas verified and updated
2024-10-31 04:23:10 - db_utils - INFO - Database already initialized. Skipping.
2024-10-31 04:23:10 - db_utils - INFO - Query executed successfully on login_history.db. Rows affected: -1
2024-10-31 04:23:10 - db_utils - INFO - login_history table structure is correct
2024-10-31 04:23:10 - customer_utils - INFO - Starting cabin user consistency check
2024-10-31 04:23:10 - utils - INFO - Attempting to load passwords from secrets
2024-10-31 04:23:10 - utils - INFO - Successfully loaded passwords. Number of entries: 94
2024-10-31 04:23:10 - customer_utils - INFO - Retrieved 94 passwords
2024-10-31 04:23:10 - customer_utils - INFO - Found 94 customers in database
2024-10-31 04:23:10 - customer_utils - INFO - Consistency check completed
2024-10-31 04:23:10 - customer_utils - INFO - Database connection closed
2024-10-31 04:23:10 - customer_utils - INFO - Validating customers and passwords
2024-10-31 04:23:10 - utils - INFO - Attempting to load passwords from secrets
2024-10-31 04:23:10 - utils - INFO - Successfully loaded passwords. Number of entries: 94
2024-10-31 04:23:10 - customer_utils - INFO - Customer and password validation complete
2024-10-31 04:23:10 - db_utils - INFO - Successfully created indexes for tunbroyting database
2024-10-31 04:23:10 - db_utils - INFO - Successfully created indexes for stroing database
2024-10-31 04:23:10 - db_utils - INFO - Successfully created indexes for feedback database
2024-10-31 04:23:10 - db_utils - INFO - Successfully created indexes for login_history database
2024-10-31 04:23:10 - db_utils - INFO - Successfully created indexes for customer database
2024-10-31 04:23:10 - db_utils - INFO - Database index creation completed
2024-10-31 04:23:10 - __main__ - INFO - Application initialization completed successfully
2024-10-31 04:23:10 - __main__ - INFO - Application initialization completed successfully
2024-10-31 04:23:10 - __main__ - INFO - Application setup complete
2024-10-31 04:23:10 - auth_utils - INFO - Login attempt for ID: 999
2024-10-31 04:23:10 - db_utils - INFO - DATABASE_PATH: /Users/tor.inge.jossang@aftenbladet.no/dev/gullingen
2024-10-31 04:23:10 - db_utils - INFO - Full database path: /Users/tor.inge.jossang@aftenbladet.no/dev/gullingen/login_history.db
2024-10-31 04:23:10 - db_utils - INFO - Attempting to create database engine...
2024-10-31 04:23:10 - db_utils - INFO - Database engine created successfully for login_history.db
2024-10-31 04:23:10 - auth_utils - INFO - Rate limit check passed for user 999
2024-10-31 04:23:10 - auth_utils - INFO - User 999 authenticated successfully
2024-10-31 04:23:10 - customer_utils - INFO - Successfully retrieved customer with ID: 999
2024-10-31 04:23:10 - db_utils - INFO - Database file /Users/tor.inge.jossang@aftenbladet.no/dev/gullingen/login_history.db exists.
2024-10-31 04:23:10 - db_utils - INFO - Query executed successfully on login_history.db. Rows affected: 1
2024-10-31 04:23:10 - auth_utils - INFO - Successful login for ID: 999
2024-10-31 04:23:10 - auth_utils - INFO - Successful login and logging for ID: 999
2024-10-31 04:23:10 - db_utils - INFO - DATABASE_PATH: /Users/tor.inge.jossang@aftenbladet.no/dev/gullingen
2024-10-31 04:23:10 - db_utils - INFO - Full database path: /Users/tor.inge.jossang@aftenbladet.no/dev/gullingen/login_history.db
2024-10-31 04:23:10 - db_utils - INFO - Attempting to create database engine...
2024-10-31 04:23:10 - db_utils - INFO - Database engine created successfully for login_history.db
2024-10-31 04:23:10 - auth_utils - INFO - Rate limit reset for user 999
2024-10-31 04:23:10 - __main__ - INFO - Application shutting down
2024-10-31 04:23:10 - __main__ - INFO - Added validate_user_input function to app.py
2024-10-31 04:23:10 - __main__ - INFO - Starting application initialization
2024-10-31 04:23:10 - db_utils - INFO - Starting detailed database operations debugging
2024-10-31 04:23:10 - db_utils - INFO - Debugging login_history database:
2024-10-31 04:23:10 - db_utils - INFO -   Database version: 0
2024-10-31 04:23:10 - db_utils - INFO -   Tables in login_history.db: ['login_history']
2024-10-31 04:23:10 - db_utils - INFO -   Structure of login_history table:
2024-10-31 04:23:10 - db_utils - INFO -     Column: id, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:23:10 - db_utils - INFO -     Column: login_time, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:23:10 - db_utils - INFO -     Column: success, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:23:10 - db_utils - INFO -   Indexes in login_history.db: ['idx_login_id', 'idx_login_time']
2024-10-31 04:23:10 - db_utils - INFO -   Row count in login_history: 433
2024-10-31 04:23:10 - db_utils - INFO -   Test query result: (1,)
2024-10-31 04:23:10 - db_utils - INFO - Debugging tunbroyting database:
2024-10-31 04:23:10 - db_utils - INFO -   Database version: 0
2024-10-31 04:23:10 - db_utils - INFO -   Tables in tunbroyting.db: ['tunbroyting_bestillinger']
2024-10-31 04:23:10 - db_utils - INFO -   Structure of tunbroyting_bestillinger table:
2024-10-31 04:23:10 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 04:23:10 - db_utils - INFO -     Column: bruker, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:23:10 - db_utils - INFO -     Column: ankomst_dato, Type: DATE, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:23:10 - db_utils - INFO -     Column: ankomst_tid, Type: TIME, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:23:10 - db_utils - INFO -     Column: avreise_dato, Type: DATE, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:23:10 - db_utils - INFO -     Column: avreise_tid, Type: TIME, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:23:10 - db_utils - INFO -     Column: abonnement_type, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:23:10 - db_utils - INFO -   Indexes in tunbroyting.db: ['idx_tunbroyting_bruker', 'idx_tunbroyting_ankomst_dato', 'idx_tunbroyting_avreise_dato', 'idx_tunbroyting_abonnement']
2024-10-31 04:23:10 - db_utils - INFO -   Row count in tunbroyting_bestillinger: 2
2024-10-31 04:23:10 - db_utils - INFO -   Test query result: (1,)
2024-10-31 04:23:10 - db_utils - INFO - Debugging stroing database:
2024-10-31 04:23:10 - db_utils - INFO -   Database version: 0
2024-10-31 04:23:10 - db_utils - INFO -   Tables in stroing.db: ['sqlite_sequence', 'stroing_bestillinger']
2024-10-31 04:23:10 - db_utils - INFO -   Structure of sqlite_sequence table:
2024-10-31 04:23:10 - db_utils - INFO -     Column: name, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:23:10 - db_utils - INFO -     Column: seq, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:23:10 - db_utils - INFO -   Structure of stroing_bestillinger table:
2024-10-31 04:23:10 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 04:23:10 - db_utils - INFO -     Column: bruker, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:23:10 - db_utils - INFO -     Column: bestillings_dato, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:23:10 - db_utils - INFO -     Column: onske_dato, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:23:10 - db_utils - INFO -   Indexes in stroing.db: ['idx_stroing_bruker', 'idx_stroing_onske_dato', 'idx_stroing_bestillings_dato']
2024-10-31 04:23:10 - db_utils - INFO -   Row count in sqlite_sequence: 1
2024-10-31 04:23:10 - db_utils - INFO -   Row count in stroing_bestillinger: 5
2024-10-31 04:23:10 - db_utils - INFO -   Test query result: (1,)
2024-10-31 04:23:10 - db_utils - INFO - Debugging feedback database:
2024-10-31 04:23:10 - db_utils - INFO -   Database version: 0
2024-10-31 04:23:10 - db_utils - INFO -   Tables in feedback.db: ['sqlite_sequence', 'feedback']
2024-10-31 04:23:10 - db_utils - INFO -   Structure of sqlite_sequence table:
2024-10-31 04:23:10 - db_utils - INFO -     Column: name, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:23:10 - db_utils - INFO -     Column: seq, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:23:10 - db_utils - INFO -   Structure of feedback table:
2024-10-31 04:23:10 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 04:23:10 - db_utils - INFO -     Column: type, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:23:10 - db_utils - INFO -     Column: datetime, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:23:10 - db_utils - INFO -     Column: comment, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:23:10 - db_utils - INFO -     Column: innsender, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:23:10 - db_utils - INFO -     Column: status, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:23:10 - db_utils - INFO -     Column: status_changed_by, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:23:10 - db_utils - INFO -     Column: status_changed_at, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:23:10 - db_utils - INFO -     Column: hidden, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:23:10 - db_utils - INFO -     Column: is_alert, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:23:10 - db_utils - INFO -     Column: display_on_weather, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:23:10 - db_utils - INFO -     Column: expiry_date, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:23:10 - db_utils - INFO -     Column: target_group, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:23:10 - db_utils - INFO -   Indexes in feedback.db: ['idx_feedback_datetime', 'idx_feedback_innsender', 'idx_feedback_status', 'idx_feedback_type']
2024-10-31 04:23:10 - db_utils - INFO -   Row count in sqlite_sequence: 1
2024-10-31 04:23:10 - db_utils - INFO -   Row count in feedback: 11
2024-10-31 04:23:10 - db_utils - INFO -   Test query result: (1,)
2024-10-31 04:23:10 - db_utils - INFO - Detailed database operations debugging completed
2024-10-31 04:23:10 - db_utils - INFO - Oppdatert skjema for customer
2024-10-31 04:23:10 - db_utils - INFO - Oppdatert skjema for feedback
2024-10-31 04:23:10 - db_utils - INFO - Oppdatert skjema for login_history
2024-10-31 04:23:10 - db_utils - INFO - Oppdatert skjema for stroing
2024-10-31 04:23:10 - db_utils - INFO - Oppdatert skjema for tunbroyting
2024-10-31 04:23:10 - db_utils - INFO - All database schemas verified and updated
2024-10-31 04:23:10 - db_utils - INFO - Oppdatert skjema for customer
2024-10-31 04:23:10 - db_utils - INFO - Oppdatert skjema for feedback
2024-10-31 04:23:10 - db_utils - INFO - Oppdatert skjema for login_history
2024-10-31 04:23:10 - db_utils - INFO - Oppdatert skjema for stroing
2024-10-31 04:23:10 - db_utils - INFO - Oppdatert skjema for tunbroyting
2024-10-31 04:23:10 - db_utils - INFO - All database schemas verified and updated
2024-10-31 04:23:10 - db_utils - INFO - Database already initialized. Skipping.
2024-10-31 04:23:10 - db_utils - INFO - Query executed successfully on login_history.db. Rows affected: -1
2024-10-31 04:23:10 - db_utils - INFO - login_history table structure is correct
2024-10-31 04:23:10 - customer_utils - INFO - Starting cabin user consistency check
2024-10-31 04:23:10 - utils - INFO - Attempting to load passwords from secrets
2024-10-31 04:23:10 - utils - INFO - Successfully loaded passwords. Number of entries: 94
2024-10-31 04:23:10 - customer_utils - INFO - Retrieved 94 passwords
2024-10-31 04:23:10 - customer_utils - INFO - Found 94 customers in database
2024-10-31 04:23:10 - customer_utils - INFO - Consistency check completed
2024-10-31 04:23:10 - customer_utils - INFO - Database connection closed
2024-10-31 04:23:10 - customer_utils - INFO - Validating customers and passwords
2024-10-31 04:23:10 - utils - INFO - Attempting to load passwords from secrets
2024-10-31 04:23:10 - utils - INFO - Successfully loaded passwords. Number of entries: 94
2024-10-31 04:23:10 - customer_utils - INFO - Customer and password validation complete
2024-10-31 04:23:10 - db_utils - INFO - Successfully created indexes for tunbroyting database
2024-10-31 04:23:10 - db_utils - INFO - Successfully created indexes for stroing database
2024-10-31 04:23:10 - db_utils - INFO - Successfully created indexes for feedback database
2024-10-31 04:23:10 - db_utils - INFO - Successfully created indexes for login_history database
2024-10-31 04:23:10 - db_utils - INFO - Successfully created indexes for customer database
2024-10-31 04:23:10 - db_utils - INFO - Database index creation completed
2024-10-31 04:23:10 - __main__ - INFO - Application initialization completed successfully
2024-10-31 04:23:10 - __main__ - INFO - Application initialization completed successfully
2024-10-31 04:23:10 - __main__ - INFO - Application setup complete
2024-10-31 04:23:10 - customer_utils - INFO - Successfully retrieved customer with ID: 999
2024-10-31 04:23:10 - alert_utils - INFO - Fetched 1 alerts. only_today=False, include_expired=False
2024-10-31 04:23:10 - tun_utils - WARNING - hent_bestillinger() is deprecated, use get_bookings() instead
2024-10-31 04:23:10 - tun_utils - INFO - Starting get_bookings with start_date=None, end_date=None
2024-10-31 04:23:10 - tun_utils - INFO - Successfully retrieved 2 bookings
2024-10-31 04:23:11 - __main__ - INFO - Application shutting down
2024-10-31 04:23:12 - __main__ - INFO - Added validate_user_input function to app.py
2024-10-31 04:23:12 - __main__ - INFO - Starting application initialization
2024-10-31 04:23:12 - db_utils - INFO - Starting detailed database operations debugging
2024-10-31 04:23:12 - db_utils - INFO - Debugging login_history database:
2024-10-31 04:23:12 - db_utils - INFO -   Database version: 0
2024-10-31 04:23:12 - db_utils - INFO -   Tables in login_history.db: ['login_history']
2024-10-31 04:23:12 - db_utils - INFO -   Structure of login_history table:
2024-10-31 04:23:12 - db_utils - INFO -     Column: id, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:23:12 - db_utils - INFO -     Column: login_time, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:23:12 - db_utils - INFO -     Column: success, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:23:12 - db_utils - INFO -   Indexes in login_history.db: ['idx_login_id', 'idx_login_time']
2024-10-31 04:23:12 - db_utils - INFO -   Row count in login_history: 433
2024-10-31 04:23:12 - db_utils - INFO -   Test query result: (1,)
2024-10-31 04:23:12 - db_utils - INFO - Debugging tunbroyting database:
2024-10-31 04:23:12 - db_utils - INFO -   Database version: 0
2024-10-31 04:23:12 - db_utils - INFO -   Tables in tunbroyting.db: ['tunbroyting_bestillinger']
2024-10-31 04:23:12 - db_utils - INFO -   Structure of tunbroyting_bestillinger table:
2024-10-31 04:23:12 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 04:23:12 - db_utils - INFO -     Column: bruker, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:23:12 - db_utils - INFO -     Column: ankomst_dato, Type: DATE, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:23:12 - db_utils - INFO -     Column: ankomst_tid, Type: TIME, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:23:12 - db_utils - INFO -     Column: avreise_dato, Type: DATE, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:23:12 - db_utils - INFO -     Column: avreise_tid, Type: TIME, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:23:12 - db_utils - INFO -     Column: abonnement_type, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:23:12 - db_utils - INFO -   Indexes in tunbroyting.db: ['idx_tunbroyting_bruker', 'idx_tunbroyting_ankomst_dato', 'idx_tunbroyting_avreise_dato', 'idx_tunbroyting_abonnement']
2024-10-31 04:23:12 - db_utils - INFO -   Row count in tunbroyting_bestillinger: 2
2024-10-31 04:23:12 - db_utils - INFO -   Test query result: (1,)
2024-10-31 04:23:12 - db_utils - INFO - Debugging stroing database:
2024-10-31 04:23:12 - db_utils - INFO -   Database version: 0
2024-10-31 04:23:12 - db_utils - INFO -   Tables in stroing.db: ['sqlite_sequence', 'stroing_bestillinger']
2024-10-31 04:23:12 - db_utils - INFO -   Structure of sqlite_sequence table:
2024-10-31 04:23:12 - db_utils - INFO -     Column: name, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:23:12 - db_utils - INFO -     Column: seq, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:23:12 - db_utils - INFO -   Structure of stroing_bestillinger table:
2024-10-31 04:23:12 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 04:23:12 - db_utils - INFO -     Column: bruker, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:23:12 - db_utils - INFO -     Column: bestillings_dato, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:23:12 - db_utils - INFO -     Column: onske_dato, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:23:12 - db_utils - INFO -   Indexes in stroing.db: ['idx_stroing_bruker', 'idx_stroing_onske_dato', 'idx_stroing_bestillings_dato']
2024-10-31 04:23:12 - db_utils - INFO -   Row count in sqlite_sequence: 1
2024-10-31 04:23:12 - db_utils - INFO -   Row count in stroing_bestillinger: 5
2024-10-31 04:23:12 - db_utils - INFO -   Test query result: (1,)
2024-10-31 04:23:12 - db_utils - INFO - Debugging feedback database:
2024-10-31 04:23:12 - db_utils - INFO -   Database version: 0
2024-10-31 04:23:12 - db_utils - INFO -   Tables in feedback.db: ['sqlite_sequence', 'feedback']
2024-10-31 04:23:12 - db_utils - INFO -   Structure of sqlite_sequence table:
2024-10-31 04:23:12 - db_utils - INFO -     Column: name, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:23:12 - db_utils - INFO -     Column: seq, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:23:12 - db_utils - INFO -   Structure of feedback table:
2024-10-31 04:23:12 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 04:23:12 - db_utils - INFO -     Column: type, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:23:12 - db_utils - INFO -     Column: datetime, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:23:12 - db_utils - INFO -     Column: comment, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:23:12 - db_utils - INFO -     Column: innsender, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:23:12 - db_utils - INFO -     Column: status, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:23:12 - db_utils - INFO -     Column: status_changed_by, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:23:12 - db_utils - INFO -     Column: status_changed_at, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:23:12 - db_utils - INFO -     Column: hidden, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:23:12 - db_utils - INFO -     Column: is_alert, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:23:12 - db_utils - INFO -     Column: display_on_weather, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:23:12 - db_utils - INFO -     Column: expiry_date, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:23:12 - db_utils - INFO -     Column: target_group, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:23:12 - db_utils - INFO -   Indexes in feedback.db: ['idx_feedback_datetime', 'idx_feedback_innsender', 'idx_feedback_status', 'idx_feedback_type']
2024-10-31 04:23:12 - db_utils - INFO -   Row count in sqlite_sequence: 1
2024-10-31 04:23:12 - db_utils - INFO -   Row count in feedback: 11
2024-10-31 04:23:12 - db_utils - INFO -   Test query result: (1,)
2024-10-31 04:23:12 - db_utils - INFO - Detailed database operations debugging completed
2024-10-31 04:23:12 - db_utils - INFO - Oppdatert skjema for customer
2024-10-31 04:23:12 - db_utils - INFO - Oppdatert skjema for feedback
2024-10-31 04:23:12 - db_utils - INFO - Oppdatert skjema for login_history
2024-10-31 04:23:12 - db_utils - INFO - Oppdatert skjema for stroing
2024-10-31 04:23:12 - db_utils - INFO - Oppdatert skjema for tunbroyting
2024-10-31 04:23:12 - db_utils - INFO - All database schemas verified and updated
2024-10-31 04:23:12 - db_utils - INFO - Oppdatert skjema for customer
2024-10-31 04:23:12 - db_utils - INFO - Oppdatert skjema for feedback
2024-10-31 04:23:12 - db_utils - INFO - Oppdatert skjema for login_history
2024-10-31 04:23:12 - db_utils - INFO - Oppdatert skjema for stroing
2024-10-31 04:23:12 - db_utils - INFO - Oppdatert skjema for tunbroyting
2024-10-31 04:23:12 - db_utils - INFO - All database schemas verified and updated
2024-10-31 04:23:12 - db_utils - INFO - Database already initialized. Skipping.
2024-10-31 04:23:12 - db_utils - INFO - Query executed successfully on login_history.db. Rows affected: -1
2024-10-31 04:23:12 - db_utils - INFO - login_history table structure is correct
2024-10-31 04:23:12 - customer_utils - INFO - Starting cabin user consistency check
2024-10-31 04:23:12 - utils - INFO - Attempting to load passwords from secrets
2024-10-31 04:23:12 - utils - INFO - Successfully loaded passwords. Number of entries: 94
2024-10-31 04:23:12 - customer_utils - INFO - Retrieved 94 passwords
2024-10-31 04:23:12 - customer_utils - INFO - Found 94 customers in database
2024-10-31 04:23:12 - customer_utils - INFO - Consistency check completed
2024-10-31 04:23:12 - customer_utils - INFO - Database connection closed
2024-10-31 04:23:12 - customer_utils - INFO - Validating customers and passwords
2024-10-31 04:23:12 - utils - INFO - Attempting to load passwords from secrets
2024-10-31 04:23:12 - utils - INFO - Successfully loaded passwords. Number of entries: 94
2024-10-31 04:23:12 - customer_utils - INFO - Customer and password validation complete
2024-10-31 04:23:12 - db_utils - INFO - Successfully created indexes for tunbroyting database
2024-10-31 04:23:12 - db_utils - INFO - Successfully created indexes for stroing database
2024-10-31 04:23:12 - db_utils - INFO - Successfully created indexes for feedback database
2024-10-31 04:23:12 - db_utils - INFO - Successfully created indexes for login_history database
2024-10-31 04:23:12 - db_utils - INFO - Successfully created indexes for customer database
2024-10-31 04:23:12 - db_utils - INFO - Database index creation completed
2024-10-31 04:23:12 - __main__ - INFO - Application initialization completed successfully
2024-10-31 04:23:12 - __main__ - INFO - Application initialization completed successfully
2024-10-31 04:23:12 - __main__ - INFO - Application setup complete
2024-10-31 04:23:12 - customer_utils - INFO - Successfully retrieved customer with ID: 999
2024-10-31 04:23:13 - weather_display_utils - ERROR - Uventet feil i display_weather_data: 'snow_precipitation'
Traceback (most recent call last):
  File "/Users/tor.inge.jossang@aftenbladet.no/dev/gullingen/new_clean_env/lib/python3.12/site-packages/pandas/core/indexes/base.py", line 3805, in get_loc
    return self._engine.get_loc(casted_key)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "index.pyx", line 167, in pandas._libs.index.IndexEngine.get_loc
  File "index.pyx", line 196, in pandas._libs.index.IndexEngine.get_loc
  File "pandas/_libs/hashtable_class_helper.pxi", line 7081, in pandas._libs.hashtable.PyObjectHashTable.get_item
  File "pandas/_libs/hashtable_class_helper.pxi", line 7089, in pandas._libs.hashtable.PyObjectHashTable.get_item
KeyError: 'snow_precipitation'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/tor.inge.jossang@aftenbladet.no/dev/gullingen/weather_display_utils.py", line 46, in display_weather_data
    fig = create_improved_graph(df)
          ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/tor.inge.jossang@aftenbladet.no/dev/gullingen/weather_display_utils.py", line 96, in create_improved_graph
    "data": df["snow_precipitation"],
            ~~^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/tor.inge.jossang@aftenbladet.no/dev/gullingen/new_clean_env/lib/python3.12/site-packages/pandas/core/frame.py", line 4102, in __getitem__
    indexer = self.columns.get_loc(key)
              ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/tor.inge.jossang@aftenbladet.no/dev/gullingen/new_clean_env/lib/python3.12/site-packages/pandas/core/indexes/base.py", line 3812, in get_loc
    raise KeyError(key) from err
KeyError: 'snow_precipitation'
2024-10-31 04:23:13 - __main__ - INFO - Application shutting down
2024-10-31 04:27:46 - __main__ - INFO - Added validate_user_input function to app.py
2024-10-31 04:27:46 - __main__ - INFO - Starting application initialization
2024-10-31 04:27:46 - db_utils - INFO - Starting detailed database operations debugging
2024-10-31 04:27:46 - db_utils - INFO - Debugging login_history database:
2024-10-31 04:27:46 - db_utils - INFO -   Database version: 0
2024-10-31 04:27:46 - db_utils - INFO -   Tables in login_history.db: ['login_history']
2024-10-31 04:27:46 - db_utils - INFO -   Structure of login_history table:
2024-10-31 04:27:46 - db_utils - INFO -     Column: id, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:27:46 - db_utils - INFO -     Column: login_time, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:27:46 - db_utils - INFO -     Column: success, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:27:46 - db_utils - INFO -   Indexes in login_history.db: ['idx_login_id', 'idx_login_time']
2024-10-31 04:27:46 - db_utils - INFO -   Row count in login_history: 433
2024-10-31 04:27:46 - db_utils - INFO -   Test query result: (1,)
2024-10-31 04:27:46 - db_utils - INFO - Debugging tunbroyting database:
2024-10-31 04:27:46 - db_utils - INFO -   Database version: 0
2024-10-31 04:27:46 - db_utils - INFO -   Tables in tunbroyting.db: ['tunbroyting_bestillinger']
2024-10-31 04:27:46 - db_utils - INFO -   Structure of tunbroyting_bestillinger table:
2024-10-31 04:27:46 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 04:27:46 - db_utils - INFO -     Column: bruker, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:27:46 - db_utils - INFO -     Column: ankomst_dato, Type: DATE, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:27:46 - db_utils - INFO -     Column: ankomst_tid, Type: TIME, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:27:46 - db_utils - INFO -     Column: avreise_dato, Type: DATE, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:27:46 - db_utils - INFO -     Column: avreise_tid, Type: TIME, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:27:46 - db_utils - INFO -     Column: abonnement_type, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:27:46 - db_utils - INFO -   Indexes in tunbroyting.db: ['idx_tunbroyting_bruker', 'idx_tunbroyting_ankomst_dato', 'idx_tunbroyting_avreise_dato', 'idx_tunbroyting_abonnement']
2024-10-31 04:27:46 - db_utils - INFO -   Row count in tunbroyting_bestillinger: 2
2024-10-31 04:27:46 - db_utils - INFO -   Test query result: (1,)
2024-10-31 04:27:46 - db_utils - INFO - Debugging stroing database:
2024-10-31 04:27:46 - db_utils - INFO -   Database version: 0
2024-10-31 04:27:46 - db_utils - INFO -   Tables in stroing.db: ['sqlite_sequence', 'stroing_bestillinger']
2024-10-31 04:27:46 - db_utils - INFO -   Structure of sqlite_sequence table:
2024-10-31 04:27:46 - db_utils - INFO -     Column: name, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:27:46 - db_utils - INFO -     Column: seq, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:27:46 - db_utils - INFO -   Structure of stroing_bestillinger table:
2024-10-31 04:27:46 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 04:27:46 - db_utils - INFO -     Column: bruker, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:27:46 - db_utils - INFO -     Column: bestillings_dato, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:27:46 - db_utils - INFO -     Column: onske_dato, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:27:46 - db_utils - INFO -   Indexes in stroing.db: ['idx_stroing_bruker', 'idx_stroing_onske_dato', 'idx_stroing_bestillings_dato']
2024-10-31 04:27:46 - db_utils - INFO -   Row count in sqlite_sequence: 1
2024-10-31 04:27:46 - db_utils - INFO -   Row count in stroing_bestillinger: 5
2024-10-31 04:27:46 - db_utils - INFO -   Test query result: (1,)
2024-10-31 04:27:46 - db_utils - INFO - Debugging feedback database:
2024-10-31 04:27:46 - db_utils - INFO -   Database version: 0
2024-10-31 04:27:46 - db_utils - INFO -   Tables in feedback.db: ['sqlite_sequence', 'feedback']
2024-10-31 04:27:46 - db_utils - INFO -   Structure of sqlite_sequence table:
2024-10-31 04:27:46 - db_utils - INFO -     Column: name, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:27:46 - db_utils - INFO -     Column: seq, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:27:46 - db_utils - INFO -   Structure of feedback table:
2024-10-31 04:27:46 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 04:27:46 - db_utils - INFO -     Column: type, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:27:46 - db_utils - INFO -     Column: datetime, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:27:46 - db_utils - INFO -     Column: comment, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:27:46 - db_utils - INFO -     Column: innsender, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:27:46 - db_utils - INFO -     Column: status, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:27:46 - db_utils - INFO -     Column: status_changed_by, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:27:46 - db_utils - INFO -     Column: status_changed_at, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:27:46 - db_utils - INFO -     Column: hidden, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:27:46 - db_utils - INFO -     Column: is_alert, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:27:46 - db_utils - INFO -     Column: display_on_weather, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:27:46 - db_utils - INFO -     Column: expiry_date, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:27:46 - db_utils - INFO -     Column: target_group, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:27:46 - db_utils - INFO -   Indexes in feedback.db: ['idx_feedback_datetime', 'idx_feedback_innsender', 'idx_feedback_status', 'idx_feedback_type']
2024-10-31 04:27:46 - db_utils - INFO -   Row count in sqlite_sequence: 1
2024-10-31 04:27:46 - db_utils - INFO -   Row count in feedback: 11
2024-10-31 04:27:46 - db_utils - INFO -   Test query result: (1,)
2024-10-31 04:27:46 - db_utils - INFO - Detailed database operations debugging completed
2024-10-31 04:27:46 - db_utils - INFO - Oppdatert skjema for customer
2024-10-31 04:27:46 - db_utils - INFO - Oppdatert skjema for feedback
2024-10-31 04:27:46 - db_utils - INFO - Oppdatert skjema for login_history
2024-10-31 04:27:46 - db_utils - INFO - Oppdatert skjema for stroing
2024-10-31 04:27:46 - db_utils - INFO - Oppdatert skjema for tunbroyting
2024-10-31 04:27:46 - db_utils - INFO - All database schemas verified and updated
2024-10-31 04:27:46 - db_utils - INFO - Oppdatert skjema for customer
2024-10-31 04:27:46 - db_utils - INFO - Oppdatert skjema for feedback
2024-10-31 04:27:46 - db_utils - INFO - Oppdatert skjema for login_history
2024-10-31 04:27:46 - db_utils - INFO - Oppdatert skjema for stroing
2024-10-31 04:27:46 - db_utils - INFO - Oppdatert skjema for tunbroyting
2024-10-31 04:27:46 - db_utils - INFO - All database schemas verified and updated
2024-10-31 04:27:46 - db_utils - INFO - Database login_history initialized, updated, and optimized
2024-10-31 04:27:46 - db_utils - INFO - Database tunbroyting initialized, updated, and optimized
2024-10-31 04:27:46 - db_utils - INFO - Database stroing initialized, updated, and optimized
2024-10-31 04:27:46 - db_utils - INFO - Database feedback initialized, updated, and optimized
2024-10-31 04:27:46 - db_utils - INFO - Database customer initialized, updated, and optimized
2024-10-31 04:27:46 - db_utils - INFO - Successfully created indexes for tunbroyting database
2024-10-31 04:27:46 - db_utils - INFO - Successfully created indexes for stroing database
2024-10-31 04:27:46 - db_utils - INFO - Successfully created indexes for feedback database
2024-10-31 04:27:46 - db_utils - INFO - Successfully created indexes for login_history database
2024-10-31 04:27:46 - db_utils - INFO - Successfully created indexes for customer database
2024-10-31 04:27:46 - db_utils - INFO - Database index creation completed
2024-10-31 04:27:46 - db_utils - INFO - Database indexes created
2024-10-31 04:27:46 - db_utils - INFO - Successfully verified connection to stroing.db
2024-10-31 04:27:46 - db_utils - INFO - Successfully verified connection to tunbroyting.db
2024-10-31 04:27:46 - db_utils - INFO - Successfully verified connection to feedback.db
2024-10-31 04:27:46 - db_utils - INFO - Successfully verified connection to login_history.db
2024-10-31 04:27:46 - db_utils - INFO - Successfully verified connection to customer.db
2024-10-31 04:27:46 - db_utils - INFO - Database connections verified
2024-10-31 04:27:46 - db_utils - INFO - All databases initialized, updated, and verified
2024-10-31 04:27:46 - db_utils - INFO - Query executed successfully on login_history.db. Rows affected: -1
2024-10-31 04:27:47 - db_utils - INFO - login_history table structure is correct
2024-10-31 04:27:47 - customer_utils - INFO - Starting cabin user consistency check
2024-10-31 04:27:47 - utils - INFO - Attempting to load passwords from secrets
2024-10-31 04:27:47 - utils - INFO - Successfully loaded passwords. Number of entries: 94
2024-10-31 04:27:47 - customer_utils - INFO - Retrieved 94 passwords
2024-10-31 04:27:47 - customer_utils - INFO - Found 94 customers in database
2024-10-31 04:27:47 - customer_utils - INFO - Consistency check completed
2024-10-31 04:27:47 - customer_utils - INFO - Database connection closed
2024-10-31 04:27:47 - customer_utils - INFO - Validating customers and passwords
2024-10-31 04:27:47 - utils - INFO - Attempting to load passwords from secrets
2024-10-31 04:27:47 - utils - INFO - Successfully loaded passwords. Number of entries: 94
2024-10-31 04:27:47 - customer_utils - INFO - Customer and password validation complete
2024-10-31 04:27:47 - db_utils - INFO - Successfully created indexes for tunbroyting database
2024-10-31 04:27:47 - db_utils - INFO - Successfully created indexes for stroing database
2024-10-31 04:27:47 - db_utils - INFO - Successfully created indexes for feedback database
2024-10-31 04:27:47 - db_utils - INFO - Successfully created indexes for login_history database
2024-10-31 04:27:47 - db_utils - INFO - Successfully created indexes for customer database
2024-10-31 04:27:47 - db_utils - INFO - Database index creation completed
2024-10-31 04:27:47 - __main__ - INFO - Application initialization completed successfully
2024-10-31 04:27:47 - __main__ - INFO - Application initialization completed successfully
2024-10-31 04:27:47 - __main__ - INFO - Application setup complete
2024-10-31 04:27:47 - __main__ - INFO - Application shutting down
2024-10-31 04:27:50 - __main__ - INFO - Added validate_user_input function to app.py
2024-10-31 04:27:50 - __main__ - INFO - Starting application initialization
2024-10-31 04:27:50 - db_utils - INFO - Starting detailed database operations debugging
2024-10-31 04:27:50 - db_utils - INFO - Debugging login_history database:
2024-10-31 04:27:50 - db_utils - INFO -   Database version: 0
2024-10-31 04:27:50 - db_utils - INFO -   Tables in login_history.db: ['login_history']
2024-10-31 04:27:50 - db_utils - INFO -   Structure of login_history table:
2024-10-31 04:27:50 - db_utils - INFO -     Column: id, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:27:50 - db_utils - INFO -     Column: login_time, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:27:50 - db_utils - INFO -     Column: success, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:27:50 - db_utils - INFO -   Indexes in login_history.db: ['idx_login_id', 'idx_login_time']
2024-10-31 04:27:50 - db_utils - INFO -   Row count in login_history: 433
2024-10-31 04:27:50 - db_utils - INFO -   Test query result: (1,)
2024-10-31 04:27:50 - db_utils - INFO - Debugging tunbroyting database:
2024-10-31 04:27:50 - db_utils - INFO -   Database version: 0
2024-10-31 04:27:50 - db_utils - INFO -   Tables in tunbroyting.db: ['tunbroyting_bestillinger']
2024-10-31 04:27:50 - db_utils - INFO -   Structure of tunbroyting_bestillinger table:
2024-10-31 04:27:50 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 04:27:50 - db_utils - INFO -     Column: bruker, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:27:50 - db_utils - INFO -     Column: ankomst_dato, Type: DATE, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:27:50 - db_utils - INFO -     Column: ankomst_tid, Type: TIME, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:27:50 - db_utils - INFO -     Column: avreise_dato, Type: DATE, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:27:50 - db_utils - INFO -     Column: avreise_tid, Type: TIME, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:27:50 - db_utils - INFO -     Column: abonnement_type, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:27:50 - db_utils - INFO -   Indexes in tunbroyting.db: ['idx_tunbroyting_bruker', 'idx_tunbroyting_ankomst_dato', 'idx_tunbroyting_avreise_dato', 'idx_tunbroyting_abonnement']
2024-10-31 04:27:50 - db_utils - INFO -   Row count in tunbroyting_bestillinger: 2
2024-10-31 04:27:50 - db_utils - INFO -   Test query result: (1,)
2024-10-31 04:27:50 - db_utils - INFO - Debugging stroing database:
2024-10-31 04:27:50 - db_utils - INFO -   Database version: 0
2024-10-31 04:27:50 - db_utils - INFO -   Tables in stroing.db: ['sqlite_sequence', 'stroing_bestillinger']
2024-10-31 04:27:50 - db_utils - INFO -   Structure of sqlite_sequence table:
2024-10-31 04:27:50 - db_utils - INFO -     Column: name, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:27:50 - db_utils - INFO -     Column: seq, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:27:50 - db_utils - INFO -   Structure of stroing_bestillinger table:
2024-10-31 04:27:50 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 04:27:50 - db_utils - INFO -     Column: bruker, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:27:50 - db_utils - INFO -     Column: bestillings_dato, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:27:50 - db_utils - INFO -     Column: onske_dato, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:27:50 - db_utils - INFO -   Indexes in stroing.db: ['idx_stroing_bruker', 'idx_stroing_onske_dato', 'idx_stroing_bestillings_dato']
2024-10-31 04:27:50 - db_utils - INFO -   Row count in sqlite_sequence: 1
2024-10-31 04:27:50 - db_utils - INFO -   Row count in stroing_bestillinger: 5
2024-10-31 04:27:50 - db_utils - INFO -   Test query result: (1,)
2024-10-31 04:27:50 - db_utils - INFO - Debugging feedback database:
2024-10-31 04:27:50 - db_utils - INFO -   Database version: 0
2024-10-31 04:27:50 - db_utils - INFO -   Tables in feedback.db: ['sqlite_sequence', 'feedback']
2024-10-31 04:27:50 - db_utils - INFO -   Structure of sqlite_sequence table:
2024-10-31 04:27:50 - db_utils - INFO -     Column: name, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:27:50 - db_utils - INFO -     Column: seq, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:27:50 - db_utils - INFO -   Structure of feedback table:
2024-10-31 04:27:50 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 04:27:50 - db_utils - INFO -     Column: type, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:27:50 - db_utils - INFO -     Column: datetime, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:27:50 - db_utils - INFO -     Column: comment, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:27:50 - db_utils - INFO -     Column: innsender, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:27:50 - db_utils - INFO -     Column: status, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:27:50 - db_utils - INFO -     Column: status_changed_by, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:27:50 - db_utils - INFO -     Column: status_changed_at, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:27:50 - db_utils - INFO -     Column: hidden, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:27:50 - db_utils - INFO -     Column: is_alert, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:27:50 - db_utils - INFO -     Column: display_on_weather, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:27:50 - db_utils - INFO -     Column: expiry_date, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:27:50 - db_utils - INFO -     Column: target_group, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:27:50 - db_utils - INFO -   Indexes in feedback.db: ['idx_feedback_datetime', 'idx_feedback_innsender', 'idx_feedback_status', 'idx_feedback_type']
2024-10-31 04:27:50 - db_utils - INFO -   Row count in sqlite_sequence: 1
2024-10-31 04:27:50 - db_utils - INFO -   Row count in feedback: 11
2024-10-31 04:27:50 - db_utils - INFO -   Test query result: (1,)
2024-10-31 04:27:50 - db_utils - INFO - Detailed database operations debugging completed
2024-10-31 04:27:50 - db_utils - INFO - Oppdatert skjema for customer
2024-10-31 04:27:50 - db_utils - INFO - Oppdatert skjema for feedback
2024-10-31 04:27:50 - db_utils - INFO - Oppdatert skjema for login_history
2024-10-31 04:27:50 - db_utils - INFO - Oppdatert skjema for stroing
2024-10-31 04:27:50 - db_utils - INFO - Oppdatert skjema for tunbroyting
2024-10-31 04:27:50 - db_utils - INFO - All database schemas verified and updated
2024-10-31 04:27:50 - db_utils - INFO - Oppdatert skjema for customer
2024-10-31 04:27:50 - db_utils - INFO - Oppdatert skjema for feedback
2024-10-31 04:27:50 - db_utils - INFO - Oppdatert skjema for login_history
2024-10-31 04:27:50 - db_utils - INFO - Oppdatert skjema for stroing
2024-10-31 04:27:50 - db_utils - INFO - Oppdatert skjema for tunbroyting
2024-10-31 04:27:50 - db_utils - INFO - All database schemas verified and updated
2024-10-31 04:27:50 - db_utils - INFO - Database already initialized. Skipping.
2024-10-31 04:27:50 - db_utils - INFO - Query executed successfully on login_history.db. Rows affected: -1
2024-10-31 04:27:50 - db_utils - INFO - login_history table structure is correct
2024-10-31 04:27:50 - customer_utils - INFO - Starting cabin user consistency check
2024-10-31 04:27:50 - utils - INFO - Attempting to load passwords from secrets
2024-10-31 04:27:50 - utils - INFO - Successfully loaded passwords. Number of entries: 94
2024-10-31 04:27:50 - customer_utils - INFO - Retrieved 94 passwords
2024-10-31 04:27:50 - customer_utils - INFO - Found 94 customers in database
2024-10-31 04:27:50 - customer_utils - INFO - Consistency check completed
2024-10-31 04:27:50 - customer_utils - INFO - Database connection closed
2024-10-31 04:27:50 - customer_utils - INFO - Validating customers and passwords
2024-10-31 04:27:50 - utils - INFO - Attempting to load passwords from secrets
2024-10-31 04:27:50 - utils - INFO - Successfully loaded passwords. Number of entries: 94
2024-10-31 04:27:50 - customer_utils - INFO - Customer and password validation complete
2024-10-31 04:27:50 - db_utils - INFO - Successfully created indexes for tunbroyting database
2024-10-31 04:27:50 - db_utils - INFO - Successfully created indexes for stroing database
2024-10-31 04:27:50 - db_utils - INFO - Successfully created indexes for feedback database
2024-10-31 04:27:50 - db_utils - INFO - Successfully created indexes for login_history database
2024-10-31 04:27:50 - db_utils - INFO - Successfully created indexes for customer database
2024-10-31 04:27:50 - db_utils - INFO - Database index creation completed
2024-10-31 04:27:50 - __main__ - INFO - Application initialization completed successfully
2024-10-31 04:27:50 - __main__ - INFO - Application initialization completed successfully
2024-10-31 04:27:50 - __main__ - INFO - Application setup complete
2024-10-31 04:27:50 - auth_utils - INFO - Login attempt for ID: 999
2024-10-31 04:27:50 - db_utils - INFO - DATABASE_PATH: /Users/tor.inge.jossang@aftenbladet.no/dev/gullingen
2024-10-31 04:27:50 - db_utils - INFO - Full database path: /Users/tor.inge.jossang@aftenbladet.no/dev/gullingen/login_history.db
2024-10-31 04:27:50 - db_utils - INFO - Attempting to create database engine...
2024-10-31 04:27:50 - db_utils - INFO - Database engine created successfully for login_history.db
2024-10-31 04:27:50 - auth_utils - INFO - Rate limit check passed for user 999
2024-10-31 04:27:50 - auth_utils - INFO - User 999 authenticated successfully
2024-10-31 04:27:50 - customer_utils - INFO - Successfully retrieved customer with ID: 999
2024-10-31 04:27:50 - db_utils - INFO - Database file /Users/tor.inge.jossang@aftenbladet.no/dev/gullingen/login_history.db exists.
2024-10-31 04:27:50 - db_utils - INFO - Query executed successfully on login_history.db. Rows affected: 1
2024-10-31 04:27:50 - auth_utils - INFO - Successful login for ID: 999
2024-10-31 04:27:50 - auth_utils - INFO - Successful login and logging for ID: 999
2024-10-31 04:27:50 - db_utils - INFO - DATABASE_PATH: /Users/tor.inge.jossang@aftenbladet.no/dev/gullingen
2024-10-31 04:27:50 - db_utils - INFO - Full database path: /Users/tor.inge.jossang@aftenbladet.no/dev/gullingen/login_history.db
2024-10-31 04:27:50 - db_utils - INFO - Attempting to create database engine...
2024-10-31 04:27:50 - db_utils - INFO - Database engine created successfully for login_history.db
2024-10-31 04:27:50 - auth_utils - INFO - Rate limit reset for user 999
2024-10-31 04:27:50 - __main__ - INFO - Application shutting down
2024-10-31 04:27:50 - __main__ - INFO - Added validate_user_input function to app.py
2024-10-31 04:27:50 - __main__ - INFO - Starting application initialization
2024-10-31 04:27:50 - db_utils - INFO - Starting detailed database operations debugging
2024-10-31 04:27:50 - db_utils - INFO - Debugging login_history database:
2024-10-31 04:27:50 - db_utils - INFO -   Database version: 0
2024-10-31 04:27:50 - db_utils - INFO -   Tables in login_history.db: ['login_history']
2024-10-31 04:27:50 - db_utils - INFO -   Structure of login_history table:
2024-10-31 04:27:50 - db_utils - INFO -     Column: id, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:27:50 - db_utils - INFO -     Column: login_time, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:27:50 - db_utils - INFO -     Column: success, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:27:50 - db_utils - INFO -   Indexes in login_history.db: ['idx_login_id', 'idx_login_time']
2024-10-31 04:27:50 - db_utils - INFO -   Row count in login_history: 434
2024-10-31 04:27:50 - db_utils - INFO -   Test query result: (1,)
2024-10-31 04:27:50 - db_utils - INFO - Debugging tunbroyting database:
2024-10-31 04:27:50 - db_utils - INFO -   Database version: 0
2024-10-31 04:27:50 - db_utils - INFO -   Tables in tunbroyting.db: ['tunbroyting_bestillinger']
2024-10-31 04:27:50 - db_utils - INFO -   Structure of tunbroyting_bestillinger table:
2024-10-31 04:27:50 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 04:27:50 - db_utils - INFO -     Column: bruker, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:27:50 - db_utils - INFO -     Column: ankomst_dato, Type: DATE, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:27:50 - db_utils - INFO -     Column: ankomst_tid, Type: TIME, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:27:50 - db_utils - INFO -     Column: avreise_dato, Type: DATE, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:27:50 - db_utils - INFO -     Column: avreise_tid, Type: TIME, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:27:50 - db_utils - INFO -     Column: abonnement_type, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:27:50 - db_utils - INFO -   Indexes in tunbroyting.db: ['idx_tunbroyting_bruker', 'idx_tunbroyting_ankomst_dato', 'idx_tunbroyting_avreise_dato', 'idx_tunbroyting_abonnement']
2024-10-31 04:27:50 - db_utils - INFO -   Row count in tunbroyting_bestillinger: 2
2024-10-31 04:27:50 - db_utils - INFO -   Test query result: (1,)
2024-10-31 04:27:50 - db_utils - INFO - Debugging stroing database:
2024-10-31 04:27:50 - db_utils - INFO -   Database version: 0
2024-10-31 04:27:50 - db_utils - INFO -   Tables in stroing.db: ['sqlite_sequence', 'stroing_bestillinger']
2024-10-31 04:27:50 - db_utils - INFO -   Structure of sqlite_sequence table:
2024-10-31 04:27:50 - db_utils - INFO -     Column: name, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:27:50 - db_utils - INFO -     Column: seq, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:27:50 - db_utils - INFO -   Structure of stroing_bestillinger table:
2024-10-31 04:27:50 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 04:27:50 - db_utils - INFO -     Column: bruker, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:27:50 - db_utils - INFO -     Column: bestillings_dato, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:27:50 - db_utils - INFO -     Column: onske_dato, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:27:50 - db_utils - INFO -   Indexes in stroing.db: ['idx_stroing_bruker', 'idx_stroing_onske_dato', 'idx_stroing_bestillings_dato']
2024-10-31 04:27:50 - db_utils - INFO -   Row count in sqlite_sequence: 1
2024-10-31 04:27:50 - db_utils - INFO -   Row count in stroing_bestillinger: 5
2024-10-31 04:27:50 - db_utils - INFO -   Test query result: (1,)
2024-10-31 04:27:50 - db_utils - INFO - Debugging feedback database:
2024-10-31 04:27:50 - db_utils - INFO -   Database version: 0
2024-10-31 04:27:50 - db_utils - INFO -   Tables in feedback.db: ['sqlite_sequence', 'feedback']
2024-10-31 04:27:50 - db_utils - INFO -   Structure of sqlite_sequence table:
2024-10-31 04:27:50 - db_utils - INFO -     Column: name, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:27:50 - db_utils - INFO -     Column: seq, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:27:50 - db_utils - INFO -   Structure of feedback table:
2024-10-31 04:27:50 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 04:27:50 - db_utils - INFO -     Column: type, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:27:50 - db_utils - INFO -     Column: datetime, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:27:50 - db_utils - INFO -     Column: comment, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:27:50 - db_utils - INFO -     Column: innsender, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:27:50 - db_utils - INFO -     Column: status, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:27:50 - db_utils - INFO -     Column: status_changed_by, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:27:50 - db_utils - INFO -     Column: status_changed_at, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:27:50 - db_utils - INFO -     Column: hidden, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:27:50 - db_utils - INFO -     Column: is_alert, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:27:50 - db_utils - INFO -     Column: display_on_weather, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:27:50 - db_utils - INFO -     Column: expiry_date, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:27:50 - db_utils - INFO -     Column: target_group, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:27:50 - db_utils - INFO -   Indexes in feedback.db: ['idx_feedback_datetime', 'idx_feedback_innsender', 'idx_feedback_status', 'idx_feedback_type']
2024-10-31 04:27:50 - db_utils - INFO -   Row count in sqlite_sequence: 1
2024-10-31 04:27:50 - db_utils - INFO -   Row count in feedback: 11
2024-10-31 04:27:50 - db_utils - INFO -   Test query result: (1,)
2024-10-31 04:27:50 - db_utils - INFO - Detailed database operations debugging completed
2024-10-31 04:27:50 - db_utils - INFO - Oppdatert skjema for customer
2024-10-31 04:27:50 - db_utils - INFO - Oppdatert skjema for feedback
2024-10-31 04:27:50 - db_utils - INFO - Oppdatert skjema for login_history
2024-10-31 04:27:50 - db_utils - INFO - Oppdatert skjema for stroing
2024-10-31 04:27:50 - db_utils - INFO - Oppdatert skjema for tunbroyting
2024-10-31 04:27:50 - db_utils - INFO - All database schemas verified and updated
2024-10-31 04:27:50 - db_utils - INFO - Oppdatert skjema for customer
2024-10-31 04:27:50 - db_utils - INFO - Oppdatert skjema for feedback
2024-10-31 04:27:50 - db_utils - INFO - Oppdatert skjema for login_history
2024-10-31 04:27:50 - db_utils - INFO - Oppdatert skjema for stroing
2024-10-31 04:27:50 - db_utils - INFO - Oppdatert skjema for tunbroyting
2024-10-31 04:27:50 - db_utils - INFO - All database schemas verified and updated
2024-10-31 04:27:50 - db_utils - INFO - Database already initialized. Skipping.
2024-10-31 04:27:50 - db_utils - INFO - Query executed successfully on login_history.db. Rows affected: -1
2024-10-31 04:27:50 - db_utils - INFO - login_history table structure is correct
2024-10-31 04:27:50 - customer_utils - INFO - Starting cabin user consistency check
2024-10-31 04:27:50 - utils - INFO - Attempting to load passwords from secrets
2024-10-31 04:27:50 - utils - INFO - Successfully loaded passwords. Number of entries: 94
2024-10-31 04:27:50 - customer_utils - INFO - Retrieved 94 passwords
2024-10-31 04:27:50 - customer_utils - INFO - Found 94 customers in database
2024-10-31 04:27:50 - customer_utils - INFO - Consistency check completed
2024-10-31 04:27:50 - customer_utils - INFO - Database connection closed
2024-10-31 04:27:50 - customer_utils - INFO - Validating customers and passwords
2024-10-31 04:27:50 - utils - INFO - Attempting to load passwords from secrets
2024-10-31 04:27:50 - utils - INFO - Successfully loaded passwords. Number of entries: 94
2024-10-31 04:27:50 - customer_utils - INFO - Customer and password validation complete
2024-10-31 04:27:50 - db_utils - INFO - Successfully created indexes for tunbroyting database
2024-10-31 04:27:50 - db_utils - INFO - Successfully created indexes for stroing database
2024-10-31 04:27:50 - db_utils - INFO - Successfully created indexes for feedback database
2024-10-31 04:27:50 - db_utils - INFO - Successfully created indexes for login_history database
2024-10-31 04:27:50 - db_utils - INFO - Successfully created indexes for customer database
2024-10-31 04:27:50 - db_utils - INFO - Database index creation completed
2024-10-31 04:27:50 - __main__ - INFO - Application initialization completed successfully
2024-10-31 04:27:50 - __main__ - INFO - Application initialization completed successfully
2024-10-31 04:27:50 - __main__ - INFO - Application setup complete
2024-10-31 04:27:50 - customer_utils - INFO - Successfully retrieved customer with ID: 999
2024-10-31 04:27:50 - alert_utils - INFO - Fetched 1 alerts. only_today=False, include_expired=False
2024-10-31 04:27:50 - tun_utils - WARNING - hent_bestillinger() is deprecated, use get_bookings() instead
2024-10-31 04:27:50 - tun_utils - INFO - Starting get_bookings with start_date=None, end_date=None
2024-10-31 04:27:50 - tun_utils - INFO - Successfully retrieved 2 bookings
2024-10-31 04:27:50 - __main__ - INFO - Application shutting down
2024-10-31 04:27:52 - __main__ - INFO - Added validate_user_input function to app.py
2024-10-31 04:27:52 - __main__ - INFO - Starting application initialization
2024-10-31 04:27:52 - db_utils - INFO - Starting detailed database operations debugging
2024-10-31 04:27:52 - db_utils - INFO - Debugging login_history database:
2024-10-31 04:27:52 - db_utils - INFO -   Database version: 0
2024-10-31 04:27:52 - db_utils - INFO -   Tables in login_history.db: ['login_history']
2024-10-31 04:27:52 - db_utils - INFO -   Structure of login_history table:
2024-10-31 04:27:52 - db_utils - INFO -     Column: id, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:27:52 - db_utils - INFO -     Column: login_time, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:27:52 - db_utils - INFO -     Column: success, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:27:52 - db_utils - INFO -   Indexes in login_history.db: ['idx_login_id', 'idx_login_time']
2024-10-31 04:27:52 - db_utils - INFO -   Row count in login_history: 434
2024-10-31 04:27:52 - db_utils - INFO -   Test query result: (1,)
2024-10-31 04:27:52 - db_utils - INFO - Debugging tunbroyting database:
2024-10-31 04:27:52 - db_utils - INFO -   Database version: 0
2024-10-31 04:27:52 - db_utils - INFO -   Tables in tunbroyting.db: ['tunbroyting_bestillinger']
2024-10-31 04:27:52 - db_utils - INFO -   Structure of tunbroyting_bestillinger table:
2024-10-31 04:27:52 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 04:27:52 - db_utils - INFO -     Column: bruker, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:27:52 - db_utils - INFO -     Column: ankomst_dato, Type: DATE, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:27:52 - db_utils - INFO -     Column: ankomst_tid, Type: TIME, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:27:52 - db_utils - INFO -     Column: avreise_dato, Type: DATE, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:27:52 - db_utils - INFO -     Column: avreise_tid, Type: TIME, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:27:52 - db_utils - INFO -     Column: abonnement_type, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:27:52 - db_utils - INFO -   Indexes in tunbroyting.db: ['idx_tunbroyting_bruker', 'idx_tunbroyting_ankomst_dato', 'idx_tunbroyting_avreise_dato', 'idx_tunbroyting_abonnement']
2024-10-31 04:27:52 - db_utils - INFO -   Row count in tunbroyting_bestillinger: 2
2024-10-31 04:27:52 - db_utils - INFO -   Test query result: (1,)
2024-10-31 04:27:52 - db_utils - INFO - Debugging stroing database:
2024-10-31 04:27:52 - db_utils - INFO -   Database version: 0
2024-10-31 04:27:52 - db_utils - INFO -   Tables in stroing.db: ['sqlite_sequence', 'stroing_bestillinger']
2024-10-31 04:27:52 - db_utils - INFO -   Structure of sqlite_sequence table:
2024-10-31 04:27:52 - db_utils - INFO -     Column: name, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:27:52 - db_utils - INFO -     Column: seq, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:27:52 - db_utils - INFO -   Structure of stroing_bestillinger table:
2024-10-31 04:27:52 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 04:27:52 - db_utils - INFO -     Column: bruker, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:27:52 - db_utils - INFO -     Column: bestillings_dato, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:27:52 - db_utils - INFO -     Column: onske_dato, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:27:52 - db_utils - INFO -   Indexes in stroing.db: ['idx_stroing_bruker', 'idx_stroing_onske_dato', 'idx_stroing_bestillings_dato']
2024-10-31 04:27:52 - db_utils - INFO -   Row count in sqlite_sequence: 1
2024-10-31 04:27:52 - db_utils - INFO -   Row count in stroing_bestillinger: 5
2024-10-31 04:27:52 - db_utils - INFO -   Test query result: (1,)
2024-10-31 04:27:52 - db_utils - INFO - Debugging feedback database:
2024-10-31 04:27:52 - db_utils - INFO -   Database version: 0
2024-10-31 04:27:52 - db_utils - INFO -   Tables in feedback.db: ['sqlite_sequence', 'feedback']
2024-10-31 04:27:52 - db_utils - INFO -   Structure of sqlite_sequence table:
2024-10-31 04:27:52 - db_utils - INFO -     Column: name, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:27:52 - db_utils - INFO -     Column: seq, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:27:52 - db_utils - INFO -   Structure of feedback table:
2024-10-31 04:27:52 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 04:27:52 - db_utils - INFO -     Column: type, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:27:52 - db_utils - INFO -     Column: datetime, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:27:52 - db_utils - INFO -     Column: comment, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:27:52 - db_utils - INFO -     Column: innsender, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:27:52 - db_utils - INFO -     Column: status, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:27:52 - db_utils - INFO -     Column: status_changed_by, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:27:52 - db_utils - INFO -     Column: status_changed_at, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:27:52 - db_utils - INFO -     Column: hidden, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:27:52 - db_utils - INFO -     Column: is_alert, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:27:52 - db_utils - INFO -     Column: display_on_weather, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:27:52 - db_utils - INFO -     Column: expiry_date, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:27:52 - db_utils - INFO -     Column: target_group, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:27:52 - db_utils - INFO -   Indexes in feedback.db: ['idx_feedback_datetime', 'idx_feedback_innsender', 'idx_feedback_status', 'idx_feedback_type']
2024-10-31 04:27:52 - db_utils - INFO -   Row count in sqlite_sequence: 1
2024-10-31 04:27:52 - db_utils - INFO -   Row count in feedback: 11
2024-10-31 04:27:52 - db_utils - INFO -   Test query result: (1,)
2024-10-31 04:27:52 - db_utils - INFO - Detailed database operations debugging completed
2024-10-31 04:27:52 - db_utils - INFO - Oppdatert skjema for customer
2024-10-31 04:27:52 - db_utils - INFO - Oppdatert skjema for feedback
2024-10-31 04:27:52 - db_utils - INFO - Oppdatert skjema for login_history
2024-10-31 04:27:52 - db_utils - INFO - Oppdatert skjema for stroing
2024-10-31 04:27:52 - db_utils - INFO - Oppdatert skjema for tunbroyting
2024-10-31 04:27:52 - db_utils - INFO - All database schemas verified and updated
2024-10-31 04:27:52 - db_utils - INFO - Oppdatert skjema for customer
2024-10-31 04:27:52 - db_utils - INFO - Oppdatert skjema for feedback
2024-10-31 04:27:52 - db_utils - INFO - Oppdatert skjema for login_history
2024-10-31 04:27:52 - db_utils - INFO - Oppdatert skjema for stroing
2024-10-31 04:27:52 - db_utils - INFO - Oppdatert skjema for tunbroyting
2024-10-31 04:27:52 - db_utils - INFO - All database schemas verified and updated
2024-10-31 04:27:52 - db_utils - INFO - Database already initialized. Skipping.
2024-10-31 04:27:52 - db_utils - INFO - Query executed successfully on login_history.db. Rows affected: -1
2024-10-31 04:27:52 - db_utils - INFO - login_history table structure is correct
2024-10-31 04:27:52 - customer_utils - INFO - Starting cabin user consistency check
2024-10-31 04:27:52 - utils - INFO - Attempting to load passwords from secrets
2024-10-31 04:27:52 - utils - INFO - Successfully loaded passwords. Number of entries: 94
2024-10-31 04:27:52 - customer_utils - INFO - Retrieved 94 passwords
2024-10-31 04:27:52 - customer_utils - INFO - Found 94 customers in database
2024-10-31 04:27:52 - customer_utils - INFO - Consistency check completed
2024-10-31 04:27:52 - customer_utils - INFO - Database connection closed
2024-10-31 04:27:52 - customer_utils - INFO - Validating customers and passwords
2024-10-31 04:27:52 - utils - INFO - Attempting to load passwords from secrets
2024-10-31 04:27:52 - utils - INFO - Successfully loaded passwords. Number of entries: 94
2024-10-31 04:27:52 - customer_utils - INFO - Customer and password validation complete
2024-10-31 04:27:52 - db_utils - INFO - Successfully created indexes for tunbroyting database
2024-10-31 04:27:52 - db_utils - INFO - Successfully created indexes for stroing database
2024-10-31 04:27:52 - db_utils - INFO - Successfully created indexes for feedback database
2024-10-31 04:27:52 - db_utils - INFO - Successfully created indexes for login_history database
2024-10-31 04:27:52 - db_utils - INFO - Successfully created indexes for customer database
2024-10-31 04:27:52 - db_utils - INFO - Database index creation completed
2024-10-31 04:27:52 - __main__ - INFO - Application initialization completed successfully
2024-10-31 04:27:52 - __main__ - INFO - Application initialization completed successfully
2024-10-31 04:27:52 - __main__ - INFO - Application setup complete
2024-10-31 04:27:52 - customer_utils - INFO - Successfully retrieved customer with ID: 999
2024-10-31 04:27:53 - weather_display_utils - ERROR - Uventet feil i display_weather_data: 'snow_precipitation'
Traceback (most recent call last):
  File "/Users/tor.inge.jossang@aftenbladet.no/dev/gullingen/new_clean_env/lib/python3.12/site-packages/pandas/core/indexes/base.py", line 3805, in get_loc
    return self._engine.get_loc(casted_key)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "index.pyx", line 167, in pandas._libs.index.IndexEngine.get_loc
  File "index.pyx", line 196, in pandas._libs.index.IndexEngine.get_loc
  File "pandas/_libs/hashtable_class_helper.pxi", line 7081, in pandas._libs.hashtable.PyObjectHashTable.get_item
  File "pandas/_libs/hashtable_class_helper.pxi", line 7089, in pandas._libs.hashtable.PyObjectHashTable.get_item
KeyError: 'snow_precipitation'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/tor.inge.jossang@aftenbladet.no/dev/gullingen/weather_display_utils.py", line 46, in display_weather_data
    fig = create_improved_graph(df)
          ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/tor.inge.jossang@aftenbladet.no/dev/gullingen/weather_display_utils.py", line 96, in create_improved_graph
    "data": df["snow_precipitation"],
            ~~^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/tor.inge.jossang@aftenbladet.no/dev/gullingen/new_clean_env/lib/python3.12/site-packages/pandas/core/frame.py", line 4102, in __getitem__
    indexer = self.columns.get_loc(key)
              ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/tor.inge.jossang@aftenbladet.no/dev/gullingen/new_clean_env/lib/python3.12/site-packages/pandas/core/indexes/base.py", line 3812, in get_loc
    raise KeyError(key) from err
KeyError: 'snow_precipitation'
2024-10-31 04:27:53 - __main__ - INFO - Application shutting down
2024-10-31 04:32:01 - __main__ - INFO - Added validate_user_input function to app.py
2024-10-31 04:32:01 - __main__ - INFO - Starting application initialization
2024-10-31 04:32:01 - db_utils - INFO - Starting detailed database operations debugging
2024-10-31 04:32:01 - db_utils - INFO - Debugging login_history database:
2024-10-31 04:32:01 - db_utils - INFO -   Database version: 0
2024-10-31 04:32:01 - db_utils - INFO -   Tables in login_history.db: ['login_history']
2024-10-31 04:32:01 - db_utils - INFO -   Structure of login_history table:
2024-10-31 04:32:01 - db_utils - INFO -     Column: id, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:32:01 - db_utils - INFO -     Column: login_time, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:32:01 - db_utils - INFO -     Column: success, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:32:01 - db_utils - INFO -   Indexes in login_history.db: ['idx_login_id', 'idx_login_time']
2024-10-31 04:32:01 - db_utils - INFO -   Row count in login_history: 434
2024-10-31 04:32:01 - db_utils - INFO -   Test query result: (1,)
2024-10-31 04:32:01 - db_utils - INFO - Debugging tunbroyting database:
2024-10-31 04:32:01 - db_utils - INFO -   Database version: 0
2024-10-31 04:32:01 - db_utils - INFO -   Tables in tunbroyting.db: ['tunbroyting_bestillinger']
2024-10-31 04:32:01 - db_utils - INFO -   Structure of tunbroyting_bestillinger table:
2024-10-31 04:32:01 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 04:32:01 - db_utils - INFO -     Column: bruker, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:32:01 - db_utils - INFO -     Column: ankomst_dato, Type: DATE, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:32:01 - db_utils - INFO -     Column: ankomst_tid, Type: TIME, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:32:01 - db_utils - INFO -     Column: avreise_dato, Type: DATE, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:32:01 - db_utils - INFO -     Column: avreise_tid, Type: TIME, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:32:01 - db_utils - INFO -     Column: abonnement_type, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:32:01 - db_utils - INFO -   Indexes in tunbroyting.db: ['idx_tunbroyting_bruker', 'idx_tunbroyting_ankomst_dato', 'idx_tunbroyting_avreise_dato', 'idx_tunbroyting_abonnement']
2024-10-31 04:32:01 - db_utils - INFO -   Row count in tunbroyting_bestillinger: 2
2024-10-31 04:32:01 - db_utils - INFO -   Test query result: (1,)
2024-10-31 04:32:01 - db_utils - INFO - Debugging stroing database:
2024-10-31 04:32:01 - db_utils - INFO -   Database version: 0
2024-10-31 04:32:01 - db_utils - INFO -   Tables in stroing.db: ['sqlite_sequence', 'stroing_bestillinger']
2024-10-31 04:32:01 - db_utils - INFO -   Structure of sqlite_sequence table:
2024-10-31 04:32:01 - db_utils - INFO -     Column: name, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:32:01 - db_utils - INFO -     Column: seq, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:32:01 - db_utils - INFO -   Structure of stroing_bestillinger table:
2024-10-31 04:32:01 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 04:32:01 - db_utils - INFO -     Column: bruker, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:32:01 - db_utils - INFO -     Column: bestillings_dato, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:32:01 - db_utils - INFO -     Column: onske_dato, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:32:01 - db_utils - INFO -   Indexes in stroing.db: ['idx_stroing_bruker', 'idx_stroing_onske_dato', 'idx_stroing_bestillings_dato']
2024-10-31 04:32:01 - db_utils - INFO -   Row count in sqlite_sequence: 1
2024-10-31 04:32:01 - db_utils - INFO -   Row count in stroing_bestillinger: 5
2024-10-31 04:32:01 - db_utils - INFO -   Test query result: (1,)
2024-10-31 04:32:01 - db_utils - INFO - Debugging feedback database:
2024-10-31 04:32:01 - db_utils - INFO -   Database version: 0
2024-10-31 04:32:01 - db_utils - INFO -   Tables in feedback.db: ['sqlite_sequence', 'feedback']
2024-10-31 04:32:01 - db_utils - INFO -   Structure of sqlite_sequence table:
2024-10-31 04:32:01 - db_utils - INFO -     Column: name, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:32:01 - db_utils - INFO -     Column: seq, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:32:01 - db_utils - INFO -   Structure of feedback table:
2024-10-31 04:32:01 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 04:32:01 - db_utils - INFO -     Column: type, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:32:01 - db_utils - INFO -     Column: datetime, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:32:01 - db_utils - INFO -     Column: comment, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:32:01 - db_utils - INFO -     Column: innsender, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:32:01 - db_utils - INFO -     Column: status, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:32:01 - db_utils - INFO -     Column: status_changed_by, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:32:01 - db_utils - INFO -     Column: status_changed_at, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:32:01 - db_utils - INFO -     Column: hidden, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:32:01 - db_utils - INFO -     Column: is_alert, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:32:01 - db_utils - INFO -     Column: display_on_weather, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:32:01 - db_utils - INFO -     Column: expiry_date, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:32:01 - db_utils - INFO -     Column: target_group, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:32:01 - db_utils - INFO -   Indexes in feedback.db: ['idx_feedback_datetime', 'idx_feedback_innsender', 'idx_feedback_status', 'idx_feedback_type']
2024-10-31 04:32:01 - db_utils - INFO -   Row count in sqlite_sequence: 1
2024-10-31 04:32:01 - db_utils - INFO -   Row count in feedback: 11
2024-10-31 04:32:01 - db_utils - INFO -   Test query result: (1,)
2024-10-31 04:32:01 - db_utils - INFO - Detailed database operations debugging completed
2024-10-31 04:32:01 - db_utils - INFO - Oppdatert skjema for customer
2024-10-31 04:32:01 - db_utils - INFO - Oppdatert skjema for feedback
2024-10-31 04:32:01 - db_utils - INFO - Oppdatert skjema for login_history
2024-10-31 04:32:01 - db_utils - INFO - Oppdatert skjema for stroing
2024-10-31 04:32:01 - db_utils - INFO - Oppdatert skjema for tunbroyting
2024-10-31 04:32:01 - db_utils - INFO - All database schemas verified and updated
2024-10-31 04:32:01 - db_utils - INFO - Oppdatert skjema for customer
2024-10-31 04:32:01 - db_utils - INFO - Oppdatert skjema for feedback
2024-10-31 04:32:01 - db_utils - INFO - Oppdatert skjema for login_history
2024-10-31 04:32:01 - db_utils - INFO - Oppdatert skjema for stroing
2024-10-31 04:32:01 - db_utils - INFO - Oppdatert skjema for tunbroyting
2024-10-31 04:32:01 - db_utils - INFO - All database schemas verified and updated
2024-10-31 04:32:01 - db_utils - INFO - Database login_history initialized, updated, and optimized
2024-10-31 04:32:01 - db_utils - INFO - Database tunbroyting initialized, updated, and optimized
2024-10-31 04:32:01 - db_utils - INFO - Database stroing initialized, updated, and optimized
2024-10-31 04:32:01 - db_utils - INFO - Database feedback initialized, updated, and optimized
2024-10-31 04:32:01 - db_utils - INFO - Database customer initialized, updated, and optimized
2024-10-31 04:32:01 - db_utils - INFO - Successfully created indexes for tunbroyting database
2024-10-31 04:32:01 - db_utils - INFO - Successfully created indexes for stroing database
2024-10-31 04:32:01 - db_utils - INFO - Successfully created indexes for feedback database
2024-10-31 04:32:01 - db_utils - INFO - Successfully created indexes for login_history database
2024-10-31 04:32:01 - db_utils - INFO - Successfully created indexes for customer database
2024-10-31 04:32:01 - db_utils - INFO - Database index creation completed
2024-10-31 04:32:01 - db_utils - INFO - Database indexes created
2024-10-31 04:32:01 - db_utils - INFO - Successfully verified connection to stroing.db
2024-10-31 04:32:01 - db_utils - INFO - Successfully verified connection to tunbroyting.db
2024-10-31 04:32:01 - db_utils - INFO - Successfully verified connection to feedback.db
2024-10-31 04:32:01 - db_utils - INFO - Successfully verified connection to login_history.db
2024-10-31 04:32:01 - db_utils - INFO - Successfully verified connection to customer.db
2024-10-31 04:32:01 - db_utils - INFO - Database connections verified
2024-10-31 04:32:01 - db_utils - INFO - All databases initialized, updated, and verified
2024-10-31 04:32:01 - db_utils - INFO - Query executed successfully on login_history.db. Rows affected: -1
2024-10-31 04:32:01 - db_utils - INFO - login_history table structure is correct
2024-10-31 04:32:01 - customer_utils - INFO - Starting cabin user consistency check
2024-10-31 04:32:01 - utils - INFO - Attempting to load passwords from secrets
2024-10-31 04:32:01 - utils - INFO - Successfully loaded passwords. Number of entries: 94
2024-10-31 04:32:01 - customer_utils - INFO - Retrieved 94 passwords
2024-10-31 04:32:01 - customer_utils - INFO - Found 94 customers in database
2024-10-31 04:32:01 - customer_utils - INFO - Consistency check completed
2024-10-31 04:32:01 - customer_utils - INFO - Database connection closed
2024-10-31 04:32:01 - customer_utils - INFO - Validating customers and passwords
2024-10-31 04:32:01 - utils - INFO - Attempting to load passwords from secrets
2024-10-31 04:32:01 - utils - INFO - Successfully loaded passwords. Number of entries: 94
2024-10-31 04:32:01 - customer_utils - INFO - Customer and password validation complete
2024-10-31 04:32:01 - db_utils - INFO - Successfully created indexes for tunbroyting database
2024-10-31 04:32:01 - db_utils - INFO - Successfully created indexes for stroing database
2024-10-31 04:32:01 - db_utils - INFO - Successfully created indexes for feedback database
2024-10-31 04:32:01 - db_utils - INFO - Successfully created indexes for login_history database
2024-10-31 04:32:01 - db_utils - INFO - Successfully created indexes for customer database
2024-10-31 04:32:01 - db_utils - INFO - Database index creation completed
2024-10-31 04:32:01 - __main__ - INFO - Application initialization completed successfully
2024-10-31 04:32:01 - __main__ - INFO - Application initialization completed successfully
2024-10-31 04:32:01 - __main__ - INFO - Application setup complete
2024-10-31 04:32:01 - __main__ - INFO - Application shutting down
2024-10-31 04:32:03 - __main__ - INFO - Added validate_user_input function to app.py
2024-10-31 04:32:03 - __main__ - INFO - Starting application initialization
2024-10-31 04:32:03 - db_utils - INFO - Starting detailed database operations debugging
2024-10-31 04:32:03 - db_utils - INFO - Debugging login_history database:
2024-10-31 04:32:03 - db_utils - INFO -   Database version: 0
2024-10-31 04:32:03 - db_utils - INFO -   Tables in login_history.db: ['login_history']
2024-10-31 04:32:03 - db_utils - INFO -   Structure of login_history table:
2024-10-31 04:32:03 - db_utils - INFO -     Column: id, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:32:03 - db_utils - INFO -     Column: login_time, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:32:03 - db_utils - INFO -     Column: success, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:32:03 - db_utils - INFO -   Indexes in login_history.db: ['idx_login_id', 'idx_login_time']
2024-10-31 04:32:03 - db_utils - INFO -   Row count in login_history: 434
2024-10-31 04:32:03 - db_utils - INFO -   Test query result: (1,)
2024-10-31 04:32:03 - db_utils - INFO - Debugging tunbroyting database:
2024-10-31 04:32:03 - db_utils - INFO -   Database version: 0
2024-10-31 04:32:03 - db_utils - INFO -   Tables in tunbroyting.db: ['tunbroyting_bestillinger']
2024-10-31 04:32:03 - db_utils - INFO -   Structure of tunbroyting_bestillinger table:
2024-10-31 04:32:03 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 04:32:03 - db_utils - INFO -     Column: bruker, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:32:03 - db_utils - INFO -     Column: ankomst_dato, Type: DATE, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:32:03 - db_utils - INFO -     Column: ankomst_tid, Type: TIME, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:32:03 - db_utils - INFO -     Column: avreise_dato, Type: DATE, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:32:03 - db_utils - INFO -     Column: avreise_tid, Type: TIME, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:32:03 - db_utils - INFO -     Column: abonnement_type, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:32:03 - db_utils - INFO -   Indexes in tunbroyting.db: ['idx_tunbroyting_bruker', 'idx_tunbroyting_ankomst_dato', 'idx_tunbroyting_avreise_dato', 'idx_tunbroyting_abonnement']
2024-10-31 04:32:03 - db_utils - INFO -   Row count in tunbroyting_bestillinger: 2
2024-10-31 04:32:03 - db_utils - INFO -   Test query result: (1,)
2024-10-31 04:32:03 - db_utils - INFO - Debugging stroing database:
2024-10-31 04:32:03 - db_utils - INFO -   Database version: 0
2024-10-31 04:32:03 - db_utils - INFO -   Tables in stroing.db: ['sqlite_sequence', 'stroing_bestillinger']
2024-10-31 04:32:03 - db_utils - INFO -   Structure of sqlite_sequence table:
2024-10-31 04:32:03 - db_utils - INFO -     Column: name, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:32:03 - db_utils - INFO -     Column: seq, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:32:03 - db_utils - INFO -   Structure of stroing_bestillinger table:
2024-10-31 04:32:03 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 04:32:03 - db_utils - INFO -     Column: bruker, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:32:03 - db_utils - INFO -     Column: bestillings_dato, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:32:03 - db_utils - INFO -     Column: onske_dato, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:32:03 - db_utils - INFO -   Indexes in stroing.db: ['idx_stroing_bruker', 'idx_stroing_onske_dato', 'idx_stroing_bestillings_dato']
2024-10-31 04:32:03 - db_utils - INFO -   Row count in sqlite_sequence: 1
2024-10-31 04:32:03 - db_utils - INFO -   Row count in stroing_bestillinger: 5
2024-10-31 04:32:03 - db_utils - INFO -   Test query result: (1,)
2024-10-31 04:32:03 - db_utils - INFO - Debugging feedback database:
2024-10-31 04:32:03 - db_utils - INFO -   Database version: 0
2024-10-31 04:32:03 - db_utils - INFO -   Tables in feedback.db: ['sqlite_sequence', 'feedback']
2024-10-31 04:32:03 - db_utils - INFO -   Structure of sqlite_sequence table:
2024-10-31 04:32:03 - db_utils - INFO -     Column: name, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:32:03 - db_utils - INFO -     Column: seq, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:32:03 - db_utils - INFO -   Structure of feedback table:
2024-10-31 04:32:03 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 04:32:03 - db_utils - INFO -     Column: type, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:32:03 - db_utils - INFO -     Column: datetime, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:32:03 - db_utils - INFO -     Column: comment, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:32:03 - db_utils - INFO -     Column: innsender, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:32:03 - db_utils - INFO -     Column: status, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:32:03 - db_utils - INFO -     Column: status_changed_by, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:32:03 - db_utils - INFO -     Column: status_changed_at, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:32:03 - db_utils - INFO -     Column: hidden, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:32:03 - db_utils - INFO -     Column: is_alert, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:32:03 - db_utils - INFO -     Column: display_on_weather, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:32:03 - db_utils - INFO -     Column: expiry_date, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:32:03 - db_utils - INFO -     Column: target_group, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:32:03 - db_utils - INFO -   Indexes in feedback.db: ['idx_feedback_datetime', 'idx_feedback_innsender', 'idx_feedback_status', 'idx_feedback_type']
2024-10-31 04:32:03 - db_utils - INFO -   Row count in sqlite_sequence: 1
2024-10-31 04:32:03 - db_utils - INFO -   Row count in feedback: 11
2024-10-31 04:32:03 - db_utils - INFO -   Test query result: (1,)
2024-10-31 04:32:03 - db_utils - INFO - Detailed database operations debugging completed
2024-10-31 04:32:03 - db_utils - INFO - Oppdatert skjema for customer
2024-10-31 04:32:03 - db_utils - INFO - Oppdatert skjema for feedback
2024-10-31 04:32:03 - db_utils - INFO - Oppdatert skjema for login_history
2024-10-31 04:32:03 - db_utils - INFO - Oppdatert skjema for stroing
2024-10-31 04:32:03 - db_utils - INFO - Oppdatert skjema for tunbroyting
2024-10-31 04:32:03 - db_utils - INFO - All database schemas verified and updated
2024-10-31 04:32:03 - db_utils - INFO - Oppdatert skjema for customer
2024-10-31 04:32:03 - db_utils - INFO - Oppdatert skjema for feedback
2024-10-31 04:32:03 - db_utils - INFO - Oppdatert skjema for login_history
2024-10-31 04:32:03 - db_utils - INFO - Oppdatert skjema for stroing
2024-10-31 04:32:03 - db_utils - INFO - Oppdatert skjema for tunbroyting
2024-10-31 04:32:03 - db_utils - INFO - All database schemas verified and updated
2024-10-31 04:32:03 - db_utils - INFO - Database already initialized. Skipping.
2024-10-31 04:32:03 - db_utils - INFO - Query executed successfully on login_history.db. Rows affected: -1
2024-10-31 04:32:03 - db_utils - INFO - login_history table structure is correct
2024-10-31 04:32:03 - customer_utils - INFO - Starting cabin user consistency check
2024-10-31 04:32:03 - utils - INFO - Attempting to load passwords from secrets
2024-10-31 04:32:03 - utils - INFO - Successfully loaded passwords. Number of entries: 94
2024-10-31 04:32:03 - customer_utils - INFO - Retrieved 94 passwords
2024-10-31 04:32:03 - customer_utils - INFO - Found 94 customers in database
2024-10-31 04:32:03 - customer_utils - INFO - Consistency check completed
2024-10-31 04:32:03 - customer_utils - INFO - Database connection closed
2024-10-31 04:32:03 - customer_utils - INFO - Validating customers and passwords
2024-10-31 04:32:03 - utils - INFO - Attempting to load passwords from secrets
2024-10-31 04:32:03 - utils - INFO - Successfully loaded passwords. Number of entries: 94
2024-10-31 04:32:03 - customer_utils - INFO - Customer and password validation complete
2024-10-31 04:32:03 - db_utils - INFO - Successfully created indexes for tunbroyting database
2024-10-31 04:32:03 - db_utils - INFO - Successfully created indexes for stroing database
2024-10-31 04:32:03 - db_utils - INFO - Successfully created indexes for feedback database
2024-10-31 04:32:03 - db_utils - INFO - Successfully created indexes for login_history database
2024-10-31 04:32:03 - db_utils - INFO - Successfully created indexes for customer database
2024-10-31 04:32:03 - db_utils - INFO - Database index creation completed
2024-10-31 04:32:03 - __main__ - INFO - Application initialization completed successfully
2024-10-31 04:32:03 - __main__ - INFO - Application initialization completed successfully
2024-10-31 04:32:03 - __main__ - INFO - Application setup complete
2024-10-31 04:32:03 - auth_utils - INFO - Login attempt for ID: 999
2024-10-31 04:32:03 - db_utils - INFO - DATABASE_PATH: /Users/tor.inge.jossang@aftenbladet.no/dev/gullingen
2024-10-31 04:32:03 - db_utils - INFO - Full database path: /Users/tor.inge.jossang@aftenbladet.no/dev/gullingen/login_history.db
2024-10-31 04:32:03 - db_utils - INFO - Attempting to create database engine...
2024-10-31 04:32:03 - db_utils - INFO - Database engine created successfully for login_history.db
2024-10-31 04:32:03 - auth_utils - INFO - Rate limit check passed for user 999
2024-10-31 04:32:03 - auth_utils - INFO - User 999 authenticated successfully
2024-10-31 04:32:03 - customer_utils - INFO - Successfully retrieved customer with ID: 999
2024-10-31 04:32:03 - db_utils - INFO - Database file /Users/tor.inge.jossang@aftenbladet.no/dev/gullingen/login_history.db exists.
2024-10-31 04:32:03 - db_utils - INFO - Query executed successfully on login_history.db. Rows affected: 1
2024-10-31 04:32:03 - auth_utils - INFO - Successful login for ID: 999
2024-10-31 04:32:03 - auth_utils - INFO - Successful login and logging for ID: 999
2024-10-31 04:32:03 - db_utils - INFO - DATABASE_PATH: /Users/tor.inge.jossang@aftenbladet.no/dev/gullingen
2024-10-31 04:32:03 - db_utils - INFO - Full database path: /Users/tor.inge.jossang@aftenbladet.no/dev/gullingen/login_history.db
2024-10-31 04:32:03 - db_utils - INFO - Attempting to create database engine...
2024-10-31 04:32:03 - db_utils - INFO - Database engine created successfully for login_history.db
2024-10-31 04:32:03 - auth_utils - INFO - Rate limit reset for user 999
2024-10-31 04:32:03 - __main__ - INFO - Application shutting down
2024-10-31 04:32:04 - __main__ - INFO - Added validate_user_input function to app.py
2024-10-31 04:32:04 - __main__ - INFO - Starting application initialization
2024-10-31 04:32:04 - db_utils - INFO - Starting detailed database operations debugging
2024-10-31 04:32:04 - db_utils - INFO - Debugging login_history database:
2024-10-31 04:32:04 - db_utils - INFO -   Database version: 0
2024-10-31 04:32:04 - db_utils - INFO -   Tables in login_history.db: ['login_history']
2024-10-31 04:32:04 - db_utils - INFO -   Structure of login_history table:
2024-10-31 04:32:04 - db_utils - INFO -     Column: id, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:32:04 - db_utils - INFO -     Column: login_time, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:32:04 - db_utils - INFO -     Column: success, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:32:04 - db_utils - INFO -   Indexes in login_history.db: ['idx_login_id', 'idx_login_time']
2024-10-31 04:32:04 - db_utils - INFO -   Row count in login_history: 435
2024-10-31 04:32:04 - db_utils - INFO -   Test query result: (1,)
2024-10-31 04:32:04 - db_utils - INFO - Debugging tunbroyting database:
2024-10-31 04:32:04 - db_utils - INFO -   Database version: 0
2024-10-31 04:32:04 - db_utils - INFO -   Tables in tunbroyting.db: ['tunbroyting_bestillinger']
2024-10-31 04:32:04 - db_utils - INFO -   Structure of tunbroyting_bestillinger table:
2024-10-31 04:32:04 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 04:32:04 - db_utils - INFO -     Column: bruker, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:32:04 - db_utils - INFO -     Column: ankomst_dato, Type: DATE, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:32:04 - db_utils - INFO -     Column: ankomst_tid, Type: TIME, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:32:04 - db_utils - INFO -     Column: avreise_dato, Type: DATE, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:32:04 - db_utils - INFO -     Column: avreise_tid, Type: TIME, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:32:04 - db_utils - INFO -     Column: abonnement_type, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:32:04 - db_utils - INFO -   Indexes in tunbroyting.db: ['idx_tunbroyting_bruker', 'idx_tunbroyting_ankomst_dato', 'idx_tunbroyting_avreise_dato', 'idx_tunbroyting_abonnement']
2024-10-31 04:32:04 - db_utils - INFO -   Row count in tunbroyting_bestillinger: 2
2024-10-31 04:32:04 - db_utils - INFO -   Test query result: (1,)
2024-10-31 04:32:04 - db_utils - INFO - Debugging stroing database:
2024-10-31 04:32:04 - db_utils - INFO -   Database version: 0
2024-10-31 04:32:04 - db_utils - INFO -   Tables in stroing.db: ['sqlite_sequence', 'stroing_bestillinger']
2024-10-31 04:32:04 - db_utils - INFO -   Structure of sqlite_sequence table:
2024-10-31 04:32:04 - db_utils - INFO -     Column: name, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:32:04 - db_utils - INFO -     Column: seq, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:32:04 - db_utils - INFO -   Structure of stroing_bestillinger table:
2024-10-31 04:32:04 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 04:32:04 - db_utils - INFO -     Column: bruker, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:32:04 - db_utils - INFO -     Column: bestillings_dato, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:32:04 - db_utils - INFO -     Column: onske_dato, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:32:04 - db_utils - INFO -   Indexes in stroing.db: ['idx_stroing_bruker', 'idx_stroing_onske_dato', 'idx_stroing_bestillings_dato']
2024-10-31 04:32:04 - db_utils - INFO -   Row count in sqlite_sequence: 1
2024-10-31 04:32:04 - db_utils - INFO -   Row count in stroing_bestillinger: 5
2024-10-31 04:32:04 - db_utils - INFO -   Test query result: (1,)
2024-10-31 04:32:04 - db_utils - INFO - Debugging feedback database:
2024-10-31 04:32:04 - db_utils - INFO -   Database version: 0
2024-10-31 04:32:04 - db_utils - INFO -   Tables in feedback.db: ['sqlite_sequence', 'feedback']
2024-10-31 04:32:04 - db_utils - INFO -   Structure of sqlite_sequence table:
2024-10-31 04:32:04 - db_utils - INFO -     Column: name, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:32:04 - db_utils - INFO -     Column: seq, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:32:04 - db_utils - INFO -   Structure of feedback table:
2024-10-31 04:32:04 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 04:32:04 - db_utils - INFO -     Column: type, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:32:04 - db_utils - INFO -     Column: datetime, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:32:04 - db_utils - INFO -     Column: comment, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:32:04 - db_utils - INFO -     Column: innsender, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:32:04 - db_utils - INFO -     Column: status, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:32:04 - db_utils - INFO -     Column: status_changed_by, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:32:04 - db_utils - INFO -     Column: status_changed_at, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:32:04 - db_utils - INFO -     Column: hidden, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:32:04 - db_utils - INFO -     Column: is_alert, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:32:04 - db_utils - INFO -     Column: display_on_weather, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:32:04 - db_utils - INFO -     Column: expiry_date, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:32:04 - db_utils - INFO -     Column: target_group, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:32:04 - db_utils - INFO -   Indexes in feedback.db: ['idx_feedback_datetime', 'idx_feedback_innsender', 'idx_feedback_status', 'idx_feedback_type']
2024-10-31 04:32:04 - db_utils - INFO -   Row count in sqlite_sequence: 1
2024-10-31 04:32:04 - db_utils - INFO -   Row count in feedback: 11
2024-10-31 04:32:04 - db_utils - INFO -   Test query result: (1,)
2024-10-31 04:32:04 - db_utils - INFO - Detailed database operations debugging completed
2024-10-31 04:32:04 - db_utils - INFO - Oppdatert skjema for customer
2024-10-31 04:32:04 - db_utils - INFO - Oppdatert skjema for feedback
2024-10-31 04:32:04 - db_utils - INFO - Oppdatert skjema for login_history
2024-10-31 04:32:04 - db_utils - INFO - Oppdatert skjema for stroing
2024-10-31 04:32:04 - db_utils - INFO - Oppdatert skjema for tunbroyting
2024-10-31 04:32:04 - db_utils - INFO - All database schemas verified and updated
2024-10-31 04:32:04 - db_utils - INFO - Oppdatert skjema for customer
2024-10-31 04:32:04 - db_utils - INFO - Oppdatert skjema for feedback
2024-10-31 04:32:04 - db_utils - INFO - Oppdatert skjema for login_history
2024-10-31 04:32:04 - db_utils - INFO - Oppdatert skjema for stroing
2024-10-31 04:32:04 - db_utils - INFO - Oppdatert skjema for tunbroyting
2024-10-31 04:32:04 - db_utils - INFO - All database schemas verified and updated
2024-10-31 04:32:04 - db_utils - INFO - Database already initialized. Skipping.
2024-10-31 04:32:04 - db_utils - INFO - Query executed successfully on login_history.db. Rows affected: -1
2024-10-31 04:32:04 - db_utils - INFO - login_history table structure is correct
2024-10-31 04:32:04 - customer_utils - INFO - Starting cabin user consistency check
2024-10-31 04:32:04 - utils - INFO - Attempting to load passwords from secrets
2024-10-31 04:32:04 - utils - INFO - Successfully loaded passwords. Number of entries: 94
2024-10-31 04:32:04 - customer_utils - INFO - Retrieved 94 passwords
2024-10-31 04:32:04 - customer_utils - INFO - Found 94 customers in database
2024-10-31 04:32:04 - customer_utils - INFO - Consistency check completed
2024-10-31 04:32:04 - customer_utils - INFO - Database connection closed
2024-10-31 04:32:04 - customer_utils - INFO - Validating customers and passwords
2024-10-31 04:32:04 - utils - INFO - Attempting to load passwords from secrets
2024-10-31 04:32:04 - utils - INFO - Successfully loaded passwords. Number of entries: 94
2024-10-31 04:32:04 - customer_utils - INFO - Customer and password validation complete
2024-10-31 04:32:04 - db_utils - INFO - Successfully created indexes for tunbroyting database
2024-10-31 04:32:04 - db_utils - INFO - Successfully created indexes for stroing database
2024-10-31 04:32:04 - db_utils - INFO - Successfully created indexes for feedback database
2024-10-31 04:32:04 - db_utils - INFO - Successfully created indexes for login_history database
2024-10-31 04:32:04 - db_utils - INFO - Successfully created indexes for customer database
2024-10-31 04:32:04 - db_utils - INFO - Database index creation completed
2024-10-31 04:32:04 - __main__ - INFO - Application initialization completed successfully
2024-10-31 04:32:04 - __main__ - INFO - Application initialization completed successfully
2024-10-31 04:32:04 - __main__ - INFO - Application setup complete
2024-10-31 04:32:04 - customer_utils - INFO - Successfully retrieved customer with ID: 999
2024-10-31 04:32:04 - alert_utils - INFO - Fetched 1 alerts. only_today=False, include_expired=False
2024-10-31 04:32:04 - tun_utils - WARNING - hent_bestillinger() is deprecated, use get_bookings() instead
2024-10-31 04:32:04 - tun_utils - INFO - Starting get_bookings with start_date=None, end_date=None
2024-10-31 04:32:04 - tun_utils - INFO - Successfully retrieved 2 bookings
2024-10-31 04:32:04 - __main__ - INFO - Application shutting down
2024-10-31 04:32:06 - __main__ - INFO - Added validate_user_input function to app.py
2024-10-31 04:32:06 - __main__ - INFO - Starting application initialization
2024-10-31 04:32:06 - db_utils - INFO - Starting detailed database operations debugging
2024-10-31 04:32:06 - db_utils - INFO - Debugging login_history database:
2024-10-31 04:32:06 - db_utils - INFO -   Database version: 0
2024-10-31 04:32:06 - db_utils - INFO -   Tables in login_history.db: ['login_history']
2024-10-31 04:32:06 - db_utils - INFO -   Structure of login_history table:
2024-10-31 04:32:06 - db_utils - INFO -     Column: id, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:32:06 - db_utils - INFO -     Column: login_time, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:32:06 - db_utils - INFO -     Column: success, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:32:06 - db_utils - INFO -   Indexes in login_history.db: ['idx_login_id', 'idx_login_time']
2024-10-31 04:32:06 - db_utils - INFO -   Row count in login_history: 435
2024-10-31 04:32:06 - db_utils - INFO -   Test query result: (1,)
2024-10-31 04:32:06 - db_utils - INFO - Debugging tunbroyting database:
2024-10-31 04:32:06 - db_utils - INFO -   Database version: 0
2024-10-31 04:32:06 - db_utils - INFO -   Tables in tunbroyting.db: ['tunbroyting_bestillinger']
2024-10-31 04:32:06 - db_utils - INFO -   Structure of tunbroyting_bestillinger table:
2024-10-31 04:32:06 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 04:32:06 - db_utils - INFO -     Column: bruker, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:32:06 - db_utils - INFO -     Column: ankomst_dato, Type: DATE, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:32:06 - db_utils - INFO -     Column: ankomst_tid, Type: TIME, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:32:06 - db_utils - INFO -     Column: avreise_dato, Type: DATE, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:32:06 - db_utils - INFO -     Column: avreise_tid, Type: TIME, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:32:06 - db_utils - INFO -     Column: abonnement_type, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:32:06 - db_utils - INFO -   Indexes in tunbroyting.db: ['idx_tunbroyting_bruker', 'idx_tunbroyting_ankomst_dato', 'idx_tunbroyting_avreise_dato', 'idx_tunbroyting_abonnement']
2024-10-31 04:32:06 - db_utils - INFO -   Row count in tunbroyting_bestillinger: 2
2024-10-31 04:32:06 - db_utils - INFO -   Test query result: (1,)
2024-10-31 04:32:06 - db_utils - INFO - Debugging stroing database:
2024-10-31 04:32:06 - db_utils - INFO -   Database version: 0
2024-10-31 04:32:06 - db_utils - INFO -   Tables in stroing.db: ['sqlite_sequence', 'stroing_bestillinger']
2024-10-31 04:32:06 - db_utils - INFO -   Structure of sqlite_sequence table:
2024-10-31 04:32:06 - db_utils - INFO -     Column: name, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:32:06 - db_utils - INFO -     Column: seq, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:32:06 - db_utils - INFO -   Structure of stroing_bestillinger table:
2024-10-31 04:32:06 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 04:32:06 - db_utils - INFO -     Column: bruker, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:32:06 - db_utils - INFO -     Column: bestillings_dato, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:32:06 - db_utils - INFO -     Column: onske_dato, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:32:06 - db_utils - INFO -   Indexes in stroing.db: ['idx_stroing_bruker', 'idx_stroing_onske_dato', 'idx_stroing_bestillings_dato']
2024-10-31 04:32:06 - db_utils - INFO -   Row count in sqlite_sequence: 1
2024-10-31 04:32:06 - db_utils - INFO -   Row count in stroing_bestillinger: 5
2024-10-31 04:32:06 - db_utils - INFO -   Test query result: (1,)
2024-10-31 04:32:06 - db_utils - INFO - Debugging feedback database:
2024-10-31 04:32:06 - db_utils - INFO -   Database version: 0
2024-10-31 04:32:06 - db_utils - INFO -   Tables in feedback.db: ['sqlite_sequence', 'feedback']
2024-10-31 04:32:06 - db_utils - INFO -   Structure of sqlite_sequence table:
2024-10-31 04:32:06 - db_utils - INFO -     Column: name, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:32:06 - db_utils - INFO -     Column: seq, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:32:06 - db_utils - INFO -   Structure of feedback table:
2024-10-31 04:32:06 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 04:32:06 - db_utils - INFO -     Column: type, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:32:06 - db_utils - INFO -     Column: datetime, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:32:06 - db_utils - INFO -     Column: comment, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:32:06 - db_utils - INFO -     Column: innsender, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:32:06 - db_utils - INFO -     Column: status, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:32:06 - db_utils - INFO -     Column: status_changed_by, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:32:06 - db_utils - INFO -     Column: status_changed_at, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:32:06 - db_utils - INFO -     Column: hidden, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:32:06 - db_utils - INFO -     Column: is_alert, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:32:06 - db_utils - INFO -     Column: display_on_weather, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:32:06 - db_utils - INFO -     Column: expiry_date, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:32:06 - db_utils - INFO -     Column: target_group, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:32:06 - db_utils - INFO -   Indexes in feedback.db: ['idx_feedback_datetime', 'idx_feedback_innsender', 'idx_feedback_status', 'idx_feedback_type']
2024-10-31 04:32:06 - db_utils - INFO -   Row count in sqlite_sequence: 1
2024-10-31 04:32:06 - db_utils - INFO -   Row count in feedback: 11
2024-10-31 04:32:06 - db_utils - INFO -   Test query result: (1,)
2024-10-31 04:32:06 - db_utils - INFO - Detailed database operations debugging completed
2024-10-31 04:32:06 - db_utils - INFO - Oppdatert skjema for customer
2024-10-31 04:32:06 - db_utils - INFO - Oppdatert skjema for feedback
2024-10-31 04:32:06 - db_utils - INFO - Oppdatert skjema for login_history
2024-10-31 04:32:06 - db_utils - INFO - Oppdatert skjema for stroing
2024-10-31 04:32:06 - db_utils - INFO - Oppdatert skjema for tunbroyting
2024-10-31 04:32:06 - db_utils - INFO - All database schemas verified and updated
2024-10-31 04:32:06 - db_utils - INFO - Oppdatert skjema for customer
2024-10-31 04:32:06 - db_utils - INFO - Oppdatert skjema for feedback
2024-10-31 04:32:06 - db_utils - INFO - Oppdatert skjema for login_history
2024-10-31 04:32:06 - db_utils - INFO - Oppdatert skjema for stroing
2024-10-31 04:32:06 - db_utils - INFO - Oppdatert skjema for tunbroyting
2024-10-31 04:32:06 - db_utils - INFO - All database schemas verified and updated
2024-10-31 04:32:06 - db_utils - INFO - Database already initialized. Skipping.
2024-10-31 04:32:06 - db_utils - INFO - Query executed successfully on login_history.db. Rows affected: -1
2024-10-31 04:32:06 - db_utils - INFO - login_history table structure is correct
2024-10-31 04:32:06 - customer_utils - INFO - Starting cabin user consistency check
2024-10-31 04:32:06 - utils - INFO - Attempting to load passwords from secrets
2024-10-31 04:32:06 - utils - INFO - Successfully loaded passwords. Number of entries: 94
2024-10-31 04:32:06 - customer_utils - INFO - Retrieved 94 passwords
2024-10-31 04:32:06 - customer_utils - INFO - Found 94 customers in database
2024-10-31 04:32:06 - customer_utils - INFO - Consistency check completed
2024-10-31 04:32:06 - customer_utils - INFO - Database connection closed
2024-10-31 04:32:06 - customer_utils - INFO - Validating customers and passwords
2024-10-31 04:32:06 - utils - INFO - Attempting to load passwords from secrets
2024-10-31 04:32:06 - utils - INFO - Successfully loaded passwords. Number of entries: 94
2024-10-31 04:32:06 - customer_utils - INFO - Customer and password validation complete
2024-10-31 04:32:06 - db_utils - INFO - Successfully created indexes for tunbroyting database
2024-10-31 04:32:06 - db_utils - INFO - Successfully created indexes for stroing database
2024-10-31 04:32:06 - db_utils - INFO - Successfully created indexes for feedback database
2024-10-31 04:32:06 - db_utils - INFO - Successfully created indexes for login_history database
2024-10-31 04:32:06 - db_utils - INFO - Successfully created indexes for customer database
2024-10-31 04:32:06 - db_utils - INFO - Database index creation completed
2024-10-31 04:32:06 - __main__ - INFO - Application initialization completed successfully
2024-10-31 04:32:06 - __main__ - INFO - Application initialization completed successfully
2024-10-31 04:32:06 - __main__ - INFO - Application setup complete
2024-10-31 04:32:06 - customer_utils - INFO - Successfully retrieved customer with ID: 999
2024-10-31 04:32:07 - weather_display_utils - ERROR - Uventet feil i display_weather_data: create_improved_graph() takes 1 positional argument but 2 were given
Traceback (most recent call last):
  File "/Users/tor.inge.jossang@aftenbladet.no/dev/gullingen/weather_display_utils.py", line 45, in display_weather_data
    fig = create_improved_graph(df, df.columns)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: create_improved_graph() takes 1 positional argument but 2 were given
2024-10-31 04:32:07 - __main__ - INFO - Application shutting down
2024-10-31 04:36:24 - __main__ - INFO - Added validate_user_input function to app.py
2024-10-31 04:36:24 - __main__ - INFO - Starting application initialization
2024-10-31 04:36:24 - db_utils - INFO - Starting detailed database operations debugging
2024-10-31 04:36:24 - db_utils - INFO - Debugging login_history database:
2024-10-31 04:36:24 - db_utils - INFO -   Database version: 0
2024-10-31 04:36:24 - db_utils - INFO -   Tables in login_history.db: ['login_history']
2024-10-31 04:36:24 - db_utils - INFO -   Structure of login_history table:
2024-10-31 04:36:24 - db_utils - INFO -     Column: id, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:36:24 - db_utils - INFO -     Column: login_time, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:36:24 - db_utils - INFO -     Column: success, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:36:24 - db_utils - INFO -   Indexes in login_history.db: ['idx_login_id', 'idx_login_time']
2024-10-31 04:36:24 - db_utils - INFO -   Row count in login_history: 435
2024-10-31 04:36:24 - db_utils - INFO -   Test query result: (1,)
2024-10-31 04:36:24 - db_utils - INFO - Debugging tunbroyting database:
2024-10-31 04:36:24 - db_utils - INFO -   Database version: 0
2024-10-31 04:36:24 - db_utils - INFO -   Tables in tunbroyting.db: ['tunbroyting_bestillinger']
2024-10-31 04:36:24 - db_utils - INFO -   Structure of tunbroyting_bestillinger table:
2024-10-31 04:36:24 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 04:36:24 - db_utils - INFO -     Column: bruker, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:36:24 - db_utils - INFO -     Column: ankomst_dato, Type: DATE, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:36:24 - db_utils - INFO -     Column: ankomst_tid, Type: TIME, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:36:24 - db_utils - INFO -     Column: avreise_dato, Type: DATE, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:36:24 - db_utils - INFO -     Column: avreise_tid, Type: TIME, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:36:24 - db_utils - INFO -     Column: abonnement_type, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:36:24 - db_utils - INFO -   Indexes in tunbroyting.db: ['idx_tunbroyting_bruker', 'idx_tunbroyting_ankomst_dato', 'idx_tunbroyting_avreise_dato', 'idx_tunbroyting_abonnement']
2024-10-31 04:36:24 - db_utils - INFO -   Row count in tunbroyting_bestillinger: 2
2024-10-31 04:36:24 - db_utils - INFO -   Test query result: (1,)
2024-10-31 04:36:24 - db_utils - INFO - Debugging stroing database:
2024-10-31 04:36:24 - db_utils - INFO -   Database version: 0
2024-10-31 04:36:24 - db_utils - INFO -   Tables in stroing.db: ['sqlite_sequence', 'stroing_bestillinger']
2024-10-31 04:36:24 - db_utils - INFO -   Structure of sqlite_sequence table:
2024-10-31 04:36:24 - db_utils - INFO -     Column: name, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:36:24 - db_utils - INFO -     Column: seq, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:36:24 - db_utils - INFO -   Structure of stroing_bestillinger table:
2024-10-31 04:36:24 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 04:36:24 - db_utils - INFO -     Column: bruker, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:36:24 - db_utils - INFO -     Column: bestillings_dato, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:36:24 - db_utils - INFO -     Column: onske_dato, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:36:24 - db_utils - INFO -   Indexes in stroing.db: ['idx_stroing_bruker', 'idx_stroing_onske_dato', 'idx_stroing_bestillings_dato']
2024-10-31 04:36:24 - db_utils - INFO -   Row count in sqlite_sequence: 1
2024-10-31 04:36:24 - db_utils - INFO -   Row count in stroing_bestillinger: 5
2024-10-31 04:36:24 - db_utils - INFO -   Test query result: (1,)
2024-10-31 04:36:24 - db_utils - INFO - Debugging feedback database:
2024-10-31 04:36:24 - db_utils - INFO -   Database version: 0
2024-10-31 04:36:24 - db_utils - INFO -   Tables in feedback.db: ['sqlite_sequence', 'feedback']
2024-10-31 04:36:24 - db_utils - INFO -   Structure of sqlite_sequence table:
2024-10-31 04:36:24 - db_utils - INFO -     Column: name, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:36:24 - db_utils - INFO -     Column: seq, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:36:24 - db_utils - INFO -   Structure of feedback table:
2024-10-31 04:36:24 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 04:36:24 - db_utils - INFO -     Column: type, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:36:24 - db_utils - INFO -     Column: datetime, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:36:24 - db_utils - INFO -     Column: comment, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:36:24 - db_utils - INFO -     Column: innsender, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:36:24 - db_utils - INFO -     Column: status, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:36:24 - db_utils - INFO -     Column: status_changed_by, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:36:24 - db_utils - INFO -     Column: status_changed_at, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:36:24 - db_utils - INFO -     Column: hidden, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:36:24 - db_utils - INFO -     Column: is_alert, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:36:24 - db_utils - INFO -     Column: display_on_weather, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:36:24 - db_utils - INFO -     Column: expiry_date, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:36:24 - db_utils - INFO -     Column: target_group, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:36:24 - db_utils - INFO -   Indexes in feedback.db: ['idx_feedback_datetime', 'idx_feedback_innsender', 'idx_feedback_status', 'idx_feedback_type']
2024-10-31 04:36:24 - db_utils - INFO -   Row count in sqlite_sequence: 1
2024-10-31 04:36:24 - db_utils - INFO -   Row count in feedback: 11
2024-10-31 04:36:24 - db_utils - INFO -   Test query result: (1,)
2024-10-31 04:36:24 - db_utils - INFO - Detailed database operations debugging completed
2024-10-31 04:36:24 - db_utils - INFO - Oppdatert skjema for customer
2024-10-31 04:36:24 - db_utils - INFO - Oppdatert skjema for feedback
2024-10-31 04:36:24 - db_utils - INFO - Oppdatert skjema for login_history
2024-10-31 04:36:24 - db_utils - INFO - Oppdatert skjema for stroing
2024-10-31 04:36:24 - db_utils - INFO - Oppdatert skjema for tunbroyting
2024-10-31 04:36:24 - db_utils - INFO - All database schemas verified and updated
2024-10-31 04:36:24 - db_utils - INFO - Oppdatert skjema for customer
2024-10-31 04:36:24 - db_utils - INFO - Oppdatert skjema for feedback
2024-10-31 04:36:24 - db_utils - INFO - Oppdatert skjema for login_history
2024-10-31 04:36:24 - db_utils - INFO - Oppdatert skjema for stroing
2024-10-31 04:36:24 - db_utils - INFO - Oppdatert skjema for tunbroyting
2024-10-31 04:36:24 - db_utils - INFO - All database schemas verified and updated
2024-10-31 04:36:24 - db_utils - INFO - Database login_history initialized, updated, and optimized
2024-10-31 04:36:24 - db_utils - INFO - Database tunbroyting initialized, updated, and optimized
2024-10-31 04:36:24 - db_utils - INFO - Database stroing initialized, updated, and optimized
2024-10-31 04:36:24 - db_utils - INFO - Database feedback initialized, updated, and optimized
2024-10-31 04:36:24 - db_utils - INFO - Database customer initialized, updated, and optimized
2024-10-31 04:36:24 - db_utils - INFO - Successfully created indexes for tunbroyting database
2024-10-31 04:36:24 - db_utils - INFO - Successfully created indexes for stroing database
2024-10-31 04:36:24 - db_utils - INFO - Successfully created indexes for feedback database
2024-10-31 04:36:24 - db_utils - INFO - Successfully created indexes for login_history database
2024-10-31 04:36:24 - db_utils - INFO - Successfully created indexes for customer database
2024-10-31 04:36:24 - db_utils - INFO - Database index creation completed
2024-10-31 04:36:24 - db_utils - INFO - Database indexes created
2024-10-31 04:36:24 - db_utils - INFO - Successfully verified connection to stroing.db
2024-10-31 04:36:24 - db_utils - INFO - Successfully verified connection to tunbroyting.db
2024-10-31 04:36:24 - db_utils - INFO - Successfully verified connection to feedback.db
2024-10-31 04:36:24 - db_utils - INFO - Successfully verified connection to login_history.db
2024-10-31 04:36:24 - db_utils - INFO - Successfully verified connection to customer.db
2024-10-31 04:36:24 - db_utils - INFO - Database connections verified
2024-10-31 04:36:24 - db_utils - INFO - All databases initialized, updated, and verified
2024-10-31 04:36:24 - db_utils - INFO - Query executed successfully on login_history.db. Rows affected: -1
2024-10-31 04:36:24 - db_utils - INFO - login_history table structure is correct
2024-10-31 04:36:24 - customer_utils - INFO - Starting cabin user consistency check
2024-10-31 04:36:24 - utils - INFO - Attempting to load passwords from secrets
2024-10-31 04:36:24 - utils - INFO - Successfully loaded passwords. Number of entries: 94
2024-10-31 04:36:24 - customer_utils - INFO - Retrieved 94 passwords
2024-10-31 04:36:24 - customer_utils - INFO - Found 94 customers in database
2024-10-31 04:36:24 - customer_utils - INFO - Consistency check completed
2024-10-31 04:36:24 - customer_utils - INFO - Database connection closed
2024-10-31 04:36:24 - customer_utils - INFO - Validating customers and passwords
2024-10-31 04:36:24 - utils - INFO - Attempting to load passwords from secrets
2024-10-31 04:36:24 - utils - INFO - Successfully loaded passwords. Number of entries: 94
2024-10-31 04:36:24 - customer_utils - INFO - Customer and password validation complete
2024-10-31 04:36:24 - db_utils - INFO - Successfully created indexes for tunbroyting database
2024-10-31 04:36:24 - db_utils - INFO - Successfully created indexes for stroing database
2024-10-31 04:36:24 - db_utils - INFO - Successfully created indexes for feedback database
2024-10-31 04:36:24 - db_utils - INFO - Successfully created indexes for login_history database
2024-10-31 04:36:24 - db_utils - INFO - Successfully created indexes for customer database
2024-10-31 04:36:24 - db_utils - INFO - Database index creation completed
2024-10-31 04:36:24 - __main__ - INFO - Application initialization completed successfully
2024-10-31 04:36:24 - __main__ - INFO - Application initialization completed successfully
2024-10-31 04:36:24 - __main__ - INFO - Application setup complete
2024-10-31 04:36:24 - __main__ - INFO - Application shutting down
2024-10-31 04:36:27 - __main__ - INFO - Added validate_user_input function to app.py
2024-10-31 04:36:27 - __main__ - INFO - Starting application initialization
2024-10-31 04:36:27 - db_utils - INFO - Starting detailed database operations debugging
2024-10-31 04:36:27 - db_utils - INFO - Debugging login_history database:
2024-10-31 04:36:27 - db_utils - INFO -   Database version: 0
2024-10-31 04:36:27 - db_utils - INFO -   Tables in login_history.db: ['login_history']
2024-10-31 04:36:27 - db_utils - INFO -   Structure of login_history table:
2024-10-31 04:36:27 - db_utils - INFO -     Column: id, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:36:27 - db_utils - INFO -     Column: login_time, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:36:27 - db_utils - INFO -     Column: success, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:36:27 - db_utils - INFO -   Indexes in login_history.db: ['idx_login_id', 'idx_login_time']
2024-10-31 04:36:27 - db_utils - INFO -   Row count in login_history: 435
2024-10-31 04:36:27 - db_utils - INFO -   Test query result: (1,)
2024-10-31 04:36:27 - db_utils - INFO - Debugging tunbroyting database:
2024-10-31 04:36:27 - db_utils - INFO -   Database version: 0
2024-10-31 04:36:27 - db_utils - INFO -   Tables in tunbroyting.db: ['tunbroyting_bestillinger']
2024-10-31 04:36:27 - db_utils - INFO -   Structure of tunbroyting_bestillinger table:
2024-10-31 04:36:27 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 04:36:27 - db_utils - INFO -     Column: bruker, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:36:27 - db_utils - INFO -     Column: ankomst_dato, Type: DATE, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:36:27 - db_utils - INFO -     Column: ankomst_tid, Type: TIME, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:36:27 - db_utils - INFO -     Column: avreise_dato, Type: DATE, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:36:27 - db_utils - INFO -     Column: avreise_tid, Type: TIME, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:36:27 - db_utils - INFO -     Column: abonnement_type, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:36:27 - db_utils - INFO -   Indexes in tunbroyting.db: ['idx_tunbroyting_bruker', 'idx_tunbroyting_ankomst_dato', 'idx_tunbroyting_avreise_dato', 'idx_tunbroyting_abonnement']
2024-10-31 04:36:27 - db_utils - INFO -   Row count in tunbroyting_bestillinger: 2
2024-10-31 04:36:27 - db_utils - INFO -   Test query result: (1,)
2024-10-31 04:36:27 - db_utils - INFO - Debugging stroing database:
2024-10-31 04:36:27 - db_utils - INFO -   Database version: 0
2024-10-31 04:36:27 - db_utils - INFO -   Tables in stroing.db: ['sqlite_sequence', 'stroing_bestillinger']
2024-10-31 04:36:27 - db_utils - INFO -   Structure of sqlite_sequence table:
2024-10-31 04:36:27 - db_utils - INFO -     Column: name, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:36:27 - db_utils - INFO -     Column: seq, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:36:27 - db_utils - INFO -   Structure of stroing_bestillinger table:
2024-10-31 04:36:27 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 04:36:27 - db_utils - INFO -     Column: bruker, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:36:27 - db_utils - INFO -     Column: bestillings_dato, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:36:27 - db_utils - INFO -     Column: onske_dato, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:36:27 - db_utils - INFO -   Indexes in stroing.db: ['idx_stroing_bruker', 'idx_stroing_onske_dato', 'idx_stroing_bestillings_dato']
2024-10-31 04:36:27 - db_utils - INFO -   Row count in sqlite_sequence: 1
2024-10-31 04:36:27 - db_utils - INFO -   Row count in stroing_bestillinger: 5
2024-10-31 04:36:27 - db_utils - INFO -   Test query result: (1,)
2024-10-31 04:36:27 - db_utils - INFO - Debugging feedback database:
2024-10-31 04:36:27 - db_utils - INFO -   Database version: 0
2024-10-31 04:36:27 - db_utils - INFO -   Tables in feedback.db: ['sqlite_sequence', 'feedback']
2024-10-31 04:36:27 - db_utils - INFO -   Structure of sqlite_sequence table:
2024-10-31 04:36:27 - db_utils - INFO -     Column: name, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:36:27 - db_utils - INFO -     Column: seq, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:36:27 - db_utils - INFO -   Structure of feedback table:
2024-10-31 04:36:27 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 04:36:27 - db_utils - INFO -     Column: type, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:36:27 - db_utils - INFO -     Column: datetime, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:36:27 - db_utils - INFO -     Column: comment, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:36:27 - db_utils - INFO -     Column: innsender, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:36:27 - db_utils - INFO -     Column: status, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:36:27 - db_utils - INFO -     Column: status_changed_by, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:36:27 - db_utils - INFO -     Column: status_changed_at, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:36:27 - db_utils - INFO -     Column: hidden, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:36:27 - db_utils - INFO -     Column: is_alert, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:36:27 - db_utils - INFO -     Column: display_on_weather, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:36:27 - db_utils - INFO -     Column: expiry_date, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:36:27 - db_utils - INFO -     Column: target_group, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:36:27 - db_utils - INFO -   Indexes in feedback.db: ['idx_feedback_datetime', 'idx_feedback_innsender', 'idx_feedback_status', 'idx_feedback_type']
2024-10-31 04:36:27 - db_utils - INFO -   Row count in sqlite_sequence: 1
2024-10-31 04:36:27 - db_utils - INFO -   Row count in feedback: 11
2024-10-31 04:36:27 - db_utils - INFO -   Test query result: (1,)
2024-10-31 04:36:27 - db_utils - INFO - Detailed database operations debugging completed
2024-10-31 04:36:27 - db_utils - INFO - Oppdatert skjema for customer
2024-10-31 04:36:27 - db_utils - INFO - Oppdatert skjema for feedback
2024-10-31 04:36:27 - db_utils - INFO - Oppdatert skjema for login_history
2024-10-31 04:36:27 - db_utils - INFO - Oppdatert skjema for stroing
2024-10-31 04:36:27 - db_utils - INFO - Oppdatert skjema for tunbroyting
2024-10-31 04:36:27 - db_utils - INFO - All database schemas verified and updated
2024-10-31 04:36:27 - db_utils - INFO - Oppdatert skjema for customer
2024-10-31 04:36:27 - db_utils - INFO - Oppdatert skjema for feedback
2024-10-31 04:36:27 - db_utils - INFO - Oppdatert skjema for login_history
2024-10-31 04:36:27 - db_utils - INFO - Oppdatert skjema for stroing
2024-10-31 04:36:27 - db_utils - INFO - Oppdatert skjema for tunbroyting
2024-10-31 04:36:27 - db_utils - INFO - All database schemas verified and updated
2024-10-31 04:36:27 - db_utils - INFO - Database already initialized. Skipping.
2024-10-31 04:36:27 - db_utils - INFO - Query executed successfully on login_history.db. Rows affected: -1
2024-10-31 04:36:27 - db_utils - INFO - login_history table structure is correct
2024-10-31 04:36:27 - customer_utils - INFO - Starting cabin user consistency check
2024-10-31 04:36:27 - utils - INFO - Attempting to load passwords from secrets
2024-10-31 04:36:27 - utils - INFO - Successfully loaded passwords. Number of entries: 94
2024-10-31 04:36:27 - customer_utils - INFO - Retrieved 94 passwords
2024-10-31 04:36:27 - customer_utils - INFO - Found 94 customers in database
2024-10-31 04:36:27 - customer_utils - INFO - Consistency check completed
2024-10-31 04:36:27 - customer_utils - INFO - Database connection closed
2024-10-31 04:36:27 - customer_utils - INFO - Validating customers and passwords
2024-10-31 04:36:27 - utils - INFO - Attempting to load passwords from secrets
2024-10-31 04:36:27 - utils - INFO - Successfully loaded passwords. Number of entries: 94
2024-10-31 04:36:27 - customer_utils - INFO - Customer and password validation complete
2024-10-31 04:36:27 - db_utils - INFO - Successfully created indexes for tunbroyting database
2024-10-31 04:36:27 - db_utils - INFO - Successfully created indexes for stroing database
2024-10-31 04:36:27 - db_utils - INFO - Successfully created indexes for feedback database
2024-10-31 04:36:27 - db_utils - INFO - Successfully created indexes for login_history database
2024-10-31 04:36:27 - db_utils - INFO - Successfully created indexes for customer database
2024-10-31 04:36:27 - db_utils - INFO - Database index creation completed
2024-10-31 04:36:27 - __main__ - INFO - Application initialization completed successfully
2024-10-31 04:36:27 - __main__ - INFO - Application initialization completed successfully
2024-10-31 04:36:27 - __main__ - INFO - Application setup complete
2024-10-31 04:36:27 - auth_utils - INFO - Login attempt for ID: 999
2024-10-31 04:36:27 - db_utils - INFO - DATABASE_PATH: /Users/tor.inge.jossang@aftenbladet.no/dev/gullingen
2024-10-31 04:36:27 - db_utils - INFO - Full database path: /Users/tor.inge.jossang@aftenbladet.no/dev/gullingen/login_history.db
2024-10-31 04:36:27 - db_utils - INFO - Attempting to create database engine...
2024-10-31 04:36:27 - db_utils - INFO - Database engine created successfully for login_history.db
2024-10-31 04:36:27 - auth_utils - INFO - Rate limit check passed for user 999
2024-10-31 04:36:27 - auth_utils - INFO - User 999 authenticated successfully
2024-10-31 04:36:27 - customer_utils - INFO - Successfully retrieved customer with ID: 999
2024-10-31 04:36:27 - db_utils - INFO - Database file /Users/tor.inge.jossang@aftenbladet.no/dev/gullingen/login_history.db exists.
2024-10-31 04:36:27 - db_utils - INFO - Query executed successfully on login_history.db. Rows affected: 1
2024-10-31 04:36:27 - auth_utils - INFO - Successful login for ID: 999
2024-10-31 04:36:27 - auth_utils - INFO - Successful login and logging for ID: 999
2024-10-31 04:36:27 - db_utils - INFO - DATABASE_PATH: /Users/tor.inge.jossang@aftenbladet.no/dev/gullingen
2024-10-31 04:36:27 - db_utils - INFO - Full database path: /Users/tor.inge.jossang@aftenbladet.no/dev/gullingen/login_history.db
2024-10-31 04:36:27 - db_utils - INFO - Attempting to create database engine...
2024-10-31 04:36:27 - db_utils - INFO - Database engine created successfully for login_history.db
2024-10-31 04:36:27 - auth_utils - INFO - Rate limit reset for user 999
2024-10-31 04:36:27 - __main__ - INFO - Application shutting down
2024-10-31 04:36:27 - __main__ - INFO - Added validate_user_input function to app.py
2024-10-31 04:36:27 - __main__ - INFO - Starting application initialization
2024-10-31 04:36:27 - db_utils - INFO - Starting detailed database operations debugging
2024-10-31 04:36:27 - db_utils - INFO - Debugging login_history database:
2024-10-31 04:36:27 - db_utils - INFO -   Database version: 0
2024-10-31 04:36:27 - db_utils - INFO -   Tables in login_history.db: ['login_history']
2024-10-31 04:36:27 - db_utils - INFO -   Structure of login_history table:
2024-10-31 04:36:27 - db_utils - INFO -     Column: id, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:36:27 - db_utils - INFO -     Column: login_time, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:36:27 - db_utils - INFO -     Column: success, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:36:27 - db_utils - INFO -   Indexes in login_history.db: ['idx_login_id', 'idx_login_time']
2024-10-31 04:36:27 - db_utils - INFO -   Row count in login_history: 436
2024-10-31 04:36:27 - db_utils - INFO -   Test query result: (1,)
2024-10-31 04:36:27 - db_utils - INFO - Debugging tunbroyting database:
2024-10-31 04:36:27 - db_utils - INFO -   Database version: 0
2024-10-31 04:36:27 - db_utils - INFO -   Tables in tunbroyting.db: ['tunbroyting_bestillinger']
2024-10-31 04:36:27 - db_utils - INFO -   Structure of tunbroyting_bestillinger table:
2024-10-31 04:36:27 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 04:36:27 - db_utils - INFO -     Column: bruker, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:36:27 - db_utils - INFO -     Column: ankomst_dato, Type: DATE, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:36:27 - db_utils - INFO -     Column: ankomst_tid, Type: TIME, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:36:27 - db_utils - INFO -     Column: avreise_dato, Type: DATE, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:36:27 - db_utils - INFO -     Column: avreise_tid, Type: TIME, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:36:27 - db_utils - INFO -     Column: abonnement_type, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:36:27 - db_utils - INFO -   Indexes in tunbroyting.db: ['idx_tunbroyting_bruker', 'idx_tunbroyting_ankomst_dato', 'idx_tunbroyting_avreise_dato', 'idx_tunbroyting_abonnement']
2024-10-31 04:36:27 - db_utils - INFO -   Row count in tunbroyting_bestillinger: 2
2024-10-31 04:36:27 - db_utils - INFO -   Test query result: (1,)
2024-10-31 04:36:27 - db_utils - INFO - Debugging stroing database:
2024-10-31 04:36:27 - db_utils - INFO -   Database version: 0
2024-10-31 04:36:27 - db_utils - INFO -   Tables in stroing.db: ['sqlite_sequence', 'stroing_bestillinger']
2024-10-31 04:36:27 - db_utils - INFO -   Structure of sqlite_sequence table:
2024-10-31 04:36:27 - db_utils - INFO -     Column: name, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:36:27 - db_utils - INFO -     Column: seq, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:36:27 - db_utils - INFO -   Structure of stroing_bestillinger table:
2024-10-31 04:36:27 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 04:36:27 - db_utils - INFO -     Column: bruker, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:36:27 - db_utils - INFO -     Column: bestillings_dato, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:36:27 - db_utils - INFO -     Column: onske_dato, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:36:27 - db_utils - INFO -   Indexes in stroing.db: ['idx_stroing_bruker', 'idx_stroing_onske_dato', 'idx_stroing_bestillings_dato']
2024-10-31 04:36:27 - db_utils - INFO -   Row count in sqlite_sequence: 1
2024-10-31 04:36:27 - db_utils - INFO -   Row count in stroing_bestillinger: 5
2024-10-31 04:36:27 - db_utils - INFO -   Test query result: (1,)
2024-10-31 04:36:27 - db_utils - INFO - Debugging feedback database:
2024-10-31 04:36:27 - db_utils - INFO -   Database version: 0
2024-10-31 04:36:27 - db_utils - INFO -   Tables in feedback.db: ['sqlite_sequence', 'feedback']
2024-10-31 04:36:27 - db_utils - INFO -   Structure of sqlite_sequence table:
2024-10-31 04:36:27 - db_utils - INFO -     Column: name, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:36:27 - db_utils - INFO -     Column: seq, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:36:27 - db_utils - INFO -   Structure of feedback table:
2024-10-31 04:36:27 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 04:36:27 - db_utils - INFO -     Column: type, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:36:27 - db_utils - INFO -     Column: datetime, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:36:27 - db_utils - INFO -     Column: comment, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:36:27 - db_utils - INFO -     Column: innsender, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:36:27 - db_utils - INFO -     Column: status, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:36:27 - db_utils - INFO -     Column: status_changed_by, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:36:27 - db_utils - INFO -     Column: status_changed_at, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:36:27 - db_utils - INFO -     Column: hidden, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:36:27 - db_utils - INFO -     Column: is_alert, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:36:27 - db_utils - INFO -     Column: display_on_weather, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:36:27 - db_utils - INFO -     Column: expiry_date, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:36:27 - db_utils - INFO -     Column: target_group, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:36:27 - db_utils - INFO -   Indexes in feedback.db: ['idx_feedback_datetime', 'idx_feedback_innsender', 'idx_feedback_status', 'idx_feedback_type']
2024-10-31 04:36:27 - db_utils - INFO -   Row count in sqlite_sequence: 1
2024-10-31 04:36:27 - db_utils - INFO -   Row count in feedback: 11
2024-10-31 04:36:27 - db_utils - INFO -   Test query result: (1,)
2024-10-31 04:36:27 - db_utils - INFO - Detailed database operations debugging completed
2024-10-31 04:36:27 - db_utils - INFO - Oppdatert skjema for customer
2024-10-31 04:36:27 - db_utils - INFO - Oppdatert skjema for feedback
2024-10-31 04:36:27 - db_utils - INFO - Oppdatert skjema for login_history
2024-10-31 04:36:27 - db_utils - INFO - Oppdatert skjema for stroing
2024-10-31 04:36:27 - db_utils - INFO - Oppdatert skjema for tunbroyting
2024-10-31 04:36:27 - db_utils - INFO - All database schemas verified and updated
2024-10-31 04:36:27 - db_utils - INFO - Oppdatert skjema for customer
2024-10-31 04:36:27 - db_utils - INFO - Oppdatert skjema for feedback
2024-10-31 04:36:27 - db_utils - INFO - Oppdatert skjema for login_history
2024-10-31 04:36:27 - db_utils - INFO - Oppdatert skjema for stroing
2024-10-31 04:36:27 - db_utils - INFO - Oppdatert skjema for tunbroyting
2024-10-31 04:36:27 - db_utils - INFO - All database schemas verified and updated
2024-10-31 04:36:27 - db_utils - INFO - Database already initialized. Skipping.
2024-10-31 04:36:27 - db_utils - INFO - Query executed successfully on login_history.db. Rows affected: -1
2024-10-31 04:36:27 - db_utils - INFO - login_history table structure is correct
2024-10-31 04:36:27 - customer_utils - INFO - Starting cabin user consistency check
2024-10-31 04:36:27 - utils - INFO - Attempting to load passwords from secrets
2024-10-31 04:36:27 - utils - INFO - Successfully loaded passwords. Number of entries: 94
2024-10-31 04:36:27 - customer_utils - INFO - Retrieved 94 passwords
2024-10-31 04:36:27 - customer_utils - INFO - Found 94 customers in database
2024-10-31 04:36:27 - customer_utils - INFO - Consistency check completed
2024-10-31 04:36:27 - customer_utils - INFO - Database connection closed
2024-10-31 04:36:27 - customer_utils - INFO - Validating customers and passwords
2024-10-31 04:36:27 - utils - INFO - Attempting to load passwords from secrets
2024-10-31 04:36:27 - utils - INFO - Successfully loaded passwords. Number of entries: 94
2024-10-31 04:36:27 - customer_utils - INFO - Customer and password validation complete
2024-10-31 04:36:27 - db_utils - INFO - Successfully created indexes for tunbroyting database
2024-10-31 04:36:27 - db_utils - INFO - Successfully created indexes for stroing database
2024-10-31 04:36:27 - db_utils - INFO - Successfully created indexes for feedback database
2024-10-31 04:36:27 - db_utils - INFO - Successfully created indexes for login_history database
2024-10-31 04:36:27 - db_utils - INFO - Successfully created indexes for customer database
2024-10-31 04:36:27 - db_utils - INFO - Database index creation completed
2024-10-31 04:36:27 - __main__ - INFO - Application initialization completed successfully
2024-10-31 04:36:27 - __main__ - INFO - Application initialization completed successfully
2024-10-31 04:36:27 - __main__ - INFO - Application setup complete
2024-10-31 04:36:27 - customer_utils - INFO - Successfully retrieved customer with ID: 999
2024-10-31 04:36:27 - alert_utils - INFO - Fetched 1 alerts. only_today=False, include_expired=False
2024-10-31 04:36:27 - tun_utils - WARNING - hent_bestillinger() is deprecated, use get_bookings() instead
2024-10-31 04:36:27 - tun_utils - INFO - Starting get_bookings with start_date=None, end_date=None
2024-10-31 04:36:27 - tun_utils - INFO - Successfully retrieved 2 bookings
2024-10-31 04:36:27 - __main__ - INFO - Application shutting down
2024-10-31 04:36:28 - __main__ - INFO - Added validate_user_input function to app.py
2024-10-31 04:36:28 - __main__ - INFO - Starting application initialization
2024-10-31 04:36:28 - db_utils - INFO - Starting detailed database operations debugging
2024-10-31 04:36:28 - db_utils - INFO - Debugging login_history database:
2024-10-31 04:36:28 - db_utils - INFO -   Database version: 0
2024-10-31 04:36:28 - db_utils - INFO -   Tables in login_history.db: ['login_history']
2024-10-31 04:36:28 - db_utils - INFO -   Structure of login_history table:
2024-10-31 04:36:28 - db_utils - INFO -     Column: id, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:36:28 - db_utils - INFO -     Column: login_time, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:36:28 - db_utils - INFO -     Column: success, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:36:28 - db_utils - INFO -   Indexes in login_history.db: ['idx_login_id', 'idx_login_time']
2024-10-31 04:36:28 - db_utils - INFO -   Row count in login_history: 436
2024-10-31 04:36:28 - db_utils - INFO -   Test query result: (1,)
2024-10-31 04:36:28 - db_utils - INFO - Debugging tunbroyting database:
2024-10-31 04:36:28 - db_utils - INFO -   Database version: 0
2024-10-31 04:36:28 - db_utils - INFO -   Tables in tunbroyting.db: ['tunbroyting_bestillinger']
2024-10-31 04:36:28 - db_utils - INFO -   Structure of tunbroyting_bestillinger table:
2024-10-31 04:36:28 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 04:36:28 - db_utils - INFO -     Column: bruker, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:36:28 - db_utils - INFO -     Column: ankomst_dato, Type: DATE, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:36:28 - db_utils - INFO -     Column: ankomst_tid, Type: TIME, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:36:28 - db_utils - INFO -     Column: avreise_dato, Type: DATE, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:36:28 - db_utils - INFO -     Column: avreise_tid, Type: TIME, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:36:28 - db_utils - INFO -     Column: abonnement_type, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:36:28 - db_utils - INFO -   Indexes in tunbroyting.db: ['idx_tunbroyting_bruker', 'idx_tunbroyting_ankomst_dato', 'idx_tunbroyting_avreise_dato', 'idx_tunbroyting_abonnement']
2024-10-31 04:36:28 - db_utils - INFO -   Row count in tunbroyting_bestillinger: 2
2024-10-31 04:36:28 - db_utils - INFO -   Test query result: (1,)
2024-10-31 04:36:28 - db_utils - INFO - Debugging stroing database:
2024-10-31 04:36:28 - db_utils - INFO -   Database version: 0
2024-10-31 04:36:28 - db_utils - INFO -   Tables in stroing.db: ['sqlite_sequence', 'stroing_bestillinger']
2024-10-31 04:36:28 - db_utils - INFO -   Structure of sqlite_sequence table:
2024-10-31 04:36:28 - db_utils - INFO -     Column: name, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:36:28 - db_utils - INFO -     Column: seq, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:36:28 - db_utils - INFO -   Structure of stroing_bestillinger table:
2024-10-31 04:36:28 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 04:36:28 - db_utils - INFO -     Column: bruker, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:36:28 - db_utils - INFO -     Column: bestillings_dato, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:36:28 - db_utils - INFO -     Column: onske_dato, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:36:28 - db_utils - INFO -   Indexes in stroing.db: ['idx_stroing_bruker', 'idx_stroing_onske_dato', 'idx_stroing_bestillings_dato']
2024-10-31 04:36:28 - db_utils - INFO -   Row count in sqlite_sequence: 1
2024-10-31 04:36:28 - db_utils - INFO -   Row count in stroing_bestillinger: 5
2024-10-31 04:36:28 - db_utils - INFO -   Test query result: (1,)
2024-10-31 04:36:28 - db_utils - INFO - Debugging feedback database:
2024-10-31 04:36:28 - db_utils - INFO -   Database version: 0
2024-10-31 04:36:28 - db_utils - INFO -   Tables in feedback.db: ['sqlite_sequence', 'feedback']
2024-10-31 04:36:28 - db_utils - INFO -   Structure of sqlite_sequence table:
2024-10-31 04:36:28 - db_utils - INFO -     Column: name, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:36:28 - db_utils - INFO -     Column: seq, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:36:28 - db_utils - INFO -   Structure of feedback table:
2024-10-31 04:36:28 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 04:36:28 - db_utils - INFO -     Column: type, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:36:28 - db_utils - INFO -     Column: datetime, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:36:28 - db_utils - INFO -     Column: comment, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:36:28 - db_utils - INFO -     Column: innsender, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:36:28 - db_utils - INFO -     Column: status, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:36:28 - db_utils - INFO -     Column: status_changed_by, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:36:28 - db_utils - INFO -     Column: status_changed_at, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:36:28 - db_utils - INFO -     Column: hidden, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:36:28 - db_utils - INFO -     Column: is_alert, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:36:28 - db_utils - INFO -     Column: display_on_weather, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:36:28 - db_utils - INFO -     Column: expiry_date, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:36:28 - db_utils - INFO -     Column: target_group, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:36:28 - db_utils - INFO -   Indexes in feedback.db: ['idx_feedback_datetime', 'idx_feedback_innsender', 'idx_feedback_status', 'idx_feedback_type']
2024-10-31 04:36:28 - db_utils - INFO -   Row count in sqlite_sequence: 1
2024-10-31 04:36:28 - db_utils - INFO -   Row count in feedback: 11
2024-10-31 04:36:28 - db_utils - INFO -   Test query result: (1,)
2024-10-31 04:36:28 - db_utils - INFO - Detailed database operations debugging completed
2024-10-31 04:36:28 - db_utils - INFO - Oppdatert skjema for customer
2024-10-31 04:36:28 - db_utils - INFO - Oppdatert skjema for feedback
2024-10-31 04:36:28 - db_utils - INFO - Oppdatert skjema for login_history
2024-10-31 04:36:28 - db_utils - INFO - Oppdatert skjema for stroing
2024-10-31 04:36:28 - db_utils - INFO - Oppdatert skjema for tunbroyting
2024-10-31 04:36:28 - db_utils - INFO - All database schemas verified and updated
2024-10-31 04:36:28 - db_utils - INFO - Oppdatert skjema for customer
2024-10-31 04:36:28 - db_utils - INFO - Oppdatert skjema for feedback
2024-10-31 04:36:28 - db_utils - INFO - Oppdatert skjema for login_history
2024-10-31 04:36:28 - db_utils - INFO - Oppdatert skjema for stroing
2024-10-31 04:36:28 - db_utils - INFO - Oppdatert skjema for tunbroyting
2024-10-31 04:36:28 - db_utils - INFO - All database schemas verified and updated
2024-10-31 04:36:28 - db_utils - INFO - Database already initialized. Skipping.
2024-10-31 04:36:28 - db_utils - INFO - Query executed successfully on login_history.db. Rows affected: -1
2024-10-31 04:36:28 - db_utils - INFO - login_history table structure is correct
2024-10-31 04:36:28 - customer_utils - INFO - Starting cabin user consistency check
2024-10-31 04:36:28 - utils - INFO - Attempting to load passwords from secrets
2024-10-31 04:36:28 - utils - INFO - Successfully loaded passwords. Number of entries: 94
2024-10-31 04:36:28 - customer_utils - INFO - Retrieved 94 passwords
2024-10-31 04:36:28 - customer_utils - INFO - Found 94 customers in database
2024-10-31 04:36:28 - customer_utils - INFO - Consistency check completed
2024-10-31 04:36:28 - customer_utils - INFO - Database connection closed
2024-10-31 04:36:28 - customer_utils - INFO - Validating customers and passwords
2024-10-31 04:36:28 - utils - INFO - Attempting to load passwords from secrets
2024-10-31 04:36:28 - utils - INFO - Successfully loaded passwords. Number of entries: 94
2024-10-31 04:36:28 - customer_utils - INFO - Customer and password validation complete
2024-10-31 04:36:28 - db_utils - INFO - Successfully created indexes for tunbroyting database
2024-10-31 04:36:28 - db_utils - INFO - Successfully created indexes for stroing database
2024-10-31 04:36:28 - db_utils - INFO - Successfully created indexes for feedback database
2024-10-31 04:36:28 - db_utils - INFO - Successfully created indexes for login_history database
2024-10-31 04:36:28 - db_utils - INFO - Successfully created indexes for customer database
2024-10-31 04:36:28 - db_utils - INFO - Database index creation completed
2024-10-31 04:36:28 - __main__ - INFO - Application initialization completed successfully
2024-10-31 04:36:28 - __main__ - INFO - Application initialization completed successfully
2024-10-31 04:36:28 - __main__ - INFO - Application setup complete
2024-10-31 04:36:28 - customer_utils - INFO - Successfully retrieved customer with ID: 999
2024-10-31 04:36:29 - weather_utils - ERROR - Feil ved datahenting eller -behandling: name 'st' is not defined
Traceback (most recent call last):
  File "/Users/tor.inge.jossang@aftenbladet.no/dev/gullingen/weather_utils.py", line 34, in create_dataframe_from_raw_data
    st.write("Debug: Starter create_dataframe_from_raw_data")
    ^^
NameError: name 'st' is not defined

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/tor.inge.jossang@aftenbladet.no/dev/gullingen/weather_utils.py", line 153, in fetch_and_process_data
    df = create_dataframe_from_raw_data(raw_data)
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/tor.inge.jossang@aftenbladet.no/dev/gullingen/weather_utils.py", line 58, in create_dataframe_from_raw_data
    st.error(f"Feil i create_dataframe_from_raw_data: {str(e)}")
    ^^
NameError: name 'st' is not defined
2024-10-31 04:36:29 - __main__ - INFO - Application shutting down
2024-10-31 04:37:19 - __main__ - INFO - Added validate_user_input function to app.py
2024-10-31 04:37:19 - __main__ - INFO - Starting application initialization
2024-10-31 04:37:19 - db_utils - INFO - Starting detailed database operations debugging
2024-10-31 04:37:19 - db_utils - INFO - Debugging login_history database:
2024-10-31 04:37:19 - db_utils - INFO -   Database version: 0
2024-10-31 04:37:19 - db_utils - INFO -   Tables in login_history.db: ['login_history']
2024-10-31 04:37:19 - db_utils - INFO -   Structure of login_history table:
2024-10-31 04:37:19 - db_utils - INFO -     Column: id, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:37:19 - db_utils - INFO -     Column: login_time, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:37:19 - db_utils - INFO -     Column: success, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:37:19 - db_utils - INFO -   Indexes in login_history.db: ['idx_login_id', 'idx_login_time']
2024-10-31 04:37:19 - db_utils - INFO -   Row count in login_history: 436
2024-10-31 04:37:19 - db_utils - INFO -   Test query result: (1,)
2024-10-31 04:37:19 - db_utils - INFO - Debugging tunbroyting database:
2024-10-31 04:37:19 - db_utils - INFO -   Database version: 0
2024-10-31 04:37:19 - db_utils - INFO -   Tables in tunbroyting.db: ['tunbroyting_bestillinger']
2024-10-31 04:37:19 - db_utils - INFO -   Structure of tunbroyting_bestillinger table:
2024-10-31 04:37:19 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 04:37:19 - db_utils - INFO -     Column: bruker, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:37:19 - db_utils - INFO -     Column: ankomst_dato, Type: DATE, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:37:19 - db_utils - INFO -     Column: ankomst_tid, Type: TIME, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:37:19 - db_utils - INFO -     Column: avreise_dato, Type: DATE, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:37:19 - db_utils - INFO -     Column: avreise_tid, Type: TIME, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:37:19 - db_utils - INFO -     Column: abonnement_type, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:37:19 - db_utils - INFO -   Indexes in tunbroyting.db: ['idx_tunbroyting_bruker', 'idx_tunbroyting_ankomst_dato', 'idx_tunbroyting_avreise_dato', 'idx_tunbroyting_abonnement']
2024-10-31 04:37:19 - db_utils - INFO -   Row count in tunbroyting_bestillinger: 2
2024-10-31 04:37:19 - db_utils - INFO -   Test query result: (1,)
2024-10-31 04:37:19 - db_utils - INFO - Debugging stroing database:
2024-10-31 04:37:19 - db_utils - INFO -   Database version: 0
2024-10-31 04:37:19 - db_utils - INFO -   Tables in stroing.db: ['sqlite_sequence', 'stroing_bestillinger']
2024-10-31 04:37:19 - db_utils - INFO -   Structure of sqlite_sequence table:
2024-10-31 04:37:19 - db_utils - INFO -     Column: name, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:37:19 - db_utils - INFO -     Column: seq, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:37:19 - db_utils - INFO -   Structure of stroing_bestillinger table:
2024-10-31 04:37:19 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 04:37:19 - db_utils - INFO -     Column: bruker, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:37:19 - db_utils - INFO -     Column: bestillings_dato, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:37:19 - db_utils - INFO -     Column: onske_dato, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:37:19 - db_utils - INFO -   Indexes in stroing.db: ['idx_stroing_bruker', 'idx_stroing_onske_dato', 'idx_stroing_bestillings_dato']
2024-10-31 04:37:19 - db_utils - INFO -   Row count in sqlite_sequence: 1
2024-10-31 04:37:19 - db_utils - INFO -   Row count in stroing_bestillinger: 5
2024-10-31 04:37:19 - db_utils - INFO -   Test query result: (1,)
2024-10-31 04:37:19 - db_utils - INFO - Debugging feedback database:
2024-10-31 04:37:19 - db_utils - INFO -   Database version: 0
2024-10-31 04:37:19 - db_utils - INFO -   Tables in feedback.db: ['sqlite_sequence', 'feedback']
2024-10-31 04:37:19 - db_utils - INFO -   Structure of sqlite_sequence table:
2024-10-31 04:37:19 - db_utils - INFO -     Column: name, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:37:19 - db_utils - INFO -     Column: seq, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:37:19 - db_utils - INFO -   Structure of feedback table:
2024-10-31 04:37:19 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 04:37:19 - db_utils - INFO -     Column: type, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:37:19 - db_utils - INFO -     Column: datetime, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:37:19 - db_utils - INFO -     Column: comment, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:37:19 - db_utils - INFO -     Column: innsender, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:37:19 - db_utils - INFO -     Column: status, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:37:19 - db_utils - INFO -     Column: status_changed_by, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:37:19 - db_utils - INFO -     Column: status_changed_at, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:37:19 - db_utils - INFO -     Column: hidden, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:37:19 - db_utils - INFO -     Column: is_alert, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:37:19 - db_utils - INFO -     Column: display_on_weather, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:37:19 - db_utils - INFO -     Column: expiry_date, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:37:19 - db_utils - INFO -     Column: target_group, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:37:19 - db_utils - INFO -   Indexes in feedback.db: ['idx_feedback_datetime', 'idx_feedback_innsender', 'idx_feedback_status', 'idx_feedback_type']
2024-10-31 04:37:19 - db_utils - INFO -   Row count in sqlite_sequence: 1
2024-10-31 04:37:19 - db_utils - INFO -   Row count in feedback: 11
2024-10-31 04:37:19 - db_utils - INFO -   Test query result: (1,)
2024-10-31 04:37:19 - db_utils - INFO - Detailed database operations debugging completed
2024-10-31 04:37:19 - db_utils - INFO - Oppdatert skjema for customer
2024-10-31 04:37:19 - db_utils - INFO - Oppdatert skjema for feedback
2024-10-31 04:37:19 - db_utils - INFO - Oppdatert skjema for login_history
2024-10-31 04:37:19 - db_utils - INFO - Oppdatert skjema for stroing
2024-10-31 04:37:19 - db_utils - INFO - Oppdatert skjema for tunbroyting
2024-10-31 04:37:19 - db_utils - INFO - All database schemas verified and updated
2024-10-31 04:37:19 - db_utils - INFO - Oppdatert skjema for customer
2024-10-31 04:37:19 - db_utils - INFO - Oppdatert skjema for feedback
2024-10-31 04:37:19 - db_utils - INFO - Oppdatert skjema for login_history
2024-10-31 04:37:19 - db_utils - INFO - Oppdatert skjema for stroing
2024-10-31 04:37:19 - db_utils - INFO - Oppdatert skjema for tunbroyting
2024-10-31 04:37:19 - db_utils - INFO - All database schemas verified and updated
2024-10-31 04:37:19 - db_utils - INFO - Database already initialized. Skipping.
2024-10-31 04:37:19 - db_utils - INFO - Query executed successfully on login_history.db. Rows affected: -1
2024-10-31 04:37:19 - db_utils - INFO - login_history table structure is correct
2024-10-31 04:37:19 - customer_utils - INFO - Starting cabin user consistency check
2024-10-31 04:37:19 - utils - INFO - Attempting to load passwords from secrets
2024-10-31 04:37:19 - utils - INFO - Successfully loaded passwords. Number of entries: 94
2024-10-31 04:37:19 - customer_utils - INFO - Retrieved 94 passwords
2024-10-31 04:37:19 - customer_utils - INFO - Found 94 customers in database
2024-10-31 04:37:19 - customer_utils - INFO - Consistency check completed
2024-10-31 04:37:19 - customer_utils - INFO - Database connection closed
2024-10-31 04:37:19 - customer_utils - INFO - Validating customers and passwords
2024-10-31 04:37:19 - utils - INFO - Attempting to load passwords from secrets
2024-10-31 04:37:19 - utils - INFO - Successfully loaded passwords. Number of entries: 94
2024-10-31 04:37:19 - customer_utils - INFO - Customer and password validation complete
2024-10-31 04:37:19 - db_utils - INFO - Successfully created indexes for tunbroyting database
2024-10-31 04:37:19 - db_utils - INFO - Successfully created indexes for stroing database
2024-10-31 04:37:19 - db_utils - INFO - Successfully created indexes for feedback database
2024-10-31 04:37:19 - db_utils - INFO - Successfully created indexes for login_history database
2024-10-31 04:37:19 - db_utils - INFO - Successfully created indexes for customer database
2024-10-31 04:37:19 - db_utils - INFO - Database index creation completed
2024-10-31 04:37:19 - __main__ - INFO - Application initialization completed successfully
2024-10-31 04:37:19 - __main__ - INFO - Application initialization completed successfully
2024-10-31 04:37:19 - __main__ - INFO - Application setup complete
2024-10-31 04:37:19 - __main__ - INFO - Application shutting down
2024-10-31 04:37:21 - __main__ - INFO - Added validate_user_input function to app.py
2024-10-31 04:37:21 - __main__ - INFO - Starting application initialization
2024-10-31 04:37:21 - db_utils - INFO - Starting detailed database operations debugging
2024-10-31 04:37:21 - db_utils - INFO - Debugging login_history database:
2024-10-31 04:37:21 - db_utils - INFO -   Database version: 0
2024-10-31 04:37:21 - db_utils - INFO -   Tables in login_history.db: ['login_history']
2024-10-31 04:37:21 - db_utils - INFO -   Structure of login_history table:
2024-10-31 04:37:21 - db_utils - INFO -     Column: id, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:37:21 - db_utils - INFO -     Column: login_time, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:37:21 - db_utils - INFO -     Column: success, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:37:21 - db_utils - INFO -   Indexes in login_history.db: ['idx_login_id', 'idx_login_time']
2024-10-31 04:37:21 - db_utils - INFO -   Row count in login_history: 436
2024-10-31 04:37:21 - db_utils - INFO -   Test query result: (1,)
2024-10-31 04:37:21 - db_utils - INFO - Debugging tunbroyting database:
2024-10-31 04:37:21 - db_utils - INFO -   Database version: 0
2024-10-31 04:37:21 - db_utils - INFO -   Tables in tunbroyting.db: ['tunbroyting_bestillinger']
2024-10-31 04:37:21 - db_utils - INFO -   Structure of tunbroyting_bestillinger table:
2024-10-31 04:37:21 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 04:37:21 - db_utils - INFO -     Column: bruker, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:37:21 - db_utils - INFO -     Column: ankomst_dato, Type: DATE, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:37:21 - db_utils - INFO -     Column: ankomst_tid, Type: TIME, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:37:21 - db_utils - INFO -     Column: avreise_dato, Type: DATE, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:37:21 - db_utils - INFO -     Column: avreise_tid, Type: TIME, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:37:21 - db_utils - INFO -     Column: abonnement_type, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:37:21 - db_utils - INFO -   Indexes in tunbroyting.db: ['idx_tunbroyting_bruker', 'idx_tunbroyting_ankomst_dato', 'idx_tunbroyting_avreise_dato', 'idx_tunbroyting_abonnement']
2024-10-31 04:37:21 - db_utils - INFO -   Row count in tunbroyting_bestillinger: 2
2024-10-31 04:37:21 - db_utils - INFO -   Test query result: (1,)
2024-10-31 04:37:21 - db_utils - INFO - Debugging stroing database:
2024-10-31 04:37:21 - db_utils - INFO -   Database version: 0
2024-10-31 04:37:21 - db_utils - INFO -   Tables in stroing.db: ['sqlite_sequence', 'stroing_bestillinger']
2024-10-31 04:37:21 - db_utils - INFO -   Structure of sqlite_sequence table:
2024-10-31 04:37:21 - db_utils - INFO -     Column: name, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:37:21 - db_utils - INFO -     Column: seq, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:37:21 - db_utils - INFO -   Structure of stroing_bestillinger table:
2024-10-31 04:37:21 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 04:37:21 - db_utils - INFO -     Column: bruker, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:37:21 - db_utils - INFO -     Column: bestillings_dato, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:37:21 - db_utils - INFO -     Column: onske_dato, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:37:21 - db_utils - INFO -   Indexes in stroing.db: ['idx_stroing_bruker', 'idx_stroing_onske_dato', 'idx_stroing_bestillings_dato']
2024-10-31 04:37:21 - db_utils - INFO -   Row count in sqlite_sequence: 1
2024-10-31 04:37:21 - db_utils - INFO -   Row count in stroing_bestillinger: 5
2024-10-31 04:37:21 - db_utils - INFO -   Test query result: (1,)
2024-10-31 04:37:21 - db_utils - INFO - Debugging feedback database:
2024-10-31 04:37:21 - db_utils - INFO -   Database version: 0
2024-10-31 04:37:21 - db_utils - INFO -   Tables in feedback.db: ['sqlite_sequence', 'feedback']
2024-10-31 04:37:21 - db_utils - INFO -   Structure of sqlite_sequence table:
2024-10-31 04:37:21 - db_utils - INFO -     Column: name, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:37:21 - db_utils - INFO -     Column: seq, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:37:21 - db_utils - INFO -   Structure of feedback table:
2024-10-31 04:37:21 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 04:37:21 - db_utils - INFO -     Column: type, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:37:21 - db_utils - INFO -     Column: datetime, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:37:21 - db_utils - INFO -     Column: comment, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:37:21 - db_utils - INFO -     Column: innsender, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:37:21 - db_utils - INFO -     Column: status, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:37:21 - db_utils - INFO -     Column: status_changed_by, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:37:21 - db_utils - INFO -     Column: status_changed_at, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:37:21 - db_utils - INFO -     Column: hidden, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:37:21 - db_utils - INFO -     Column: is_alert, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:37:21 - db_utils - INFO -     Column: display_on_weather, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:37:21 - db_utils - INFO -     Column: expiry_date, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:37:21 - db_utils - INFO -     Column: target_group, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:37:21 - db_utils - INFO -   Indexes in feedback.db: ['idx_feedback_datetime', 'idx_feedback_innsender', 'idx_feedback_status', 'idx_feedback_type']
2024-10-31 04:37:21 - db_utils - INFO -   Row count in sqlite_sequence: 1
2024-10-31 04:37:21 - db_utils - INFO -   Row count in feedback: 11
2024-10-31 04:37:21 - db_utils - INFO -   Test query result: (1,)
2024-10-31 04:37:21 - db_utils - INFO - Detailed database operations debugging completed
2024-10-31 04:37:21 - db_utils - INFO - Oppdatert skjema for customer
2024-10-31 04:37:21 - db_utils - INFO - Oppdatert skjema for feedback
2024-10-31 04:37:21 - db_utils - INFO - Oppdatert skjema for login_history
2024-10-31 04:37:21 - db_utils - INFO - Oppdatert skjema for stroing
2024-10-31 04:37:21 - db_utils - INFO - Oppdatert skjema for tunbroyting
2024-10-31 04:37:21 - db_utils - INFO - All database schemas verified and updated
2024-10-31 04:37:21 - db_utils - INFO - Oppdatert skjema for customer
2024-10-31 04:37:21 - db_utils - INFO - Oppdatert skjema for feedback
2024-10-31 04:37:21 - db_utils - INFO - Oppdatert skjema for login_history
2024-10-31 04:37:21 - db_utils - INFO - Oppdatert skjema for stroing
2024-10-31 04:37:21 - db_utils - INFO - Oppdatert skjema for tunbroyting
2024-10-31 04:37:21 - db_utils - INFO - All database schemas verified and updated
2024-10-31 04:37:21 - db_utils - INFO - Database already initialized. Skipping.
2024-10-31 04:37:21 - db_utils - INFO - Query executed successfully on login_history.db. Rows affected: -1
2024-10-31 04:37:21 - db_utils - INFO - login_history table structure is correct
2024-10-31 04:37:21 - customer_utils - INFO - Starting cabin user consistency check
2024-10-31 04:37:21 - utils - INFO - Attempting to load passwords from secrets
2024-10-31 04:37:21 - utils - INFO - Successfully loaded passwords. Number of entries: 94
2024-10-31 04:37:21 - customer_utils - INFO - Retrieved 94 passwords
2024-10-31 04:37:21 - customer_utils - INFO - Found 94 customers in database
2024-10-31 04:37:21 - customer_utils - INFO - Consistency check completed
2024-10-31 04:37:21 - customer_utils - INFO - Database connection closed
2024-10-31 04:37:21 - customer_utils - INFO - Validating customers and passwords
2024-10-31 04:37:21 - utils - INFO - Attempting to load passwords from secrets
2024-10-31 04:37:21 - utils - INFO - Successfully loaded passwords. Number of entries: 94
2024-10-31 04:37:21 - customer_utils - INFO - Customer and password validation complete
2024-10-31 04:37:21 - db_utils - INFO - Successfully created indexes for tunbroyting database
2024-10-31 04:37:21 - db_utils - INFO - Successfully created indexes for stroing database
2024-10-31 04:37:21 - db_utils - INFO - Successfully created indexes for feedback database
2024-10-31 04:37:21 - db_utils - INFO - Successfully created indexes for login_history database
2024-10-31 04:37:21 - db_utils - INFO - Successfully created indexes for customer database
2024-10-31 04:37:21 - db_utils - INFO - Database index creation completed
2024-10-31 04:37:21 - __main__ - INFO - Application initialization completed successfully
2024-10-31 04:37:21 - __main__ - INFO - Application initialization completed successfully
2024-10-31 04:37:21 - __main__ - INFO - Application setup complete
2024-10-31 04:37:21 - auth_utils - INFO - Login attempt for ID: 999
2024-10-31 04:37:21 - db_utils - INFO - DATABASE_PATH: /Users/tor.inge.jossang@aftenbladet.no/dev/gullingen
2024-10-31 04:37:21 - db_utils - INFO - Full database path: /Users/tor.inge.jossang@aftenbladet.no/dev/gullingen/login_history.db
2024-10-31 04:37:21 - db_utils - INFO - Attempting to create database engine...
2024-10-31 04:37:21 - db_utils - INFO - Database engine created successfully for login_history.db
2024-10-31 04:37:21 - auth_utils - INFO - Rate limit check passed for user 999
2024-10-31 04:37:21 - auth_utils - INFO - User 999 authenticated successfully
2024-10-31 04:37:21 - customer_utils - INFO - Successfully retrieved customer with ID: 999
2024-10-31 04:37:21 - db_utils - INFO - Database file /Users/tor.inge.jossang@aftenbladet.no/dev/gullingen/login_history.db exists.
2024-10-31 04:37:21 - db_utils - INFO - Query executed successfully on login_history.db. Rows affected: 1
2024-10-31 04:37:21 - auth_utils - INFO - Successful login for ID: 999
2024-10-31 04:37:21 - auth_utils - INFO - Successful login and logging for ID: 999
2024-10-31 04:37:21 - db_utils - INFO - DATABASE_PATH: /Users/tor.inge.jossang@aftenbladet.no/dev/gullingen
2024-10-31 04:37:21 - db_utils - INFO - Full database path: /Users/tor.inge.jossang@aftenbladet.no/dev/gullingen/login_history.db
2024-10-31 04:37:21 - db_utils - INFO - Attempting to create database engine...
2024-10-31 04:37:21 - db_utils - INFO - Database engine created successfully for login_history.db
2024-10-31 04:37:21 - auth_utils - INFO - Rate limit reset for user 999
2024-10-31 04:37:21 - __main__ - INFO - Application shutting down
2024-10-31 04:37:21 - __main__ - INFO - Added validate_user_input function to app.py
2024-10-31 04:37:21 - __main__ - INFO - Starting application initialization
2024-10-31 04:37:21 - db_utils - INFO - Starting detailed database operations debugging
2024-10-31 04:37:21 - db_utils - INFO - Debugging login_history database:
2024-10-31 04:37:21 - db_utils - INFO -   Database version: 0
2024-10-31 04:37:21 - db_utils - INFO -   Tables in login_history.db: ['login_history']
2024-10-31 04:37:21 - db_utils - INFO -   Structure of login_history table:
2024-10-31 04:37:21 - db_utils - INFO -     Column: id, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:37:21 - db_utils - INFO -     Column: login_time, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:37:21 - db_utils - INFO -     Column: success, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:37:21 - db_utils - INFO -   Indexes in login_history.db: ['idx_login_id', 'idx_login_time']
2024-10-31 04:37:21 - db_utils - INFO -   Row count in login_history: 437
2024-10-31 04:37:21 - db_utils - INFO -   Test query result: (1,)
2024-10-31 04:37:21 - db_utils - INFO - Debugging tunbroyting database:
2024-10-31 04:37:21 - db_utils - INFO -   Database version: 0
2024-10-31 04:37:21 - db_utils - INFO -   Tables in tunbroyting.db: ['tunbroyting_bestillinger']
2024-10-31 04:37:21 - db_utils - INFO -   Structure of tunbroyting_bestillinger table:
2024-10-31 04:37:21 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 04:37:21 - db_utils - INFO -     Column: bruker, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:37:21 - db_utils - INFO -     Column: ankomst_dato, Type: DATE, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:37:21 - db_utils - INFO -     Column: ankomst_tid, Type: TIME, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:37:21 - db_utils - INFO -     Column: avreise_dato, Type: DATE, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:37:21 - db_utils - INFO -     Column: avreise_tid, Type: TIME, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:37:21 - db_utils - INFO -     Column: abonnement_type, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:37:21 - db_utils - INFO -   Indexes in tunbroyting.db: ['idx_tunbroyting_bruker', 'idx_tunbroyting_ankomst_dato', 'idx_tunbroyting_avreise_dato', 'idx_tunbroyting_abonnement']
2024-10-31 04:37:21 - db_utils - INFO -   Row count in tunbroyting_bestillinger: 2
2024-10-31 04:37:21 - db_utils - INFO -   Test query result: (1,)
2024-10-31 04:37:21 - db_utils - INFO - Debugging stroing database:
2024-10-31 04:37:21 - db_utils - INFO -   Database version: 0
2024-10-31 04:37:21 - db_utils - INFO -   Tables in stroing.db: ['sqlite_sequence', 'stroing_bestillinger']
2024-10-31 04:37:21 - db_utils - INFO -   Structure of sqlite_sequence table:
2024-10-31 04:37:21 - db_utils - INFO -     Column: name, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:37:21 - db_utils - INFO -     Column: seq, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:37:21 - db_utils - INFO -   Structure of stroing_bestillinger table:
2024-10-31 04:37:21 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 04:37:21 - db_utils - INFO -     Column: bruker, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:37:21 - db_utils - INFO -     Column: bestillings_dato, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:37:21 - db_utils - INFO -     Column: onske_dato, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:37:21 - db_utils - INFO -   Indexes in stroing.db: ['idx_stroing_bruker', 'idx_stroing_onske_dato', 'idx_stroing_bestillings_dato']
2024-10-31 04:37:21 - db_utils - INFO -   Row count in sqlite_sequence: 1
2024-10-31 04:37:21 - db_utils - INFO -   Row count in stroing_bestillinger: 5
2024-10-31 04:37:21 - db_utils - INFO -   Test query result: (1,)
2024-10-31 04:37:21 - db_utils - INFO - Debugging feedback database:
2024-10-31 04:37:21 - db_utils - INFO -   Database version: 0
2024-10-31 04:37:21 - db_utils - INFO -   Tables in feedback.db: ['sqlite_sequence', 'feedback']
2024-10-31 04:37:21 - db_utils - INFO -   Structure of sqlite_sequence table:
2024-10-31 04:37:21 - db_utils - INFO -     Column: name, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:37:21 - db_utils - INFO -     Column: seq, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:37:21 - db_utils - INFO -   Structure of feedback table:
2024-10-31 04:37:21 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 04:37:21 - db_utils - INFO -     Column: type, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:37:21 - db_utils - INFO -     Column: datetime, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:37:21 - db_utils - INFO -     Column: comment, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:37:21 - db_utils - INFO -     Column: innsender, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:37:21 - db_utils - INFO -     Column: status, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:37:21 - db_utils - INFO -     Column: status_changed_by, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:37:21 - db_utils - INFO -     Column: status_changed_at, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:37:21 - db_utils - INFO -     Column: hidden, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:37:21 - db_utils - INFO -     Column: is_alert, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:37:21 - db_utils - INFO -     Column: display_on_weather, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:37:21 - db_utils - INFO -     Column: expiry_date, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:37:21 - db_utils - INFO -     Column: target_group, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:37:21 - db_utils - INFO -   Indexes in feedback.db: ['idx_feedback_datetime', 'idx_feedback_innsender', 'idx_feedback_status', 'idx_feedback_type']
2024-10-31 04:37:21 - db_utils - INFO -   Row count in sqlite_sequence: 1
2024-10-31 04:37:21 - db_utils - INFO -   Row count in feedback: 11
2024-10-31 04:37:21 - db_utils - INFO -   Test query result: (1,)
2024-10-31 04:37:21 - db_utils - INFO - Detailed database operations debugging completed
2024-10-31 04:37:21 - db_utils - INFO - Oppdatert skjema for customer
2024-10-31 04:37:21 - db_utils - INFO - Oppdatert skjema for feedback
2024-10-31 04:37:21 - db_utils - INFO - Oppdatert skjema for login_history
2024-10-31 04:37:21 - db_utils - INFO - Oppdatert skjema for stroing
2024-10-31 04:37:21 - db_utils - INFO - Oppdatert skjema for tunbroyting
2024-10-31 04:37:21 - db_utils - INFO - All database schemas verified and updated
2024-10-31 04:37:21 - db_utils - INFO - Oppdatert skjema for customer
2024-10-31 04:37:21 - db_utils - INFO - Oppdatert skjema for feedback
2024-10-31 04:37:21 - db_utils - INFO - Oppdatert skjema for login_history
2024-10-31 04:37:21 - db_utils - INFO - Oppdatert skjema for stroing
2024-10-31 04:37:21 - db_utils - INFO - Oppdatert skjema for tunbroyting
2024-10-31 04:37:21 - db_utils - INFO - All database schemas verified and updated
2024-10-31 04:37:21 - db_utils - INFO - Database already initialized. Skipping.
2024-10-31 04:37:21 - db_utils - INFO - Query executed successfully on login_history.db. Rows affected: -1
2024-10-31 04:37:21 - db_utils - INFO - login_history table structure is correct
2024-10-31 04:37:21 - customer_utils - INFO - Starting cabin user consistency check
2024-10-31 04:37:21 - utils - INFO - Attempting to load passwords from secrets
2024-10-31 04:37:21 - utils - INFO - Successfully loaded passwords. Number of entries: 94
2024-10-31 04:37:21 - customer_utils - INFO - Retrieved 94 passwords
2024-10-31 04:37:21 - customer_utils - INFO - Found 94 customers in database
2024-10-31 04:37:21 - customer_utils - INFO - Consistency check completed
2024-10-31 04:37:21 - customer_utils - INFO - Database connection closed
2024-10-31 04:37:21 - customer_utils - INFO - Validating customers and passwords
2024-10-31 04:37:21 - utils - INFO - Attempting to load passwords from secrets
2024-10-31 04:37:21 - utils - INFO - Successfully loaded passwords. Number of entries: 94
2024-10-31 04:37:21 - customer_utils - INFO - Customer and password validation complete
2024-10-31 04:37:21 - db_utils - INFO - Successfully created indexes for tunbroyting database
2024-10-31 04:37:21 - db_utils - INFO - Successfully created indexes for stroing database
2024-10-31 04:37:21 - db_utils - INFO - Successfully created indexes for feedback database
2024-10-31 04:37:21 - db_utils - INFO - Successfully created indexes for login_history database
2024-10-31 04:37:21 - db_utils - INFO - Successfully created indexes for customer database
2024-10-31 04:37:21 - db_utils - INFO - Database index creation completed
2024-10-31 04:37:21 - __main__ - INFO - Application initialization completed successfully
2024-10-31 04:37:21 - __main__ - INFO - Application initialization completed successfully
2024-10-31 04:37:21 - __main__ - INFO - Application setup complete
2024-10-31 04:37:21 - customer_utils - INFO - Successfully retrieved customer with ID: 999
2024-10-31 04:37:21 - tun_utils - WARNING - hent_bestillinger() is deprecated, use get_bookings() instead
2024-10-31 04:37:21 - tun_utils - INFO - Starting get_bookings with start_date=None, end_date=None
2024-10-31 04:37:21 - tun_utils - INFO - Successfully retrieved 2 bookings
2024-10-31 04:37:22 - __main__ - INFO - Application shutting down
2024-10-31 04:37:22 - __main__ - INFO - Added validate_user_input function to app.py
2024-10-31 04:37:22 - __main__ - INFO - Starting application initialization
2024-10-31 04:37:22 - db_utils - INFO - Starting detailed database operations debugging
2024-10-31 04:37:22 - db_utils - INFO - Debugging login_history database:
2024-10-31 04:37:22 - db_utils - INFO -   Database version: 0
2024-10-31 04:37:22 - db_utils - INFO -   Tables in login_history.db: ['login_history']
2024-10-31 04:37:22 - db_utils - INFO -   Structure of login_history table:
2024-10-31 04:37:22 - db_utils - INFO -     Column: id, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:37:22 - db_utils - INFO -     Column: login_time, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:37:22 - db_utils - INFO -     Column: success, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:37:22 - db_utils - INFO -   Indexes in login_history.db: ['idx_login_id', 'idx_login_time']
2024-10-31 04:37:22 - db_utils - INFO -   Row count in login_history: 437
2024-10-31 04:37:22 - db_utils - INFO -   Test query result: (1,)
2024-10-31 04:37:22 - db_utils - INFO - Debugging tunbroyting database:
2024-10-31 04:37:22 - db_utils - INFO -   Database version: 0
2024-10-31 04:37:22 - db_utils - INFO -   Tables in tunbroyting.db: ['tunbroyting_bestillinger']
2024-10-31 04:37:22 - db_utils - INFO -   Structure of tunbroyting_bestillinger table:
2024-10-31 04:37:22 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 04:37:22 - db_utils - INFO -     Column: bruker, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:37:22 - db_utils - INFO -     Column: ankomst_dato, Type: DATE, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:37:22 - db_utils - INFO -     Column: ankomst_tid, Type: TIME, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:37:22 - db_utils - INFO -     Column: avreise_dato, Type: DATE, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:37:22 - db_utils - INFO -     Column: avreise_tid, Type: TIME, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:37:22 - db_utils - INFO -     Column: abonnement_type, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:37:22 - db_utils - INFO -   Indexes in tunbroyting.db: ['idx_tunbroyting_bruker', 'idx_tunbroyting_ankomst_dato', 'idx_tunbroyting_avreise_dato', 'idx_tunbroyting_abonnement']
2024-10-31 04:37:22 - db_utils - INFO -   Row count in tunbroyting_bestillinger: 2
2024-10-31 04:37:22 - db_utils - INFO -   Test query result: (1,)
2024-10-31 04:37:22 - db_utils - INFO - Debugging stroing database:
2024-10-31 04:37:22 - db_utils - INFO -   Database version: 0
2024-10-31 04:37:22 - db_utils - INFO -   Tables in stroing.db: ['sqlite_sequence', 'stroing_bestillinger']
2024-10-31 04:37:22 - db_utils - INFO -   Structure of sqlite_sequence table:
2024-10-31 04:37:22 - db_utils - INFO -     Column: name, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:37:22 - db_utils - INFO -     Column: seq, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:37:22 - db_utils - INFO -   Structure of stroing_bestillinger table:
2024-10-31 04:37:22 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 04:37:22 - db_utils - INFO -     Column: bruker, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:37:22 - db_utils - INFO -     Column: bestillings_dato, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:37:22 - db_utils - INFO -     Column: onske_dato, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:37:22 - db_utils - INFO -   Indexes in stroing.db: ['idx_stroing_bruker', 'idx_stroing_onske_dato', 'idx_stroing_bestillings_dato']
2024-10-31 04:37:22 - db_utils - INFO -   Row count in sqlite_sequence: 1
2024-10-31 04:37:22 - db_utils - INFO -   Row count in stroing_bestillinger: 5
2024-10-31 04:37:22 - db_utils - INFO -   Test query result: (1,)
2024-10-31 04:37:22 - db_utils - INFO - Debugging feedback database:
2024-10-31 04:37:22 - db_utils - INFO -   Database version: 0
2024-10-31 04:37:22 - db_utils - INFO -   Tables in feedback.db: ['sqlite_sequence', 'feedback']
2024-10-31 04:37:22 - db_utils - INFO -   Structure of sqlite_sequence table:
2024-10-31 04:37:22 - db_utils - INFO -     Column: name, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:37:22 - db_utils - INFO -     Column: seq, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:37:22 - db_utils - INFO -   Structure of feedback table:
2024-10-31 04:37:22 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 04:37:22 - db_utils - INFO -     Column: type, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:37:22 - db_utils - INFO -     Column: datetime, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:37:22 - db_utils - INFO -     Column: comment, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:37:22 - db_utils - INFO -     Column: innsender, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:37:22 - db_utils - INFO -     Column: status, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:37:22 - db_utils - INFO -     Column: status_changed_by, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:37:22 - db_utils - INFO -     Column: status_changed_at, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:37:22 - db_utils - INFO -     Column: hidden, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:37:22 - db_utils - INFO -     Column: is_alert, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:37:22 - db_utils - INFO -     Column: display_on_weather, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:37:22 - db_utils - INFO -     Column: expiry_date, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:37:22 - db_utils - INFO -     Column: target_group, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:37:22 - db_utils - INFO -   Indexes in feedback.db: ['idx_feedback_datetime', 'idx_feedback_innsender', 'idx_feedback_status', 'idx_feedback_type']
2024-10-31 04:37:22 - db_utils - INFO -   Row count in sqlite_sequence: 1
2024-10-31 04:37:22 - db_utils - INFO -   Row count in feedback: 11
2024-10-31 04:37:22 - db_utils - INFO -   Test query result: (1,)
2024-10-31 04:37:22 - db_utils - INFO - Detailed database operations debugging completed
2024-10-31 04:37:22 - db_utils - INFO - Oppdatert skjema for customer
2024-10-31 04:37:22 - db_utils - INFO - Oppdatert skjema for feedback
2024-10-31 04:37:22 - db_utils - INFO - Oppdatert skjema for login_history
2024-10-31 04:37:22 - db_utils - INFO - Oppdatert skjema for stroing
2024-10-31 04:37:22 - db_utils - INFO - Oppdatert skjema for tunbroyting
2024-10-31 04:37:22 - db_utils - INFO - All database schemas verified and updated
2024-10-31 04:37:22 - db_utils - INFO - Oppdatert skjema for customer
2024-10-31 04:37:22 - db_utils - INFO - Oppdatert skjema for feedback
2024-10-31 04:37:22 - db_utils - INFO - Oppdatert skjema for login_history
2024-10-31 04:37:22 - db_utils - INFO - Oppdatert skjema for stroing
2024-10-31 04:37:22 - db_utils - INFO - Oppdatert skjema for tunbroyting
2024-10-31 04:37:22 - db_utils - INFO - All database schemas verified and updated
2024-10-31 04:37:22 - db_utils - INFO - Database already initialized. Skipping.
2024-10-31 04:37:22 - db_utils - INFO - Query executed successfully on login_history.db. Rows affected: -1
2024-10-31 04:37:22 - db_utils - INFO - login_history table structure is correct
2024-10-31 04:37:22 - customer_utils - INFO - Starting cabin user consistency check
2024-10-31 04:37:22 - utils - INFO - Attempting to load passwords from secrets
2024-10-31 04:37:22 - utils - INFO - Successfully loaded passwords. Number of entries: 94
2024-10-31 04:37:22 - customer_utils - INFO - Retrieved 94 passwords
2024-10-31 04:37:22 - customer_utils - INFO - Found 94 customers in database
2024-10-31 04:37:22 - customer_utils - INFO - Consistency check completed
2024-10-31 04:37:22 - customer_utils - INFO - Database connection closed
2024-10-31 04:37:22 - customer_utils - INFO - Validating customers and passwords
2024-10-31 04:37:22 - utils - INFO - Attempting to load passwords from secrets
2024-10-31 04:37:22 - utils - INFO - Successfully loaded passwords. Number of entries: 94
2024-10-31 04:37:22 - customer_utils - INFO - Customer and password validation complete
2024-10-31 04:37:22 - db_utils - INFO - Successfully created indexes for tunbroyting database
2024-10-31 04:37:22 - db_utils - INFO - Successfully created indexes for stroing database
2024-10-31 04:37:22 - db_utils - INFO - Successfully created indexes for feedback database
2024-10-31 04:37:22 - db_utils - INFO - Successfully created indexes for login_history database
2024-10-31 04:37:22 - db_utils - INFO - Successfully created indexes for customer database
2024-10-31 04:37:22 - db_utils - INFO - Database index creation completed
2024-10-31 04:37:22 - __main__ - INFO - Application initialization completed successfully
2024-10-31 04:37:22 - __main__ - INFO - Application initialization completed successfully
2024-10-31 04:37:22 - __main__ - INFO - Application setup complete
2024-10-31 04:37:22 - customer_utils - INFO - Successfully retrieved customer with ID: 999
2024-10-31 04:37:23 - weather_utils - ERROR - Feil ved datahenting eller -behandling: name 'st' is not defined
Traceback (most recent call last):
  File "/Users/tor.inge.jossang@aftenbladet.no/dev/gullingen/weather_utils.py", line 34, in create_dataframe_from_raw_data
    try:
        ^
NameError: name 'st' is not defined

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/tor.inge.jossang@aftenbladet.no/dev/gullingen/weather_utils.py", line 153, in fetch_and_process_data
    raw_data = fetch_raw_weather_data(client_id, date_start, date_end)
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/tor.inge.jossang@aftenbladet.no/dev/gullingen/weather_utils.py", line 58, in create_dataframe_from_raw_data
    except Exception as e:
        ^^
NameError: name 'st' is not defined
2024-10-31 04:37:23 - __main__ - INFO - Application shutting down
2024-10-31 04:37:40 - __main__ - INFO - Added validate_user_input function to app.py
2024-10-31 04:37:40 - __main__ - INFO - Starting application initialization
2024-10-31 04:37:40 - db_utils - INFO - Starting detailed database operations debugging
2024-10-31 04:37:40 - db_utils - INFO - Debugging login_history database:
2024-10-31 04:37:40 - db_utils - INFO -   Database version: 0
2024-10-31 04:37:40 - db_utils - INFO -   Tables in login_history.db: ['login_history']
2024-10-31 04:37:40 - db_utils - INFO -   Structure of login_history table:
2024-10-31 04:37:40 - db_utils - INFO -     Column: id, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:37:40 - db_utils - INFO -     Column: login_time, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:37:40 - db_utils - INFO -     Column: success, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:37:40 - db_utils - INFO -   Indexes in login_history.db: ['idx_login_id', 'idx_login_time']
2024-10-31 04:37:40 - db_utils - INFO -   Row count in login_history: 437
2024-10-31 04:37:40 - db_utils - INFO -   Test query result: (1,)
2024-10-31 04:37:40 - db_utils - INFO - Debugging tunbroyting database:
2024-10-31 04:37:40 - db_utils - INFO -   Database version: 0
2024-10-31 04:37:40 - db_utils - INFO -   Tables in tunbroyting.db: ['tunbroyting_bestillinger']
2024-10-31 04:37:40 - db_utils - INFO -   Structure of tunbroyting_bestillinger table:
2024-10-31 04:37:40 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 04:37:40 - db_utils - INFO -     Column: bruker, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:37:40 - db_utils - INFO -     Column: ankomst_dato, Type: DATE, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:37:40 - db_utils - INFO -     Column: ankomst_tid, Type: TIME, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:37:40 - db_utils - INFO -     Column: avreise_dato, Type: DATE, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:37:40 - db_utils - INFO -     Column: avreise_tid, Type: TIME, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:37:40 - db_utils - INFO -     Column: abonnement_type, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:37:40 - db_utils - INFO -   Indexes in tunbroyting.db: ['idx_tunbroyting_bruker', 'idx_tunbroyting_ankomst_dato', 'idx_tunbroyting_avreise_dato', 'idx_tunbroyting_abonnement']
2024-10-31 04:37:40 - db_utils - INFO -   Row count in tunbroyting_bestillinger: 2
2024-10-31 04:37:40 - db_utils - INFO -   Test query result: (1,)
2024-10-31 04:37:40 - db_utils - INFO - Debugging stroing database:
2024-10-31 04:37:40 - db_utils - INFO -   Database version: 0
2024-10-31 04:37:40 - db_utils - INFO -   Tables in stroing.db: ['sqlite_sequence', 'stroing_bestillinger']
2024-10-31 04:37:40 - db_utils - INFO -   Structure of sqlite_sequence table:
2024-10-31 04:37:40 - db_utils - INFO -     Column: name, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:37:40 - db_utils - INFO -     Column: seq, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:37:40 - db_utils - INFO -   Structure of stroing_bestillinger table:
2024-10-31 04:37:40 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 04:37:40 - db_utils - INFO -     Column: bruker, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:37:40 - db_utils - INFO -     Column: bestillings_dato, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:37:40 - db_utils - INFO -     Column: onske_dato, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:37:40 - db_utils - INFO -   Indexes in stroing.db: ['idx_stroing_bruker', 'idx_stroing_onske_dato', 'idx_stroing_bestillings_dato']
2024-10-31 04:37:40 - db_utils - INFO -   Row count in sqlite_sequence: 1
2024-10-31 04:37:40 - db_utils - INFO -   Row count in stroing_bestillinger: 5
2024-10-31 04:37:40 - db_utils - INFO -   Test query result: (1,)
2024-10-31 04:37:40 - db_utils - INFO - Debugging feedback database:
2024-10-31 04:37:40 - db_utils - INFO -   Database version: 0
2024-10-31 04:37:40 - db_utils - INFO -   Tables in feedback.db: ['sqlite_sequence', 'feedback']
2024-10-31 04:37:40 - db_utils - INFO -   Structure of sqlite_sequence table:
2024-10-31 04:37:40 - db_utils - INFO -     Column: name, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:37:40 - db_utils - INFO -     Column: seq, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:37:40 - db_utils - INFO -   Structure of feedback table:
2024-10-31 04:37:40 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 04:37:40 - db_utils - INFO -     Column: type, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:37:40 - db_utils - INFO -     Column: datetime, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:37:40 - db_utils - INFO -     Column: comment, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:37:40 - db_utils - INFO -     Column: innsender, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:37:40 - db_utils - INFO -     Column: status, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:37:40 - db_utils - INFO -     Column: status_changed_by, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:37:40 - db_utils - INFO -     Column: status_changed_at, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:37:40 - db_utils - INFO -     Column: hidden, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:37:40 - db_utils - INFO -     Column: is_alert, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:37:40 - db_utils - INFO -     Column: display_on_weather, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:37:40 - db_utils - INFO -     Column: expiry_date, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:37:40 - db_utils - INFO -     Column: target_group, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:37:40 - db_utils - INFO -   Indexes in feedback.db: ['idx_feedback_datetime', 'idx_feedback_innsender', 'idx_feedback_status', 'idx_feedback_type']
2024-10-31 04:37:40 - db_utils - INFO -   Row count in sqlite_sequence: 1
2024-10-31 04:37:40 - db_utils - INFO -   Row count in feedback: 11
2024-10-31 04:37:40 - db_utils - INFO -   Test query result: (1,)
2024-10-31 04:37:40 - db_utils - INFO - Detailed database operations debugging completed
2024-10-31 04:37:40 - db_utils - INFO - Oppdatert skjema for customer
2024-10-31 04:37:40 - db_utils - INFO - Oppdatert skjema for feedback
2024-10-31 04:37:40 - db_utils - INFO - Oppdatert skjema for login_history
2024-10-31 04:37:40 - db_utils - INFO - Oppdatert skjema for stroing
2024-10-31 04:37:40 - db_utils - INFO - Oppdatert skjema for tunbroyting
2024-10-31 04:37:40 - db_utils - INFO - All database schemas verified and updated
2024-10-31 04:37:40 - db_utils - INFO - Oppdatert skjema for customer
2024-10-31 04:37:40 - db_utils - INFO - Oppdatert skjema for feedback
2024-10-31 04:37:40 - db_utils - INFO - Oppdatert skjema for login_history
2024-10-31 04:37:40 - db_utils - INFO - Oppdatert skjema for stroing
2024-10-31 04:37:40 - db_utils - INFO - Oppdatert skjema for tunbroyting
2024-10-31 04:37:40 - db_utils - INFO - All database schemas verified and updated
2024-10-31 04:37:40 - db_utils - INFO - Database login_history initialized, updated, and optimized
2024-10-31 04:37:40 - db_utils - INFO - Database tunbroyting initialized, updated, and optimized
2024-10-31 04:37:40 - db_utils - INFO - Database stroing initialized, updated, and optimized
2024-10-31 04:37:40 - db_utils - INFO - Database feedback initialized, updated, and optimized
2024-10-31 04:37:40 - db_utils - INFO - Database customer initialized, updated, and optimized
2024-10-31 04:37:40 - db_utils - INFO - Successfully created indexes for tunbroyting database
2024-10-31 04:37:40 - db_utils - INFO - Successfully created indexes for stroing database
2024-10-31 04:37:40 - db_utils - INFO - Successfully created indexes for feedback database
2024-10-31 04:37:40 - db_utils - INFO - Successfully created indexes for login_history database
2024-10-31 04:37:40 - db_utils - INFO - Successfully created indexes for customer database
2024-10-31 04:37:40 - db_utils - INFO - Database index creation completed
2024-10-31 04:37:40 - db_utils - INFO - Database indexes created
2024-10-31 04:37:40 - db_utils - INFO - Successfully verified connection to stroing.db
2024-10-31 04:37:40 - db_utils - INFO - Successfully verified connection to tunbroyting.db
2024-10-31 04:37:40 - db_utils - INFO - Successfully verified connection to feedback.db
2024-10-31 04:37:40 - db_utils - INFO - Successfully verified connection to login_history.db
2024-10-31 04:37:40 - db_utils - INFO - Successfully verified connection to customer.db
2024-10-31 04:37:40 - db_utils - INFO - Database connections verified
2024-10-31 04:37:40 - db_utils - INFO - All databases initialized, updated, and verified
2024-10-31 04:37:40 - db_utils - INFO - Query executed successfully on login_history.db. Rows affected: -1
2024-10-31 04:37:40 - db_utils - INFO - login_history table structure is correct
2024-10-31 04:37:40 - customer_utils - INFO - Starting cabin user consistency check
2024-10-31 04:37:40 - utils - INFO - Attempting to load passwords from secrets
2024-10-31 04:37:40 - utils - INFO - Successfully loaded passwords. Number of entries: 94
2024-10-31 04:37:40 - customer_utils - INFO - Retrieved 94 passwords
2024-10-31 04:37:40 - customer_utils - INFO - Found 94 customers in database
2024-10-31 04:37:40 - customer_utils - INFO - Consistency check completed
2024-10-31 04:37:40 - customer_utils - INFO - Database connection closed
2024-10-31 04:37:40 - customer_utils - INFO - Validating customers and passwords
2024-10-31 04:37:40 - utils - INFO - Attempting to load passwords from secrets
2024-10-31 04:37:40 - utils - INFO - Successfully loaded passwords. Number of entries: 94
2024-10-31 04:37:40 - customer_utils - INFO - Customer and password validation complete
2024-10-31 04:37:40 - db_utils - INFO - Successfully created indexes for tunbroyting database
2024-10-31 04:37:40 - db_utils - INFO - Successfully created indexes for stroing database
2024-10-31 04:37:40 - db_utils - INFO - Successfully created indexes for feedback database
2024-10-31 04:37:40 - db_utils - INFO - Successfully created indexes for login_history database
2024-10-31 04:37:40 - db_utils - INFO - Successfully created indexes for customer database
2024-10-31 04:37:40 - db_utils - INFO - Database index creation completed
2024-10-31 04:37:40 - __main__ - INFO - Application initialization completed successfully
2024-10-31 04:37:40 - __main__ - INFO - Application initialization completed successfully
2024-10-31 04:37:40 - __main__ - INFO - Application setup complete
2024-10-31 04:37:40 - __main__ - INFO - Application shutting down
2024-10-31 04:37:42 - __main__ - INFO - Added validate_user_input function to app.py
2024-10-31 04:37:42 - __main__ - INFO - Starting application initialization
2024-10-31 04:37:42 - db_utils - INFO - Starting detailed database operations debugging
2024-10-31 04:37:42 - db_utils - INFO - Debugging login_history database:
2024-10-31 04:37:42 - db_utils - INFO -   Database version: 0
2024-10-31 04:37:42 - db_utils - INFO -   Tables in login_history.db: ['login_history']
2024-10-31 04:37:42 - db_utils - INFO -   Structure of login_history table:
2024-10-31 04:37:42 - db_utils - INFO -     Column: id, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:37:42 - db_utils - INFO -     Column: login_time, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:37:42 - db_utils - INFO -     Column: success, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:37:42 - db_utils - INFO -   Indexes in login_history.db: ['idx_login_id', 'idx_login_time']
2024-10-31 04:37:42 - db_utils - INFO -   Row count in login_history: 437
2024-10-31 04:37:42 - db_utils - INFO -   Test query result: (1,)
2024-10-31 04:37:42 - db_utils - INFO - Debugging tunbroyting database:
2024-10-31 04:37:42 - db_utils - INFO -   Database version: 0
2024-10-31 04:37:42 - db_utils - INFO -   Tables in tunbroyting.db: ['tunbroyting_bestillinger']
2024-10-31 04:37:42 - db_utils - INFO -   Structure of tunbroyting_bestillinger table:
2024-10-31 04:37:42 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 04:37:42 - db_utils - INFO -     Column: bruker, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:37:42 - db_utils - INFO -     Column: ankomst_dato, Type: DATE, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:37:42 - db_utils - INFO -     Column: ankomst_tid, Type: TIME, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:37:42 - db_utils - INFO -     Column: avreise_dato, Type: DATE, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:37:42 - db_utils - INFO -     Column: avreise_tid, Type: TIME, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:37:42 - db_utils - INFO -     Column: abonnement_type, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:37:42 - db_utils - INFO -   Indexes in tunbroyting.db: ['idx_tunbroyting_bruker', 'idx_tunbroyting_ankomst_dato', 'idx_tunbroyting_avreise_dato', 'idx_tunbroyting_abonnement']
2024-10-31 04:37:42 - db_utils - INFO -   Row count in tunbroyting_bestillinger: 2
2024-10-31 04:37:42 - db_utils - INFO -   Test query result: (1,)
2024-10-31 04:37:42 - db_utils - INFO - Debugging stroing database:
2024-10-31 04:37:42 - db_utils - INFO -   Database version: 0
2024-10-31 04:37:42 - db_utils - INFO -   Tables in stroing.db: ['sqlite_sequence', 'stroing_bestillinger']
2024-10-31 04:37:42 - db_utils - INFO -   Structure of sqlite_sequence table:
2024-10-31 04:37:42 - db_utils - INFO -     Column: name, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:37:42 - db_utils - INFO -     Column: seq, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:37:42 - db_utils - INFO -   Structure of stroing_bestillinger table:
2024-10-31 04:37:42 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 04:37:42 - db_utils - INFO -     Column: bruker, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:37:42 - db_utils - INFO -     Column: bestillings_dato, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:37:42 - db_utils - INFO -     Column: onske_dato, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:37:42 - db_utils - INFO -   Indexes in stroing.db: ['idx_stroing_bruker', 'idx_stroing_onske_dato', 'idx_stroing_bestillings_dato']
2024-10-31 04:37:42 - db_utils - INFO -   Row count in sqlite_sequence: 1
2024-10-31 04:37:42 - db_utils - INFO -   Row count in stroing_bestillinger: 5
2024-10-31 04:37:42 - db_utils - INFO -   Test query result: (1,)
2024-10-31 04:37:42 - db_utils - INFO - Debugging feedback database:
2024-10-31 04:37:42 - db_utils - INFO -   Database version: 0
2024-10-31 04:37:42 - db_utils - INFO -   Tables in feedback.db: ['sqlite_sequence', 'feedback']
2024-10-31 04:37:42 - db_utils - INFO -   Structure of sqlite_sequence table:
2024-10-31 04:37:42 - db_utils - INFO -     Column: name, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:37:42 - db_utils - INFO -     Column: seq, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:37:42 - db_utils - INFO -   Structure of feedback table:
2024-10-31 04:37:42 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 04:37:42 - db_utils - INFO -     Column: type, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:37:42 - db_utils - INFO -     Column: datetime, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:37:42 - db_utils - INFO -     Column: comment, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:37:42 - db_utils - INFO -     Column: innsender, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:37:42 - db_utils - INFO -     Column: status, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:37:42 - db_utils - INFO -     Column: status_changed_by, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:37:42 - db_utils - INFO -     Column: status_changed_at, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:37:42 - db_utils - INFO -     Column: hidden, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:37:42 - db_utils - INFO -     Column: is_alert, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:37:42 - db_utils - INFO -     Column: display_on_weather, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:37:42 - db_utils - INFO -     Column: expiry_date, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:37:42 - db_utils - INFO -     Column: target_group, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:37:42 - db_utils - INFO -   Indexes in feedback.db: ['idx_feedback_datetime', 'idx_feedback_innsender', 'idx_feedback_status', 'idx_feedback_type']
2024-10-31 04:37:42 - db_utils - INFO -   Row count in sqlite_sequence: 1
2024-10-31 04:37:42 - db_utils - INFO -   Row count in feedback: 11
2024-10-31 04:37:42 - db_utils - INFO -   Test query result: (1,)
2024-10-31 04:37:42 - db_utils - INFO - Detailed database operations debugging completed
2024-10-31 04:37:42 - db_utils - INFO - Oppdatert skjema for customer
2024-10-31 04:37:42 - db_utils - INFO - Oppdatert skjema for feedback
2024-10-31 04:37:42 - db_utils - INFO - Oppdatert skjema for login_history
2024-10-31 04:37:42 - db_utils - INFO - Oppdatert skjema for stroing
2024-10-31 04:37:42 - db_utils - INFO - Oppdatert skjema for tunbroyting
2024-10-31 04:37:42 - db_utils - INFO - All database schemas verified and updated
2024-10-31 04:37:42 - db_utils - INFO - Oppdatert skjema for customer
2024-10-31 04:37:42 - db_utils - INFO - Oppdatert skjema for feedback
2024-10-31 04:37:42 - db_utils - INFO - Oppdatert skjema for login_history
2024-10-31 04:37:42 - db_utils - INFO - Oppdatert skjema for stroing
2024-10-31 04:37:42 - db_utils - INFO - Oppdatert skjema for tunbroyting
2024-10-31 04:37:42 - db_utils - INFO - All database schemas verified and updated
2024-10-31 04:37:42 - db_utils - INFO - Database already initialized. Skipping.
2024-10-31 04:37:42 - db_utils - INFO - Query executed successfully on login_history.db. Rows affected: -1
2024-10-31 04:37:42 - db_utils - INFO - login_history table structure is correct
2024-10-31 04:37:42 - customer_utils - INFO - Starting cabin user consistency check
2024-10-31 04:37:42 - utils - INFO - Attempting to load passwords from secrets
2024-10-31 04:37:42 - utils - INFO - Successfully loaded passwords. Number of entries: 94
2024-10-31 04:37:42 - customer_utils - INFO - Retrieved 94 passwords
2024-10-31 04:37:42 - customer_utils - INFO - Found 94 customers in database
2024-10-31 04:37:42 - customer_utils - INFO - Consistency check completed
2024-10-31 04:37:42 - customer_utils - INFO - Database connection closed
2024-10-31 04:37:42 - customer_utils - INFO - Validating customers and passwords
2024-10-31 04:37:42 - utils - INFO - Attempting to load passwords from secrets
2024-10-31 04:37:42 - utils - INFO - Successfully loaded passwords. Number of entries: 94
2024-10-31 04:37:42 - customer_utils - INFO - Customer and password validation complete
2024-10-31 04:37:42 - db_utils - INFO - Successfully created indexes for tunbroyting database
2024-10-31 04:37:42 - db_utils - INFO - Successfully created indexes for stroing database
2024-10-31 04:37:42 - db_utils - INFO - Successfully created indexes for feedback database
2024-10-31 04:37:42 - db_utils - INFO - Successfully created indexes for login_history database
2024-10-31 04:37:42 - db_utils - INFO - Successfully created indexes for customer database
2024-10-31 04:37:42 - db_utils - INFO - Database index creation completed
2024-10-31 04:37:42 - __main__ - INFO - Application initialization completed successfully
2024-10-31 04:37:42 - __main__ - INFO - Application initialization completed successfully
2024-10-31 04:37:42 - __main__ - INFO - Application setup complete
2024-10-31 04:37:42 - auth_utils - INFO - Login attempt for ID: 999
2024-10-31 04:37:42 - db_utils - INFO - DATABASE_PATH: /Users/tor.inge.jossang@aftenbladet.no/dev/gullingen
2024-10-31 04:37:42 - db_utils - INFO - Full database path: /Users/tor.inge.jossang@aftenbladet.no/dev/gullingen/login_history.db
2024-10-31 04:37:42 - db_utils - INFO - Attempting to create database engine...
2024-10-31 04:37:42 - db_utils - INFO - Database engine created successfully for login_history.db
2024-10-31 04:37:42 - auth_utils - INFO - Rate limit check passed for user 999
2024-10-31 04:37:42 - auth_utils - INFO - User 999 authenticated successfully
2024-10-31 04:37:42 - customer_utils - INFO - Successfully retrieved customer with ID: 999
2024-10-31 04:37:42 - db_utils - INFO - Database file /Users/tor.inge.jossang@aftenbladet.no/dev/gullingen/login_history.db exists.
2024-10-31 04:37:42 - db_utils - INFO - Query executed successfully on login_history.db. Rows affected: 1
2024-10-31 04:37:42 - auth_utils - INFO - Successful login for ID: 999
2024-10-31 04:37:42 - auth_utils - INFO - Successful login and logging for ID: 999
2024-10-31 04:37:42 - db_utils - INFO - DATABASE_PATH: /Users/tor.inge.jossang@aftenbladet.no/dev/gullingen
2024-10-31 04:37:42 - db_utils - INFO - Full database path: /Users/tor.inge.jossang@aftenbladet.no/dev/gullingen/login_history.db
2024-10-31 04:37:42 - db_utils - INFO - Attempting to create database engine...
2024-10-31 04:37:42 - db_utils - INFO - Database engine created successfully for login_history.db
2024-10-31 04:37:42 - auth_utils - INFO - Rate limit reset for user 999
2024-10-31 04:37:42 - __main__ - INFO - Application shutting down
2024-10-31 04:37:43 - __main__ - INFO - Added validate_user_input function to app.py
2024-10-31 04:37:43 - __main__ - INFO - Starting application initialization
2024-10-31 04:37:43 - db_utils - INFO - Starting detailed database operations debugging
2024-10-31 04:37:43 - db_utils - INFO - Debugging login_history database:
2024-10-31 04:37:43 - db_utils - INFO -   Database version: 0
2024-10-31 04:37:43 - db_utils - INFO -   Tables in login_history.db: ['login_history']
2024-10-31 04:37:43 - db_utils - INFO -   Structure of login_history table:
2024-10-31 04:37:43 - db_utils - INFO -     Column: id, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:37:43 - db_utils - INFO -     Column: login_time, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:37:43 - db_utils - INFO -     Column: success, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:37:43 - db_utils - INFO -   Indexes in login_history.db: ['idx_login_id', 'idx_login_time']
2024-10-31 04:37:43 - db_utils - INFO -   Row count in login_history: 438
2024-10-31 04:37:43 - db_utils - INFO -   Test query result: (1,)
2024-10-31 04:37:43 - db_utils - INFO - Debugging tunbroyting database:
2024-10-31 04:37:43 - db_utils - INFO -   Database version: 0
2024-10-31 04:37:43 - db_utils - INFO -   Tables in tunbroyting.db: ['tunbroyting_bestillinger']
2024-10-31 04:37:43 - db_utils - INFO -   Structure of tunbroyting_bestillinger table:
2024-10-31 04:37:43 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 04:37:43 - db_utils - INFO -     Column: bruker, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:37:43 - db_utils - INFO -     Column: ankomst_dato, Type: DATE, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:37:43 - db_utils - INFO -     Column: ankomst_tid, Type: TIME, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:37:43 - db_utils - INFO -     Column: avreise_dato, Type: DATE, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:37:43 - db_utils - INFO -     Column: avreise_tid, Type: TIME, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:37:43 - db_utils - INFO -     Column: abonnement_type, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:37:43 - db_utils - INFO -   Indexes in tunbroyting.db: ['idx_tunbroyting_bruker', 'idx_tunbroyting_ankomst_dato', 'idx_tunbroyting_avreise_dato', 'idx_tunbroyting_abonnement']
2024-10-31 04:37:43 - db_utils - INFO -   Row count in tunbroyting_bestillinger: 2
2024-10-31 04:37:43 - db_utils - INFO -   Test query result: (1,)
2024-10-31 04:37:43 - db_utils - INFO - Debugging stroing database:
2024-10-31 04:37:43 - db_utils - INFO -   Database version: 0
2024-10-31 04:37:43 - db_utils - INFO -   Tables in stroing.db: ['sqlite_sequence', 'stroing_bestillinger']
2024-10-31 04:37:43 - db_utils - INFO -   Structure of sqlite_sequence table:
2024-10-31 04:37:43 - db_utils - INFO -     Column: name, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:37:43 - db_utils - INFO -     Column: seq, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:37:43 - db_utils - INFO -   Structure of stroing_bestillinger table:
2024-10-31 04:37:43 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 04:37:43 - db_utils - INFO -     Column: bruker, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:37:43 - db_utils - INFO -     Column: bestillings_dato, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:37:43 - db_utils - INFO -     Column: onske_dato, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:37:43 - db_utils - INFO -   Indexes in stroing.db: ['idx_stroing_bruker', 'idx_stroing_onske_dato', 'idx_stroing_bestillings_dato']
2024-10-31 04:37:43 - db_utils - INFO -   Row count in sqlite_sequence: 1
2024-10-31 04:37:43 - db_utils - INFO -   Row count in stroing_bestillinger: 5
2024-10-31 04:37:43 - db_utils - INFO -   Test query result: (1,)
2024-10-31 04:37:43 - db_utils - INFO - Debugging feedback database:
2024-10-31 04:37:43 - db_utils - INFO -   Database version: 0
2024-10-31 04:37:43 - db_utils - INFO -   Tables in feedback.db: ['sqlite_sequence', 'feedback']
2024-10-31 04:37:43 - db_utils - INFO -   Structure of sqlite_sequence table:
2024-10-31 04:37:43 - db_utils - INFO -     Column: name, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:37:43 - db_utils - INFO -     Column: seq, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:37:43 - db_utils - INFO -   Structure of feedback table:
2024-10-31 04:37:43 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 04:37:43 - db_utils - INFO -     Column: type, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:37:43 - db_utils - INFO -     Column: datetime, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:37:43 - db_utils - INFO -     Column: comment, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:37:43 - db_utils - INFO -     Column: innsender, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:37:43 - db_utils - INFO -     Column: status, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:37:43 - db_utils - INFO -     Column: status_changed_by, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:37:43 - db_utils - INFO -     Column: status_changed_at, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:37:43 - db_utils - INFO -     Column: hidden, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:37:43 - db_utils - INFO -     Column: is_alert, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:37:43 - db_utils - INFO -     Column: display_on_weather, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:37:43 - db_utils - INFO -     Column: expiry_date, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:37:43 - db_utils - INFO -     Column: target_group, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:37:43 - db_utils - INFO -   Indexes in feedback.db: ['idx_feedback_datetime', 'idx_feedback_innsender', 'idx_feedback_status', 'idx_feedback_type']
2024-10-31 04:37:43 - db_utils - INFO -   Row count in sqlite_sequence: 1
2024-10-31 04:37:43 - db_utils - INFO -   Row count in feedback: 11
2024-10-31 04:37:43 - db_utils - INFO -   Test query result: (1,)
2024-10-31 04:37:43 - db_utils - INFO - Detailed database operations debugging completed
2024-10-31 04:37:43 - db_utils - INFO - Oppdatert skjema for customer
2024-10-31 04:37:43 - db_utils - INFO - Oppdatert skjema for feedback
2024-10-31 04:37:43 - db_utils - INFO - Oppdatert skjema for login_history
2024-10-31 04:37:43 - db_utils - INFO - Oppdatert skjema for stroing
2024-10-31 04:37:43 - db_utils - INFO - Oppdatert skjema for tunbroyting
2024-10-31 04:37:43 - db_utils - INFO - All database schemas verified and updated
2024-10-31 04:37:43 - db_utils - INFO - Oppdatert skjema for customer
2024-10-31 04:37:43 - db_utils - INFO - Oppdatert skjema for feedback
2024-10-31 04:37:43 - db_utils - INFO - Oppdatert skjema for login_history
2024-10-31 04:37:43 - db_utils - INFO - Oppdatert skjema for stroing
2024-10-31 04:37:43 - db_utils - INFO - Oppdatert skjema for tunbroyting
2024-10-31 04:37:43 - db_utils - INFO - All database schemas verified and updated
2024-10-31 04:37:43 - db_utils - INFO - Database already initialized. Skipping.
2024-10-31 04:37:43 - db_utils - INFO - Query executed successfully on login_history.db. Rows affected: -1
2024-10-31 04:37:43 - db_utils - INFO - login_history table structure is correct
2024-10-31 04:37:43 - customer_utils - INFO - Starting cabin user consistency check
2024-10-31 04:37:43 - utils - INFO - Attempting to load passwords from secrets
2024-10-31 04:37:43 - utils - INFO - Successfully loaded passwords. Number of entries: 94
2024-10-31 04:37:43 - customer_utils - INFO - Retrieved 94 passwords
2024-10-31 04:37:43 - customer_utils - INFO - Found 94 customers in database
2024-10-31 04:37:43 - customer_utils - INFO - Consistency check completed
2024-10-31 04:37:43 - customer_utils - INFO - Database connection closed
2024-10-31 04:37:43 - customer_utils - INFO - Validating customers and passwords
2024-10-31 04:37:43 - utils - INFO - Attempting to load passwords from secrets
2024-10-31 04:37:43 - utils - INFO - Successfully loaded passwords. Number of entries: 94
2024-10-31 04:37:43 - customer_utils - INFO - Customer and password validation complete
2024-10-31 04:37:43 - db_utils - INFO - Successfully created indexes for tunbroyting database
2024-10-31 04:37:43 - db_utils - INFO - Successfully created indexes for stroing database
2024-10-31 04:37:43 - db_utils - INFO - Successfully created indexes for feedback database
2024-10-31 04:37:43 - db_utils - INFO - Successfully created indexes for login_history database
2024-10-31 04:37:43 - db_utils - INFO - Successfully created indexes for customer database
2024-10-31 04:37:43 - db_utils - INFO - Database index creation completed
2024-10-31 04:37:43 - __main__ - INFO - Application initialization completed successfully
2024-10-31 04:37:43 - __main__ - INFO - Application initialization completed successfully
2024-10-31 04:37:43 - __main__ - INFO - Application setup complete
2024-10-31 04:37:43 - customer_utils - INFO - Successfully retrieved customer with ID: 999
2024-10-31 04:37:43 - alert_utils - INFO - Fetched 1 alerts. only_today=False, include_expired=False
2024-10-31 04:37:43 - tun_utils - WARNING - hent_bestillinger() is deprecated, use get_bookings() instead
2024-10-31 04:37:43 - tun_utils - INFO - Starting get_bookings with start_date=None, end_date=None
2024-10-31 04:37:43 - tun_utils - INFO - Successfully retrieved 2 bookings
2024-10-31 04:37:43 - __main__ - INFO - Application shutting down
2024-10-31 04:37:44 - __main__ - INFO - Added validate_user_input function to app.py
2024-10-31 04:37:44 - __main__ - INFO - Starting application initialization
2024-10-31 04:37:44 - db_utils - INFO - Starting detailed database operations debugging
2024-10-31 04:37:44 - db_utils - INFO - Debugging login_history database:
2024-10-31 04:37:44 - db_utils - INFO -   Database version: 0
2024-10-31 04:37:44 - db_utils - INFO -   Tables in login_history.db: ['login_history']
2024-10-31 04:37:44 - db_utils - INFO -   Structure of login_history table:
2024-10-31 04:37:44 - db_utils - INFO -     Column: id, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:37:44 - db_utils - INFO -     Column: login_time, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:37:44 - db_utils - INFO -     Column: success, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:37:44 - db_utils - INFO -   Indexes in login_history.db: ['idx_login_id', 'idx_login_time']
2024-10-31 04:37:44 - db_utils - INFO -   Row count in login_history: 438
2024-10-31 04:37:44 - db_utils - INFO -   Test query result: (1,)
2024-10-31 04:37:44 - db_utils - INFO - Debugging tunbroyting database:
2024-10-31 04:37:44 - db_utils - INFO -   Database version: 0
2024-10-31 04:37:44 - db_utils - INFO -   Tables in tunbroyting.db: ['tunbroyting_bestillinger']
2024-10-31 04:37:44 - db_utils - INFO -   Structure of tunbroyting_bestillinger table:
2024-10-31 04:37:44 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 04:37:44 - db_utils - INFO -     Column: bruker, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:37:44 - db_utils - INFO -     Column: ankomst_dato, Type: DATE, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:37:44 - db_utils - INFO -     Column: ankomst_tid, Type: TIME, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:37:44 - db_utils - INFO -     Column: avreise_dato, Type: DATE, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:37:44 - db_utils - INFO -     Column: avreise_tid, Type: TIME, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:37:44 - db_utils - INFO -     Column: abonnement_type, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:37:44 - db_utils - INFO -   Indexes in tunbroyting.db: ['idx_tunbroyting_bruker', 'idx_tunbroyting_ankomst_dato', 'idx_tunbroyting_avreise_dato', 'idx_tunbroyting_abonnement']
2024-10-31 04:37:44 - db_utils - INFO -   Row count in tunbroyting_bestillinger: 2
2024-10-31 04:37:44 - db_utils - INFO -   Test query result: (1,)
2024-10-31 04:37:44 - db_utils - INFO - Debugging stroing database:
2024-10-31 04:37:44 - db_utils - INFO -   Database version: 0
2024-10-31 04:37:44 - db_utils - INFO -   Tables in stroing.db: ['sqlite_sequence', 'stroing_bestillinger']
2024-10-31 04:37:44 - db_utils - INFO -   Structure of sqlite_sequence table:
2024-10-31 04:37:44 - db_utils - INFO -     Column: name, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:37:44 - db_utils - INFO -     Column: seq, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:37:44 - db_utils - INFO -   Structure of stroing_bestillinger table:
2024-10-31 04:37:44 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 04:37:44 - db_utils - INFO -     Column: bruker, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:37:44 - db_utils - INFO -     Column: bestillings_dato, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:37:44 - db_utils - INFO -     Column: onske_dato, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:37:44 - db_utils - INFO -   Indexes in stroing.db: ['idx_stroing_bruker', 'idx_stroing_onske_dato', 'idx_stroing_bestillings_dato']
2024-10-31 04:37:44 - db_utils - INFO -   Row count in sqlite_sequence: 1
2024-10-31 04:37:44 - db_utils - INFO -   Row count in stroing_bestillinger: 5
2024-10-31 04:37:44 - db_utils - INFO -   Test query result: (1,)
2024-10-31 04:37:44 - db_utils - INFO - Debugging feedback database:
2024-10-31 04:37:44 - db_utils - INFO -   Database version: 0
2024-10-31 04:37:44 - db_utils - INFO -   Tables in feedback.db: ['sqlite_sequence', 'feedback']
2024-10-31 04:37:44 - db_utils - INFO -   Structure of sqlite_sequence table:
2024-10-31 04:37:44 - db_utils - INFO -     Column: name, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:37:44 - db_utils - INFO -     Column: seq, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:37:44 - db_utils - INFO -   Structure of feedback table:
2024-10-31 04:37:44 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 04:37:44 - db_utils - INFO -     Column: type, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:37:44 - db_utils - INFO -     Column: datetime, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:37:44 - db_utils - INFO -     Column: comment, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:37:44 - db_utils - INFO -     Column: innsender, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:37:44 - db_utils - INFO -     Column: status, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:37:44 - db_utils - INFO -     Column: status_changed_by, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:37:44 - db_utils - INFO -     Column: status_changed_at, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:37:44 - db_utils - INFO -     Column: hidden, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:37:44 - db_utils - INFO -     Column: is_alert, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:37:44 - db_utils - INFO -     Column: display_on_weather, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:37:44 - db_utils - INFO -     Column: expiry_date, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:37:44 - db_utils - INFO -     Column: target_group, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:37:44 - db_utils - INFO -   Indexes in feedback.db: ['idx_feedback_datetime', 'idx_feedback_innsender', 'idx_feedback_status', 'idx_feedback_type']
2024-10-31 04:37:44 - db_utils - INFO -   Row count in sqlite_sequence: 1
2024-10-31 04:37:44 - db_utils - INFO -   Row count in feedback: 11
2024-10-31 04:37:44 - db_utils - INFO -   Test query result: (1,)
2024-10-31 04:37:44 - db_utils - INFO - Detailed database operations debugging completed
2024-10-31 04:37:44 - db_utils - INFO - Oppdatert skjema for customer
2024-10-31 04:37:44 - db_utils - INFO - Oppdatert skjema for feedback
2024-10-31 04:37:44 - db_utils - INFO - Oppdatert skjema for login_history
2024-10-31 04:37:44 - db_utils - INFO - Oppdatert skjema for stroing
2024-10-31 04:37:44 - db_utils - INFO - Oppdatert skjema for tunbroyting
2024-10-31 04:37:44 - db_utils - INFO - All database schemas verified and updated
2024-10-31 04:37:44 - db_utils - INFO - Oppdatert skjema for customer
2024-10-31 04:37:44 - db_utils - INFO - Oppdatert skjema for feedback
2024-10-31 04:37:44 - db_utils - INFO - Oppdatert skjema for login_history
2024-10-31 04:37:44 - db_utils - INFO - Oppdatert skjema for stroing
2024-10-31 04:37:44 - db_utils - INFO - Oppdatert skjema for tunbroyting
2024-10-31 04:37:44 - db_utils - INFO - All database schemas verified and updated
2024-10-31 04:37:44 - db_utils - INFO - Database already initialized. Skipping.
2024-10-31 04:37:44 - db_utils - INFO - Query executed successfully on login_history.db. Rows affected: -1
2024-10-31 04:37:44 - db_utils - INFO - login_history table structure is correct
2024-10-31 04:37:44 - customer_utils - INFO - Starting cabin user consistency check
2024-10-31 04:37:44 - utils - INFO - Attempting to load passwords from secrets
2024-10-31 04:37:44 - utils - INFO - Successfully loaded passwords. Number of entries: 94
2024-10-31 04:37:44 - customer_utils - INFO - Retrieved 94 passwords
2024-10-31 04:37:44 - customer_utils - INFO - Found 94 customers in database
2024-10-31 04:37:44 - customer_utils - INFO - Consistency check completed
2024-10-31 04:37:44 - customer_utils - INFO - Database connection closed
2024-10-31 04:37:44 - customer_utils - INFO - Validating customers and passwords
2024-10-31 04:37:44 - utils - INFO - Attempting to load passwords from secrets
2024-10-31 04:37:44 - utils - INFO - Successfully loaded passwords. Number of entries: 94
2024-10-31 04:37:44 - customer_utils - INFO - Customer and password validation complete
2024-10-31 04:37:44 - db_utils - INFO - Successfully created indexes for tunbroyting database
2024-10-31 04:37:44 - db_utils - INFO - Successfully created indexes for stroing database
2024-10-31 04:37:44 - db_utils - INFO - Successfully created indexes for feedback database
2024-10-31 04:37:44 - db_utils - INFO - Successfully created indexes for login_history database
2024-10-31 04:37:44 - db_utils - INFO - Successfully created indexes for customer database
2024-10-31 04:37:44 - db_utils - INFO - Database index creation completed
2024-10-31 04:37:44 - __main__ - INFO - Application initialization completed successfully
2024-10-31 04:37:44 - __main__ - INFO - Application initialization completed successfully
2024-10-31 04:37:44 - __main__ - INFO - Application setup complete
2024-10-31 04:37:44 - customer_utils - INFO - Successfully retrieved customer with ID: 999
2024-10-31 04:37:44 - weather_display_utils - ERROR - Uventet feil i display_weather_data: create_improved_graph() takes 1 positional argument but 2 were given
Traceback (most recent call last):
  File "/Users/tor.inge.jossang@aftenbladet.no/dev/gullingen/weather_display_utils.py", line 45, in display_weather_data
    fig = create_improved_graph(df, df.columns)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: create_improved_graph() takes 1 positional argument but 2 were given
2024-10-31 04:37:44 - __main__ - INFO - Application shutting down
2024-10-31 04:39:17 - __main__ - INFO - Added validate_user_input function to app.py
2024-10-31 04:39:17 - __main__ - INFO - Starting application initialization
2024-10-31 04:39:17 - db_utils - INFO - Starting detailed database operations debugging
2024-10-31 04:39:17 - db_utils - INFO - Debugging login_history database:
2024-10-31 04:39:17 - db_utils - INFO -   Database version: 0
2024-10-31 04:39:17 - db_utils - INFO -   Tables in login_history.db: ['login_history']
2024-10-31 04:39:17 - db_utils - INFO -   Structure of login_history table:
2024-10-31 04:39:17 - db_utils - INFO -     Column: id, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:39:17 - db_utils - INFO -     Column: login_time, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:39:17 - db_utils - INFO -     Column: success, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:39:17 - db_utils - INFO -   Indexes in login_history.db: ['idx_login_id', 'idx_login_time']
2024-10-31 04:39:17 - db_utils - INFO -   Row count in login_history: 438
2024-10-31 04:39:17 - db_utils - INFO -   Test query result: (1,)
2024-10-31 04:39:17 - db_utils - INFO - Debugging tunbroyting database:
2024-10-31 04:39:17 - db_utils - INFO -   Database version: 0
2024-10-31 04:39:17 - db_utils - INFO -   Tables in tunbroyting.db: ['tunbroyting_bestillinger']
2024-10-31 04:39:17 - db_utils - INFO -   Structure of tunbroyting_bestillinger table:
2024-10-31 04:39:17 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 04:39:17 - db_utils - INFO -     Column: bruker, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:39:17 - db_utils - INFO -     Column: ankomst_dato, Type: DATE, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:39:17 - db_utils - INFO -     Column: ankomst_tid, Type: TIME, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:39:17 - db_utils - INFO -     Column: avreise_dato, Type: DATE, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:39:17 - db_utils - INFO -     Column: avreise_tid, Type: TIME, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:39:17 - db_utils - INFO -     Column: abonnement_type, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:39:17 - db_utils - INFO -   Indexes in tunbroyting.db: ['idx_tunbroyting_bruker', 'idx_tunbroyting_ankomst_dato', 'idx_tunbroyting_avreise_dato', 'idx_tunbroyting_abonnement']
2024-10-31 04:39:17 - db_utils - INFO -   Row count in tunbroyting_bestillinger: 2
2024-10-31 04:39:17 - db_utils - INFO -   Test query result: (1,)
2024-10-31 04:39:17 - db_utils - INFO - Debugging stroing database:
2024-10-31 04:39:17 - db_utils - INFO -   Database version: 0
2024-10-31 04:39:17 - db_utils - INFO -   Tables in stroing.db: ['sqlite_sequence', 'stroing_bestillinger']
2024-10-31 04:39:17 - db_utils - INFO -   Structure of sqlite_sequence table:
2024-10-31 04:39:17 - db_utils - INFO -     Column: name, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:39:17 - db_utils - INFO -     Column: seq, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:39:17 - db_utils - INFO -   Structure of stroing_bestillinger table:
2024-10-31 04:39:17 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 04:39:17 - db_utils - INFO -     Column: bruker, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:39:17 - db_utils - INFO -     Column: bestillings_dato, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:39:17 - db_utils - INFO -     Column: onske_dato, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:39:17 - db_utils - INFO -   Indexes in stroing.db: ['idx_stroing_bruker', 'idx_stroing_onske_dato', 'idx_stroing_bestillings_dato']
2024-10-31 04:39:17 - db_utils - INFO -   Row count in sqlite_sequence: 1
2024-10-31 04:39:17 - db_utils - INFO -   Row count in stroing_bestillinger: 5
2024-10-31 04:39:17 - db_utils - INFO -   Test query result: (1,)
2024-10-31 04:39:17 - db_utils - INFO - Debugging feedback database:
2024-10-31 04:39:17 - db_utils - INFO -   Database version: 0
2024-10-31 04:39:17 - db_utils - INFO -   Tables in feedback.db: ['sqlite_sequence', 'feedback']
2024-10-31 04:39:17 - db_utils - INFO -   Structure of sqlite_sequence table:
2024-10-31 04:39:17 - db_utils - INFO -     Column: name, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:39:17 - db_utils - INFO -     Column: seq, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:39:17 - db_utils - INFO -   Structure of feedback table:
2024-10-31 04:39:17 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 04:39:17 - db_utils - INFO -     Column: type, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:39:17 - db_utils - INFO -     Column: datetime, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:39:17 - db_utils - INFO -     Column: comment, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:39:17 - db_utils - INFO -     Column: innsender, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:39:17 - db_utils - INFO -     Column: status, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:39:17 - db_utils - INFO -     Column: status_changed_by, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:39:17 - db_utils - INFO -     Column: status_changed_at, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:39:17 - db_utils - INFO -     Column: hidden, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:39:17 - db_utils - INFO -     Column: is_alert, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:39:17 - db_utils - INFO -     Column: display_on_weather, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:39:17 - db_utils - INFO -     Column: expiry_date, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:39:17 - db_utils - INFO -     Column: target_group, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:39:17 - db_utils - INFO -   Indexes in feedback.db: ['idx_feedback_datetime', 'idx_feedback_innsender', 'idx_feedback_status', 'idx_feedback_type']
2024-10-31 04:39:17 - db_utils - INFO -   Row count in sqlite_sequence: 1
2024-10-31 04:39:17 - db_utils - INFO -   Row count in feedback: 11
2024-10-31 04:39:17 - db_utils - INFO -   Test query result: (1,)
2024-10-31 04:39:17 - db_utils - INFO - Detailed database operations debugging completed
2024-10-31 04:39:17 - db_utils - INFO - Oppdatert skjema for customer
2024-10-31 04:39:17 - db_utils - INFO - Oppdatert skjema for feedback
2024-10-31 04:39:17 - db_utils - INFO - Oppdatert skjema for login_history
2024-10-31 04:39:17 - db_utils - INFO - Oppdatert skjema for stroing
2024-10-31 04:39:17 - db_utils - INFO - Oppdatert skjema for tunbroyting
2024-10-31 04:39:17 - db_utils - INFO - All database schemas verified and updated
2024-10-31 04:39:17 - db_utils - INFO - Oppdatert skjema for customer
2024-10-31 04:39:17 - db_utils - INFO - Oppdatert skjema for feedback
2024-10-31 04:39:17 - db_utils - INFO - Oppdatert skjema for login_history
2024-10-31 04:39:17 - db_utils - INFO - Oppdatert skjema for stroing
2024-10-31 04:39:17 - db_utils - INFO - Oppdatert skjema for tunbroyting
2024-10-31 04:39:17 - db_utils - INFO - All database schemas verified and updated
2024-10-31 04:39:17 - db_utils - INFO - Database login_history initialized, updated, and optimized
2024-10-31 04:39:17 - db_utils - INFO - Database tunbroyting initialized, updated, and optimized
2024-10-31 04:39:17 - db_utils - INFO - Database stroing initialized, updated, and optimized
2024-10-31 04:39:17 - db_utils - INFO - Database feedback initialized, updated, and optimized
2024-10-31 04:39:17 - db_utils - INFO - Database customer initialized, updated, and optimized
2024-10-31 04:39:17 - db_utils - INFO - Successfully created indexes for tunbroyting database
2024-10-31 04:39:17 - db_utils - INFO - Successfully created indexes for stroing database
2024-10-31 04:39:17 - db_utils - INFO - Successfully created indexes for feedback database
2024-10-31 04:39:17 - db_utils - INFO - Successfully created indexes for login_history database
2024-10-31 04:39:17 - db_utils - INFO - Successfully created indexes for customer database
2024-10-31 04:39:17 - db_utils - INFO - Database index creation completed
2024-10-31 04:39:17 - db_utils - INFO - Database indexes created
2024-10-31 04:39:17 - db_utils - INFO - Successfully verified connection to stroing.db
2024-10-31 04:39:17 - db_utils - INFO - Successfully verified connection to tunbroyting.db
2024-10-31 04:39:17 - db_utils - INFO - Successfully verified connection to feedback.db
2024-10-31 04:39:17 - db_utils - INFO - Successfully verified connection to login_history.db
2024-10-31 04:39:17 - db_utils - INFO - Successfully verified connection to customer.db
2024-10-31 04:39:17 - db_utils - INFO - Database connections verified
2024-10-31 04:39:17 - db_utils - INFO - All databases initialized, updated, and verified
2024-10-31 04:39:17 - db_utils - INFO - Query executed successfully on login_history.db. Rows affected: -1
2024-10-31 04:39:17 - db_utils - INFO - login_history table structure is correct
2024-10-31 04:39:17 - customer_utils - INFO - Starting cabin user consistency check
2024-10-31 04:39:17 - utils - INFO - Attempting to load passwords from secrets
2024-10-31 04:39:17 - utils - INFO - Successfully loaded passwords. Number of entries: 94
2024-10-31 04:39:17 - customer_utils - INFO - Retrieved 94 passwords
2024-10-31 04:39:17 - customer_utils - INFO - Found 94 customers in database
2024-10-31 04:39:17 - customer_utils - INFO - Consistency check completed
2024-10-31 04:39:17 - customer_utils - INFO - Database connection closed
2024-10-31 04:39:17 - customer_utils - INFO - Validating customers and passwords
2024-10-31 04:39:17 - utils - INFO - Attempting to load passwords from secrets
2024-10-31 04:39:17 - utils - INFO - Successfully loaded passwords. Number of entries: 94
2024-10-31 04:39:17 - customer_utils - INFO - Customer and password validation complete
2024-10-31 04:39:17 - db_utils - INFO - Successfully created indexes for tunbroyting database
2024-10-31 04:39:17 - db_utils - INFO - Successfully created indexes for stroing database
2024-10-31 04:39:17 - db_utils - INFO - Successfully created indexes for feedback database
2024-10-31 04:39:17 - db_utils - INFO - Successfully created indexes for login_history database
2024-10-31 04:39:17 - db_utils - INFO - Successfully created indexes for customer database
2024-10-31 04:39:17 - db_utils - INFO - Database index creation completed
2024-10-31 04:39:17 - __main__ - INFO - Application initialization completed successfully
2024-10-31 04:39:17 - __main__ - INFO - Application initialization completed successfully
2024-10-31 04:39:17 - __main__ - INFO - Application setup complete
2024-10-31 04:39:17 - __main__ - INFO - Application shutting down
2024-10-31 04:39:19 - __main__ - INFO - Added validate_user_input function to app.py
2024-10-31 04:39:19 - __main__ - INFO - Starting application initialization
2024-10-31 04:39:19 - db_utils - INFO - Starting detailed database operations debugging
2024-10-31 04:39:19 - db_utils - INFO - Debugging login_history database:
2024-10-31 04:39:19 - db_utils - INFO -   Database version: 0
2024-10-31 04:39:19 - db_utils - INFO -   Tables in login_history.db: ['login_history']
2024-10-31 04:39:19 - db_utils - INFO -   Structure of login_history table:
2024-10-31 04:39:19 - db_utils - INFO -     Column: id, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:39:19 - db_utils - INFO -     Column: login_time, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:39:19 - db_utils - INFO -     Column: success, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:39:19 - db_utils - INFO -   Indexes in login_history.db: ['idx_login_id', 'idx_login_time']
2024-10-31 04:39:19 - db_utils - INFO -   Row count in login_history: 438
2024-10-31 04:39:19 - db_utils - INFO -   Test query result: (1,)
2024-10-31 04:39:19 - db_utils - INFO - Debugging tunbroyting database:
2024-10-31 04:39:19 - db_utils - INFO -   Database version: 0
2024-10-31 04:39:19 - db_utils - INFO -   Tables in tunbroyting.db: ['tunbroyting_bestillinger']
2024-10-31 04:39:19 - db_utils - INFO -   Structure of tunbroyting_bestillinger table:
2024-10-31 04:39:19 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 04:39:19 - db_utils - INFO -     Column: bruker, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:39:19 - db_utils - INFO -     Column: ankomst_dato, Type: DATE, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:39:19 - db_utils - INFO -     Column: ankomst_tid, Type: TIME, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:39:19 - db_utils - INFO -     Column: avreise_dato, Type: DATE, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:39:19 - db_utils - INFO -     Column: avreise_tid, Type: TIME, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:39:19 - db_utils - INFO -     Column: abonnement_type, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:39:19 - db_utils - INFO -   Indexes in tunbroyting.db: ['idx_tunbroyting_bruker', 'idx_tunbroyting_ankomst_dato', 'idx_tunbroyting_avreise_dato', 'idx_tunbroyting_abonnement']
2024-10-31 04:39:19 - db_utils - INFO -   Row count in tunbroyting_bestillinger: 2
2024-10-31 04:39:19 - db_utils - INFO -   Test query result: (1,)
2024-10-31 04:39:19 - db_utils - INFO - Debugging stroing database:
2024-10-31 04:39:19 - db_utils - INFO -   Database version: 0
2024-10-31 04:39:19 - db_utils - INFO -   Tables in stroing.db: ['sqlite_sequence', 'stroing_bestillinger']
2024-10-31 04:39:19 - db_utils - INFO -   Structure of sqlite_sequence table:
2024-10-31 04:39:19 - db_utils - INFO -     Column: name, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:39:19 - db_utils - INFO -     Column: seq, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:39:19 - db_utils - INFO -   Structure of stroing_bestillinger table:
2024-10-31 04:39:19 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 04:39:19 - db_utils - INFO -     Column: bruker, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:39:19 - db_utils - INFO -     Column: bestillings_dato, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:39:19 - db_utils - INFO -     Column: onske_dato, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:39:19 - db_utils - INFO -   Indexes in stroing.db: ['idx_stroing_bruker', 'idx_stroing_onske_dato', 'idx_stroing_bestillings_dato']
2024-10-31 04:39:19 - db_utils - INFO -   Row count in sqlite_sequence: 1
2024-10-31 04:39:19 - db_utils - INFO -   Row count in stroing_bestillinger: 5
2024-10-31 04:39:19 - db_utils - INFO -   Test query result: (1,)
2024-10-31 04:39:19 - db_utils - INFO - Debugging feedback database:
2024-10-31 04:39:19 - db_utils - INFO -   Database version: 0
2024-10-31 04:39:19 - db_utils - INFO -   Tables in feedback.db: ['sqlite_sequence', 'feedback']
2024-10-31 04:39:19 - db_utils - INFO -   Structure of sqlite_sequence table:
2024-10-31 04:39:19 - db_utils - INFO -     Column: name, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:39:19 - db_utils - INFO -     Column: seq, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:39:19 - db_utils - INFO -   Structure of feedback table:
2024-10-31 04:39:19 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 04:39:19 - db_utils - INFO -     Column: type, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:39:19 - db_utils - INFO -     Column: datetime, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:39:19 - db_utils - INFO -     Column: comment, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:39:19 - db_utils - INFO -     Column: innsender, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:39:19 - db_utils - INFO -     Column: status, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:39:19 - db_utils - INFO -     Column: status_changed_by, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:39:19 - db_utils - INFO -     Column: status_changed_at, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:39:19 - db_utils - INFO -     Column: hidden, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:39:19 - db_utils - INFO -     Column: is_alert, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:39:19 - db_utils - INFO -     Column: display_on_weather, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:39:19 - db_utils - INFO -     Column: expiry_date, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:39:19 - db_utils - INFO -     Column: target_group, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:39:19 - db_utils - INFO -   Indexes in feedback.db: ['idx_feedback_datetime', 'idx_feedback_innsender', 'idx_feedback_status', 'idx_feedback_type']
2024-10-31 04:39:19 - db_utils - INFO -   Row count in sqlite_sequence: 1
2024-10-31 04:39:19 - db_utils - INFO -   Row count in feedback: 11
2024-10-31 04:39:19 - db_utils - INFO -   Test query result: (1,)
2024-10-31 04:39:19 - db_utils - INFO - Detailed database operations debugging completed
2024-10-31 04:39:19 - db_utils - INFO - Oppdatert skjema for customer
2024-10-31 04:39:19 - db_utils - INFO - Oppdatert skjema for feedback
2024-10-31 04:39:19 - db_utils - INFO - Oppdatert skjema for login_history
2024-10-31 04:39:19 - db_utils - INFO - Oppdatert skjema for stroing
2024-10-31 04:39:19 - db_utils - INFO - Oppdatert skjema for tunbroyting
2024-10-31 04:39:19 - db_utils - INFO - All database schemas verified and updated
2024-10-31 04:39:19 - db_utils - INFO - Oppdatert skjema for customer
2024-10-31 04:39:19 - db_utils - INFO - Oppdatert skjema for feedback
2024-10-31 04:39:19 - db_utils - INFO - Oppdatert skjema for login_history
2024-10-31 04:39:19 - db_utils - INFO - Oppdatert skjema for stroing
2024-10-31 04:39:19 - db_utils - INFO - Oppdatert skjema for tunbroyting
2024-10-31 04:39:19 - db_utils - INFO - All database schemas verified and updated
2024-10-31 04:39:19 - db_utils - INFO - Database already initialized. Skipping.
2024-10-31 04:39:19 - db_utils - INFO - Query executed successfully on login_history.db. Rows affected: -1
2024-10-31 04:39:19 - db_utils - INFO - login_history table structure is correct
2024-10-31 04:39:19 - customer_utils - INFO - Starting cabin user consistency check
2024-10-31 04:39:19 - utils - INFO - Attempting to load passwords from secrets
2024-10-31 04:39:19 - utils - INFO - Successfully loaded passwords. Number of entries: 94
2024-10-31 04:39:19 - customer_utils - INFO - Retrieved 94 passwords
2024-10-31 04:39:19 - customer_utils - INFO - Found 94 customers in database
2024-10-31 04:39:19 - customer_utils - INFO - Consistency check completed
2024-10-31 04:39:19 - customer_utils - INFO - Database connection closed
2024-10-31 04:39:19 - customer_utils - INFO - Validating customers and passwords
2024-10-31 04:39:19 - utils - INFO - Attempting to load passwords from secrets
2024-10-31 04:39:19 - utils - INFO - Successfully loaded passwords. Number of entries: 94
2024-10-31 04:39:19 - customer_utils - INFO - Customer and password validation complete
2024-10-31 04:39:19 - db_utils - INFO - Successfully created indexes for tunbroyting database
2024-10-31 04:39:19 - db_utils - INFO - Successfully created indexes for stroing database
2024-10-31 04:39:19 - db_utils - INFO - Successfully created indexes for feedback database
2024-10-31 04:39:19 - db_utils - INFO - Successfully created indexes for login_history database
2024-10-31 04:39:19 - db_utils - INFO - Successfully created indexes for customer database
2024-10-31 04:39:19 - db_utils - INFO - Database index creation completed
2024-10-31 04:39:19 - __main__ - INFO - Application initialization completed successfully
2024-10-31 04:39:19 - __main__ - INFO - Application initialization completed successfully
2024-10-31 04:39:19 - __main__ - INFO - Application setup complete
2024-10-31 04:39:19 - auth_utils - INFO - Login attempt for ID: 999
2024-10-31 04:39:19 - db_utils - INFO - DATABASE_PATH: /Users/tor.inge.jossang@aftenbladet.no/dev/gullingen
2024-10-31 04:39:19 - db_utils - INFO - Full database path: /Users/tor.inge.jossang@aftenbladet.no/dev/gullingen/login_history.db
2024-10-31 04:39:19 - db_utils - INFO - Attempting to create database engine...
2024-10-31 04:39:19 - db_utils - INFO - Database engine created successfully for login_history.db
2024-10-31 04:39:19 - auth_utils - INFO - Rate limit check passed for user 999
2024-10-31 04:39:19 - auth_utils - INFO - User 999 authenticated successfully
2024-10-31 04:39:19 - customer_utils - INFO - Successfully retrieved customer with ID: 999
2024-10-31 04:39:19 - db_utils - INFO - Database file /Users/tor.inge.jossang@aftenbladet.no/dev/gullingen/login_history.db exists.
2024-10-31 04:39:19 - db_utils - INFO - Query executed successfully on login_history.db. Rows affected: 1
2024-10-31 04:39:19 - auth_utils - INFO - Successful login for ID: 999
2024-10-31 04:39:19 - auth_utils - INFO - Successful login and logging for ID: 999
2024-10-31 04:39:19 - db_utils - INFO - DATABASE_PATH: /Users/tor.inge.jossang@aftenbladet.no/dev/gullingen
2024-10-31 04:39:19 - db_utils - INFO - Full database path: /Users/tor.inge.jossang@aftenbladet.no/dev/gullingen/login_history.db
2024-10-31 04:39:19 - db_utils - INFO - Attempting to create database engine...
2024-10-31 04:39:19 - db_utils - INFO - Database engine created successfully for login_history.db
2024-10-31 04:39:19 - auth_utils - INFO - Rate limit reset for user 999
2024-10-31 04:39:19 - __main__ - INFO - Application shutting down
2024-10-31 04:39:19 - __main__ - INFO - Added validate_user_input function to app.py
2024-10-31 04:39:19 - __main__ - INFO - Starting application initialization
2024-10-31 04:39:19 - db_utils - INFO - Starting detailed database operations debugging
2024-10-31 04:39:19 - db_utils - INFO - Debugging login_history database:
2024-10-31 04:39:19 - db_utils - INFO -   Database version: 0
2024-10-31 04:39:19 - db_utils - INFO -   Tables in login_history.db: ['login_history']
2024-10-31 04:39:19 - db_utils - INFO -   Structure of login_history table:
2024-10-31 04:39:19 - db_utils - INFO -     Column: id, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:39:19 - db_utils - INFO -     Column: login_time, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:39:19 - db_utils - INFO -     Column: success, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:39:19 - db_utils - INFO -   Indexes in login_history.db: ['idx_login_id', 'idx_login_time']
2024-10-31 04:39:19 - db_utils - INFO -   Row count in login_history: 439
2024-10-31 04:39:19 - db_utils - INFO -   Test query result: (1,)
2024-10-31 04:39:19 - db_utils - INFO - Debugging tunbroyting database:
2024-10-31 04:39:19 - db_utils - INFO -   Database version: 0
2024-10-31 04:39:19 - db_utils - INFO -   Tables in tunbroyting.db: ['tunbroyting_bestillinger']
2024-10-31 04:39:19 - db_utils - INFO -   Structure of tunbroyting_bestillinger table:
2024-10-31 04:39:19 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 04:39:19 - db_utils - INFO -     Column: bruker, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:39:19 - db_utils - INFO -     Column: ankomst_dato, Type: DATE, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:39:19 - db_utils - INFO -     Column: ankomst_tid, Type: TIME, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:39:19 - db_utils - INFO -     Column: avreise_dato, Type: DATE, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:39:19 - db_utils - INFO -     Column: avreise_tid, Type: TIME, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:39:19 - db_utils - INFO -     Column: abonnement_type, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:39:19 - db_utils - INFO -   Indexes in tunbroyting.db: ['idx_tunbroyting_bruker', 'idx_tunbroyting_ankomst_dato', 'idx_tunbroyting_avreise_dato', 'idx_tunbroyting_abonnement']
2024-10-31 04:39:19 - db_utils - INFO -   Row count in tunbroyting_bestillinger: 2
2024-10-31 04:39:19 - db_utils - INFO -   Test query result: (1,)
2024-10-31 04:39:19 - db_utils - INFO - Debugging stroing database:
2024-10-31 04:39:19 - db_utils - INFO -   Database version: 0
2024-10-31 04:39:19 - db_utils - INFO -   Tables in stroing.db: ['sqlite_sequence', 'stroing_bestillinger']
2024-10-31 04:39:19 - db_utils - INFO -   Structure of sqlite_sequence table:
2024-10-31 04:39:19 - db_utils - INFO -     Column: name, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:39:19 - db_utils - INFO -     Column: seq, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:39:19 - db_utils - INFO -   Structure of stroing_bestillinger table:
2024-10-31 04:39:19 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 04:39:19 - db_utils - INFO -     Column: bruker, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:39:19 - db_utils - INFO -     Column: bestillings_dato, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:39:19 - db_utils - INFO -     Column: onske_dato, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:39:19 - db_utils - INFO -   Indexes in stroing.db: ['idx_stroing_bruker', 'idx_stroing_onske_dato', 'idx_stroing_bestillings_dato']
2024-10-31 04:39:19 - db_utils - INFO -   Row count in sqlite_sequence: 1
2024-10-31 04:39:19 - db_utils - INFO -   Row count in stroing_bestillinger: 5
2024-10-31 04:39:19 - db_utils - INFO -   Test query result: (1,)
2024-10-31 04:39:19 - db_utils - INFO - Debugging feedback database:
2024-10-31 04:39:19 - db_utils - INFO -   Database version: 0
2024-10-31 04:39:19 - db_utils - INFO -   Tables in feedback.db: ['sqlite_sequence', 'feedback']
2024-10-31 04:39:19 - db_utils - INFO -   Structure of sqlite_sequence table:
2024-10-31 04:39:19 - db_utils - INFO -     Column: name, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:39:19 - db_utils - INFO -     Column: seq, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:39:19 - db_utils - INFO -   Structure of feedback table:
2024-10-31 04:39:19 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 04:39:19 - db_utils - INFO -     Column: type, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:39:19 - db_utils - INFO -     Column: datetime, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:39:19 - db_utils - INFO -     Column: comment, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:39:19 - db_utils - INFO -     Column: innsender, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:39:19 - db_utils - INFO -     Column: status, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:39:19 - db_utils - INFO -     Column: status_changed_by, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:39:19 - db_utils - INFO -     Column: status_changed_at, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:39:19 - db_utils - INFO -     Column: hidden, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:39:19 - db_utils - INFO -     Column: is_alert, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:39:19 - db_utils - INFO -     Column: display_on_weather, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:39:19 - db_utils - INFO -     Column: expiry_date, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:39:19 - db_utils - INFO -     Column: target_group, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:39:19 - db_utils - INFO -   Indexes in feedback.db: ['idx_feedback_datetime', 'idx_feedback_innsender', 'idx_feedback_status', 'idx_feedback_type']
2024-10-31 04:39:19 - db_utils - INFO -   Row count in sqlite_sequence: 1
2024-10-31 04:39:19 - db_utils - INFO -   Row count in feedback: 11
2024-10-31 04:39:19 - db_utils - INFO -   Test query result: (1,)
2024-10-31 04:39:19 - db_utils - INFO - Detailed database operations debugging completed
2024-10-31 04:39:19 - db_utils - INFO - Oppdatert skjema for customer
2024-10-31 04:39:19 - db_utils - INFO - Oppdatert skjema for feedback
2024-10-31 04:39:19 - db_utils - INFO - Oppdatert skjema for login_history
2024-10-31 04:39:19 - db_utils - INFO - Oppdatert skjema for stroing
2024-10-31 04:39:19 - db_utils - INFO - Oppdatert skjema for tunbroyting
2024-10-31 04:39:19 - db_utils - INFO - All database schemas verified and updated
2024-10-31 04:39:19 - db_utils - INFO - Oppdatert skjema for customer
2024-10-31 04:39:19 - db_utils - INFO - Oppdatert skjema for feedback
2024-10-31 04:39:19 - db_utils - INFO - Oppdatert skjema for login_history
2024-10-31 04:39:19 - db_utils - INFO - Oppdatert skjema for stroing
2024-10-31 04:39:19 - db_utils - INFO - Oppdatert skjema for tunbroyting
2024-10-31 04:39:19 - db_utils - INFO - All database schemas verified and updated
2024-10-31 04:39:19 - db_utils - INFO - Database already initialized. Skipping.
2024-10-31 04:39:19 - db_utils - INFO - Query executed successfully on login_history.db. Rows affected: -1
2024-10-31 04:39:19 - db_utils - INFO - login_history table structure is correct
2024-10-31 04:39:19 - customer_utils - INFO - Starting cabin user consistency check
2024-10-31 04:39:19 - utils - INFO - Attempting to load passwords from secrets
2024-10-31 04:39:19 - utils - INFO - Successfully loaded passwords. Number of entries: 94
2024-10-31 04:39:19 - customer_utils - INFO - Retrieved 94 passwords
2024-10-31 04:39:19 - customer_utils - INFO - Found 94 customers in database
2024-10-31 04:39:19 - customer_utils - INFO - Consistency check completed
2024-10-31 04:39:19 - customer_utils - INFO - Database connection closed
2024-10-31 04:39:19 - customer_utils - INFO - Validating customers and passwords
2024-10-31 04:39:19 - utils - INFO - Attempting to load passwords from secrets
2024-10-31 04:39:19 - utils - INFO - Successfully loaded passwords. Number of entries: 94
2024-10-31 04:39:19 - customer_utils - INFO - Customer and password validation complete
2024-10-31 04:39:19 - db_utils - INFO - Successfully created indexes for tunbroyting database
2024-10-31 04:39:19 - db_utils - INFO - Successfully created indexes for stroing database
2024-10-31 04:39:19 - db_utils - INFO - Successfully created indexes for feedback database
2024-10-31 04:39:19 - db_utils - INFO - Successfully created indexes for login_history database
2024-10-31 04:39:19 - db_utils - INFO - Successfully created indexes for customer database
2024-10-31 04:39:19 - db_utils - INFO - Database index creation completed
2024-10-31 04:39:19 - __main__ - INFO - Application initialization completed successfully
2024-10-31 04:39:19 - __main__ - INFO - Application initialization completed successfully
2024-10-31 04:39:19 - __main__ - INFO - Application setup complete
2024-10-31 04:39:19 - customer_utils - INFO - Successfully retrieved customer with ID: 999
2024-10-31 04:39:19 - alert_utils - INFO - Fetched 1 alerts. only_today=False, include_expired=False
2024-10-31 04:39:19 - tun_utils - WARNING - hent_bestillinger() is deprecated, use get_bookings() instead
2024-10-31 04:39:19 - tun_utils - INFO - Starting get_bookings with start_date=None, end_date=None
2024-10-31 04:39:19 - tun_utils - INFO - Successfully retrieved 2 bookings
2024-10-31 04:39:19 - __main__ - INFO - Application shutting down
2024-10-31 04:39:21 - __main__ - INFO - Added validate_user_input function to app.py
2024-10-31 04:39:21 - __main__ - INFO - Starting application initialization
2024-10-31 04:39:21 - db_utils - INFO - Starting detailed database operations debugging
2024-10-31 04:39:21 - db_utils - INFO - Debugging login_history database:
2024-10-31 04:39:21 - db_utils - INFO -   Database version: 0
2024-10-31 04:39:21 - db_utils - INFO -   Tables in login_history.db: ['login_history']
2024-10-31 04:39:21 - db_utils - INFO -   Structure of login_history table:
2024-10-31 04:39:21 - db_utils - INFO -     Column: id, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:39:21 - db_utils - INFO -     Column: login_time, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:39:21 - db_utils - INFO -     Column: success, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:39:21 - db_utils - INFO -   Indexes in login_history.db: ['idx_login_id', 'idx_login_time']
2024-10-31 04:39:21 - db_utils - INFO -   Row count in login_history: 439
2024-10-31 04:39:21 - db_utils - INFO -   Test query result: (1,)
2024-10-31 04:39:21 - db_utils - INFO - Debugging tunbroyting database:
2024-10-31 04:39:21 - db_utils - INFO -   Database version: 0
2024-10-31 04:39:21 - db_utils - INFO -   Tables in tunbroyting.db: ['tunbroyting_bestillinger']
2024-10-31 04:39:21 - db_utils - INFO -   Structure of tunbroyting_bestillinger table:
2024-10-31 04:39:21 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 04:39:21 - db_utils - INFO -     Column: bruker, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:39:21 - db_utils - INFO -     Column: ankomst_dato, Type: DATE, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:39:21 - db_utils - INFO -     Column: ankomst_tid, Type: TIME, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:39:21 - db_utils - INFO -     Column: avreise_dato, Type: DATE, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:39:21 - db_utils - INFO -     Column: avreise_tid, Type: TIME, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:39:21 - db_utils - INFO -     Column: abonnement_type, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:39:21 - db_utils - INFO -   Indexes in tunbroyting.db: ['idx_tunbroyting_bruker', 'idx_tunbroyting_ankomst_dato', 'idx_tunbroyting_avreise_dato', 'idx_tunbroyting_abonnement']
2024-10-31 04:39:21 - db_utils - INFO -   Row count in tunbroyting_bestillinger: 2
2024-10-31 04:39:21 - db_utils - INFO -   Test query result: (1,)
2024-10-31 04:39:21 - db_utils - INFO - Debugging stroing database:
2024-10-31 04:39:21 - db_utils - INFO -   Database version: 0
2024-10-31 04:39:21 - db_utils - INFO -   Tables in stroing.db: ['sqlite_sequence', 'stroing_bestillinger']
2024-10-31 04:39:21 - db_utils - INFO -   Structure of sqlite_sequence table:
2024-10-31 04:39:21 - db_utils - INFO -     Column: name, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:39:21 - db_utils - INFO -     Column: seq, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:39:21 - db_utils - INFO -   Structure of stroing_bestillinger table:
2024-10-31 04:39:21 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 04:39:21 - db_utils - INFO -     Column: bruker, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:39:21 - db_utils - INFO -     Column: bestillings_dato, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:39:21 - db_utils - INFO -     Column: onske_dato, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:39:21 - db_utils - INFO -   Indexes in stroing.db: ['idx_stroing_bruker', 'idx_stroing_onske_dato', 'idx_stroing_bestillings_dato']
2024-10-31 04:39:21 - db_utils - INFO -   Row count in sqlite_sequence: 1
2024-10-31 04:39:21 - db_utils - INFO -   Row count in stroing_bestillinger: 5
2024-10-31 04:39:21 - db_utils - INFO -   Test query result: (1,)
2024-10-31 04:39:21 - db_utils - INFO - Debugging feedback database:
2024-10-31 04:39:21 - db_utils - INFO -   Database version: 0
2024-10-31 04:39:21 - db_utils - INFO -   Tables in feedback.db: ['sqlite_sequence', 'feedback']
2024-10-31 04:39:21 - db_utils - INFO -   Structure of sqlite_sequence table:
2024-10-31 04:39:21 - db_utils - INFO -     Column: name, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:39:21 - db_utils - INFO -     Column: seq, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:39:21 - db_utils - INFO -   Structure of feedback table:
2024-10-31 04:39:21 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 04:39:21 - db_utils - INFO -     Column: type, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:39:21 - db_utils - INFO -     Column: datetime, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:39:21 - db_utils - INFO -     Column: comment, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:39:21 - db_utils - INFO -     Column: innsender, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:39:21 - db_utils - INFO -     Column: status, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:39:21 - db_utils - INFO -     Column: status_changed_by, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:39:21 - db_utils - INFO -     Column: status_changed_at, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:39:21 - db_utils - INFO -     Column: hidden, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:39:21 - db_utils - INFO -     Column: is_alert, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:39:21 - db_utils - INFO -     Column: display_on_weather, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:39:21 - db_utils - INFO -     Column: expiry_date, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:39:21 - db_utils - INFO -     Column: target_group, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:39:21 - db_utils - INFO -   Indexes in feedback.db: ['idx_feedback_datetime', 'idx_feedback_innsender', 'idx_feedback_status', 'idx_feedback_type']
2024-10-31 04:39:21 - db_utils - INFO -   Row count in sqlite_sequence: 1
2024-10-31 04:39:21 - db_utils - INFO -   Row count in feedback: 11
2024-10-31 04:39:21 - db_utils - INFO -   Test query result: (1,)
2024-10-31 04:39:21 - db_utils - INFO - Detailed database operations debugging completed
2024-10-31 04:39:21 - db_utils - INFO - Oppdatert skjema for customer
2024-10-31 04:39:21 - db_utils - INFO - Oppdatert skjema for feedback
2024-10-31 04:39:21 - db_utils - INFO - Oppdatert skjema for login_history
2024-10-31 04:39:21 - db_utils - INFO - Oppdatert skjema for stroing
2024-10-31 04:39:21 - db_utils - INFO - Oppdatert skjema for tunbroyting
2024-10-31 04:39:21 - db_utils - INFO - All database schemas verified and updated
2024-10-31 04:39:21 - db_utils - INFO - Oppdatert skjema for customer
2024-10-31 04:39:21 - db_utils - INFO - Oppdatert skjema for feedback
2024-10-31 04:39:21 - db_utils - INFO - Oppdatert skjema for login_history
2024-10-31 04:39:21 - db_utils - INFO - Oppdatert skjema for stroing
2024-10-31 04:39:21 - db_utils - INFO - Oppdatert skjema for tunbroyting
2024-10-31 04:39:21 - db_utils - INFO - All database schemas verified and updated
2024-10-31 04:39:21 - db_utils - INFO - Database already initialized. Skipping.
2024-10-31 04:39:21 - db_utils - INFO - Query executed successfully on login_history.db. Rows affected: -1
2024-10-31 04:39:21 - db_utils - INFO - login_history table structure is correct
2024-10-31 04:39:21 - customer_utils - INFO - Starting cabin user consistency check
2024-10-31 04:39:21 - utils - INFO - Attempting to load passwords from secrets
2024-10-31 04:39:21 - utils - INFO - Successfully loaded passwords. Number of entries: 94
2024-10-31 04:39:21 - customer_utils - INFO - Retrieved 94 passwords
2024-10-31 04:39:21 - customer_utils - INFO - Found 94 customers in database
2024-10-31 04:39:21 - customer_utils - INFO - Consistency check completed
2024-10-31 04:39:21 - customer_utils - INFO - Database connection closed
2024-10-31 04:39:21 - customer_utils - INFO - Validating customers and passwords
2024-10-31 04:39:21 - utils - INFO - Attempting to load passwords from secrets
2024-10-31 04:39:21 - utils - INFO - Successfully loaded passwords. Number of entries: 94
2024-10-31 04:39:21 - customer_utils - INFO - Customer and password validation complete
2024-10-31 04:39:21 - db_utils - INFO - Successfully created indexes for tunbroyting database
2024-10-31 04:39:21 - db_utils - INFO - Successfully created indexes for stroing database
2024-10-31 04:39:21 - db_utils - INFO - Successfully created indexes for feedback database
2024-10-31 04:39:21 - db_utils - INFO - Successfully created indexes for login_history database
2024-10-31 04:39:21 - db_utils - INFO - Successfully created indexes for customer database
2024-10-31 04:39:21 - db_utils - INFO - Database index creation completed
2024-10-31 04:39:21 - __main__ - INFO - Application initialization completed successfully
2024-10-31 04:39:21 - __main__ - INFO - Application initialization completed successfully
2024-10-31 04:39:21 - __main__ - INFO - Application setup complete
2024-10-31 04:39:21 - customer_utils - INFO - Successfully retrieved customer with ID: 999
2024-10-31 04:39:22 - weather_display_utils - ERROR - Uventet feil i display_weather_data: 'snow_precipitation'
Traceback (most recent call last):
  File "/Users/tor.inge.jossang@aftenbladet.no/dev/gullingen/new_clean_env/lib/python3.12/site-packages/pandas/core/indexes/base.py", line 3805, in get_loc
    return self._engine.get_loc(casted_key)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "index.pyx", line 167, in pandas._libs.index.IndexEngine.get_loc
  File "index.pyx", line 196, in pandas._libs.index.IndexEngine.get_loc
  File "pandas/_libs/hashtable_class_helper.pxi", line 7081, in pandas._libs.hashtable.PyObjectHashTable.get_item
  File "pandas/_libs/hashtable_class_helper.pxi", line 7089, in pandas._libs.hashtable.PyObjectHashTable.get_item
KeyError: 'snow_precipitation'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/tor.inge.jossang@aftenbladet.no/dev/gullingen/weather_display_utils.py", line 45, in display_weather_data
    fig = create_improved_graph(df)
          ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/tor.inge.jossang@aftenbladet.no/dev/gullingen/weather_display_utils.py", line 94, in create_improved_graph
    "data": df["snow_precipitation"],
            ~~^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/tor.inge.jossang@aftenbladet.no/dev/gullingen/new_clean_env/lib/python3.12/site-packages/pandas/core/frame.py", line 4102, in __getitem__
    indexer = self.columns.get_loc(key)
              ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/tor.inge.jossang@aftenbladet.no/dev/gullingen/new_clean_env/lib/python3.12/site-packages/pandas/core/indexes/base.py", line 3812, in get_loc
    raise KeyError(key) from err
KeyError: 'snow_precipitation'
2024-10-31 04:39:22 - __main__ - INFO - Application shutting down
2024-10-31 04:41:08 - __main__ - INFO - Added validate_user_input function to app.py
2024-10-31 04:41:08 - __main__ - INFO - Starting application initialization
2024-10-31 04:41:08 - db_utils - INFO - Starting detailed database operations debugging
2024-10-31 04:41:08 - db_utils - INFO - Debugging login_history database:
2024-10-31 04:41:08 - db_utils - INFO -   Database version: 0
2024-10-31 04:41:08 - db_utils - INFO -   Tables in login_history.db: ['login_history']
2024-10-31 04:41:08 - db_utils - INFO -   Structure of login_history table:
2024-10-31 04:41:08 - db_utils - INFO -     Column: id, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:41:08 - db_utils - INFO -     Column: login_time, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:41:08 - db_utils - INFO -     Column: success, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:41:08 - db_utils - INFO -   Indexes in login_history.db: ['idx_login_id', 'idx_login_time']
2024-10-31 04:41:08 - db_utils - INFO -   Row count in login_history: 439
2024-10-31 04:41:08 - db_utils - INFO -   Test query result: (1,)
2024-10-31 04:41:08 - db_utils - INFO - Debugging tunbroyting database:
2024-10-31 04:41:08 - db_utils - INFO -   Database version: 0
2024-10-31 04:41:08 - db_utils - INFO -   Tables in tunbroyting.db: ['tunbroyting_bestillinger']
2024-10-31 04:41:08 - db_utils - INFO -   Structure of tunbroyting_bestillinger table:
2024-10-31 04:41:08 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 04:41:08 - db_utils - INFO -     Column: bruker, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:41:08 - db_utils - INFO -     Column: ankomst_dato, Type: DATE, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:41:08 - db_utils - INFO -     Column: ankomst_tid, Type: TIME, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:41:08 - db_utils - INFO -     Column: avreise_dato, Type: DATE, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:41:08 - db_utils - INFO -     Column: avreise_tid, Type: TIME, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:41:08 - db_utils - INFO -     Column: abonnement_type, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:41:08 - db_utils - INFO -   Indexes in tunbroyting.db: ['idx_tunbroyting_bruker', 'idx_tunbroyting_ankomst_dato', 'idx_tunbroyting_avreise_dato', 'idx_tunbroyting_abonnement']
2024-10-31 04:41:08 - db_utils - INFO -   Row count in tunbroyting_bestillinger: 2
2024-10-31 04:41:08 - db_utils - INFO -   Test query result: (1,)
2024-10-31 04:41:08 - db_utils - INFO - Debugging stroing database:
2024-10-31 04:41:08 - db_utils - INFO -   Database version: 0
2024-10-31 04:41:08 - db_utils - INFO -   Tables in stroing.db: ['sqlite_sequence', 'stroing_bestillinger']
2024-10-31 04:41:08 - db_utils - INFO -   Structure of sqlite_sequence table:
2024-10-31 04:41:08 - db_utils - INFO -     Column: name, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:41:08 - db_utils - INFO -     Column: seq, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:41:08 - db_utils - INFO -   Structure of stroing_bestillinger table:
2024-10-31 04:41:08 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 04:41:08 - db_utils - INFO -     Column: bruker, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:41:08 - db_utils - INFO -     Column: bestillings_dato, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:41:08 - db_utils - INFO -     Column: onske_dato, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:41:08 - db_utils - INFO -   Indexes in stroing.db: ['idx_stroing_bruker', 'idx_stroing_onske_dato', 'idx_stroing_bestillings_dato']
2024-10-31 04:41:08 - db_utils - INFO -   Row count in sqlite_sequence: 1
2024-10-31 04:41:08 - db_utils - INFO -   Row count in stroing_bestillinger: 5
2024-10-31 04:41:08 - db_utils - INFO -   Test query result: (1,)
2024-10-31 04:41:08 - db_utils - INFO - Debugging feedback database:
2024-10-31 04:41:08 - db_utils - INFO -   Database version: 0
2024-10-31 04:41:08 - db_utils - INFO -   Tables in feedback.db: ['sqlite_sequence', 'feedback']
2024-10-31 04:41:08 - db_utils - INFO -   Structure of sqlite_sequence table:
2024-10-31 04:41:08 - db_utils - INFO -     Column: name, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:41:08 - db_utils - INFO -     Column: seq, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:41:08 - db_utils - INFO -   Structure of feedback table:
2024-10-31 04:41:08 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 04:41:08 - db_utils - INFO -     Column: type, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:41:08 - db_utils - INFO -     Column: datetime, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:41:08 - db_utils - INFO -     Column: comment, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:41:08 - db_utils - INFO -     Column: innsender, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:41:08 - db_utils - INFO -     Column: status, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:41:08 - db_utils - INFO -     Column: status_changed_by, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:41:08 - db_utils - INFO -     Column: status_changed_at, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:41:08 - db_utils - INFO -     Column: hidden, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:41:08 - db_utils - INFO -     Column: is_alert, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:41:08 - db_utils - INFO -     Column: display_on_weather, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:41:08 - db_utils - INFO -     Column: expiry_date, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:41:08 - db_utils - INFO -     Column: target_group, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:41:08 - db_utils - INFO -   Indexes in feedback.db: ['idx_feedback_datetime', 'idx_feedback_innsender', 'idx_feedback_status', 'idx_feedback_type']
2024-10-31 04:41:08 - db_utils - INFO -   Row count in sqlite_sequence: 1
2024-10-31 04:41:08 - db_utils - INFO -   Row count in feedback: 11
2024-10-31 04:41:08 - db_utils - INFO -   Test query result: (1,)
2024-10-31 04:41:08 - db_utils - INFO - Detailed database operations debugging completed
2024-10-31 04:41:08 - db_utils - INFO - Oppdatert skjema for customer
2024-10-31 04:41:08 - db_utils - INFO - Oppdatert skjema for feedback
2024-10-31 04:41:08 - db_utils - INFO - Oppdatert skjema for login_history
2024-10-31 04:41:08 - db_utils - INFO - Oppdatert skjema for stroing
2024-10-31 04:41:08 - db_utils - INFO - Oppdatert skjema for tunbroyting
2024-10-31 04:41:08 - db_utils - INFO - All database schemas verified and updated
2024-10-31 04:41:08 - db_utils - INFO - Oppdatert skjema for customer
2024-10-31 04:41:08 - db_utils - INFO - Oppdatert skjema for feedback
2024-10-31 04:41:08 - db_utils - INFO - Oppdatert skjema for login_history
2024-10-31 04:41:08 - db_utils - INFO - Oppdatert skjema for stroing
2024-10-31 04:41:08 - db_utils - INFO - Oppdatert skjema for tunbroyting
2024-10-31 04:41:08 - db_utils - INFO - All database schemas verified and updated
2024-10-31 04:41:08 - db_utils - INFO - Database login_history initialized, updated, and optimized
2024-10-31 04:41:08 - db_utils - INFO - Database tunbroyting initialized, updated, and optimized
2024-10-31 04:41:08 - db_utils - INFO - Database stroing initialized, updated, and optimized
2024-10-31 04:41:08 - db_utils - INFO - Database feedback initialized, updated, and optimized
2024-10-31 04:41:08 - db_utils - INFO - Database customer initialized, updated, and optimized
2024-10-31 04:41:08 - db_utils - INFO - Successfully created indexes for tunbroyting database
2024-10-31 04:41:08 - db_utils - INFO - Successfully created indexes for stroing database
2024-10-31 04:41:08 - db_utils - INFO - Successfully created indexes for feedback database
2024-10-31 04:41:08 - db_utils - INFO - Successfully created indexes for login_history database
2024-10-31 04:41:08 - db_utils - INFO - Successfully created indexes for customer database
2024-10-31 04:41:08 - db_utils - INFO - Database index creation completed
2024-10-31 04:41:08 - db_utils - INFO - Database indexes created
2024-10-31 04:41:08 - db_utils - INFO - Successfully verified connection to stroing.db
2024-10-31 04:41:08 - db_utils - INFO - Successfully verified connection to tunbroyting.db
2024-10-31 04:41:08 - db_utils - INFO - Successfully verified connection to feedback.db
2024-10-31 04:41:08 - db_utils - INFO - Successfully verified connection to login_history.db
2024-10-31 04:41:08 - db_utils - INFO - Successfully verified connection to customer.db
2024-10-31 04:41:08 - db_utils - INFO - Database connections verified
2024-10-31 04:41:08 - db_utils - INFO - All databases initialized, updated, and verified
2024-10-31 04:41:08 - db_utils - INFO - Query executed successfully on login_history.db. Rows affected: -1
2024-10-31 04:41:08 - db_utils - INFO - login_history table structure is correct
2024-10-31 04:41:08 - customer_utils - INFO - Starting cabin user consistency check
2024-10-31 04:41:08 - utils - INFO - Attempting to load passwords from secrets
2024-10-31 04:41:08 - utils - INFO - Successfully loaded passwords. Number of entries: 94
2024-10-31 04:41:08 - customer_utils - INFO - Retrieved 94 passwords
2024-10-31 04:41:08 - customer_utils - INFO - Found 94 customers in database
2024-10-31 04:41:08 - customer_utils - INFO - Consistency check completed
2024-10-31 04:41:08 - customer_utils - INFO - Database connection closed
2024-10-31 04:41:08 - customer_utils - INFO - Validating customers and passwords
2024-10-31 04:41:08 - utils - INFO - Attempting to load passwords from secrets
2024-10-31 04:41:08 - utils - INFO - Successfully loaded passwords. Number of entries: 94
2024-10-31 04:41:08 - customer_utils - INFO - Customer and password validation complete
2024-10-31 04:41:08 - db_utils - INFO - Successfully created indexes for tunbroyting database
2024-10-31 04:41:08 - db_utils - INFO - Successfully created indexes for stroing database
2024-10-31 04:41:08 - db_utils - INFO - Successfully created indexes for feedback database
2024-10-31 04:41:08 - db_utils - INFO - Successfully created indexes for login_history database
2024-10-31 04:41:08 - db_utils - INFO - Successfully created indexes for customer database
2024-10-31 04:41:08 - db_utils - INFO - Database index creation completed
2024-10-31 04:41:08 - __main__ - INFO - Application initialization completed successfully
2024-10-31 04:41:08 - __main__ - INFO - Application initialization completed successfully
2024-10-31 04:41:08 - __main__ - INFO - Application setup complete
2024-10-31 04:41:08 - __main__ - INFO - Application shutting down
2024-10-31 04:41:10 - __main__ - INFO - Added validate_user_input function to app.py
2024-10-31 04:41:10 - __main__ - INFO - Starting application initialization
2024-10-31 04:41:10 - db_utils - INFO - Starting detailed database operations debugging
2024-10-31 04:41:10 - db_utils - INFO - Debugging login_history database:
2024-10-31 04:41:10 - db_utils - INFO -   Database version: 0
2024-10-31 04:41:10 - db_utils - INFO -   Tables in login_history.db: ['login_history']
2024-10-31 04:41:10 - db_utils - INFO -   Structure of login_history table:
2024-10-31 04:41:10 - db_utils - INFO -     Column: id, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:41:10 - db_utils - INFO -     Column: login_time, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:41:10 - db_utils - INFO -     Column: success, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:41:10 - db_utils - INFO -   Indexes in login_history.db: ['idx_login_id', 'idx_login_time']
2024-10-31 04:41:10 - db_utils - INFO -   Row count in login_history: 439
2024-10-31 04:41:10 - db_utils - INFO -   Test query result: (1,)
2024-10-31 04:41:10 - db_utils - INFO - Debugging tunbroyting database:
2024-10-31 04:41:10 - db_utils - INFO -   Database version: 0
2024-10-31 04:41:10 - db_utils - INFO -   Tables in tunbroyting.db: ['tunbroyting_bestillinger']
2024-10-31 04:41:10 - db_utils - INFO -   Structure of tunbroyting_bestillinger table:
2024-10-31 04:41:10 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 04:41:10 - db_utils - INFO -     Column: bruker, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:41:10 - db_utils - INFO -     Column: ankomst_dato, Type: DATE, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:41:10 - db_utils - INFO -     Column: ankomst_tid, Type: TIME, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:41:10 - db_utils - INFO -     Column: avreise_dato, Type: DATE, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:41:10 - db_utils - INFO -     Column: avreise_tid, Type: TIME, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:41:10 - db_utils - INFO -     Column: abonnement_type, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:41:10 - db_utils - INFO -   Indexes in tunbroyting.db: ['idx_tunbroyting_bruker', 'idx_tunbroyting_ankomst_dato', 'idx_tunbroyting_avreise_dato', 'idx_tunbroyting_abonnement']
2024-10-31 04:41:10 - db_utils - INFO -   Row count in tunbroyting_bestillinger: 2
2024-10-31 04:41:10 - db_utils - INFO -   Test query result: (1,)
2024-10-31 04:41:10 - db_utils - INFO - Debugging stroing database:
2024-10-31 04:41:10 - db_utils - INFO -   Database version: 0
2024-10-31 04:41:10 - db_utils - INFO -   Tables in stroing.db: ['sqlite_sequence', 'stroing_bestillinger']
2024-10-31 04:41:10 - db_utils - INFO -   Structure of sqlite_sequence table:
2024-10-31 04:41:10 - db_utils - INFO -     Column: name, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:41:10 - db_utils - INFO -     Column: seq, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:41:10 - db_utils - INFO -   Structure of stroing_bestillinger table:
2024-10-31 04:41:10 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 04:41:10 - db_utils - INFO -     Column: bruker, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:41:10 - db_utils - INFO -     Column: bestillings_dato, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:41:10 - db_utils - INFO -     Column: onske_dato, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:41:10 - db_utils - INFO -   Indexes in stroing.db: ['idx_stroing_bruker', 'idx_stroing_onske_dato', 'idx_stroing_bestillings_dato']
2024-10-31 04:41:10 - db_utils - INFO -   Row count in sqlite_sequence: 1
2024-10-31 04:41:10 - db_utils - INFO -   Row count in stroing_bestillinger: 5
2024-10-31 04:41:10 - db_utils - INFO -   Test query result: (1,)
2024-10-31 04:41:10 - db_utils - INFO - Debugging feedback database:
2024-10-31 04:41:10 - db_utils - INFO -   Database version: 0
2024-10-31 04:41:10 - db_utils - INFO -   Tables in feedback.db: ['sqlite_sequence', 'feedback']
2024-10-31 04:41:10 - db_utils - INFO -   Structure of sqlite_sequence table:
2024-10-31 04:41:10 - db_utils - INFO -     Column: name, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:41:10 - db_utils - INFO -     Column: seq, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:41:10 - db_utils - INFO -   Structure of feedback table:
2024-10-31 04:41:10 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 04:41:10 - db_utils - INFO -     Column: type, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:41:10 - db_utils - INFO -     Column: datetime, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:41:10 - db_utils - INFO -     Column: comment, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:41:10 - db_utils - INFO -     Column: innsender, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:41:10 - db_utils - INFO -     Column: status, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:41:10 - db_utils - INFO -     Column: status_changed_by, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:41:10 - db_utils - INFO -     Column: status_changed_at, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:41:10 - db_utils - INFO -     Column: hidden, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:41:10 - db_utils - INFO -     Column: is_alert, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:41:10 - db_utils - INFO -     Column: display_on_weather, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:41:10 - db_utils - INFO -     Column: expiry_date, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:41:10 - db_utils - INFO -     Column: target_group, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:41:10 - db_utils - INFO -   Indexes in feedback.db: ['idx_feedback_datetime', 'idx_feedback_innsender', 'idx_feedback_status', 'idx_feedback_type']
2024-10-31 04:41:10 - db_utils - INFO -   Row count in sqlite_sequence: 1
2024-10-31 04:41:10 - db_utils - INFO -   Row count in feedback: 11
2024-10-31 04:41:10 - db_utils - INFO -   Test query result: (1,)
2024-10-31 04:41:10 - db_utils - INFO - Detailed database operations debugging completed
2024-10-31 04:41:10 - db_utils - INFO - Oppdatert skjema for customer
2024-10-31 04:41:10 - db_utils - INFO - Oppdatert skjema for feedback
2024-10-31 04:41:10 - db_utils - INFO - Oppdatert skjema for login_history
2024-10-31 04:41:10 - db_utils - INFO - Oppdatert skjema for stroing
2024-10-31 04:41:10 - db_utils - INFO - Oppdatert skjema for tunbroyting
2024-10-31 04:41:10 - db_utils - INFO - All database schemas verified and updated
2024-10-31 04:41:10 - db_utils - INFO - Oppdatert skjema for customer
2024-10-31 04:41:10 - db_utils - INFO - Oppdatert skjema for feedback
2024-10-31 04:41:10 - db_utils - INFO - Oppdatert skjema for login_history
2024-10-31 04:41:10 - db_utils - INFO - Oppdatert skjema for stroing
2024-10-31 04:41:10 - db_utils - INFO - Oppdatert skjema for tunbroyting
2024-10-31 04:41:10 - db_utils - INFO - All database schemas verified and updated
2024-10-31 04:41:10 - db_utils - INFO - Database already initialized. Skipping.
2024-10-31 04:41:10 - db_utils - INFO - Query executed successfully on login_history.db. Rows affected: -1
2024-10-31 04:41:10 - db_utils - INFO - login_history table structure is correct
2024-10-31 04:41:10 - customer_utils - INFO - Starting cabin user consistency check
2024-10-31 04:41:10 - utils - INFO - Attempting to load passwords from secrets
2024-10-31 04:41:10 - utils - INFO - Successfully loaded passwords. Number of entries: 94
2024-10-31 04:41:10 - customer_utils - INFO - Retrieved 94 passwords
2024-10-31 04:41:10 - customer_utils - INFO - Found 94 customers in database
2024-10-31 04:41:10 - customer_utils - INFO - Consistency check completed
2024-10-31 04:41:10 - customer_utils - INFO - Database connection closed
2024-10-31 04:41:10 - customer_utils - INFO - Validating customers and passwords
2024-10-31 04:41:10 - utils - INFO - Attempting to load passwords from secrets
2024-10-31 04:41:10 - utils - INFO - Successfully loaded passwords. Number of entries: 94
2024-10-31 04:41:10 - customer_utils - INFO - Customer and password validation complete
2024-10-31 04:41:10 - db_utils - INFO - Successfully created indexes for tunbroyting database
2024-10-31 04:41:10 - db_utils - INFO - Successfully created indexes for stroing database
2024-10-31 04:41:10 - db_utils - INFO - Successfully created indexes for feedback database
2024-10-31 04:41:10 - db_utils - INFO - Successfully created indexes for login_history database
2024-10-31 04:41:10 - db_utils - INFO - Successfully created indexes for customer database
2024-10-31 04:41:10 - db_utils - INFO - Database index creation completed
2024-10-31 04:41:10 - __main__ - INFO - Application initialization completed successfully
2024-10-31 04:41:10 - __main__ - INFO - Application initialization completed successfully
2024-10-31 04:41:10 - __main__ - INFO - Application setup complete
2024-10-31 04:41:10 - auth_utils - INFO - Login attempt for ID: tjossang
2024-10-31 04:41:10 - db_utils - INFO - DATABASE_PATH: /Users/tor.inge.jossang@aftenbladet.no/dev/gullingen
2024-10-31 04:41:10 - db_utils - INFO - Full database path: /Users/tor.inge.jossang@aftenbladet.no/dev/gullingen/login_history.db
2024-10-31 04:41:10 - db_utils - INFO - Attempting to create database engine...
2024-10-31 04:41:11 - db_utils - INFO - Database engine created successfully for login_history.db
2024-10-31 04:41:11 - auth_utils - INFO - Rate limit check passed for user tjossang
2024-10-31 04:41:11 - auth_utils - WARNING - Authentication failed: No user found with ID tjossang
2024-10-31 04:41:11 - auth_utils - WARNING - Failed login attempt for ID: tjossang
2024-10-31 04:41:11 - db_utils - INFO - Database file /Users/tor.inge.jossang@aftenbladet.no/dev/gullingen/login_history.db exists.
2024-10-31 04:41:11 - db_utils - INFO - DATABASE_PATH: /Users/tor.inge.jossang@aftenbladet.no/dev/gullingen
2024-10-31 04:41:11 - db_utils - INFO - Full database path: /Users/tor.inge.jossang@aftenbladet.no/dev/gullingen/login_history.db
2024-10-31 04:41:11 - db_utils - INFO - Attempting to create database engine...
2024-10-31 04:41:11 - db_utils - INFO - Database engine created successfully for login_history.db
2024-10-31 04:41:11 - auth_utils - INFO - Rate limit check passed for user tjossang
2024-10-31 04:41:11 - db_utils - INFO - Query executed successfully on login_history.db. Rows affected: 1
2024-10-31 04:41:11 - auth_utils - INFO - Failed login for ID: tjossang
2024-10-31 04:41:11 - __main__ - INFO - Application shutting down
2024-10-31 04:41:12 - __main__ - INFO - Added validate_user_input function to app.py
2024-10-31 04:41:12 - __main__ - INFO - Starting application initialization
2024-10-31 04:41:12 - db_utils - INFO - Starting detailed database operations debugging
2024-10-31 04:41:12 - db_utils - INFO - Debugging login_history database:
2024-10-31 04:41:12 - db_utils - INFO -   Database version: 0
2024-10-31 04:41:12 - db_utils - INFO -   Tables in login_history.db: ['login_history']
2024-10-31 04:41:12 - db_utils - INFO -   Structure of login_history table:
2024-10-31 04:41:12 - db_utils - INFO -     Column: id, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:41:12 - db_utils - INFO -     Column: login_time, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:41:12 - db_utils - INFO -     Column: success, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:41:12 - db_utils - INFO -   Indexes in login_history.db: ['idx_login_id', 'idx_login_time']
2024-10-31 04:41:12 - db_utils - INFO -   Row count in login_history: 440
2024-10-31 04:41:12 - db_utils - INFO -   Test query result: (1,)
2024-10-31 04:41:12 - db_utils - INFO - Debugging tunbroyting database:
2024-10-31 04:41:12 - db_utils - INFO -   Database version: 0
2024-10-31 04:41:12 - db_utils - INFO -   Tables in tunbroyting.db: ['tunbroyting_bestillinger']
2024-10-31 04:41:12 - db_utils - INFO -   Structure of tunbroyting_bestillinger table:
2024-10-31 04:41:12 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 04:41:12 - db_utils - INFO -     Column: bruker, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:41:12 - db_utils - INFO -     Column: ankomst_dato, Type: DATE, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:41:12 - db_utils - INFO -     Column: ankomst_tid, Type: TIME, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:41:12 - db_utils - INFO -     Column: avreise_dato, Type: DATE, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:41:12 - db_utils - INFO -     Column: avreise_tid, Type: TIME, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:41:12 - db_utils - INFO -     Column: abonnement_type, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:41:12 - db_utils - INFO -   Indexes in tunbroyting.db: ['idx_tunbroyting_bruker', 'idx_tunbroyting_ankomst_dato', 'idx_tunbroyting_avreise_dato', 'idx_tunbroyting_abonnement']
2024-10-31 04:41:12 - db_utils - INFO -   Row count in tunbroyting_bestillinger: 2
2024-10-31 04:41:12 - db_utils - INFO -   Test query result: (1,)
2024-10-31 04:41:12 - db_utils - INFO - Debugging stroing database:
2024-10-31 04:41:12 - db_utils - INFO -   Database version: 0
2024-10-31 04:41:12 - db_utils - INFO -   Tables in stroing.db: ['sqlite_sequence', 'stroing_bestillinger']
2024-10-31 04:41:12 - db_utils - INFO -   Structure of sqlite_sequence table:
2024-10-31 04:41:12 - db_utils - INFO -     Column: name, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:41:12 - db_utils - INFO -     Column: seq, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:41:12 - db_utils - INFO -   Structure of stroing_bestillinger table:
2024-10-31 04:41:12 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 04:41:12 - db_utils - INFO -     Column: bruker, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:41:12 - db_utils - INFO -     Column: bestillings_dato, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:41:12 - db_utils - INFO -     Column: onske_dato, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:41:12 - db_utils - INFO -   Indexes in stroing.db: ['idx_stroing_bruker', 'idx_stroing_onske_dato', 'idx_stroing_bestillings_dato']
2024-10-31 04:41:12 - db_utils - INFO -   Row count in sqlite_sequence: 1
2024-10-31 04:41:12 - db_utils - INFO -   Row count in stroing_bestillinger: 5
2024-10-31 04:41:12 - db_utils - INFO -   Test query result: (1,)
2024-10-31 04:41:12 - db_utils - INFO - Debugging feedback database:
2024-10-31 04:41:12 - db_utils - INFO -   Database version: 0
2024-10-31 04:41:12 - db_utils - INFO -   Tables in feedback.db: ['sqlite_sequence', 'feedback']
2024-10-31 04:41:12 - db_utils - INFO -   Structure of sqlite_sequence table:
2024-10-31 04:41:12 - db_utils - INFO -     Column: name, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:41:12 - db_utils - INFO -     Column: seq, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:41:12 - db_utils - INFO -   Structure of feedback table:
2024-10-31 04:41:12 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 04:41:12 - db_utils - INFO -     Column: type, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:41:12 - db_utils - INFO -     Column: datetime, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:41:12 - db_utils - INFO -     Column: comment, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:41:12 - db_utils - INFO -     Column: innsender, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:41:12 - db_utils - INFO -     Column: status, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:41:12 - db_utils - INFO -     Column: status_changed_by, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:41:12 - db_utils - INFO -     Column: status_changed_at, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:41:12 - db_utils - INFO -     Column: hidden, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:41:12 - db_utils - INFO -     Column: is_alert, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:41:12 - db_utils - INFO -     Column: display_on_weather, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:41:12 - db_utils - INFO -     Column: expiry_date, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:41:12 - db_utils - INFO -     Column: target_group, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:41:12 - db_utils - INFO -   Indexes in feedback.db: ['idx_feedback_datetime', 'idx_feedback_innsender', 'idx_feedback_status', 'idx_feedback_type']
2024-10-31 04:41:12 - db_utils - INFO -   Row count in sqlite_sequence: 1
2024-10-31 04:41:12 - db_utils - INFO -   Row count in feedback: 11
2024-10-31 04:41:12 - db_utils - INFO -   Test query result: (1,)
2024-10-31 04:41:12 - db_utils - INFO - Detailed database operations debugging completed
2024-10-31 04:41:12 - db_utils - INFO - Oppdatert skjema for customer
2024-10-31 04:41:12 - db_utils - INFO - Oppdatert skjema for feedback
2024-10-31 04:41:12 - db_utils - INFO - Oppdatert skjema for login_history
2024-10-31 04:41:12 - db_utils - INFO - Oppdatert skjema for stroing
2024-10-31 04:41:12 - db_utils - INFO - Oppdatert skjema for tunbroyting
2024-10-31 04:41:12 - db_utils - INFO - All database schemas verified and updated
2024-10-31 04:41:12 - db_utils - INFO - Oppdatert skjema for customer
2024-10-31 04:41:12 - db_utils - INFO - Oppdatert skjema for feedback
2024-10-31 04:41:12 - db_utils - INFO - Oppdatert skjema for login_history
2024-10-31 04:41:12 - db_utils - INFO - Oppdatert skjema for stroing
2024-10-31 04:41:12 - db_utils - INFO - Oppdatert skjema for tunbroyting
2024-10-31 04:41:12 - db_utils - INFO - All database schemas verified and updated
2024-10-31 04:41:12 - db_utils - INFO - Database already initialized. Skipping.
2024-10-31 04:41:12 - db_utils - INFO - Query executed successfully on login_history.db. Rows affected: -1
2024-10-31 04:41:12 - db_utils - INFO - login_history table structure is correct
2024-10-31 04:41:12 - customer_utils - INFO - Starting cabin user consistency check
2024-10-31 04:41:12 - utils - INFO - Attempting to load passwords from secrets
2024-10-31 04:41:12 - utils - INFO - Successfully loaded passwords. Number of entries: 94
2024-10-31 04:41:12 - customer_utils - INFO - Retrieved 94 passwords
2024-10-31 04:41:12 - customer_utils - INFO - Found 94 customers in database
2024-10-31 04:41:12 - customer_utils - INFO - Consistency check completed
2024-10-31 04:41:12 - customer_utils - INFO - Database connection closed
2024-10-31 04:41:12 - customer_utils - INFO - Validating customers and passwords
2024-10-31 04:41:12 - utils - INFO - Attempting to load passwords from secrets
2024-10-31 04:41:12 - utils - INFO - Successfully loaded passwords. Number of entries: 94
2024-10-31 04:41:12 - customer_utils - INFO - Customer and password validation complete
2024-10-31 04:41:12 - db_utils - INFO - Successfully created indexes for tunbroyting database
2024-10-31 04:41:12 - db_utils - INFO - Successfully created indexes for stroing database
2024-10-31 04:41:12 - db_utils - INFO - Successfully created indexes for feedback database
2024-10-31 04:41:12 - db_utils - INFO - Successfully created indexes for login_history database
2024-10-31 04:41:12 - db_utils - INFO - Successfully created indexes for customer database
2024-10-31 04:41:12 - db_utils - INFO - Database index creation completed
2024-10-31 04:41:12 - __main__ - INFO - Application initialization completed successfully
2024-10-31 04:41:12 - __main__ - INFO - Application initialization completed successfully
2024-10-31 04:41:12 - __main__ - INFO - Application setup complete
2024-10-31 04:41:12 - auth_utils - INFO - Login attempt for ID: tjossang
2024-10-31 04:41:12 - db_utils - INFO - DATABASE_PATH: /Users/tor.inge.jossang@aftenbladet.no/dev/gullingen
2024-10-31 04:41:12 - db_utils - INFO - Full database path: /Users/tor.inge.jossang@aftenbladet.no/dev/gullingen/login_history.db
2024-10-31 04:41:12 - db_utils - INFO - Attempting to create database engine...
2024-10-31 04:41:12 - db_utils - INFO - Database engine created successfully for login_history.db
2024-10-31 04:41:12 - auth_utils - INFO - Rate limit check passed for user tjossang
2024-10-31 04:41:12 - auth_utils - WARNING - Authentication failed: No user found with ID tjossang
2024-10-31 04:41:12 - auth_utils - WARNING - Failed login attempt for ID: tjossang
2024-10-31 04:41:12 - db_utils - INFO - Database file /Users/tor.inge.jossang@aftenbladet.no/dev/gullingen/login_history.db exists.
2024-10-31 04:41:12 - db_utils - INFO - DATABASE_PATH: /Users/tor.inge.jossang@aftenbladet.no/dev/gullingen
2024-10-31 04:41:12 - db_utils - INFO - Full database path: /Users/tor.inge.jossang@aftenbladet.no/dev/gullingen/login_history.db
2024-10-31 04:41:12 - db_utils - INFO - Attempting to create database engine...
2024-10-31 04:41:12 - db_utils - INFO - Database engine created successfully for login_history.db
2024-10-31 04:41:12 - auth_utils - INFO - Rate limit check passed for user tjossang
2024-10-31 04:41:12 - db_utils - INFO - Query executed successfully on login_history.db. Rows affected: 1
2024-10-31 04:41:12 - auth_utils - INFO - Failed login for ID: tjossang
2024-10-31 04:41:12 - __main__ - INFO - Application shutting down
2024-10-31 04:41:18 - __main__ - INFO - Added validate_user_input function to app.py
2024-10-31 04:41:18 - __main__ - INFO - Starting application initialization
2024-10-31 04:41:18 - db_utils - INFO - Starting detailed database operations debugging
2024-10-31 04:41:18 - db_utils - INFO - Debugging login_history database:
2024-10-31 04:41:18 - db_utils - INFO -   Database version: 0
2024-10-31 04:41:18 - db_utils - INFO -   Tables in login_history.db: ['login_history']
2024-10-31 04:41:18 - db_utils - INFO -   Structure of login_history table:
2024-10-31 04:41:18 - db_utils - INFO -     Column: id, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:41:18 - db_utils - INFO -     Column: login_time, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:41:18 - db_utils - INFO -     Column: success, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:41:18 - db_utils - INFO -   Indexes in login_history.db: ['idx_login_id', 'idx_login_time']
2024-10-31 04:41:18 - db_utils - INFO -   Row count in login_history: 441
2024-10-31 04:41:18 - db_utils - INFO -   Test query result: (1,)
2024-10-31 04:41:18 - db_utils - INFO - Debugging tunbroyting database:
2024-10-31 04:41:18 - db_utils - INFO -   Database version: 0
2024-10-31 04:41:18 - db_utils - INFO -   Tables in tunbroyting.db: ['tunbroyting_bestillinger']
2024-10-31 04:41:18 - db_utils - INFO -   Structure of tunbroyting_bestillinger table:
2024-10-31 04:41:18 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 04:41:18 - db_utils - INFO -     Column: bruker, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:41:18 - db_utils - INFO -     Column: ankomst_dato, Type: DATE, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:41:18 - db_utils - INFO -     Column: ankomst_tid, Type: TIME, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:41:18 - db_utils - INFO -     Column: avreise_dato, Type: DATE, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:41:18 - db_utils - INFO -     Column: avreise_tid, Type: TIME, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:41:18 - db_utils - INFO -     Column: abonnement_type, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:41:18 - db_utils - INFO -   Indexes in tunbroyting.db: ['idx_tunbroyting_bruker', 'idx_tunbroyting_ankomst_dato', 'idx_tunbroyting_avreise_dato', 'idx_tunbroyting_abonnement']
2024-10-31 04:41:18 - db_utils - INFO -   Row count in tunbroyting_bestillinger: 2
2024-10-31 04:41:18 - db_utils - INFO -   Test query result: (1,)
2024-10-31 04:41:18 - db_utils - INFO - Debugging stroing database:
2024-10-31 04:41:18 - db_utils - INFO -   Database version: 0
2024-10-31 04:41:18 - db_utils - INFO -   Tables in stroing.db: ['sqlite_sequence', 'stroing_bestillinger']
2024-10-31 04:41:18 - db_utils - INFO -   Structure of sqlite_sequence table:
2024-10-31 04:41:18 - db_utils - INFO -     Column: name, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:41:18 - db_utils - INFO -     Column: seq, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:41:18 - db_utils - INFO -   Structure of stroing_bestillinger table:
2024-10-31 04:41:18 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 04:41:18 - db_utils - INFO -     Column: bruker, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:41:18 - db_utils - INFO -     Column: bestillings_dato, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:41:18 - db_utils - INFO -     Column: onske_dato, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:41:18 - db_utils - INFO -   Indexes in stroing.db: ['idx_stroing_bruker', 'idx_stroing_onske_dato', 'idx_stroing_bestillings_dato']
2024-10-31 04:41:18 - db_utils - INFO -   Row count in sqlite_sequence: 1
2024-10-31 04:41:18 - db_utils - INFO -   Row count in stroing_bestillinger: 5
2024-10-31 04:41:18 - db_utils - INFO -   Test query result: (1,)
2024-10-31 04:41:18 - db_utils - INFO - Debugging feedback database:
2024-10-31 04:41:18 - db_utils - INFO -   Database version: 0
2024-10-31 04:41:18 - db_utils - INFO -   Tables in feedback.db: ['sqlite_sequence', 'feedback']
2024-10-31 04:41:18 - db_utils - INFO -   Structure of sqlite_sequence table:
2024-10-31 04:41:18 - db_utils - INFO -     Column: name, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:41:18 - db_utils - INFO -     Column: seq, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:41:18 - db_utils - INFO -   Structure of feedback table:
2024-10-31 04:41:18 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 04:41:18 - db_utils - INFO -     Column: type, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:41:18 - db_utils - INFO -     Column: datetime, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:41:18 - db_utils - INFO -     Column: comment, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:41:18 - db_utils - INFO -     Column: innsender, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:41:18 - db_utils - INFO -     Column: status, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:41:18 - db_utils - INFO -     Column: status_changed_by, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:41:18 - db_utils - INFO -     Column: status_changed_at, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:41:18 - db_utils - INFO -     Column: hidden, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:41:18 - db_utils - INFO -     Column: is_alert, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:41:18 - db_utils - INFO -     Column: display_on_weather, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:41:18 - db_utils - INFO -     Column: expiry_date, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:41:18 - db_utils - INFO -     Column: target_group, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:41:18 - db_utils - INFO -   Indexes in feedback.db: ['idx_feedback_datetime', 'idx_feedback_innsender', 'idx_feedback_status', 'idx_feedback_type']
2024-10-31 04:41:18 - db_utils - INFO -   Row count in sqlite_sequence: 1
2024-10-31 04:41:18 - db_utils - INFO -   Row count in feedback: 11
2024-10-31 04:41:18 - db_utils - INFO -   Test query result: (1,)
2024-10-31 04:41:18 - db_utils - INFO - Detailed database operations debugging completed
2024-10-31 04:41:18 - db_utils - INFO - Oppdatert skjema for customer
2024-10-31 04:41:18 - db_utils - INFO - Oppdatert skjema for feedback
2024-10-31 04:41:18 - db_utils - INFO - Oppdatert skjema for login_history
2024-10-31 04:41:18 - db_utils - INFO - Oppdatert skjema for stroing
2024-10-31 04:41:18 - db_utils - INFO - Oppdatert skjema for tunbroyting
2024-10-31 04:41:18 - db_utils - INFO - All database schemas verified and updated
2024-10-31 04:41:18 - db_utils - INFO - Oppdatert skjema for customer
2024-10-31 04:41:18 - db_utils - INFO - Oppdatert skjema for feedback
2024-10-31 04:41:18 - db_utils - INFO - Oppdatert skjema for login_history
2024-10-31 04:41:18 - db_utils - INFO - Oppdatert skjema for stroing
2024-10-31 04:41:18 - db_utils - INFO - Oppdatert skjema for tunbroyting
2024-10-31 04:41:18 - db_utils - INFO - All database schemas verified and updated
2024-10-31 04:41:18 - db_utils - INFO - Database already initialized. Skipping.
2024-10-31 04:41:18 - db_utils - INFO - Query executed successfully on login_history.db. Rows affected: -1
2024-10-31 04:41:18 - db_utils - INFO - login_history table structure is correct
2024-10-31 04:41:18 - customer_utils - INFO - Starting cabin user consistency check
2024-10-31 04:41:18 - utils - INFO - Attempting to load passwords from secrets
2024-10-31 04:41:18 - utils - INFO - Successfully loaded passwords. Number of entries: 94
2024-10-31 04:41:18 - customer_utils - INFO - Retrieved 94 passwords
2024-10-31 04:41:18 - customer_utils - INFO - Found 94 customers in database
2024-10-31 04:41:18 - customer_utils - INFO - Consistency check completed
2024-10-31 04:41:18 - customer_utils - INFO - Database connection closed
2024-10-31 04:41:18 - customer_utils - INFO - Validating customers and passwords
2024-10-31 04:41:18 - utils - INFO - Attempting to load passwords from secrets
2024-10-31 04:41:18 - utils - INFO - Successfully loaded passwords. Number of entries: 94
2024-10-31 04:41:18 - customer_utils - INFO - Customer and password validation complete
2024-10-31 04:41:18 - db_utils - INFO - Successfully created indexes for tunbroyting database
2024-10-31 04:41:18 - db_utils - INFO - Successfully created indexes for stroing database
2024-10-31 04:41:18 - db_utils - INFO - Successfully created indexes for feedback database
2024-10-31 04:41:18 - db_utils - INFO - Successfully created indexes for login_history database
2024-10-31 04:41:18 - db_utils - INFO - Successfully created indexes for customer database
2024-10-31 04:41:18 - db_utils - INFO - Database index creation completed
2024-10-31 04:41:18 - __main__ - INFO - Application initialization completed successfully
2024-10-31 04:41:18 - __main__ - INFO - Application initialization completed successfully
2024-10-31 04:41:18 - __main__ - INFO - Application setup complete
2024-10-31 04:41:18 - auth_utils - INFO - Login attempt for ID: 999
2024-10-31 04:41:18 - db_utils - INFO - DATABASE_PATH: /Users/tor.inge.jossang@aftenbladet.no/dev/gullingen
2024-10-31 04:41:18 - db_utils - INFO - Full database path: /Users/tor.inge.jossang@aftenbladet.no/dev/gullingen/login_history.db
2024-10-31 04:41:18 - db_utils - INFO - Attempting to create database engine...
2024-10-31 04:41:18 - db_utils - INFO - Database engine created successfully for login_history.db
2024-10-31 04:41:18 - auth_utils - INFO - Rate limit check passed for user 999
2024-10-31 04:41:18 - auth_utils - INFO - User 999 authenticated successfully
2024-10-31 04:41:18 - customer_utils - INFO - Successfully retrieved customer with ID: 999
2024-10-31 04:41:18 - db_utils - INFO - Database file /Users/tor.inge.jossang@aftenbladet.no/dev/gullingen/login_history.db exists.
2024-10-31 04:41:18 - db_utils - INFO - Query executed successfully on login_history.db. Rows affected: 1
2024-10-31 04:41:18 - auth_utils - INFO - Successful login for ID: 999
2024-10-31 04:41:18 - auth_utils - INFO - Successful login and logging for ID: 999
2024-10-31 04:41:18 - db_utils - INFO - DATABASE_PATH: /Users/tor.inge.jossang@aftenbladet.no/dev/gullingen
2024-10-31 04:41:18 - db_utils - INFO - Full database path: /Users/tor.inge.jossang@aftenbladet.no/dev/gullingen/login_history.db
2024-10-31 04:41:18 - db_utils - INFO - Attempting to create database engine...
2024-10-31 04:41:18 - db_utils - INFO - Database engine created successfully for login_history.db
2024-10-31 04:41:18 - auth_utils - INFO - Rate limit reset for user 999
2024-10-31 04:41:18 - __main__ - INFO - Application shutting down
2024-10-31 04:41:19 - __main__ - INFO - Added validate_user_input function to app.py
2024-10-31 04:41:19 - __main__ - INFO - Starting application initialization
2024-10-31 04:41:19 - db_utils - INFO - Starting detailed database operations debugging
2024-10-31 04:41:19 - db_utils - INFO - Debugging login_history database:
2024-10-31 04:41:19 - db_utils - INFO -   Database version: 0
2024-10-31 04:41:19 - db_utils - INFO -   Tables in login_history.db: ['login_history']
2024-10-31 04:41:19 - db_utils - INFO -   Structure of login_history table:
2024-10-31 04:41:19 - db_utils - INFO -     Column: id, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:41:19 - db_utils - INFO -     Column: login_time, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:41:19 - db_utils - INFO -     Column: success, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:41:19 - db_utils - INFO -   Indexes in login_history.db: ['idx_login_id', 'idx_login_time']
2024-10-31 04:41:19 - db_utils - INFO -   Row count in login_history: 442
2024-10-31 04:41:19 - db_utils - INFO -   Test query result: (1,)
2024-10-31 04:41:19 - db_utils - INFO - Debugging tunbroyting database:
2024-10-31 04:41:19 - db_utils - INFO -   Database version: 0
2024-10-31 04:41:19 - db_utils - INFO -   Tables in tunbroyting.db: ['tunbroyting_bestillinger']
2024-10-31 04:41:19 - db_utils - INFO -   Structure of tunbroyting_bestillinger table:
2024-10-31 04:41:19 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 04:41:19 - db_utils - INFO -     Column: bruker, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:41:19 - db_utils - INFO -     Column: ankomst_dato, Type: DATE, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:41:19 - db_utils - INFO -     Column: ankomst_tid, Type: TIME, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:41:19 - db_utils - INFO -     Column: avreise_dato, Type: DATE, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:41:19 - db_utils - INFO -     Column: avreise_tid, Type: TIME, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:41:19 - db_utils - INFO -     Column: abonnement_type, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:41:19 - db_utils - INFO -   Indexes in tunbroyting.db: ['idx_tunbroyting_bruker', 'idx_tunbroyting_ankomst_dato', 'idx_tunbroyting_avreise_dato', 'idx_tunbroyting_abonnement']
2024-10-31 04:41:19 - db_utils - INFO -   Row count in tunbroyting_bestillinger: 2
2024-10-31 04:41:19 - db_utils - INFO -   Test query result: (1,)
2024-10-31 04:41:19 - db_utils - INFO - Debugging stroing database:
2024-10-31 04:41:19 - db_utils - INFO -   Database version: 0
2024-10-31 04:41:19 - db_utils - INFO -   Tables in stroing.db: ['sqlite_sequence', 'stroing_bestillinger']
2024-10-31 04:41:19 - db_utils - INFO -   Structure of sqlite_sequence table:
2024-10-31 04:41:19 - db_utils - INFO -     Column: name, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:41:19 - db_utils - INFO -     Column: seq, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:41:19 - db_utils - INFO -   Structure of stroing_bestillinger table:
2024-10-31 04:41:19 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 04:41:19 - db_utils - INFO -     Column: bruker, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:41:19 - db_utils - INFO -     Column: bestillings_dato, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:41:19 - db_utils - INFO -     Column: onske_dato, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:41:19 - db_utils - INFO -   Indexes in stroing.db: ['idx_stroing_bruker', 'idx_stroing_onske_dato', 'idx_stroing_bestillings_dato']
2024-10-31 04:41:19 - db_utils - INFO -   Row count in sqlite_sequence: 1
2024-10-31 04:41:19 - db_utils - INFO -   Row count in stroing_bestillinger: 5
2024-10-31 04:41:19 - db_utils - INFO -   Test query result: (1,)
2024-10-31 04:41:19 - db_utils - INFO - Debugging feedback database:
2024-10-31 04:41:19 - db_utils - INFO -   Database version: 0
2024-10-31 04:41:19 - db_utils - INFO -   Tables in feedback.db: ['sqlite_sequence', 'feedback']
2024-10-31 04:41:19 - db_utils - INFO -   Structure of sqlite_sequence table:
2024-10-31 04:41:19 - db_utils - INFO -     Column: name, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:41:19 - db_utils - INFO -     Column: seq, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:41:19 - db_utils - INFO -   Structure of feedback table:
2024-10-31 04:41:19 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 04:41:19 - db_utils - INFO -     Column: type, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:41:19 - db_utils - INFO -     Column: datetime, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:41:19 - db_utils - INFO -     Column: comment, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:41:19 - db_utils - INFO -     Column: innsender, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:41:19 - db_utils - INFO -     Column: status, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:41:19 - db_utils - INFO -     Column: status_changed_by, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:41:19 - db_utils - INFO -     Column: status_changed_at, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:41:19 - db_utils - INFO -     Column: hidden, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:41:19 - db_utils - INFO -     Column: is_alert, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:41:19 - db_utils - INFO -     Column: display_on_weather, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:41:19 - db_utils - INFO -     Column: expiry_date, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:41:19 - db_utils - INFO -     Column: target_group, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:41:19 - db_utils - INFO -   Indexes in feedback.db: ['idx_feedback_datetime', 'idx_feedback_innsender', 'idx_feedback_status', 'idx_feedback_type']
2024-10-31 04:41:19 - db_utils - INFO -   Row count in sqlite_sequence: 1
2024-10-31 04:41:19 - db_utils - INFO -   Row count in feedback: 11
2024-10-31 04:41:19 - db_utils - INFO -   Test query result: (1,)
2024-10-31 04:41:19 - db_utils - INFO - Detailed database operations debugging completed
2024-10-31 04:41:19 - db_utils - INFO - Oppdatert skjema for customer
2024-10-31 04:41:19 - db_utils - INFO - Oppdatert skjema for feedback
2024-10-31 04:41:19 - db_utils - INFO - Oppdatert skjema for login_history
2024-10-31 04:41:19 - db_utils - INFO - Oppdatert skjema for stroing
2024-10-31 04:41:19 - db_utils - INFO - Oppdatert skjema for tunbroyting
2024-10-31 04:41:19 - db_utils - INFO - All database schemas verified and updated
2024-10-31 04:41:19 - db_utils - INFO - Oppdatert skjema for customer
2024-10-31 04:41:19 - db_utils - INFO - Oppdatert skjema for feedback
2024-10-31 04:41:19 - db_utils - INFO - Oppdatert skjema for login_history
2024-10-31 04:41:19 - db_utils - INFO - Oppdatert skjema for stroing
2024-10-31 04:41:19 - db_utils - INFO - Oppdatert skjema for tunbroyting
2024-10-31 04:41:19 - db_utils - INFO - All database schemas verified and updated
2024-10-31 04:41:19 - db_utils - INFO - Database already initialized. Skipping.
2024-10-31 04:41:19 - db_utils - INFO - Query executed successfully on login_history.db. Rows affected: -1
2024-10-31 04:41:19 - db_utils - INFO - login_history table structure is correct
2024-10-31 04:41:19 - customer_utils - INFO - Starting cabin user consistency check
2024-10-31 04:41:19 - utils - INFO - Attempting to load passwords from secrets
2024-10-31 04:41:19 - utils - INFO - Successfully loaded passwords. Number of entries: 94
2024-10-31 04:41:19 - customer_utils - INFO - Retrieved 94 passwords
2024-10-31 04:41:19 - customer_utils - INFO - Found 94 customers in database
2024-10-31 04:41:19 - customer_utils - INFO - Consistency check completed
2024-10-31 04:41:19 - customer_utils - INFO - Database connection closed
2024-10-31 04:41:19 - customer_utils - INFO - Validating customers and passwords
2024-10-31 04:41:19 - utils - INFO - Attempting to load passwords from secrets
2024-10-31 04:41:19 - utils - INFO - Successfully loaded passwords. Number of entries: 94
2024-10-31 04:41:19 - customer_utils - INFO - Customer and password validation complete
2024-10-31 04:41:19 - db_utils - INFO - Successfully created indexes for tunbroyting database
2024-10-31 04:41:19 - db_utils - INFO - Successfully created indexes for stroing database
2024-10-31 04:41:19 - db_utils - INFO - Successfully created indexes for feedback database
2024-10-31 04:41:19 - db_utils - INFO - Successfully created indexes for login_history database
2024-10-31 04:41:19 - db_utils - INFO - Successfully created indexes for customer database
2024-10-31 04:41:19 - db_utils - INFO - Database index creation completed
2024-10-31 04:41:19 - __main__ - INFO - Application initialization completed successfully
2024-10-31 04:41:19 - __main__ - INFO - Application initialization completed successfully
2024-10-31 04:41:19 - __main__ - INFO - Application setup complete
2024-10-31 04:41:19 - customer_utils - INFO - Successfully retrieved customer with ID: 999
2024-10-31 04:41:19 - alert_utils - INFO - Fetched 1 alerts. only_today=False, include_expired=False
2024-10-31 04:41:19 - tun_utils - WARNING - hent_bestillinger() is deprecated, use get_bookings() instead
2024-10-31 04:41:19 - tun_utils - INFO - Starting get_bookings with start_date=None, end_date=None
2024-10-31 04:41:19 - tun_utils - INFO - Successfully retrieved 2 bookings
2024-10-31 04:41:19 - __main__ - INFO - Application shutting down
2024-10-31 04:41:21 - __main__ - INFO - Added validate_user_input function to app.py
2024-10-31 04:41:21 - __main__ - INFO - Starting application initialization
2024-10-31 04:41:21 - db_utils - INFO - Starting detailed database operations debugging
2024-10-31 04:41:21 - db_utils - INFO - Debugging login_history database:
2024-10-31 04:41:21 - db_utils - INFO -   Database version: 0
2024-10-31 04:41:21 - db_utils - INFO -   Tables in login_history.db: ['login_history']
2024-10-31 04:41:21 - db_utils - INFO -   Structure of login_history table:
2024-10-31 04:41:21 - db_utils - INFO -     Column: id, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:41:21 - db_utils - INFO -     Column: login_time, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:41:21 - db_utils - INFO -     Column: success, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:41:21 - db_utils - INFO -   Indexes in login_history.db: ['idx_login_id', 'idx_login_time']
2024-10-31 04:41:21 - db_utils - INFO -   Row count in login_history: 442
2024-10-31 04:41:21 - db_utils - INFO -   Test query result: (1,)
2024-10-31 04:41:21 - db_utils - INFO - Debugging tunbroyting database:
2024-10-31 04:41:21 - db_utils - INFO -   Database version: 0
2024-10-31 04:41:21 - db_utils - INFO -   Tables in tunbroyting.db: ['tunbroyting_bestillinger']
2024-10-31 04:41:21 - db_utils - INFO -   Structure of tunbroyting_bestillinger table:
2024-10-31 04:41:21 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 04:41:21 - db_utils - INFO -     Column: bruker, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:41:21 - db_utils - INFO -     Column: ankomst_dato, Type: DATE, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:41:21 - db_utils - INFO -     Column: ankomst_tid, Type: TIME, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:41:21 - db_utils - INFO -     Column: avreise_dato, Type: DATE, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:41:21 - db_utils - INFO -     Column: avreise_tid, Type: TIME, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:41:21 - db_utils - INFO -     Column: abonnement_type, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:41:21 - db_utils - INFO -   Indexes in tunbroyting.db: ['idx_tunbroyting_bruker', 'idx_tunbroyting_ankomst_dato', 'idx_tunbroyting_avreise_dato', 'idx_tunbroyting_abonnement']
2024-10-31 04:41:21 - db_utils - INFO -   Row count in tunbroyting_bestillinger: 2
2024-10-31 04:41:21 - db_utils - INFO -   Test query result: (1,)
2024-10-31 04:41:21 - db_utils - INFO - Debugging stroing database:
2024-10-31 04:41:21 - db_utils - INFO -   Database version: 0
2024-10-31 04:41:21 - db_utils - INFO -   Tables in stroing.db: ['sqlite_sequence', 'stroing_bestillinger']
2024-10-31 04:41:21 - db_utils - INFO -   Structure of sqlite_sequence table:
2024-10-31 04:41:21 - db_utils - INFO -     Column: name, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:41:21 - db_utils - INFO -     Column: seq, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:41:21 - db_utils - INFO -   Structure of stroing_bestillinger table:
2024-10-31 04:41:21 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 04:41:21 - db_utils - INFO -     Column: bruker, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:41:21 - db_utils - INFO -     Column: bestillings_dato, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:41:21 - db_utils - INFO -     Column: onske_dato, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:41:21 - db_utils - INFO -   Indexes in stroing.db: ['idx_stroing_bruker', 'idx_stroing_onske_dato', 'idx_stroing_bestillings_dato']
2024-10-31 04:41:21 - db_utils - INFO -   Row count in sqlite_sequence: 1
2024-10-31 04:41:21 - db_utils - INFO -   Row count in stroing_bestillinger: 5
2024-10-31 04:41:21 - db_utils - INFO -   Test query result: (1,)
2024-10-31 04:41:21 - db_utils - INFO - Debugging feedback database:
2024-10-31 04:41:21 - db_utils - INFO -   Database version: 0
2024-10-31 04:41:21 - db_utils - INFO -   Tables in feedback.db: ['sqlite_sequence', 'feedback']
2024-10-31 04:41:21 - db_utils - INFO -   Structure of sqlite_sequence table:
2024-10-31 04:41:21 - db_utils - INFO -     Column: name, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:41:21 - db_utils - INFO -     Column: seq, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:41:21 - db_utils - INFO -   Structure of feedback table:
2024-10-31 04:41:21 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 04:41:21 - db_utils - INFO -     Column: type, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:41:21 - db_utils - INFO -     Column: datetime, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:41:21 - db_utils - INFO -     Column: comment, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:41:21 - db_utils - INFO -     Column: innsender, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:41:21 - db_utils - INFO -     Column: status, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:41:21 - db_utils - INFO -     Column: status_changed_by, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:41:21 - db_utils - INFO -     Column: status_changed_at, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:41:21 - db_utils - INFO -     Column: hidden, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:41:21 - db_utils - INFO -     Column: is_alert, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:41:21 - db_utils - INFO -     Column: display_on_weather, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:41:21 - db_utils - INFO -     Column: expiry_date, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:41:21 - db_utils - INFO -     Column: target_group, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:41:21 - db_utils - INFO -   Indexes in feedback.db: ['idx_feedback_datetime', 'idx_feedback_innsender', 'idx_feedback_status', 'idx_feedback_type']
2024-10-31 04:41:21 - db_utils - INFO -   Row count in sqlite_sequence: 1
2024-10-31 04:41:21 - db_utils - INFO -   Row count in feedback: 11
2024-10-31 04:41:21 - db_utils - INFO -   Test query result: (1,)
2024-10-31 04:41:21 - db_utils - INFO - Detailed database operations debugging completed
2024-10-31 04:41:21 - db_utils - INFO - Oppdatert skjema for customer
2024-10-31 04:41:21 - db_utils - INFO - Oppdatert skjema for feedback
2024-10-31 04:41:21 - db_utils - INFO - Oppdatert skjema for login_history
2024-10-31 04:41:21 - db_utils - INFO - Oppdatert skjema for stroing
2024-10-31 04:41:21 - db_utils - INFO - Oppdatert skjema for tunbroyting
2024-10-31 04:41:21 - db_utils - INFO - All database schemas verified and updated
2024-10-31 04:41:21 - db_utils - INFO - Oppdatert skjema for customer
2024-10-31 04:41:21 - db_utils - INFO - Oppdatert skjema for feedback
2024-10-31 04:41:21 - db_utils - INFO - Oppdatert skjema for login_history
2024-10-31 04:41:21 - db_utils - INFO - Oppdatert skjema for stroing
2024-10-31 04:41:21 - db_utils - INFO - Oppdatert skjema for tunbroyting
2024-10-31 04:41:21 - db_utils - INFO - All database schemas verified and updated
2024-10-31 04:41:21 - db_utils - INFO - Database already initialized. Skipping.
2024-10-31 04:41:21 - db_utils - INFO - Query executed successfully on login_history.db. Rows affected: -1
2024-10-31 04:41:21 - db_utils - INFO - login_history table structure is correct
2024-10-31 04:41:21 - customer_utils - INFO - Starting cabin user consistency check
2024-10-31 04:41:21 - utils - INFO - Attempting to load passwords from secrets
2024-10-31 04:41:21 - utils - INFO - Successfully loaded passwords. Number of entries: 94
2024-10-31 04:41:21 - customer_utils - INFO - Retrieved 94 passwords
2024-10-31 04:41:21 - customer_utils - INFO - Found 94 customers in database
2024-10-31 04:41:21 - customer_utils - INFO - Consistency check completed
2024-10-31 04:41:21 - customer_utils - INFO - Database connection closed
2024-10-31 04:41:21 - customer_utils - INFO - Validating customers and passwords
2024-10-31 04:41:21 - utils - INFO - Attempting to load passwords from secrets
2024-10-31 04:41:21 - utils - INFO - Successfully loaded passwords. Number of entries: 94
2024-10-31 04:41:21 - customer_utils - INFO - Customer and password validation complete
2024-10-31 04:41:21 - db_utils - INFO - Successfully created indexes for tunbroyting database
2024-10-31 04:41:21 - db_utils - INFO - Successfully created indexes for stroing database
2024-10-31 04:41:21 - db_utils - INFO - Successfully created indexes for feedback database
2024-10-31 04:41:21 - db_utils - INFO - Successfully created indexes for login_history database
2024-10-31 04:41:21 - db_utils - INFO - Successfully created indexes for customer database
2024-10-31 04:41:21 - db_utils - INFO - Database index creation completed
2024-10-31 04:41:21 - __main__ - INFO - Application initialization completed successfully
2024-10-31 04:41:21 - __main__ - INFO - Application initialization completed successfully
2024-10-31 04:41:21 - __main__ - INFO - Application setup complete
2024-10-31 04:41:21 - customer_utils - INFO - Successfully retrieved customer with ID: 999
2024-10-31 04:41:22 - weather_display_utils - ERROR - Uventet feil i display_weather_data: list index out of range
Traceback (most recent call last):
  File "/Users/tor.inge.jossang@aftenbladet.no/dev/gullingen/weather_display_utils.py", line 45, in display_weather_data
    fig = create_improved_graph(df)
          ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/tor.inge.jossang@aftenbladet.no/dev/gullingen/weather_display_utils.py", line 243, in create_improved_graph
    title = list(trace_data.keys())[i - 1]
            ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^
IndexError: list index out of range
2024-10-31 04:41:22 - __main__ - INFO - Application shutting down
2024-10-31 04:45:31 - __main__ - INFO - Added validate_user_input function to app.py
2024-10-31 04:45:31 - __main__ - INFO - Starting application initialization
2024-10-31 04:45:31 - db_utils - INFO - Starting detailed database operations debugging
2024-10-31 04:45:31 - db_utils - INFO - Debugging login_history database:
2024-10-31 04:45:31 - db_utils - INFO -   Database version: 0
2024-10-31 04:45:31 - db_utils - INFO -   Tables in login_history.db: ['login_history']
2024-10-31 04:45:31 - db_utils - INFO -   Structure of login_history table:
2024-10-31 04:45:31 - db_utils - INFO -     Column: id, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:45:31 - db_utils - INFO -     Column: login_time, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:45:31 - db_utils - INFO -     Column: success, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:45:31 - db_utils - INFO -   Indexes in login_history.db: ['idx_login_id', 'idx_login_time']
2024-10-31 04:45:31 - db_utils - INFO -   Row count in login_history: 442
2024-10-31 04:45:31 - db_utils - INFO -   Test query result: (1,)
2024-10-31 04:45:31 - db_utils - INFO - Debugging tunbroyting database:
2024-10-31 04:45:31 - db_utils - INFO -   Database version: 0
2024-10-31 04:45:31 - db_utils - INFO -   Tables in tunbroyting.db: ['tunbroyting_bestillinger']
2024-10-31 04:45:31 - db_utils - INFO -   Structure of tunbroyting_bestillinger table:
2024-10-31 04:45:31 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 04:45:31 - db_utils - INFO -     Column: bruker, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:45:31 - db_utils - INFO -     Column: ankomst_dato, Type: DATE, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:45:31 - db_utils - INFO -     Column: ankomst_tid, Type: TIME, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:45:31 - db_utils - INFO -     Column: avreise_dato, Type: DATE, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:45:31 - db_utils - INFO -     Column: avreise_tid, Type: TIME, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:45:31 - db_utils - INFO -     Column: abonnement_type, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:45:31 - db_utils - INFO -   Indexes in tunbroyting.db: ['idx_tunbroyting_bruker', 'idx_tunbroyting_ankomst_dato', 'idx_tunbroyting_avreise_dato', 'idx_tunbroyting_abonnement']
2024-10-31 04:45:31 - db_utils - INFO -   Row count in tunbroyting_bestillinger: 2
2024-10-31 04:45:31 - db_utils - INFO -   Test query result: (1,)
2024-10-31 04:45:31 - db_utils - INFO - Debugging stroing database:
2024-10-31 04:45:31 - db_utils - INFO -   Database version: 0
2024-10-31 04:45:31 - db_utils - INFO -   Tables in stroing.db: ['sqlite_sequence', 'stroing_bestillinger']
2024-10-31 04:45:31 - db_utils - INFO -   Structure of sqlite_sequence table:
2024-10-31 04:45:31 - db_utils - INFO -     Column: name, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:45:31 - db_utils - INFO -     Column: seq, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:45:31 - db_utils - INFO -   Structure of stroing_bestillinger table:
2024-10-31 04:45:31 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 04:45:31 - db_utils - INFO -     Column: bruker, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:45:31 - db_utils - INFO -     Column: bestillings_dato, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:45:31 - db_utils - INFO -     Column: onske_dato, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:45:31 - db_utils - INFO -   Indexes in stroing.db: ['idx_stroing_bruker', 'idx_stroing_onske_dato', 'idx_stroing_bestillings_dato']
2024-10-31 04:45:31 - db_utils - INFO -   Row count in sqlite_sequence: 1
2024-10-31 04:45:31 - db_utils - INFO -   Row count in stroing_bestillinger: 5
2024-10-31 04:45:31 - db_utils - INFO -   Test query result: (1,)
2024-10-31 04:45:31 - db_utils - INFO - Debugging feedback database:
2024-10-31 04:45:31 - db_utils - INFO -   Database version: 0
2024-10-31 04:45:31 - db_utils - INFO -   Tables in feedback.db: ['sqlite_sequence', 'feedback']
2024-10-31 04:45:31 - db_utils - INFO -   Structure of sqlite_sequence table:
2024-10-31 04:45:31 - db_utils - INFO -     Column: name, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:45:31 - db_utils - INFO -     Column: seq, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:45:31 - db_utils - INFO -   Structure of feedback table:
2024-10-31 04:45:31 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 04:45:31 - db_utils - INFO -     Column: type, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:45:31 - db_utils - INFO -     Column: datetime, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:45:31 - db_utils - INFO -     Column: comment, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:45:31 - db_utils - INFO -     Column: innsender, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:45:31 - db_utils - INFO -     Column: status, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:45:31 - db_utils - INFO -     Column: status_changed_by, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:45:31 - db_utils - INFO -     Column: status_changed_at, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:45:31 - db_utils - INFO -     Column: hidden, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:45:31 - db_utils - INFO -     Column: is_alert, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:45:31 - db_utils - INFO -     Column: display_on_weather, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:45:31 - db_utils - INFO -     Column: expiry_date, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:45:31 - db_utils - INFO -     Column: target_group, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:45:31 - db_utils - INFO -   Indexes in feedback.db: ['idx_feedback_datetime', 'idx_feedback_innsender', 'idx_feedback_status', 'idx_feedback_type']
2024-10-31 04:45:31 - db_utils - INFO -   Row count in sqlite_sequence: 1
2024-10-31 04:45:31 - db_utils - INFO -   Row count in feedback: 11
2024-10-31 04:45:31 - db_utils - INFO -   Test query result: (1,)
2024-10-31 04:45:31 - db_utils - INFO - Detailed database operations debugging completed
2024-10-31 04:45:31 - db_utils - INFO - Oppdatert skjema for customer
2024-10-31 04:45:31 - db_utils - INFO - Oppdatert skjema for feedback
2024-10-31 04:45:31 - db_utils - INFO - Oppdatert skjema for login_history
2024-10-31 04:45:31 - db_utils - INFO - Oppdatert skjema for stroing
2024-10-31 04:45:31 - db_utils - INFO - Oppdatert skjema for tunbroyting
2024-10-31 04:45:31 - db_utils - INFO - All database schemas verified and updated
2024-10-31 04:45:31 - db_utils - INFO - Oppdatert skjema for customer
2024-10-31 04:45:31 - db_utils - INFO - Oppdatert skjema for feedback
2024-10-31 04:45:31 - db_utils - INFO - Oppdatert skjema for login_history
2024-10-31 04:45:31 - db_utils - INFO - Oppdatert skjema for stroing
2024-10-31 04:45:31 - db_utils - INFO - Oppdatert skjema for tunbroyting
2024-10-31 04:45:31 - db_utils - INFO - All database schemas verified and updated
2024-10-31 04:45:31 - db_utils - INFO - Database login_history initialized, updated, and optimized
2024-10-31 04:45:31 - db_utils - INFO - Database tunbroyting initialized, updated, and optimized
2024-10-31 04:45:31 - db_utils - INFO - Database stroing initialized, updated, and optimized
2024-10-31 04:45:31 - db_utils - INFO - Database feedback initialized, updated, and optimized
2024-10-31 04:45:31 - db_utils - INFO - Database customer initialized, updated, and optimized
2024-10-31 04:45:31 - db_utils - INFO - Successfully created indexes for tunbroyting database
2024-10-31 04:45:31 - db_utils - INFO - Successfully created indexes for stroing database
2024-10-31 04:45:31 - db_utils - INFO - Successfully created indexes for feedback database
2024-10-31 04:45:31 - db_utils - INFO - Successfully created indexes for login_history database
2024-10-31 04:45:31 - db_utils - INFO - Successfully created indexes for customer database
2024-10-31 04:45:31 - db_utils - INFO - Database index creation completed
2024-10-31 04:45:31 - db_utils - INFO - Database indexes created
2024-10-31 04:45:31 - db_utils - INFO - Successfully verified connection to stroing.db
2024-10-31 04:45:31 - db_utils - INFO - Successfully verified connection to tunbroyting.db
2024-10-31 04:45:31 - db_utils - INFO - Successfully verified connection to feedback.db
2024-10-31 04:45:31 - db_utils - INFO - Successfully verified connection to login_history.db
2024-10-31 04:45:31 - db_utils - INFO - Successfully verified connection to customer.db
2024-10-31 04:45:31 - db_utils - INFO - Database connections verified
2024-10-31 04:45:31 - db_utils - INFO - All databases initialized, updated, and verified
2024-10-31 04:45:31 - db_utils - INFO - Query executed successfully on login_history.db. Rows affected: -1
2024-10-31 04:45:31 - db_utils - INFO - login_history table structure is correct
2024-10-31 04:45:31 - customer_utils - INFO - Starting cabin user consistency check
2024-10-31 04:45:31 - utils - INFO - Attempting to load passwords from secrets
2024-10-31 04:45:31 - utils - INFO - Successfully loaded passwords. Number of entries: 94
2024-10-31 04:45:31 - customer_utils - INFO - Retrieved 94 passwords
2024-10-31 04:45:31 - customer_utils - INFO - Found 94 customers in database
2024-10-31 04:45:31 - customer_utils - INFO - Consistency check completed
2024-10-31 04:45:31 - customer_utils - INFO - Database connection closed
2024-10-31 04:45:31 - customer_utils - INFO - Validating customers and passwords
2024-10-31 04:45:31 - utils - INFO - Attempting to load passwords from secrets
2024-10-31 04:45:31 - utils - INFO - Successfully loaded passwords. Number of entries: 94
2024-10-31 04:45:31 - customer_utils - INFO - Customer and password validation complete
2024-10-31 04:45:31 - db_utils - INFO - Successfully created indexes for tunbroyting database
2024-10-31 04:45:31 - db_utils - INFO - Successfully created indexes for stroing database
2024-10-31 04:45:31 - db_utils - INFO - Successfully created indexes for feedback database
2024-10-31 04:45:31 - db_utils - INFO - Successfully created indexes for login_history database
2024-10-31 04:45:31 - db_utils - INFO - Successfully created indexes for customer database
2024-10-31 04:45:31 - db_utils - INFO - Database index creation completed
2024-10-31 04:45:31 - __main__ - INFO - Application initialization completed successfully
2024-10-31 04:45:31 - __main__ - INFO - Application initialization completed successfully
2024-10-31 04:45:31 - __main__ - INFO - Application setup complete
2024-10-31 04:45:31 - __main__ - INFO - Application shutting down
2024-10-31 04:45:34 - __main__ - INFO - Added validate_user_input function to app.py
2024-10-31 04:45:34 - __main__ - INFO - Starting application initialization
2024-10-31 04:45:34 - db_utils - INFO - Starting detailed database operations debugging
2024-10-31 04:45:34 - db_utils - INFO - Debugging login_history database:
2024-10-31 04:45:34 - db_utils - INFO -   Database version: 0
2024-10-31 04:45:34 - db_utils - INFO -   Tables in login_history.db: ['login_history']
2024-10-31 04:45:34 - db_utils - INFO -   Structure of login_history table:
2024-10-31 04:45:34 - db_utils - INFO -     Column: id, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:45:34 - db_utils - INFO -     Column: login_time, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:45:34 - db_utils - INFO -     Column: success, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:45:34 - db_utils - INFO -   Indexes in login_history.db: ['idx_login_id', 'idx_login_time']
2024-10-31 04:45:34 - db_utils - INFO -   Row count in login_history: 442
2024-10-31 04:45:34 - db_utils - INFO -   Test query result: (1,)
2024-10-31 04:45:34 - db_utils - INFO - Debugging tunbroyting database:
2024-10-31 04:45:34 - db_utils - INFO -   Database version: 0
2024-10-31 04:45:34 - db_utils - INFO -   Tables in tunbroyting.db: ['tunbroyting_bestillinger']
2024-10-31 04:45:34 - db_utils - INFO -   Structure of tunbroyting_bestillinger table:
2024-10-31 04:45:34 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 04:45:34 - db_utils - INFO -     Column: bruker, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:45:34 - db_utils - INFO -     Column: ankomst_dato, Type: DATE, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:45:34 - db_utils - INFO -     Column: ankomst_tid, Type: TIME, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:45:34 - db_utils - INFO -     Column: avreise_dato, Type: DATE, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:45:34 - db_utils - INFO -     Column: avreise_tid, Type: TIME, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:45:34 - db_utils - INFO -     Column: abonnement_type, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:45:34 - db_utils - INFO -   Indexes in tunbroyting.db: ['idx_tunbroyting_bruker', 'idx_tunbroyting_ankomst_dato', 'idx_tunbroyting_avreise_dato', 'idx_tunbroyting_abonnement']
2024-10-31 04:45:34 - db_utils - INFO -   Row count in tunbroyting_bestillinger: 2
2024-10-31 04:45:34 - db_utils - INFO -   Test query result: (1,)
2024-10-31 04:45:34 - db_utils - INFO - Debugging stroing database:
2024-10-31 04:45:34 - db_utils - INFO -   Database version: 0
2024-10-31 04:45:34 - db_utils - INFO -   Tables in stroing.db: ['sqlite_sequence', 'stroing_bestillinger']
2024-10-31 04:45:34 - db_utils - INFO -   Structure of sqlite_sequence table:
2024-10-31 04:45:34 - db_utils - INFO -     Column: name, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:45:34 - db_utils - INFO -     Column: seq, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:45:34 - db_utils - INFO -   Structure of stroing_bestillinger table:
2024-10-31 04:45:34 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 04:45:34 - db_utils - INFO -     Column: bruker, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:45:34 - db_utils - INFO -     Column: bestillings_dato, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:45:34 - db_utils - INFO -     Column: onske_dato, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:45:34 - db_utils - INFO -   Indexes in stroing.db: ['idx_stroing_bruker', 'idx_stroing_onske_dato', 'idx_stroing_bestillings_dato']
2024-10-31 04:45:34 - db_utils - INFO -   Row count in sqlite_sequence: 1
2024-10-31 04:45:34 - db_utils - INFO -   Row count in stroing_bestillinger: 5
2024-10-31 04:45:34 - db_utils - INFO -   Test query result: (1,)
2024-10-31 04:45:34 - db_utils - INFO - Debugging feedback database:
2024-10-31 04:45:34 - db_utils - INFO -   Database version: 0
2024-10-31 04:45:34 - db_utils - INFO -   Tables in feedback.db: ['sqlite_sequence', 'feedback']
2024-10-31 04:45:34 - db_utils - INFO -   Structure of sqlite_sequence table:
2024-10-31 04:45:34 - db_utils - INFO -     Column: name, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:45:34 - db_utils - INFO -     Column: seq, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:45:34 - db_utils - INFO -   Structure of feedback table:
2024-10-31 04:45:34 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 04:45:34 - db_utils - INFO -     Column: type, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:45:34 - db_utils - INFO -     Column: datetime, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:45:34 - db_utils - INFO -     Column: comment, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:45:34 - db_utils - INFO -     Column: innsender, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:45:34 - db_utils - INFO -     Column: status, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:45:34 - db_utils - INFO -     Column: status_changed_by, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:45:34 - db_utils - INFO -     Column: status_changed_at, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:45:34 - db_utils - INFO -     Column: hidden, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:45:34 - db_utils - INFO -     Column: is_alert, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:45:34 - db_utils - INFO -     Column: display_on_weather, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:45:34 - db_utils - INFO -     Column: expiry_date, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:45:34 - db_utils - INFO -     Column: target_group, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:45:34 - db_utils - INFO -   Indexes in feedback.db: ['idx_feedback_datetime', 'idx_feedback_innsender', 'idx_feedback_status', 'idx_feedback_type']
2024-10-31 04:45:34 - db_utils - INFO -   Row count in sqlite_sequence: 1
2024-10-31 04:45:34 - db_utils - INFO -   Row count in feedback: 11
2024-10-31 04:45:34 - db_utils - INFO -   Test query result: (1,)
2024-10-31 04:45:34 - db_utils - INFO - Detailed database operations debugging completed
2024-10-31 04:45:34 - db_utils - INFO - Oppdatert skjema for customer
2024-10-31 04:45:34 - db_utils - INFO - Oppdatert skjema for feedback
2024-10-31 04:45:34 - db_utils - INFO - Oppdatert skjema for login_history
2024-10-31 04:45:34 - db_utils - INFO - Oppdatert skjema for stroing
2024-10-31 04:45:34 - db_utils - INFO - Oppdatert skjema for tunbroyting
2024-10-31 04:45:34 - db_utils - INFO - All database schemas verified and updated
2024-10-31 04:45:34 - db_utils - INFO - Oppdatert skjema for customer
2024-10-31 04:45:34 - db_utils - INFO - Oppdatert skjema for feedback
2024-10-31 04:45:34 - db_utils - INFO - Oppdatert skjema for login_history
2024-10-31 04:45:34 - db_utils - INFO - Oppdatert skjema for stroing
2024-10-31 04:45:34 - db_utils - INFO - Oppdatert skjema for tunbroyting
2024-10-31 04:45:34 - db_utils - INFO - All database schemas verified and updated
2024-10-31 04:45:34 - db_utils - INFO - Database already initialized. Skipping.
2024-10-31 04:45:34 - db_utils - INFO - Query executed successfully on login_history.db. Rows affected: -1
2024-10-31 04:45:34 - db_utils - INFO - login_history table structure is correct
2024-10-31 04:45:34 - customer_utils - INFO - Starting cabin user consistency check
2024-10-31 04:45:34 - utils - INFO - Attempting to load passwords from secrets
2024-10-31 04:45:34 - utils - INFO - Successfully loaded passwords. Number of entries: 94
2024-10-31 04:45:34 - customer_utils - INFO - Retrieved 94 passwords
2024-10-31 04:45:34 - customer_utils - INFO - Found 94 customers in database
2024-10-31 04:45:34 - customer_utils - INFO - Consistency check completed
2024-10-31 04:45:34 - customer_utils - INFO - Database connection closed
2024-10-31 04:45:34 - customer_utils - INFO - Validating customers and passwords
2024-10-31 04:45:34 - utils - INFO - Attempting to load passwords from secrets
2024-10-31 04:45:34 - utils - INFO - Successfully loaded passwords. Number of entries: 94
2024-10-31 04:45:34 - customer_utils - INFO - Customer and password validation complete
2024-10-31 04:45:34 - db_utils - INFO - Successfully created indexes for tunbroyting database
2024-10-31 04:45:34 - db_utils - INFO - Successfully created indexes for stroing database
2024-10-31 04:45:34 - db_utils - INFO - Successfully created indexes for feedback database
2024-10-31 04:45:34 - db_utils - INFO - Successfully created indexes for login_history database
2024-10-31 04:45:34 - db_utils - INFO - Successfully created indexes for customer database
2024-10-31 04:45:34 - db_utils - INFO - Database index creation completed
2024-10-31 04:45:34 - __main__ - INFO - Application initialization completed successfully
2024-10-31 04:45:34 - __main__ - INFO - Application initialization completed successfully
2024-10-31 04:45:34 - __main__ - INFO - Application setup complete
2024-10-31 04:45:34 - auth_utils - INFO - Login attempt for ID: 999
2024-10-31 04:45:34 - db_utils - INFO - DATABASE_PATH: /Users/tor.inge.jossang@aftenbladet.no/dev/gullingen
2024-10-31 04:45:34 - db_utils - INFO - Full database path: /Users/tor.inge.jossang@aftenbladet.no/dev/gullingen/login_history.db
2024-10-31 04:45:34 - db_utils - INFO - Attempting to create database engine...
2024-10-31 04:45:34 - db_utils - INFO - Database engine created successfully for login_history.db
2024-10-31 04:45:34 - auth_utils - INFO - Rate limit check passed for user 999
2024-10-31 04:45:34 - auth_utils - INFO - User 999 authenticated successfully
2024-10-31 04:45:34 - customer_utils - INFO - Successfully retrieved customer with ID: 999
2024-10-31 04:45:34 - db_utils - INFO - Database file /Users/tor.inge.jossang@aftenbladet.no/dev/gullingen/login_history.db exists.
2024-10-31 04:45:34 - db_utils - INFO - Query executed successfully on login_history.db. Rows affected: 1
2024-10-31 04:45:34 - auth_utils - INFO - Successful login for ID: 999
2024-10-31 04:45:34 - auth_utils - INFO - Successful login and logging for ID: 999
2024-10-31 04:45:34 - db_utils - INFO - DATABASE_PATH: /Users/tor.inge.jossang@aftenbladet.no/dev/gullingen
2024-10-31 04:45:34 - db_utils - INFO - Full database path: /Users/tor.inge.jossang@aftenbladet.no/dev/gullingen/login_history.db
2024-10-31 04:45:34 - db_utils - INFO - Attempting to create database engine...
2024-10-31 04:45:34 - db_utils - INFO - Database engine created successfully for login_history.db
2024-10-31 04:45:34 - auth_utils - INFO - Rate limit reset for user 999
2024-10-31 04:45:34 - __main__ - INFO - Application shutting down
2024-10-31 04:45:34 - __main__ - INFO - Added validate_user_input function to app.py
2024-10-31 04:45:34 - __main__ - INFO - Starting application initialization
2024-10-31 04:45:34 - db_utils - INFO - Starting detailed database operations debugging
2024-10-31 04:45:34 - db_utils - INFO - Debugging login_history database:
2024-10-31 04:45:34 - db_utils - INFO -   Database version: 0
2024-10-31 04:45:34 - db_utils - INFO -   Tables in login_history.db: ['login_history']
2024-10-31 04:45:34 - db_utils - INFO -   Structure of login_history table:
2024-10-31 04:45:34 - db_utils - INFO -     Column: id, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:45:34 - db_utils - INFO -     Column: login_time, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:45:34 - db_utils - INFO -     Column: success, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:45:34 - db_utils - INFO -   Indexes in login_history.db: ['idx_login_id', 'idx_login_time']
2024-10-31 04:45:34 - db_utils - INFO -   Row count in login_history: 443
2024-10-31 04:45:34 - db_utils - INFO -   Test query result: (1,)
2024-10-31 04:45:34 - db_utils - INFO - Debugging tunbroyting database:
2024-10-31 04:45:34 - db_utils - INFO -   Database version: 0
2024-10-31 04:45:34 - db_utils - INFO -   Tables in tunbroyting.db: ['tunbroyting_bestillinger']
2024-10-31 04:45:34 - db_utils - INFO -   Structure of tunbroyting_bestillinger table:
2024-10-31 04:45:34 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 04:45:34 - db_utils - INFO -     Column: bruker, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:45:34 - db_utils - INFO -     Column: ankomst_dato, Type: DATE, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:45:34 - db_utils - INFO -     Column: ankomst_tid, Type: TIME, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:45:34 - db_utils - INFO -     Column: avreise_dato, Type: DATE, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:45:34 - db_utils - INFO -     Column: avreise_tid, Type: TIME, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:45:34 - db_utils - INFO -     Column: abonnement_type, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:45:34 - db_utils - INFO -   Indexes in tunbroyting.db: ['idx_tunbroyting_bruker', 'idx_tunbroyting_ankomst_dato', 'idx_tunbroyting_avreise_dato', 'idx_tunbroyting_abonnement']
2024-10-31 04:45:34 - db_utils - INFO -   Row count in tunbroyting_bestillinger: 2
2024-10-31 04:45:34 - db_utils - INFO -   Test query result: (1,)
2024-10-31 04:45:34 - db_utils - INFO - Debugging stroing database:
2024-10-31 04:45:34 - db_utils - INFO -   Database version: 0
2024-10-31 04:45:34 - db_utils - INFO -   Tables in stroing.db: ['sqlite_sequence', 'stroing_bestillinger']
2024-10-31 04:45:34 - db_utils - INFO -   Structure of sqlite_sequence table:
2024-10-31 04:45:34 - db_utils - INFO -     Column: name, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:45:34 - db_utils - INFO -     Column: seq, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:45:34 - db_utils - INFO -   Structure of stroing_bestillinger table:
2024-10-31 04:45:34 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 04:45:34 - db_utils - INFO -     Column: bruker, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:45:34 - db_utils - INFO -     Column: bestillings_dato, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:45:34 - db_utils - INFO -     Column: onske_dato, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:45:34 - db_utils - INFO -   Indexes in stroing.db: ['idx_stroing_bruker', 'idx_stroing_onske_dato', 'idx_stroing_bestillings_dato']
2024-10-31 04:45:34 - db_utils - INFO -   Row count in sqlite_sequence: 1
2024-10-31 04:45:34 - db_utils - INFO -   Row count in stroing_bestillinger: 5
2024-10-31 04:45:34 - db_utils - INFO -   Test query result: (1,)
2024-10-31 04:45:34 - db_utils - INFO - Debugging feedback database:
2024-10-31 04:45:34 - db_utils - INFO -   Database version: 0
2024-10-31 04:45:34 - db_utils - INFO -   Tables in feedback.db: ['sqlite_sequence', 'feedback']
2024-10-31 04:45:34 - db_utils - INFO -   Structure of sqlite_sequence table:
2024-10-31 04:45:34 - db_utils - INFO -     Column: name, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:45:34 - db_utils - INFO -     Column: seq, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:45:34 - db_utils - INFO -   Structure of feedback table:
2024-10-31 04:45:34 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 04:45:34 - db_utils - INFO -     Column: type, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:45:34 - db_utils - INFO -     Column: datetime, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:45:34 - db_utils - INFO -     Column: comment, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:45:34 - db_utils - INFO -     Column: innsender, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:45:34 - db_utils - INFO -     Column: status, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:45:34 - db_utils - INFO -     Column: status_changed_by, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:45:34 - db_utils - INFO -     Column: status_changed_at, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:45:34 - db_utils - INFO -     Column: hidden, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:45:34 - db_utils - INFO -     Column: is_alert, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:45:34 - db_utils - INFO -     Column: display_on_weather, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:45:34 - db_utils - INFO -     Column: expiry_date, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:45:34 - db_utils - INFO -     Column: target_group, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:45:34 - db_utils - INFO -   Indexes in feedback.db: ['idx_feedback_datetime', 'idx_feedback_innsender', 'idx_feedback_status', 'idx_feedback_type']
2024-10-31 04:45:34 - db_utils - INFO -   Row count in sqlite_sequence: 1
2024-10-31 04:45:34 - db_utils - INFO -   Row count in feedback: 11
2024-10-31 04:45:34 - db_utils - INFO -   Test query result: (1,)
2024-10-31 04:45:34 - db_utils - INFO - Detailed database operations debugging completed
2024-10-31 04:45:34 - db_utils - INFO - Oppdatert skjema for customer
2024-10-31 04:45:34 - db_utils - INFO - Oppdatert skjema for feedback
2024-10-31 04:45:34 - db_utils - INFO - Oppdatert skjema for login_history
2024-10-31 04:45:34 - db_utils - INFO - Oppdatert skjema for stroing
2024-10-31 04:45:34 - db_utils - INFO - Oppdatert skjema for tunbroyting
2024-10-31 04:45:34 - db_utils - INFO - All database schemas verified and updated
2024-10-31 04:45:34 - db_utils - INFO - Oppdatert skjema for customer
2024-10-31 04:45:34 - db_utils - INFO - Oppdatert skjema for feedback
2024-10-31 04:45:34 - db_utils - INFO - Oppdatert skjema for login_history
2024-10-31 04:45:34 - db_utils - INFO - Oppdatert skjema for stroing
2024-10-31 04:45:34 - db_utils - INFO - Oppdatert skjema for tunbroyting
2024-10-31 04:45:34 - db_utils - INFO - All database schemas verified and updated
2024-10-31 04:45:34 - db_utils - INFO - Database already initialized. Skipping.
2024-10-31 04:45:34 - db_utils - INFO - Query executed successfully on login_history.db. Rows affected: -1
2024-10-31 04:45:34 - db_utils - INFO - login_history table structure is correct
2024-10-31 04:45:34 - customer_utils - INFO - Starting cabin user consistency check
2024-10-31 04:45:34 - utils - INFO - Attempting to load passwords from secrets
2024-10-31 04:45:34 - utils - INFO - Successfully loaded passwords. Number of entries: 94
2024-10-31 04:45:34 - customer_utils - INFO - Retrieved 94 passwords
2024-10-31 04:45:34 - customer_utils - INFO - Found 94 customers in database
2024-10-31 04:45:34 - customer_utils - INFO - Consistency check completed
2024-10-31 04:45:34 - customer_utils - INFO - Database connection closed
2024-10-31 04:45:34 - customer_utils - INFO - Validating customers and passwords
2024-10-31 04:45:34 - utils - INFO - Attempting to load passwords from secrets
2024-10-31 04:45:34 - utils - INFO - Successfully loaded passwords. Number of entries: 94
2024-10-31 04:45:34 - customer_utils - INFO - Customer and password validation complete
2024-10-31 04:45:34 - db_utils - INFO - Successfully created indexes for tunbroyting database
2024-10-31 04:45:34 - db_utils - INFO - Successfully created indexes for stroing database
2024-10-31 04:45:34 - db_utils - INFO - Successfully created indexes for feedback database
2024-10-31 04:45:34 - db_utils - INFO - Successfully created indexes for login_history database
2024-10-31 04:45:34 - db_utils - INFO - Successfully created indexes for customer database
2024-10-31 04:45:34 - db_utils - INFO - Database index creation completed
2024-10-31 04:45:34 - __main__ - INFO - Application initialization completed successfully
2024-10-31 04:45:34 - __main__ - INFO - Application initialization completed successfully
2024-10-31 04:45:34 - __main__ - INFO - Application setup complete
2024-10-31 04:45:34 - customer_utils - INFO - Successfully retrieved customer with ID: 999
2024-10-31 04:45:34 - alert_utils - INFO - Fetched 1 alerts. only_today=False, include_expired=False
2024-10-31 04:45:34 - tun_utils - WARNING - hent_bestillinger() is deprecated, use get_bookings() instead
2024-10-31 04:45:34 - tun_utils - INFO - Starting get_bookings with start_date=None, end_date=None
2024-10-31 04:45:34 - tun_utils - INFO - Successfully retrieved 2 bookings
2024-10-31 04:45:34 - __main__ - INFO - Application shutting down
2024-10-31 04:45:44 - __main__ - INFO - Added validate_user_input function to app.py
2024-10-31 04:45:44 - __main__ - INFO - Starting application initialization
2024-10-31 04:45:44 - db_utils - INFO - Starting detailed database operations debugging
2024-10-31 04:45:44 - db_utils - INFO - Debugging login_history database:
2024-10-31 04:45:44 - db_utils - INFO -   Database version: 0
2024-10-31 04:45:44 - db_utils - INFO -   Tables in login_history.db: ['login_history']
2024-10-31 04:45:44 - db_utils - INFO -   Structure of login_history table:
2024-10-31 04:45:44 - db_utils - INFO -     Column: id, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:45:44 - db_utils - INFO -     Column: login_time, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:45:44 - db_utils - INFO -     Column: success, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:45:44 - db_utils - INFO -   Indexes in login_history.db: ['idx_login_id', 'idx_login_time']
2024-10-31 04:45:44 - db_utils - INFO -   Row count in login_history: 443
2024-10-31 04:45:44 - db_utils - INFO -   Test query result: (1,)
2024-10-31 04:45:44 - db_utils - INFO - Debugging tunbroyting database:
2024-10-31 04:45:44 - db_utils - INFO -   Database version: 0
2024-10-31 04:45:44 - db_utils - INFO -   Tables in tunbroyting.db: ['tunbroyting_bestillinger']
2024-10-31 04:45:44 - db_utils - INFO -   Structure of tunbroyting_bestillinger table:
2024-10-31 04:45:44 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 04:45:44 - db_utils - INFO -     Column: bruker, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:45:44 - db_utils - INFO -     Column: ankomst_dato, Type: DATE, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:45:44 - db_utils - INFO -     Column: ankomst_tid, Type: TIME, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:45:44 - db_utils - INFO -     Column: avreise_dato, Type: DATE, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:45:44 - db_utils - INFO -     Column: avreise_tid, Type: TIME, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:45:44 - db_utils - INFO -     Column: abonnement_type, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:45:44 - db_utils - INFO -   Indexes in tunbroyting.db: ['idx_tunbroyting_bruker', 'idx_tunbroyting_ankomst_dato', 'idx_tunbroyting_avreise_dato', 'idx_tunbroyting_abonnement']
2024-10-31 04:45:44 - db_utils - INFO -   Row count in tunbroyting_bestillinger: 2
2024-10-31 04:45:44 - db_utils - INFO -   Test query result: (1,)
2024-10-31 04:45:44 - db_utils - INFO - Debugging stroing database:
2024-10-31 04:45:44 - db_utils - INFO -   Database version: 0
2024-10-31 04:45:44 - db_utils - INFO -   Tables in stroing.db: ['sqlite_sequence', 'stroing_bestillinger']
2024-10-31 04:45:44 - db_utils - INFO -   Structure of sqlite_sequence table:
2024-10-31 04:45:44 - db_utils - INFO -     Column: name, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:45:44 - db_utils - INFO -     Column: seq, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:45:44 - db_utils - INFO -   Structure of stroing_bestillinger table:
2024-10-31 04:45:44 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 04:45:44 - db_utils - INFO -     Column: bruker, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:45:44 - db_utils - INFO -     Column: bestillings_dato, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:45:44 - db_utils - INFO -     Column: onske_dato, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:45:44 - db_utils - INFO -   Indexes in stroing.db: ['idx_stroing_bruker', 'idx_stroing_onske_dato', 'idx_stroing_bestillings_dato']
2024-10-31 04:45:44 - db_utils - INFO -   Row count in sqlite_sequence: 1
2024-10-31 04:45:44 - db_utils - INFO -   Row count in stroing_bestillinger: 5
2024-10-31 04:45:44 - db_utils - INFO -   Test query result: (1,)
2024-10-31 04:45:44 - db_utils - INFO - Debugging feedback database:
2024-10-31 04:45:44 - db_utils - INFO -   Database version: 0
2024-10-31 04:45:44 - db_utils - INFO -   Tables in feedback.db: ['sqlite_sequence', 'feedback']
2024-10-31 04:45:44 - db_utils - INFO -   Structure of sqlite_sequence table:
2024-10-31 04:45:44 - db_utils - INFO -     Column: name, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:45:44 - db_utils - INFO -     Column: seq, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:45:44 - db_utils - INFO -   Structure of feedback table:
2024-10-31 04:45:44 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 04:45:44 - db_utils - INFO -     Column: type, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:45:44 - db_utils - INFO -     Column: datetime, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:45:44 - db_utils - INFO -     Column: comment, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:45:44 - db_utils - INFO -     Column: innsender, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:45:44 - db_utils - INFO -     Column: status, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:45:44 - db_utils - INFO -     Column: status_changed_by, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:45:44 - db_utils - INFO -     Column: status_changed_at, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:45:44 - db_utils - INFO -     Column: hidden, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:45:44 - db_utils - INFO -     Column: is_alert, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:45:44 - db_utils - INFO -     Column: display_on_weather, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:45:44 - db_utils - INFO -     Column: expiry_date, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:45:44 - db_utils - INFO -     Column: target_group, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:45:44 - db_utils - INFO -   Indexes in feedback.db: ['idx_feedback_datetime', 'idx_feedback_innsender', 'idx_feedback_status', 'idx_feedback_type']
2024-10-31 04:45:44 - db_utils - INFO -   Row count in sqlite_sequence: 1
2024-10-31 04:45:44 - db_utils - INFO -   Row count in feedback: 11
2024-10-31 04:45:44 - db_utils - INFO -   Test query result: (1,)
2024-10-31 04:45:44 - db_utils - INFO - Detailed database operations debugging completed
2024-10-31 04:45:44 - db_utils - INFO - Oppdatert skjema for customer
2024-10-31 04:45:44 - db_utils - INFO - Oppdatert skjema for feedback
2024-10-31 04:45:44 - db_utils - INFO - Oppdatert skjema for login_history
2024-10-31 04:45:44 - db_utils - INFO - Oppdatert skjema for stroing
2024-10-31 04:45:44 - db_utils - INFO - Oppdatert skjema for tunbroyting
2024-10-31 04:45:44 - db_utils - INFO - All database schemas verified and updated
2024-10-31 04:45:44 - db_utils - INFO - Oppdatert skjema for customer
2024-10-31 04:45:44 - db_utils - INFO - Oppdatert skjema for feedback
2024-10-31 04:45:44 - db_utils - INFO - Oppdatert skjema for login_history
2024-10-31 04:45:44 - db_utils - INFO - Oppdatert skjema for stroing
2024-10-31 04:45:44 - db_utils - INFO - Oppdatert skjema for tunbroyting
2024-10-31 04:45:44 - db_utils - INFO - All database schemas verified and updated
2024-10-31 04:45:44 - db_utils - INFO - Database already initialized. Skipping.
2024-10-31 04:45:44 - db_utils - INFO - Query executed successfully on login_history.db. Rows affected: -1
2024-10-31 04:45:45 - db_utils - INFO - login_history table structure is correct
2024-10-31 04:45:45 - customer_utils - INFO - Starting cabin user consistency check
2024-10-31 04:45:45 - utils - INFO - Attempting to load passwords from secrets
2024-10-31 04:45:45 - utils - INFO - Successfully loaded passwords. Number of entries: 94
2024-10-31 04:45:45 - customer_utils - INFO - Retrieved 94 passwords
2024-10-31 04:45:45 - customer_utils - INFO - Found 94 customers in database
2024-10-31 04:45:45 - customer_utils - INFO - Consistency check completed
2024-10-31 04:45:45 - customer_utils - INFO - Database connection closed
2024-10-31 04:45:45 - customer_utils - INFO - Validating customers and passwords
2024-10-31 04:45:45 - utils - INFO - Attempting to load passwords from secrets
2024-10-31 04:45:45 - utils - INFO - Successfully loaded passwords. Number of entries: 94
2024-10-31 04:45:45 - customer_utils - INFO - Customer and password validation complete
2024-10-31 04:45:45 - db_utils - INFO - Successfully created indexes for tunbroyting database
2024-10-31 04:45:45 - db_utils - INFO - Successfully created indexes for stroing database
2024-10-31 04:45:45 - db_utils - INFO - Successfully created indexes for feedback database
2024-10-31 04:45:45 - db_utils - INFO - Successfully created indexes for login_history database
2024-10-31 04:45:45 - db_utils - INFO - Successfully created indexes for customer database
2024-10-31 04:45:45 - db_utils - INFO - Database index creation completed
2024-10-31 04:45:45 - __main__ - INFO - Application initialization completed successfully
2024-10-31 04:45:45 - __main__ - INFO - Application initialization completed successfully
2024-10-31 04:45:45 - __main__ - INFO - Application setup complete
2024-10-31 04:45:45 - customer_utils - INFO - Successfully retrieved customer with ID: 999
2024-10-31 04:45:45 - weather_display_utils - ERROR - Uventet feil i display_weather_data: 'max_wind_speed'
Traceback (most recent call last):
  File "/Users/tor.inge.jossang@aftenbladet.no/dev/gullingen/new_clean_env/lib/python3.12/site-packages/pandas/core/indexes/base.py", line 3805, in get_loc
    return self._engine.get_loc(casted_key)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "index.pyx", line 167, in pandas._libs.index.IndexEngine.get_loc
  File "index.pyx", line 196, in pandas._libs.index.IndexEngine.get_loc
  File "pandas/_libs/hashtable_class_helper.pxi", line 7081, in pandas._libs.hashtable.PyObjectHashTable.get_item
  File "pandas/_libs/hashtable_class_helper.pxi", line 7089, in pandas._libs.hashtable.PyObjectHashTable.get_item
KeyError: 'max_wind_speed'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/tor.inge.jossang@aftenbladet.no/dev/gullingen/weather_display_utils.py", line 45, in display_weather_data
    fig = create_improved_graph(df)
          ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/tor.inge.jossang@aftenbladet.no/dev/gullingen/weather_display_utils.py", line 268, in create_improved_graph
    max_wind_idx = df["max_wind_speed"].idxmax()
                   ~~^^^^^^^^^^^^^^^^^^
  File "/Users/tor.inge.jossang@aftenbladet.no/dev/gullingen/new_clean_env/lib/python3.12/site-packages/pandas/core/frame.py", line 4102, in __getitem__
    indexer = self.columns.get_loc(key)
              ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/tor.inge.jossang@aftenbladet.no/dev/gullingen/new_clean_env/lib/python3.12/site-packages/pandas/core/indexes/base.py", line 3812, in get_loc
    raise KeyError(key) from err
KeyError: 'max_wind_speed'
2024-10-31 04:45:45 - __main__ - INFO - Application shutting down
2024-10-31 04:47:30 - __main__ - INFO - Added validate_user_input function to app.py
2024-10-31 04:47:30 - __main__ - INFO - Starting application initialization
2024-10-31 04:47:30 - db_utils - INFO - Starting detailed database operations debugging
2024-10-31 04:47:30 - db_utils - INFO - Debugging login_history database:
2024-10-31 04:47:30 - db_utils - INFO -   Database version: 0
2024-10-31 04:47:30 - db_utils - INFO -   Tables in login_history.db: ['login_history']
2024-10-31 04:47:30 - db_utils - INFO -   Structure of login_history table:
2024-10-31 04:47:30 - db_utils - INFO -     Column: id, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:47:30 - db_utils - INFO -     Column: login_time, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:47:30 - db_utils - INFO -     Column: success, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:47:30 - db_utils - INFO -   Indexes in login_history.db: ['idx_login_id', 'idx_login_time']
2024-10-31 04:47:30 - db_utils - INFO -   Row count in login_history: 443
2024-10-31 04:47:30 - db_utils - INFO -   Test query result: (1,)
2024-10-31 04:47:30 - db_utils - INFO - Debugging tunbroyting database:
2024-10-31 04:47:30 - db_utils - INFO -   Database version: 0
2024-10-31 04:47:30 - db_utils - INFO -   Tables in tunbroyting.db: ['tunbroyting_bestillinger']
2024-10-31 04:47:30 - db_utils - INFO -   Structure of tunbroyting_bestillinger table:
2024-10-31 04:47:30 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 04:47:30 - db_utils - INFO -     Column: bruker, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:47:30 - db_utils - INFO -     Column: ankomst_dato, Type: DATE, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:47:30 - db_utils - INFO -     Column: ankomst_tid, Type: TIME, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:47:30 - db_utils - INFO -     Column: avreise_dato, Type: DATE, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:47:30 - db_utils - INFO -     Column: avreise_tid, Type: TIME, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:47:30 - db_utils - INFO -     Column: abonnement_type, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:47:30 - db_utils - INFO -   Indexes in tunbroyting.db: ['idx_tunbroyting_bruker', 'idx_tunbroyting_ankomst_dato', 'idx_tunbroyting_avreise_dato', 'idx_tunbroyting_abonnement']
2024-10-31 04:47:30 - db_utils - INFO -   Row count in tunbroyting_bestillinger: 2
2024-10-31 04:47:30 - db_utils - INFO -   Test query result: (1,)
2024-10-31 04:47:30 - db_utils - INFO - Debugging stroing database:
2024-10-31 04:47:30 - db_utils - INFO -   Database version: 0
2024-10-31 04:47:30 - db_utils - INFO -   Tables in stroing.db: ['sqlite_sequence', 'stroing_bestillinger']
2024-10-31 04:47:30 - db_utils - INFO -   Structure of sqlite_sequence table:
2024-10-31 04:47:30 - db_utils - INFO -     Column: name, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:47:30 - db_utils - INFO -     Column: seq, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:47:30 - db_utils - INFO -   Structure of stroing_bestillinger table:
2024-10-31 04:47:30 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 04:47:30 - db_utils - INFO -     Column: bruker, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:47:30 - db_utils - INFO -     Column: bestillings_dato, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:47:30 - db_utils - INFO -     Column: onske_dato, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:47:30 - db_utils - INFO -   Indexes in stroing.db: ['idx_stroing_bruker', 'idx_stroing_onske_dato', 'idx_stroing_bestillings_dato']
2024-10-31 04:47:30 - db_utils - INFO -   Row count in sqlite_sequence: 1
2024-10-31 04:47:30 - db_utils - INFO -   Row count in stroing_bestillinger: 5
2024-10-31 04:47:30 - db_utils - INFO -   Test query result: (1,)
2024-10-31 04:47:30 - db_utils - INFO - Debugging feedback database:
2024-10-31 04:47:30 - db_utils - INFO -   Database version: 0
2024-10-31 04:47:30 - db_utils - INFO -   Tables in feedback.db: ['sqlite_sequence', 'feedback']
2024-10-31 04:47:30 - db_utils - INFO -   Structure of sqlite_sequence table:
2024-10-31 04:47:30 - db_utils - INFO -     Column: name, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:47:30 - db_utils - INFO -     Column: seq, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:47:30 - db_utils - INFO -   Structure of feedback table:
2024-10-31 04:47:30 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 04:47:30 - db_utils - INFO -     Column: type, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:47:30 - db_utils - INFO -     Column: datetime, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:47:30 - db_utils - INFO -     Column: comment, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:47:30 - db_utils - INFO -     Column: innsender, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:47:30 - db_utils - INFO -     Column: status, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:47:30 - db_utils - INFO -     Column: status_changed_by, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:47:30 - db_utils - INFO -     Column: status_changed_at, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:47:30 - db_utils - INFO -     Column: hidden, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:47:30 - db_utils - INFO -     Column: is_alert, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:47:30 - db_utils - INFO -     Column: display_on_weather, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:47:30 - db_utils - INFO -     Column: expiry_date, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:47:30 - db_utils - INFO -     Column: target_group, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:47:30 - db_utils - INFO -   Indexes in feedback.db: ['idx_feedback_datetime', 'idx_feedback_innsender', 'idx_feedback_status', 'idx_feedback_type']
2024-10-31 04:47:30 - db_utils - INFO -   Row count in sqlite_sequence: 1
2024-10-31 04:47:30 - db_utils - INFO -   Row count in feedback: 11
2024-10-31 04:47:30 - db_utils - INFO -   Test query result: (1,)
2024-10-31 04:47:30 - db_utils - INFO - Detailed database operations debugging completed
2024-10-31 04:47:30 - db_utils - INFO - Oppdatert skjema for customer
2024-10-31 04:47:30 - db_utils - INFO - Oppdatert skjema for feedback
2024-10-31 04:47:30 - db_utils - INFO - Oppdatert skjema for login_history
2024-10-31 04:47:30 - db_utils - INFO - Oppdatert skjema for stroing
2024-10-31 04:47:30 - db_utils - INFO - Oppdatert skjema for tunbroyting
2024-10-31 04:47:30 - db_utils - INFO - All database schemas verified and updated
2024-10-31 04:47:30 - db_utils - INFO - Oppdatert skjema for customer
2024-10-31 04:47:30 - db_utils - INFO - Oppdatert skjema for feedback
2024-10-31 04:47:30 - db_utils - INFO - Oppdatert skjema for login_history
2024-10-31 04:47:30 - db_utils - INFO - Oppdatert skjema for stroing
2024-10-31 04:47:30 - db_utils - INFO - Oppdatert skjema for tunbroyting
2024-10-31 04:47:30 - db_utils - INFO - All database schemas verified and updated
2024-10-31 04:47:30 - db_utils - INFO - Database login_history initialized, updated, and optimized
2024-10-31 04:47:30 - db_utils - INFO - Database tunbroyting initialized, updated, and optimized
2024-10-31 04:47:30 - db_utils - INFO - Database stroing initialized, updated, and optimized
2024-10-31 04:47:30 - db_utils - INFO - Database feedback initialized, updated, and optimized
2024-10-31 04:47:30 - db_utils - INFO - Database customer initialized, updated, and optimized
2024-10-31 04:47:30 - db_utils - INFO - Successfully created indexes for tunbroyting database
2024-10-31 04:47:30 - db_utils - INFO - Successfully created indexes for stroing database
2024-10-31 04:47:30 - db_utils - INFO - Successfully created indexes for feedback database
2024-10-31 04:47:30 - db_utils - INFO - Successfully created indexes for login_history database
2024-10-31 04:47:30 - db_utils - INFO - Successfully created indexes for customer database
2024-10-31 04:47:30 - db_utils - INFO - Database index creation completed
2024-10-31 04:47:30 - db_utils - INFO - Database indexes created
2024-10-31 04:47:30 - db_utils - INFO - Successfully verified connection to stroing.db
2024-10-31 04:47:30 - db_utils - INFO - Successfully verified connection to tunbroyting.db
2024-10-31 04:47:30 - db_utils - INFO - Successfully verified connection to feedback.db
2024-10-31 04:47:30 - db_utils - INFO - Successfully verified connection to login_history.db
2024-10-31 04:47:30 - db_utils - INFO - Successfully verified connection to customer.db
2024-10-31 04:47:30 - db_utils - INFO - Database connections verified
2024-10-31 04:47:30 - db_utils - INFO - All databases initialized, updated, and verified
2024-10-31 04:47:30 - db_utils - INFO - Query executed successfully on login_history.db. Rows affected: -1
2024-10-31 04:47:30 - db_utils - INFO - login_history table structure is correct
2024-10-31 04:47:30 - customer_utils - INFO - Starting cabin user consistency check
2024-10-31 04:47:30 - utils - INFO - Attempting to load passwords from secrets
2024-10-31 04:47:30 - utils - INFO - Successfully loaded passwords. Number of entries: 94
2024-10-31 04:47:30 - customer_utils - INFO - Retrieved 94 passwords
2024-10-31 04:47:30 - customer_utils - INFO - Found 94 customers in database
2024-10-31 04:47:30 - customer_utils - INFO - Consistency check completed
2024-10-31 04:47:30 - customer_utils - INFO - Database connection closed
2024-10-31 04:47:30 - customer_utils - INFO - Validating customers and passwords
2024-10-31 04:47:30 - utils - INFO - Attempting to load passwords from secrets
2024-10-31 04:47:30 - utils - INFO - Successfully loaded passwords. Number of entries: 94
2024-10-31 04:47:30 - customer_utils - INFO - Customer and password validation complete
2024-10-31 04:47:30 - db_utils - INFO - Successfully created indexes for tunbroyting database
2024-10-31 04:47:30 - db_utils - INFO - Successfully created indexes for stroing database
2024-10-31 04:47:30 - db_utils - INFO - Successfully created indexes for feedback database
2024-10-31 04:47:30 - db_utils - INFO - Successfully created indexes for login_history database
2024-10-31 04:47:30 - db_utils - INFO - Successfully created indexes for customer database
2024-10-31 04:47:30 - db_utils - INFO - Database index creation completed
2024-10-31 04:47:30 - __main__ - INFO - Application initialization completed successfully
2024-10-31 04:47:30 - __main__ - INFO - Application initialization completed successfully
2024-10-31 04:47:30 - __main__ - INFO - Application setup complete
2024-10-31 04:47:30 - __main__ - INFO - Application shutting down
2024-10-31 04:47:32 - __main__ - INFO - Added validate_user_input function to app.py
2024-10-31 04:47:32 - __main__ - INFO - Starting application initialization
2024-10-31 04:47:32 - db_utils - INFO - Starting detailed database operations debugging
2024-10-31 04:47:32 - db_utils - INFO - Debugging login_history database:
2024-10-31 04:47:32 - db_utils - INFO -   Database version: 0
2024-10-31 04:47:32 - db_utils - INFO -   Tables in login_history.db: ['login_history']
2024-10-31 04:47:32 - db_utils - INFO -   Structure of login_history table:
2024-10-31 04:47:32 - db_utils - INFO -     Column: id, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:47:32 - db_utils - INFO -     Column: login_time, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:47:32 - db_utils - INFO -     Column: success, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:47:32 - db_utils - INFO -   Indexes in login_history.db: ['idx_login_id', 'idx_login_time']
2024-10-31 04:47:32 - db_utils - INFO -   Row count in login_history: 443
2024-10-31 04:47:32 - db_utils - INFO -   Test query result: (1,)
2024-10-31 04:47:32 - db_utils - INFO - Debugging tunbroyting database:
2024-10-31 04:47:32 - db_utils - INFO -   Database version: 0
2024-10-31 04:47:32 - db_utils - INFO -   Tables in tunbroyting.db: ['tunbroyting_bestillinger']
2024-10-31 04:47:32 - db_utils - INFO -   Structure of tunbroyting_bestillinger table:
2024-10-31 04:47:32 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 04:47:32 - db_utils - INFO -     Column: bruker, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:47:32 - db_utils - INFO -     Column: ankomst_dato, Type: DATE, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:47:32 - db_utils - INFO -     Column: ankomst_tid, Type: TIME, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:47:32 - db_utils - INFO -     Column: avreise_dato, Type: DATE, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:47:32 - db_utils - INFO -     Column: avreise_tid, Type: TIME, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:47:32 - db_utils - INFO -     Column: abonnement_type, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:47:32 - db_utils - INFO -   Indexes in tunbroyting.db: ['idx_tunbroyting_bruker', 'idx_tunbroyting_ankomst_dato', 'idx_tunbroyting_avreise_dato', 'idx_tunbroyting_abonnement']
2024-10-31 04:47:32 - db_utils - INFO -   Row count in tunbroyting_bestillinger: 2
2024-10-31 04:47:32 - db_utils - INFO -   Test query result: (1,)
2024-10-31 04:47:32 - db_utils - INFO - Debugging stroing database:
2024-10-31 04:47:32 - db_utils - INFO -   Database version: 0
2024-10-31 04:47:32 - db_utils - INFO -   Tables in stroing.db: ['sqlite_sequence', 'stroing_bestillinger']
2024-10-31 04:47:32 - db_utils - INFO -   Structure of sqlite_sequence table:
2024-10-31 04:47:32 - db_utils - INFO -     Column: name, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:47:32 - db_utils - INFO -     Column: seq, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:47:32 - db_utils - INFO -   Structure of stroing_bestillinger table:
2024-10-31 04:47:32 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 04:47:32 - db_utils - INFO -     Column: bruker, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:47:32 - db_utils - INFO -     Column: bestillings_dato, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:47:32 - db_utils - INFO -     Column: onske_dato, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:47:32 - db_utils - INFO -   Indexes in stroing.db: ['idx_stroing_bruker', 'idx_stroing_onske_dato', 'idx_stroing_bestillings_dato']
2024-10-31 04:47:32 - db_utils - INFO -   Row count in sqlite_sequence: 1
2024-10-31 04:47:32 - db_utils - INFO -   Row count in stroing_bestillinger: 5
2024-10-31 04:47:32 - db_utils - INFO -   Test query result: (1,)
2024-10-31 04:47:32 - db_utils - INFO - Debugging feedback database:
2024-10-31 04:47:32 - db_utils - INFO -   Database version: 0
2024-10-31 04:47:32 - db_utils - INFO -   Tables in feedback.db: ['sqlite_sequence', 'feedback']
2024-10-31 04:47:32 - db_utils - INFO -   Structure of sqlite_sequence table:
2024-10-31 04:47:32 - db_utils - INFO -     Column: name, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:47:32 - db_utils - INFO -     Column: seq, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:47:32 - db_utils - INFO -   Structure of feedback table:
2024-10-31 04:47:32 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 04:47:32 - db_utils - INFO -     Column: type, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:47:32 - db_utils - INFO -     Column: datetime, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:47:32 - db_utils - INFO -     Column: comment, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:47:32 - db_utils - INFO -     Column: innsender, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:47:32 - db_utils - INFO -     Column: status, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:47:32 - db_utils - INFO -     Column: status_changed_by, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:47:32 - db_utils - INFO -     Column: status_changed_at, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:47:32 - db_utils - INFO -     Column: hidden, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:47:32 - db_utils - INFO -     Column: is_alert, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:47:32 - db_utils - INFO -     Column: display_on_weather, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:47:32 - db_utils - INFO -     Column: expiry_date, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:47:32 - db_utils - INFO -     Column: target_group, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:47:32 - db_utils - INFO -   Indexes in feedback.db: ['idx_feedback_datetime', 'idx_feedback_innsender', 'idx_feedback_status', 'idx_feedback_type']
2024-10-31 04:47:32 - db_utils - INFO -   Row count in sqlite_sequence: 1
2024-10-31 04:47:32 - db_utils - INFO -   Row count in feedback: 11
2024-10-31 04:47:32 - db_utils - INFO -   Test query result: (1,)
2024-10-31 04:47:32 - db_utils - INFO - Detailed database operations debugging completed
2024-10-31 04:47:32 - db_utils - INFO - Oppdatert skjema for customer
2024-10-31 04:47:32 - db_utils - INFO - Oppdatert skjema for feedback
2024-10-31 04:47:32 - db_utils - INFO - Oppdatert skjema for login_history
2024-10-31 04:47:32 - db_utils - INFO - Oppdatert skjema for stroing
2024-10-31 04:47:32 - db_utils - INFO - Oppdatert skjema for tunbroyting
2024-10-31 04:47:32 - db_utils - INFO - All database schemas verified and updated
2024-10-31 04:47:32 - db_utils - INFO - Oppdatert skjema for customer
2024-10-31 04:47:32 - db_utils - INFO - Oppdatert skjema for feedback
2024-10-31 04:47:32 - db_utils - INFO - Oppdatert skjema for login_history
2024-10-31 04:47:32 - db_utils - INFO - Oppdatert skjema for stroing
2024-10-31 04:47:32 - db_utils - INFO - Oppdatert skjema for tunbroyting
2024-10-31 04:47:32 - db_utils - INFO - All database schemas verified and updated
2024-10-31 04:47:32 - db_utils - INFO - Database already initialized. Skipping.
2024-10-31 04:47:32 - db_utils - INFO - Query executed successfully on login_history.db. Rows affected: -1
2024-10-31 04:47:32 - db_utils - INFO - login_history table structure is correct
2024-10-31 04:47:32 - customer_utils - INFO - Starting cabin user consistency check
2024-10-31 04:47:32 - utils - INFO - Attempting to load passwords from secrets
2024-10-31 04:47:32 - utils - INFO - Successfully loaded passwords. Number of entries: 94
2024-10-31 04:47:32 - customer_utils - INFO - Retrieved 94 passwords
2024-10-31 04:47:32 - customer_utils - INFO - Found 94 customers in database
2024-10-31 04:47:32 - customer_utils - INFO - Consistency check completed
2024-10-31 04:47:32 - customer_utils - INFO - Database connection closed
2024-10-31 04:47:32 - customer_utils - INFO - Validating customers and passwords
2024-10-31 04:47:32 - utils - INFO - Attempting to load passwords from secrets
2024-10-31 04:47:32 - utils - INFO - Successfully loaded passwords. Number of entries: 94
2024-10-31 04:47:32 - customer_utils - INFO - Customer and password validation complete
2024-10-31 04:47:32 - db_utils - INFO - Successfully created indexes for tunbroyting database
2024-10-31 04:47:32 - db_utils - INFO - Successfully created indexes for stroing database
2024-10-31 04:47:32 - db_utils - INFO - Successfully created indexes for feedback database
2024-10-31 04:47:32 - db_utils - INFO - Successfully created indexes for login_history database
2024-10-31 04:47:32 - db_utils - INFO - Successfully created indexes for customer database
2024-10-31 04:47:32 - db_utils - INFO - Database index creation completed
2024-10-31 04:47:32 - __main__ - INFO - Application initialization completed successfully
2024-10-31 04:47:32 - __main__ - INFO - Application initialization completed successfully
2024-10-31 04:47:32 - __main__ - INFO - Application setup complete
2024-10-31 04:47:32 - auth_utils - INFO - Login attempt for ID: 999
2024-10-31 04:47:32 - db_utils - INFO - DATABASE_PATH: /Users/tor.inge.jossang@aftenbladet.no/dev/gullingen
2024-10-31 04:47:32 - db_utils - INFO - Full database path: /Users/tor.inge.jossang@aftenbladet.no/dev/gullingen/login_history.db
2024-10-31 04:47:32 - db_utils - INFO - Attempting to create database engine...
2024-10-31 04:47:32 - db_utils - INFO - Database engine created successfully for login_history.db
2024-10-31 04:47:32 - auth_utils - INFO - Rate limit check passed for user 999
2024-10-31 04:47:32 - auth_utils - INFO - User 999 authenticated successfully
2024-10-31 04:47:32 - customer_utils - INFO - Successfully retrieved customer with ID: 999
2024-10-31 04:47:32 - db_utils - INFO - Database file /Users/tor.inge.jossang@aftenbladet.no/dev/gullingen/login_history.db exists.
2024-10-31 04:47:32 - db_utils - INFO - Query executed successfully on login_history.db. Rows affected: 1
2024-10-31 04:47:32 - auth_utils - INFO - Successful login for ID: 999
2024-10-31 04:47:32 - auth_utils - INFO - Successful login and logging for ID: 999
2024-10-31 04:47:32 - db_utils - INFO - DATABASE_PATH: /Users/tor.inge.jossang@aftenbladet.no/dev/gullingen
2024-10-31 04:47:32 - db_utils - INFO - Full database path: /Users/tor.inge.jossang@aftenbladet.no/dev/gullingen/login_history.db
2024-10-31 04:47:32 - db_utils - INFO - Attempting to create database engine...
2024-10-31 04:47:32 - db_utils - INFO - Database engine created successfully for login_history.db
2024-10-31 04:47:32 - auth_utils - INFO - Rate limit reset for user 999
2024-10-31 04:47:32 - __main__ - INFO - Application shutting down
2024-10-31 04:47:32 - __main__ - INFO - Added validate_user_input function to app.py
2024-10-31 04:47:32 - __main__ - INFO - Starting application initialization
2024-10-31 04:47:32 - db_utils - INFO - Starting detailed database operations debugging
2024-10-31 04:47:32 - db_utils - INFO - Debugging login_history database:
2024-10-31 04:47:32 - db_utils - INFO -   Database version: 0
2024-10-31 04:47:32 - db_utils - INFO -   Tables in login_history.db: ['login_history']
2024-10-31 04:47:32 - db_utils - INFO -   Structure of login_history table:
2024-10-31 04:47:32 - db_utils - INFO -     Column: id, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:47:32 - db_utils - INFO -     Column: login_time, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:47:32 - db_utils - INFO -     Column: success, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:47:32 - db_utils - INFO -   Indexes in login_history.db: ['idx_login_id', 'idx_login_time']
2024-10-31 04:47:32 - db_utils - INFO -   Row count in login_history: 444
2024-10-31 04:47:32 - db_utils - INFO -   Test query result: (1,)
2024-10-31 04:47:32 - db_utils - INFO - Debugging tunbroyting database:
2024-10-31 04:47:32 - db_utils - INFO -   Database version: 0
2024-10-31 04:47:32 - db_utils - INFO -   Tables in tunbroyting.db: ['tunbroyting_bestillinger']
2024-10-31 04:47:32 - db_utils - INFO -   Structure of tunbroyting_bestillinger table:
2024-10-31 04:47:32 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 04:47:32 - db_utils - INFO -     Column: bruker, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:47:32 - db_utils - INFO -     Column: ankomst_dato, Type: DATE, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:47:32 - db_utils - INFO -     Column: ankomst_tid, Type: TIME, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:47:32 - db_utils - INFO -     Column: avreise_dato, Type: DATE, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:47:32 - db_utils - INFO -     Column: avreise_tid, Type: TIME, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:47:32 - db_utils - INFO -     Column: abonnement_type, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:47:32 - db_utils - INFO -   Indexes in tunbroyting.db: ['idx_tunbroyting_bruker', 'idx_tunbroyting_ankomst_dato', 'idx_tunbroyting_avreise_dato', 'idx_tunbroyting_abonnement']
2024-10-31 04:47:32 - db_utils - INFO -   Row count in tunbroyting_bestillinger: 2
2024-10-31 04:47:32 - db_utils - INFO -   Test query result: (1,)
2024-10-31 04:47:32 - db_utils - INFO - Debugging stroing database:
2024-10-31 04:47:32 - db_utils - INFO -   Database version: 0
2024-10-31 04:47:32 - db_utils - INFO -   Tables in stroing.db: ['sqlite_sequence', 'stroing_bestillinger']
2024-10-31 04:47:32 - db_utils - INFO -   Structure of sqlite_sequence table:
2024-10-31 04:47:32 - db_utils - INFO -     Column: name, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:47:32 - db_utils - INFO -     Column: seq, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:47:32 - db_utils - INFO -   Structure of stroing_bestillinger table:
2024-10-31 04:47:32 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 04:47:32 - db_utils - INFO -     Column: bruker, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:47:32 - db_utils - INFO -     Column: bestillings_dato, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:47:32 - db_utils - INFO -     Column: onske_dato, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:47:32 - db_utils - INFO -   Indexes in stroing.db: ['idx_stroing_bruker', 'idx_stroing_onske_dato', 'idx_stroing_bestillings_dato']
2024-10-31 04:47:32 - db_utils - INFO -   Row count in sqlite_sequence: 1
2024-10-31 04:47:32 - db_utils - INFO -   Row count in stroing_bestillinger: 5
2024-10-31 04:47:32 - db_utils - INFO -   Test query result: (1,)
2024-10-31 04:47:32 - db_utils - INFO - Debugging feedback database:
2024-10-31 04:47:32 - db_utils - INFO -   Database version: 0
2024-10-31 04:47:32 - db_utils - INFO -   Tables in feedback.db: ['sqlite_sequence', 'feedback']
2024-10-31 04:47:32 - db_utils - INFO -   Structure of sqlite_sequence table:
2024-10-31 04:47:32 - db_utils - INFO -     Column: name, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:47:32 - db_utils - INFO -     Column: seq, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:47:32 - db_utils - INFO -   Structure of feedback table:
2024-10-31 04:47:32 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 04:47:32 - db_utils - INFO -     Column: type, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:47:32 - db_utils - INFO -     Column: datetime, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:47:32 - db_utils - INFO -     Column: comment, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:47:32 - db_utils - INFO -     Column: innsender, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:47:32 - db_utils - INFO -     Column: status, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:47:32 - db_utils - INFO -     Column: status_changed_by, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:47:32 - db_utils - INFO -     Column: status_changed_at, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:47:32 - db_utils - INFO -     Column: hidden, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:47:32 - db_utils - INFO -     Column: is_alert, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:47:32 - db_utils - INFO -     Column: display_on_weather, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:47:32 - db_utils - INFO -     Column: expiry_date, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:47:32 - db_utils - INFO -     Column: target_group, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:47:32 - db_utils - INFO -   Indexes in feedback.db: ['idx_feedback_datetime', 'idx_feedback_innsender', 'idx_feedback_status', 'idx_feedback_type']
2024-10-31 04:47:32 - db_utils - INFO -   Row count in sqlite_sequence: 1
2024-10-31 04:47:32 - db_utils - INFO -   Row count in feedback: 11
2024-10-31 04:47:32 - db_utils - INFO -   Test query result: (1,)
2024-10-31 04:47:32 - db_utils - INFO - Detailed database operations debugging completed
2024-10-31 04:47:32 - db_utils - INFO - Oppdatert skjema for customer
2024-10-31 04:47:32 - db_utils - INFO - Oppdatert skjema for feedback
2024-10-31 04:47:32 - db_utils - INFO - Oppdatert skjema for login_history
2024-10-31 04:47:32 - db_utils - INFO - Oppdatert skjema for stroing
2024-10-31 04:47:32 - db_utils - INFO - Oppdatert skjema for tunbroyting
2024-10-31 04:47:32 - db_utils - INFO - All database schemas verified and updated
2024-10-31 04:47:32 - db_utils - INFO - Oppdatert skjema for customer
2024-10-31 04:47:32 - db_utils - INFO - Oppdatert skjema for feedback
2024-10-31 04:47:32 - db_utils - INFO - Oppdatert skjema for login_history
2024-10-31 04:47:32 - db_utils - INFO - Oppdatert skjema for stroing
2024-10-31 04:47:32 - db_utils - INFO - Oppdatert skjema for tunbroyting
2024-10-31 04:47:32 - db_utils - INFO - All database schemas verified and updated
2024-10-31 04:47:32 - db_utils - INFO - Database already initialized. Skipping.
2024-10-31 04:47:32 - db_utils - INFO - Query executed successfully on login_history.db. Rows affected: -1
2024-10-31 04:47:32 - db_utils - INFO - login_history table structure is correct
2024-10-31 04:47:32 - customer_utils - INFO - Starting cabin user consistency check
2024-10-31 04:47:32 - utils - INFO - Attempting to load passwords from secrets
2024-10-31 04:47:32 - utils - INFO - Successfully loaded passwords. Number of entries: 94
2024-10-31 04:47:32 - customer_utils - INFO - Retrieved 94 passwords
2024-10-31 04:47:32 - customer_utils - INFO - Found 94 customers in database
2024-10-31 04:47:32 - customer_utils - INFO - Consistency check completed
2024-10-31 04:47:32 - customer_utils - INFO - Database connection closed
2024-10-31 04:47:32 - customer_utils - INFO - Validating customers and passwords
2024-10-31 04:47:32 - utils - INFO - Attempting to load passwords from secrets
2024-10-31 04:47:32 - utils - INFO - Successfully loaded passwords. Number of entries: 94
2024-10-31 04:47:32 - customer_utils - INFO - Customer and password validation complete
2024-10-31 04:47:32 - db_utils - INFO - Successfully created indexes for tunbroyting database
2024-10-31 04:47:32 - db_utils - INFO - Successfully created indexes for stroing database
2024-10-31 04:47:32 - db_utils - INFO - Successfully created indexes for feedback database
2024-10-31 04:47:32 - db_utils - INFO - Successfully created indexes for login_history database
2024-10-31 04:47:32 - db_utils - INFO - Successfully created indexes for customer database
2024-10-31 04:47:32 - db_utils - INFO - Database index creation completed
2024-10-31 04:47:32 - __main__ - INFO - Application initialization completed successfully
2024-10-31 04:47:32 - __main__ - INFO - Application initialization completed successfully
2024-10-31 04:47:32 - __main__ - INFO - Application setup complete
2024-10-31 04:47:32 - customer_utils - INFO - Successfully retrieved customer with ID: 999
2024-10-31 04:47:32 - alert_utils - INFO - Fetched 1 alerts. only_today=False, include_expired=False
2024-10-31 04:47:32 - tun_utils - WARNING - hent_bestillinger() is deprecated, use get_bookings() instead
2024-10-31 04:47:32 - tun_utils - INFO - Starting get_bookings with start_date=None, end_date=None
2024-10-31 04:47:32 - tun_utils - INFO - Successfully retrieved 2 bookings
2024-10-31 04:47:32 - __main__ - INFO - Application shutting down
2024-10-31 04:47:35 - __main__ - INFO - Added validate_user_input function to app.py
2024-10-31 04:47:35 - __main__ - INFO - Starting application initialization
2024-10-31 04:47:35 - db_utils - INFO - Starting detailed database operations debugging
2024-10-31 04:47:35 - db_utils - INFO - Debugging login_history database:
2024-10-31 04:47:35 - db_utils - INFO -   Database version: 0
2024-10-31 04:47:35 - db_utils - INFO -   Tables in login_history.db: ['login_history']
2024-10-31 04:47:35 - db_utils - INFO -   Structure of login_history table:
2024-10-31 04:47:35 - db_utils - INFO -     Column: id, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:47:35 - db_utils - INFO -     Column: login_time, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:47:35 - db_utils - INFO -     Column: success, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:47:35 - db_utils - INFO -   Indexes in login_history.db: ['idx_login_id', 'idx_login_time']
2024-10-31 04:47:35 - db_utils - INFO -   Row count in login_history: 444
2024-10-31 04:47:35 - db_utils - INFO -   Test query result: (1,)
2024-10-31 04:47:35 - db_utils - INFO - Debugging tunbroyting database:
2024-10-31 04:47:35 - db_utils - INFO -   Database version: 0
2024-10-31 04:47:35 - db_utils - INFO -   Tables in tunbroyting.db: ['tunbroyting_bestillinger']
2024-10-31 04:47:35 - db_utils - INFO -   Structure of tunbroyting_bestillinger table:
2024-10-31 04:47:35 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 04:47:35 - db_utils - INFO -     Column: bruker, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:47:35 - db_utils - INFO -     Column: ankomst_dato, Type: DATE, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:47:35 - db_utils - INFO -     Column: ankomst_tid, Type: TIME, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:47:35 - db_utils - INFO -     Column: avreise_dato, Type: DATE, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:47:35 - db_utils - INFO -     Column: avreise_tid, Type: TIME, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:47:35 - db_utils - INFO -     Column: abonnement_type, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:47:35 - db_utils - INFO -   Indexes in tunbroyting.db: ['idx_tunbroyting_bruker', 'idx_tunbroyting_ankomst_dato', 'idx_tunbroyting_avreise_dato', 'idx_tunbroyting_abonnement']
2024-10-31 04:47:35 - db_utils - INFO -   Row count in tunbroyting_bestillinger: 2
2024-10-31 04:47:35 - db_utils - INFO -   Test query result: (1,)
2024-10-31 04:47:35 - db_utils - INFO - Debugging stroing database:
2024-10-31 04:47:35 - db_utils - INFO -   Database version: 0
2024-10-31 04:47:35 - db_utils - INFO -   Tables in stroing.db: ['sqlite_sequence', 'stroing_bestillinger']
2024-10-31 04:47:35 - db_utils - INFO -   Structure of sqlite_sequence table:
2024-10-31 04:47:35 - db_utils - INFO -     Column: name, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:47:35 - db_utils - INFO -     Column: seq, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:47:35 - db_utils - INFO -   Structure of stroing_bestillinger table:
2024-10-31 04:47:35 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 04:47:35 - db_utils - INFO -     Column: bruker, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:47:35 - db_utils - INFO -     Column: bestillings_dato, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:47:35 - db_utils - INFO -     Column: onske_dato, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:47:35 - db_utils - INFO -   Indexes in stroing.db: ['idx_stroing_bruker', 'idx_stroing_onske_dato', 'idx_stroing_bestillings_dato']
2024-10-31 04:47:35 - db_utils - INFO -   Row count in sqlite_sequence: 1
2024-10-31 04:47:35 - db_utils - INFO -   Row count in stroing_bestillinger: 5
2024-10-31 04:47:35 - db_utils - INFO -   Test query result: (1,)
2024-10-31 04:47:35 - db_utils - INFO - Debugging feedback database:
2024-10-31 04:47:35 - db_utils - INFO -   Database version: 0
2024-10-31 04:47:35 - db_utils - INFO -   Tables in feedback.db: ['sqlite_sequence', 'feedback']
2024-10-31 04:47:35 - db_utils - INFO -   Structure of sqlite_sequence table:
2024-10-31 04:47:35 - db_utils - INFO -     Column: name, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:47:35 - db_utils - INFO -     Column: seq, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:47:35 - db_utils - INFO -   Structure of feedback table:
2024-10-31 04:47:35 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 04:47:35 - db_utils - INFO -     Column: type, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:47:35 - db_utils - INFO -     Column: datetime, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:47:35 - db_utils - INFO -     Column: comment, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:47:35 - db_utils - INFO -     Column: innsender, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:47:35 - db_utils - INFO -     Column: status, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:47:35 - db_utils - INFO -     Column: status_changed_by, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:47:35 - db_utils - INFO -     Column: status_changed_at, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:47:35 - db_utils - INFO -     Column: hidden, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:47:35 - db_utils - INFO -     Column: is_alert, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:47:35 - db_utils - INFO -     Column: display_on_weather, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:47:35 - db_utils - INFO -     Column: expiry_date, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:47:35 - db_utils - INFO -     Column: target_group, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:47:35 - db_utils - INFO -   Indexes in feedback.db: ['idx_feedback_datetime', 'idx_feedback_innsender', 'idx_feedback_status', 'idx_feedback_type']
2024-10-31 04:47:35 - db_utils - INFO -   Row count in sqlite_sequence: 1
2024-10-31 04:47:35 - db_utils - INFO -   Row count in feedback: 11
2024-10-31 04:47:35 - db_utils - INFO -   Test query result: (1,)
2024-10-31 04:47:35 - db_utils - INFO - Detailed database operations debugging completed
2024-10-31 04:47:35 - db_utils - INFO - Oppdatert skjema for customer
2024-10-31 04:47:35 - db_utils - INFO - Oppdatert skjema for feedback
2024-10-31 04:47:35 - db_utils - INFO - Oppdatert skjema for login_history
2024-10-31 04:47:35 - db_utils - INFO - Oppdatert skjema for stroing
2024-10-31 04:47:35 - db_utils - INFO - Oppdatert skjema for tunbroyting
2024-10-31 04:47:35 - db_utils - INFO - All database schemas verified and updated
2024-10-31 04:47:35 - db_utils - INFO - Oppdatert skjema for customer
2024-10-31 04:47:35 - db_utils - INFO - Oppdatert skjema for feedback
2024-10-31 04:47:35 - db_utils - INFO - Oppdatert skjema for login_history
2024-10-31 04:47:35 - db_utils - INFO - Oppdatert skjema for stroing
2024-10-31 04:47:35 - db_utils - INFO - Oppdatert skjema for tunbroyting
2024-10-31 04:47:35 - db_utils - INFO - All database schemas verified and updated
2024-10-31 04:47:35 - db_utils - INFO - Database already initialized. Skipping.
2024-10-31 04:47:35 - db_utils - INFO - Query executed successfully on login_history.db. Rows affected: -1
2024-10-31 04:47:35 - db_utils - INFO - login_history table structure is correct
2024-10-31 04:47:35 - customer_utils - INFO - Starting cabin user consistency check
2024-10-31 04:47:35 - utils - INFO - Attempting to load passwords from secrets
2024-10-31 04:47:35 - utils - INFO - Successfully loaded passwords. Number of entries: 94
2024-10-31 04:47:35 - customer_utils - INFO - Retrieved 94 passwords
2024-10-31 04:47:35 - customer_utils - INFO - Found 94 customers in database
2024-10-31 04:47:35 - customer_utils - INFO - Consistency check completed
2024-10-31 04:47:35 - customer_utils - INFO - Database connection closed
2024-10-31 04:47:35 - customer_utils - INFO - Validating customers and passwords
2024-10-31 04:47:35 - utils - INFO - Attempting to load passwords from secrets
2024-10-31 04:47:35 - utils - INFO - Successfully loaded passwords. Number of entries: 94
2024-10-31 04:47:35 - customer_utils - INFO - Customer and password validation complete
2024-10-31 04:47:35 - db_utils - INFO - Successfully created indexes for tunbroyting database
2024-10-31 04:47:35 - db_utils - INFO - Successfully created indexes for stroing database
2024-10-31 04:47:35 - db_utils - INFO - Successfully created indexes for feedback database
2024-10-31 04:47:35 - db_utils - INFO - Successfully created indexes for login_history database
2024-10-31 04:47:35 - db_utils - INFO - Successfully created indexes for customer database
2024-10-31 04:47:35 - db_utils - INFO - Database index creation completed
2024-10-31 04:47:35 - __main__ - INFO - Application initialization completed successfully
2024-10-31 04:47:35 - __main__ - INFO - Application initialization completed successfully
2024-10-31 04:47:35 - __main__ - INFO - Application setup complete
2024-10-31 04:47:35 - customer_utils - INFO - Successfully retrieved customer with ID: 999
2024-10-31 04:47:36 - __main__ - INFO - Application shutting down
2024-10-31 04:48:26 - __main__ - INFO - Added validate_user_input function to app.py
2024-10-31 04:48:26 - __main__ - INFO - Starting application initialization
2024-10-31 04:48:26 - db_utils - INFO - Starting detailed database operations debugging
2024-10-31 04:48:26 - db_utils - INFO - Debugging login_history database:
2024-10-31 04:48:26 - db_utils - INFO -   Database version: 0
2024-10-31 04:48:26 - db_utils - INFO -   Tables in login_history.db: ['login_history']
2024-10-31 04:48:26 - db_utils - INFO -   Structure of login_history table:
2024-10-31 04:48:26 - db_utils - INFO -     Column: id, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:48:26 - db_utils - INFO -     Column: login_time, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:48:26 - db_utils - INFO -     Column: success, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:48:26 - db_utils - INFO -   Indexes in login_history.db: ['idx_login_id', 'idx_login_time']
2024-10-31 04:48:26 - db_utils - INFO -   Row count in login_history: 444
2024-10-31 04:48:26 - db_utils - INFO -   Test query result: (1,)
2024-10-31 04:48:26 - db_utils - INFO - Debugging tunbroyting database:
2024-10-31 04:48:26 - db_utils - INFO -   Database version: 0
2024-10-31 04:48:26 - db_utils - INFO -   Tables in tunbroyting.db: ['tunbroyting_bestillinger']
2024-10-31 04:48:26 - db_utils - INFO -   Structure of tunbroyting_bestillinger table:
2024-10-31 04:48:26 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 04:48:26 - db_utils - INFO -     Column: bruker, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:48:26 - db_utils - INFO -     Column: ankomst_dato, Type: DATE, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:48:26 - db_utils - INFO -     Column: ankomst_tid, Type: TIME, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:48:26 - db_utils - INFO -     Column: avreise_dato, Type: DATE, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:48:26 - db_utils - INFO -     Column: avreise_tid, Type: TIME, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:48:26 - db_utils - INFO -     Column: abonnement_type, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:48:26 - db_utils - INFO -   Indexes in tunbroyting.db: ['idx_tunbroyting_bruker', 'idx_tunbroyting_ankomst_dato', 'idx_tunbroyting_avreise_dato', 'idx_tunbroyting_abonnement']
2024-10-31 04:48:26 - db_utils - INFO -   Row count in tunbroyting_bestillinger: 2
2024-10-31 04:48:26 - db_utils - INFO -   Test query result: (1,)
2024-10-31 04:48:26 - db_utils - INFO - Debugging stroing database:
2024-10-31 04:48:26 - db_utils - INFO -   Database version: 0
2024-10-31 04:48:26 - db_utils - INFO -   Tables in stroing.db: ['sqlite_sequence', 'stroing_bestillinger']
2024-10-31 04:48:26 - db_utils - INFO -   Structure of sqlite_sequence table:
2024-10-31 04:48:26 - db_utils - INFO -     Column: name, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:48:26 - db_utils - INFO -     Column: seq, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:48:26 - db_utils - INFO -   Structure of stroing_bestillinger table:
2024-10-31 04:48:26 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 04:48:26 - db_utils - INFO -     Column: bruker, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:48:26 - db_utils - INFO -     Column: bestillings_dato, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:48:26 - db_utils - INFO -     Column: onske_dato, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:48:26 - db_utils - INFO -   Indexes in stroing.db: ['idx_stroing_bruker', 'idx_stroing_onske_dato', 'idx_stroing_bestillings_dato']
2024-10-31 04:48:26 - db_utils - INFO -   Row count in sqlite_sequence: 1
2024-10-31 04:48:26 - db_utils - INFO -   Row count in stroing_bestillinger: 5
2024-10-31 04:48:26 - db_utils - INFO -   Test query result: (1,)
2024-10-31 04:48:26 - db_utils - INFO - Debugging feedback database:
2024-10-31 04:48:26 - db_utils - INFO -   Database version: 0
2024-10-31 04:48:26 - db_utils - INFO -   Tables in feedback.db: ['sqlite_sequence', 'feedback']
2024-10-31 04:48:26 - db_utils - INFO -   Structure of sqlite_sequence table:
2024-10-31 04:48:26 - db_utils - INFO -     Column: name, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:48:26 - db_utils - INFO -     Column: seq, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:48:26 - db_utils - INFO -   Structure of feedback table:
2024-10-31 04:48:26 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 04:48:26 - db_utils - INFO -     Column: type, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:48:26 - db_utils - INFO -     Column: datetime, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:48:26 - db_utils - INFO -     Column: comment, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:48:26 - db_utils - INFO -     Column: innsender, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:48:26 - db_utils - INFO -     Column: status, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:48:26 - db_utils - INFO -     Column: status_changed_by, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:48:26 - db_utils - INFO -     Column: status_changed_at, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:48:26 - db_utils - INFO -     Column: hidden, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:48:26 - db_utils - INFO -     Column: is_alert, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:48:26 - db_utils - INFO -     Column: display_on_weather, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:48:26 - db_utils - INFO -     Column: expiry_date, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:48:26 - db_utils - INFO -     Column: target_group, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:48:26 - db_utils - INFO -   Indexes in feedback.db: ['idx_feedback_datetime', 'idx_feedback_innsender', 'idx_feedback_status', 'idx_feedback_type']
2024-10-31 04:48:26 - db_utils - INFO -   Row count in sqlite_sequence: 1
2024-10-31 04:48:26 - db_utils - INFO -   Row count in feedback: 11
2024-10-31 04:48:26 - db_utils - INFO -   Test query result: (1,)
2024-10-31 04:48:26 - db_utils - INFO - Detailed database operations debugging completed
2024-10-31 04:48:26 - db_utils - INFO - Oppdatert skjema for customer
2024-10-31 04:48:26 - db_utils - INFO - Oppdatert skjema for feedback
2024-10-31 04:48:26 - db_utils - INFO - Oppdatert skjema for login_history
2024-10-31 04:48:26 - db_utils - INFO - Oppdatert skjema for stroing
2024-10-31 04:48:26 - db_utils - INFO - Oppdatert skjema for tunbroyting
2024-10-31 04:48:26 - db_utils - INFO - All database schemas verified and updated
2024-10-31 04:48:26 - db_utils - INFO - Oppdatert skjema for customer
2024-10-31 04:48:26 - db_utils - INFO - Oppdatert skjema for feedback
2024-10-31 04:48:26 - db_utils - INFO - Oppdatert skjema for login_history
2024-10-31 04:48:26 - db_utils - INFO - Oppdatert skjema for stroing
2024-10-31 04:48:26 - db_utils - INFO - Oppdatert skjema for tunbroyting
2024-10-31 04:48:26 - db_utils - INFO - All database schemas verified and updated
2024-10-31 04:48:26 - db_utils - INFO - Database already initialized. Skipping.
2024-10-31 04:48:26 - db_utils - INFO - Query executed successfully on login_history.db. Rows affected: -1
2024-10-31 04:48:26 - db_utils - INFO - login_history table structure is correct
2024-10-31 04:48:26 - customer_utils - INFO - Starting cabin user consistency check
2024-10-31 04:48:26 - utils - INFO - Attempting to load passwords from secrets
2024-10-31 04:48:26 - utils - INFO - Successfully loaded passwords. Number of entries: 94
2024-10-31 04:48:26 - customer_utils - INFO - Retrieved 94 passwords
2024-10-31 04:48:26 - customer_utils - INFO - Found 94 customers in database
2024-10-31 04:48:26 - customer_utils - INFO - Consistency check completed
2024-10-31 04:48:26 - customer_utils - INFO - Database connection closed
2024-10-31 04:48:26 - customer_utils - INFO - Validating customers and passwords
2024-10-31 04:48:26 - utils - INFO - Attempting to load passwords from secrets
2024-10-31 04:48:26 - utils - INFO - Successfully loaded passwords. Number of entries: 94
2024-10-31 04:48:26 - customer_utils - INFO - Customer and password validation complete
2024-10-31 04:48:26 - db_utils - INFO - Successfully created indexes for tunbroyting database
2024-10-31 04:48:26 - db_utils - INFO - Successfully created indexes for stroing database
2024-10-31 04:48:26 - db_utils - INFO - Successfully created indexes for feedback database
2024-10-31 04:48:26 - db_utils - INFO - Successfully created indexes for login_history database
2024-10-31 04:48:26 - db_utils - INFO - Successfully created indexes for customer database
2024-10-31 04:48:26 - db_utils - INFO - Database index creation completed
2024-10-31 04:48:26 - __main__ - INFO - Application initialization completed successfully
2024-10-31 04:48:26 - __main__ - INFO - Application initialization completed successfully
2024-10-31 04:48:26 - __main__ - INFO - Application setup complete
2024-10-31 04:48:26 - customer_utils - INFO - Successfully retrieved customer with ID: 999
2024-10-31 04:48:27 - __main__ - INFO - Application shutting down
2024-10-31 04:50:41 - db_utils - INFO - Starting to close all database connections
2024-10-31 04:50:41 - db_utils - INFO - Finished closing all database connections and cleaning up files
2024-10-31 04:56:24 - __main__ - INFO - Added validate_user_input function to app.py
2024-10-31 04:56:24 - __main__ - INFO - Starting application initialization
2024-10-31 04:56:24 - db_utils - INFO - Starting detailed database operations debugging
2024-10-31 04:56:24 - db_utils - INFO - Debugging login_history database:
2024-10-31 04:56:24 - db_utils - INFO -   Database version: 0
2024-10-31 04:56:24 - db_utils - INFO -   Tables in login_history.db: ['login_history']
2024-10-31 04:56:24 - db_utils - INFO -   Structure of login_history table:
2024-10-31 04:56:24 - db_utils - INFO -     Column: id, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:56:24 - db_utils - INFO -     Column: login_time, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:56:24 - db_utils - INFO -     Column: success, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:56:24 - db_utils - INFO -   Indexes in login_history.db: ['idx_login_id', 'idx_login_time']
2024-10-31 04:56:24 - db_utils - INFO -   Row count in login_history: 444
2024-10-31 04:56:24 - db_utils - INFO -   Test query result: (1,)
2024-10-31 04:56:24 - db_utils - INFO - Debugging tunbroyting database:
2024-10-31 04:56:24 - db_utils - INFO -   Database version: 0
2024-10-31 04:56:24 - db_utils - INFO -   Tables in tunbroyting.db: ['tunbroyting_bestillinger']
2024-10-31 04:56:24 - db_utils - INFO -   Structure of tunbroyting_bestillinger table:
2024-10-31 04:56:24 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 04:56:24 - db_utils - INFO -     Column: bruker, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:56:24 - db_utils - INFO -     Column: ankomst_dato, Type: DATE, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:56:24 - db_utils - INFO -     Column: ankomst_tid, Type: TIME, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:56:24 - db_utils - INFO -     Column: avreise_dato, Type: DATE, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:56:24 - db_utils - INFO -     Column: avreise_tid, Type: TIME, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:56:24 - db_utils - INFO -     Column: abonnement_type, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:56:24 - db_utils - INFO -   Indexes in tunbroyting.db: ['idx_tunbroyting_bruker', 'idx_tunbroyting_ankomst_dato', 'idx_tunbroyting_avreise_dato', 'idx_tunbroyting_abonnement']
2024-10-31 04:56:24 - db_utils - INFO -   Row count in tunbroyting_bestillinger: 2
2024-10-31 04:56:24 - db_utils - INFO -   Test query result: (1,)
2024-10-31 04:56:24 - db_utils - INFO - Debugging stroing database:
2024-10-31 04:56:24 - db_utils - INFO -   Database version: 0
2024-10-31 04:56:24 - db_utils - INFO -   Tables in stroing.db: ['sqlite_sequence', 'stroing_bestillinger']
2024-10-31 04:56:24 - db_utils - INFO -   Structure of sqlite_sequence table:
2024-10-31 04:56:24 - db_utils - INFO -     Column: name, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:56:24 - db_utils - INFO -     Column: seq, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:56:24 - db_utils - INFO -   Structure of stroing_bestillinger table:
2024-10-31 04:56:24 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 04:56:24 - db_utils - INFO -     Column: bruker, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:56:24 - db_utils - INFO -     Column: bestillings_dato, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:56:24 - db_utils - INFO -     Column: onske_dato, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:56:24 - db_utils - INFO -   Indexes in stroing.db: ['idx_stroing_bruker', 'idx_stroing_onske_dato', 'idx_stroing_bestillings_dato']
2024-10-31 04:56:24 - db_utils - INFO -   Row count in sqlite_sequence: 1
2024-10-31 04:56:24 - db_utils - INFO -   Row count in stroing_bestillinger: 5
2024-10-31 04:56:24 - db_utils - INFO -   Test query result: (1,)
2024-10-31 04:56:24 - db_utils - INFO - Debugging feedback database:
2024-10-31 04:56:24 - db_utils - INFO -   Database version: 0
2024-10-31 04:56:24 - db_utils - INFO -   Tables in feedback.db: ['sqlite_sequence', 'feedback']
2024-10-31 04:56:24 - db_utils - INFO -   Structure of sqlite_sequence table:
2024-10-31 04:56:24 - db_utils - INFO -     Column: name, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:56:24 - db_utils - INFO -     Column: seq, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:56:24 - db_utils - INFO -   Structure of feedback table:
2024-10-31 04:56:24 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 04:56:24 - db_utils - INFO -     Column: type, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:56:24 - db_utils - INFO -     Column: datetime, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:56:24 - db_utils - INFO -     Column: comment, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:56:24 - db_utils - INFO -     Column: innsender, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:56:24 - db_utils - INFO -     Column: status, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:56:24 - db_utils - INFO -     Column: status_changed_by, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:56:24 - db_utils - INFO -     Column: status_changed_at, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:56:24 - db_utils - INFO -     Column: hidden, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:56:24 - db_utils - INFO -     Column: is_alert, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:56:24 - db_utils - INFO -     Column: display_on_weather, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:56:24 - db_utils - INFO -     Column: expiry_date, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:56:24 - db_utils - INFO -     Column: target_group, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:56:24 - db_utils - INFO -   Indexes in feedback.db: ['idx_feedback_datetime', 'idx_feedback_innsender', 'idx_feedback_status', 'idx_feedback_type']
2024-10-31 04:56:24 - db_utils - INFO -   Row count in sqlite_sequence: 1
2024-10-31 04:56:24 - db_utils - INFO -   Row count in feedback: 11
2024-10-31 04:56:24 - db_utils - INFO -   Test query result: (1,)
2024-10-31 04:56:24 - db_utils - INFO - Detailed database operations debugging completed
2024-10-31 04:56:24 - db_utils - INFO - Oppdatert skjema for customer
2024-10-31 04:56:24 - db_utils - INFO - Oppdatert skjema for feedback
2024-10-31 04:56:24 - db_utils - INFO - Oppdatert skjema for login_history
2024-10-31 04:56:24 - db_utils - INFO - Oppdatert skjema for stroing
2024-10-31 04:56:24 - db_utils - INFO - Oppdatert skjema for tunbroyting
2024-10-31 04:56:24 - db_utils - INFO - All database schemas verified and updated
2024-10-31 04:56:24 - db_utils - INFO - Oppdatert skjema for customer
2024-10-31 04:56:24 - db_utils - INFO - Oppdatert skjema for feedback
2024-10-31 04:56:24 - db_utils - INFO - Oppdatert skjema for login_history
2024-10-31 04:56:24 - db_utils - INFO - Oppdatert skjema for stroing
2024-10-31 04:56:24 - db_utils - INFO - Oppdatert skjema for tunbroyting
2024-10-31 04:56:24 - db_utils - INFO - All database schemas verified and updated
2024-10-31 04:56:24 - db_utils - INFO - Database login_history initialized, updated, and optimized
2024-10-31 04:56:24 - db_utils - INFO - Database tunbroyting initialized, updated, and optimized
2024-10-31 04:56:24 - db_utils - INFO - Database stroing initialized, updated, and optimized
2024-10-31 04:56:24 - db_utils - INFO - Database feedback initialized, updated, and optimized
2024-10-31 04:56:24 - db_utils - INFO - Database customer initialized, updated, and optimized
2024-10-31 04:56:24 - db_utils - INFO - Successfully created indexes for tunbroyting database
2024-10-31 04:56:24 - db_utils - INFO - Successfully created indexes for stroing database
2024-10-31 04:56:24 - db_utils - INFO - Successfully created indexes for feedback database
2024-10-31 04:56:24 - db_utils - INFO - Successfully created indexes for login_history database
2024-10-31 04:56:24 - db_utils - INFO - Successfully created indexes for customer database
2024-10-31 04:56:24 - db_utils - INFO - Database index creation completed
2024-10-31 04:56:24 - db_utils - INFO - Database indexes created
2024-10-31 04:56:24 - db_utils - INFO - Successfully verified connection to stroing.db
2024-10-31 04:56:24 - db_utils - INFO - Successfully verified connection to tunbroyting.db
2024-10-31 04:56:24 - db_utils - INFO - Successfully verified connection to feedback.db
2024-10-31 04:56:24 - db_utils - INFO - Successfully verified connection to login_history.db
2024-10-31 04:56:24 - db_utils - INFO - Successfully verified connection to customer.db
2024-10-31 04:56:24 - db_utils - INFO - Database connections verified
2024-10-31 04:56:24 - db_utils - INFO - All databases initialized, updated, and verified
2024-10-31 04:56:24 - db_utils - INFO - Query executed successfully on login_history.db. Rows affected: -1
2024-10-31 04:56:24 - db_utils - INFO - login_history table structure is correct
2024-10-31 04:56:24 - customer_utils - INFO - Starting cabin user consistency check
2024-10-31 04:56:24 - utils - INFO - Attempting to load passwords from secrets
2024-10-31 04:56:24 - utils - INFO - Successfully loaded passwords. Number of entries: 94
2024-10-31 04:56:24 - customer_utils - INFO - Retrieved 94 passwords
2024-10-31 04:56:24 - customer_utils - INFO - Found 94 customers in database
2024-10-31 04:56:24 - customer_utils - INFO - Consistency check completed
2024-10-31 04:56:24 - customer_utils - INFO - Database connection closed
2024-10-31 04:56:24 - customer_utils - INFO - Validating customers and passwords
2024-10-31 04:56:24 - utils - INFO - Attempting to load passwords from secrets
2024-10-31 04:56:24 - utils - INFO - Successfully loaded passwords. Number of entries: 94
2024-10-31 04:56:24 - customer_utils - INFO - Customer and password validation complete
2024-10-31 04:56:24 - db_utils - INFO - Successfully created indexes for tunbroyting database
2024-10-31 04:56:24 - db_utils - INFO - Successfully created indexes for stroing database
2024-10-31 04:56:24 - db_utils - INFO - Successfully created indexes for feedback database
2024-10-31 04:56:24 - db_utils - INFO - Successfully created indexes for login_history database
2024-10-31 04:56:24 - db_utils - INFO - Successfully created indexes for customer database
2024-10-31 04:56:24 - db_utils - INFO - Database index creation completed
2024-10-31 04:56:24 - __main__ - INFO - Application initialization completed successfully
2024-10-31 04:56:24 - __main__ - INFO - Application initialization completed successfully
2024-10-31 04:56:24 - __main__ - INFO - Application setup complete
2024-10-31 04:56:24 - __main__ - INFO - Application shutting down
2024-10-31 04:56:29 - __main__ - INFO - Added validate_user_input function to app.py
2024-10-31 04:56:29 - __main__ - INFO - Starting application initialization
2024-10-31 04:56:29 - db_utils - INFO - Starting detailed database operations debugging
2024-10-31 04:56:29 - db_utils - INFO - Debugging login_history database:
2024-10-31 04:56:29 - db_utils - INFO -   Database version: 0
2024-10-31 04:56:29 - db_utils - INFO -   Tables in login_history.db: ['login_history']
2024-10-31 04:56:29 - db_utils - INFO -   Structure of login_history table:
2024-10-31 04:56:29 - db_utils - INFO -     Column: id, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:56:29 - db_utils - INFO -     Column: login_time, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:56:29 - db_utils - INFO -     Column: success, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:56:29 - db_utils - INFO -   Indexes in login_history.db: ['idx_login_id', 'idx_login_time']
2024-10-31 04:56:29 - db_utils - INFO -   Row count in login_history: 444
2024-10-31 04:56:29 - db_utils - INFO -   Test query result: (1,)
2024-10-31 04:56:29 - db_utils - INFO - Debugging tunbroyting database:
2024-10-31 04:56:29 - db_utils - INFO -   Database version: 0
2024-10-31 04:56:29 - db_utils - INFO -   Tables in tunbroyting.db: ['tunbroyting_bestillinger']
2024-10-31 04:56:29 - db_utils - INFO -   Structure of tunbroyting_bestillinger table:
2024-10-31 04:56:29 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 04:56:29 - db_utils - INFO -     Column: bruker, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:56:29 - db_utils - INFO -     Column: ankomst_dato, Type: DATE, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:56:29 - db_utils - INFO -     Column: ankomst_tid, Type: TIME, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:56:29 - db_utils - INFO -     Column: avreise_dato, Type: DATE, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:56:29 - db_utils - INFO -     Column: avreise_tid, Type: TIME, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:56:29 - db_utils - INFO -     Column: abonnement_type, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:56:29 - db_utils - INFO -   Indexes in tunbroyting.db: ['idx_tunbroyting_bruker', 'idx_tunbroyting_ankomst_dato', 'idx_tunbroyting_avreise_dato', 'idx_tunbroyting_abonnement']
2024-10-31 04:56:29 - db_utils - INFO -   Row count in tunbroyting_bestillinger: 2
2024-10-31 04:56:29 - db_utils - INFO -   Test query result: (1,)
2024-10-31 04:56:29 - db_utils - INFO - Debugging stroing database:
2024-10-31 04:56:29 - db_utils - INFO -   Database version: 0
2024-10-31 04:56:29 - db_utils - INFO -   Tables in stroing.db: ['sqlite_sequence', 'stroing_bestillinger']
2024-10-31 04:56:29 - db_utils - INFO -   Structure of sqlite_sequence table:
2024-10-31 04:56:29 - db_utils - INFO -     Column: name, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:56:29 - db_utils - INFO -     Column: seq, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:56:29 - db_utils - INFO -   Structure of stroing_bestillinger table:
2024-10-31 04:56:29 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 04:56:29 - db_utils - INFO -     Column: bruker, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:56:29 - db_utils - INFO -     Column: bestillings_dato, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:56:29 - db_utils - INFO -     Column: onske_dato, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:56:29 - db_utils - INFO -   Indexes in stroing.db: ['idx_stroing_bruker', 'idx_stroing_onske_dato', 'idx_stroing_bestillings_dato']
2024-10-31 04:56:29 - db_utils - INFO -   Row count in sqlite_sequence: 1
2024-10-31 04:56:29 - db_utils - INFO -   Row count in stroing_bestillinger: 5
2024-10-31 04:56:29 - db_utils - INFO -   Test query result: (1,)
2024-10-31 04:56:29 - db_utils - INFO - Debugging feedback database:
2024-10-31 04:56:29 - db_utils - INFO -   Database version: 0
2024-10-31 04:56:29 - db_utils - INFO -   Tables in feedback.db: ['sqlite_sequence', 'feedback']
2024-10-31 04:56:29 - db_utils - INFO -   Structure of sqlite_sequence table:
2024-10-31 04:56:29 - db_utils - INFO -     Column: name, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:56:29 - db_utils - INFO -     Column: seq, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:56:29 - db_utils - INFO -   Structure of feedback table:
2024-10-31 04:56:29 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 04:56:29 - db_utils - INFO -     Column: type, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:56:29 - db_utils - INFO -     Column: datetime, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:56:29 - db_utils - INFO -     Column: comment, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:56:29 - db_utils - INFO -     Column: innsender, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:56:29 - db_utils - INFO -     Column: status, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:56:29 - db_utils - INFO -     Column: status_changed_by, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:56:29 - db_utils - INFO -     Column: status_changed_at, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:56:29 - db_utils - INFO -     Column: hidden, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:56:29 - db_utils - INFO -     Column: is_alert, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:56:29 - db_utils - INFO -     Column: display_on_weather, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:56:29 - db_utils - INFO -     Column: expiry_date, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:56:29 - db_utils - INFO -     Column: target_group, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:56:29 - db_utils - INFO -   Indexes in feedback.db: ['idx_feedback_datetime', 'idx_feedback_innsender', 'idx_feedback_status', 'idx_feedback_type']
2024-10-31 04:56:29 - db_utils - INFO -   Row count in sqlite_sequence: 1
2024-10-31 04:56:29 - db_utils - INFO -   Row count in feedback: 11
2024-10-31 04:56:29 - db_utils - INFO -   Test query result: (1,)
2024-10-31 04:56:29 - db_utils - INFO - Detailed database operations debugging completed
2024-10-31 04:56:29 - db_utils - INFO - Oppdatert skjema for customer
2024-10-31 04:56:29 - db_utils - INFO - Oppdatert skjema for feedback
2024-10-31 04:56:29 - db_utils - INFO - Oppdatert skjema for login_history
2024-10-31 04:56:29 - db_utils - INFO - Oppdatert skjema for stroing
2024-10-31 04:56:29 - db_utils - INFO - Oppdatert skjema for tunbroyting
2024-10-31 04:56:29 - db_utils - INFO - All database schemas verified and updated
2024-10-31 04:56:29 - db_utils - INFO - Oppdatert skjema for customer
2024-10-31 04:56:29 - db_utils - INFO - Oppdatert skjema for feedback
2024-10-31 04:56:29 - db_utils - INFO - Oppdatert skjema for login_history
2024-10-31 04:56:29 - db_utils - INFO - Oppdatert skjema for stroing
2024-10-31 04:56:29 - db_utils - INFO - Oppdatert skjema for tunbroyting
2024-10-31 04:56:29 - db_utils - INFO - All database schemas verified and updated
2024-10-31 04:56:29 - db_utils - INFO - Database already initialized. Skipping.
2024-10-31 04:56:29 - db_utils - INFO - Query executed successfully on login_history.db. Rows affected: -1
2024-10-31 04:56:29 - db_utils - INFO - login_history table structure is correct
2024-10-31 04:56:29 - customer_utils - INFO - Starting cabin user consistency check
2024-10-31 04:56:29 - utils - INFO - Attempting to load passwords from secrets
2024-10-31 04:56:29 - utils - INFO - Successfully loaded passwords. Number of entries: 94
2024-10-31 04:56:29 - customer_utils - INFO - Retrieved 94 passwords
2024-10-31 04:56:29 - customer_utils - INFO - Found 94 customers in database
2024-10-31 04:56:29 - customer_utils - INFO - Consistency check completed
2024-10-31 04:56:29 - customer_utils - INFO - Database connection closed
2024-10-31 04:56:29 - customer_utils - INFO - Validating customers and passwords
2024-10-31 04:56:29 - utils - INFO - Attempting to load passwords from secrets
2024-10-31 04:56:29 - utils - INFO - Successfully loaded passwords. Number of entries: 94
2024-10-31 04:56:29 - customer_utils - INFO - Customer and password validation complete
2024-10-31 04:56:29 - db_utils - INFO - Successfully created indexes for tunbroyting database
2024-10-31 04:56:29 - db_utils - INFO - Successfully created indexes for stroing database
2024-10-31 04:56:29 - db_utils - INFO - Successfully created indexes for feedback database
2024-10-31 04:56:29 - db_utils - INFO - Successfully created indexes for login_history database
2024-10-31 04:56:29 - db_utils - INFO - Successfully created indexes for customer database
2024-10-31 04:56:29 - db_utils - INFO - Database index creation completed
2024-10-31 04:56:29 - __main__ - INFO - Application initialization completed successfully
2024-10-31 04:56:29 - __main__ - INFO - Application initialization completed successfully
2024-10-31 04:56:29 - __main__ - INFO - Application setup complete
2024-10-31 04:56:29 - auth_utils - INFO - Login attempt for ID: 999
2024-10-31 04:56:29 - db_utils - INFO - DATABASE_PATH: /Users/tor.inge.jossang@aftenbladet.no/dev/gullingen
2024-10-31 04:56:29 - db_utils - INFO - Full database path: /Users/tor.inge.jossang@aftenbladet.no/dev/gullingen/login_history.db
2024-10-31 04:56:29 - db_utils - INFO - Attempting to create database engine...
2024-10-31 04:56:29 - db_utils - INFO - Database engine created successfully for login_history.db
2024-10-31 04:56:29 - auth_utils - INFO - Rate limit check passed for user 999
2024-10-31 04:56:29 - auth_utils - INFO - User 999 authenticated successfully
2024-10-31 04:56:29 - customer_utils - INFO - Successfully retrieved customer with ID: 999
2024-10-31 04:56:29 - db_utils - INFO - Database file /Users/tor.inge.jossang@aftenbladet.no/dev/gullingen/login_history.db exists.
2024-10-31 04:56:29 - db_utils - INFO - Query executed successfully on login_history.db. Rows affected: 1
2024-10-31 04:56:29 - auth_utils - INFO - Successful login for ID: 999
2024-10-31 04:56:29 - auth_utils - INFO - Successful login and logging for ID: 999
2024-10-31 04:56:29 - db_utils - INFO - DATABASE_PATH: /Users/tor.inge.jossang@aftenbladet.no/dev/gullingen
2024-10-31 04:56:29 - db_utils - INFO - Full database path: /Users/tor.inge.jossang@aftenbladet.no/dev/gullingen/login_history.db
2024-10-31 04:56:29 - db_utils - INFO - Attempting to create database engine...
2024-10-31 04:56:29 - db_utils - INFO - Database engine created successfully for login_history.db
2024-10-31 04:56:29 - auth_utils - INFO - Rate limit reset for user 999
2024-10-31 04:56:29 - __main__ - INFO - Application shutting down
2024-10-31 04:56:29 - __main__ - INFO - Added validate_user_input function to app.py
2024-10-31 04:56:29 - __main__ - INFO - Starting application initialization
2024-10-31 04:56:29 - db_utils - INFO - Starting detailed database operations debugging
2024-10-31 04:56:29 - db_utils - INFO - Debugging login_history database:
2024-10-31 04:56:29 - db_utils - INFO -   Database version: 0
2024-10-31 04:56:29 - db_utils - INFO -   Tables in login_history.db: ['login_history']
2024-10-31 04:56:29 - db_utils - INFO -   Structure of login_history table:
2024-10-31 04:56:29 - db_utils - INFO -     Column: id, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:56:29 - db_utils - INFO -     Column: login_time, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:56:29 - db_utils - INFO -     Column: success, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:56:29 - db_utils - INFO -   Indexes in login_history.db: ['idx_login_id', 'idx_login_time']
2024-10-31 04:56:29 - db_utils - INFO -   Row count in login_history: 445
2024-10-31 04:56:29 - db_utils - INFO -   Test query result: (1,)
2024-10-31 04:56:29 - db_utils - INFO - Debugging tunbroyting database:
2024-10-31 04:56:29 - db_utils - INFO -   Database version: 0
2024-10-31 04:56:29 - db_utils - INFO -   Tables in tunbroyting.db: ['tunbroyting_bestillinger']
2024-10-31 04:56:29 - db_utils - INFO -   Structure of tunbroyting_bestillinger table:
2024-10-31 04:56:29 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 04:56:29 - db_utils - INFO -     Column: bruker, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:56:29 - db_utils - INFO -     Column: ankomst_dato, Type: DATE, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:56:29 - db_utils - INFO -     Column: ankomst_tid, Type: TIME, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:56:29 - db_utils - INFO -     Column: avreise_dato, Type: DATE, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:56:29 - db_utils - INFO -     Column: avreise_tid, Type: TIME, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:56:29 - db_utils - INFO -     Column: abonnement_type, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:56:29 - db_utils - INFO -   Indexes in tunbroyting.db: ['idx_tunbroyting_bruker', 'idx_tunbroyting_ankomst_dato', 'idx_tunbroyting_avreise_dato', 'idx_tunbroyting_abonnement']
2024-10-31 04:56:29 - db_utils - INFO -   Row count in tunbroyting_bestillinger: 2
2024-10-31 04:56:29 - db_utils - INFO -   Test query result: (1,)
2024-10-31 04:56:29 - db_utils - INFO - Debugging stroing database:
2024-10-31 04:56:29 - db_utils - INFO -   Database version: 0
2024-10-31 04:56:29 - db_utils - INFO -   Tables in stroing.db: ['sqlite_sequence', 'stroing_bestillinger']
2024-10-31 04:56:29 - db_utils - INFO -   Structure of sqlite_sequence table:
2024-10-31 04:56:29 - db_utils - INFO -     Column: name, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:56:29 - db_utils - INFO -     Column: seq, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:56:29 - db_utils - INFO -   Structure of stroing_bestillinger table:
2024-10-31 04:56:29 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 04:56:29 - db_utils - INFO -     Column: bruker, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:56:29 - db_utils - INFO -     Column: bestillings_dato, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:56:29 - db_utils - INFO -     Column: onske_dato, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:56:29 - db_utils - INFO -   Indexes in stroing.db: ['idx_stroing_bruker', 'idx_stroing_onske_dato', 'idx_stroing_bestillings_dato']
2024-10-31 04:56:29 - db_utils - INFO -   Row count in sqlite_sequence: 1
2024-10-31 04:56:29 - db_utils - INFO -   Row count in stroing_bestillinger: 5
2024-10-31 04:56:29 - db_utils - INFO -   Test query result: (1,)
2024-10-31 04:56:29 - db_utils - INFO - Debugging feedback database:
2024-10-31 04:56:29 - db_utils - INFO -   Database version: 0
2024-10-31 04:56:29 - db_utils - INFO -   Tables in feedback.db: ['sqlite_sequence', 'feedback']
2024-10-31 04:56:29 - db_utils - INFO -   Structure of sqlite_sequence table:
2024-10-31 04:56:29 - db_utils - INFO -     Column: name, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:56:29 - db_utils - INFO -     Column: seq, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:56:29 - db_utils - INFO -   Structure of feedback table:
2024-10-31 04:56:29 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 04:56:29 - db_utils - INFO -     Column: type, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:56:29 - db_utils - INFO -     Column: datetime, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:56:29 - db_utils - INFO -     Column: comment, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:56:29 - db_utils - INFO -     Column: innsender, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:56:29 - db_utils - INFO -     Column: status, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:56:29 - db_utils - INFO -     Column: status_changed_by, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:56:29 - db_utils - INFO -     Column: status_changed_at, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:56:29 - db_utils - INFO -     Column: hidden, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:56:29 - db_utils - INFO -     Column: is_alert, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:56:29 - db_utils - INFO -     Column: display_on_weather, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:56:29 - db_utils - INFO -     Column: expiry_date, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:56:29 - db_utils - INFO -     Column: target_group, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:56:29 - db_utils - INFO -   Indexes in feedback.db: ['idx_feedback_datetime', 'idx_feedback_innsender', 'idx_feedback_status', 'idx_feedback_type']
2024-10-31 04:56:29 - db_utils - INFO -   Row count in sqlite_sequence: 1
2024-10-31 04:56:29 - db_utils - INFO -   Row count in feedback: 11
2024-10-31 04:56:29 - db_utils - INFO -   Test query result: (1,)
2024-10-31 04:56:29 - db_utils - INFO - Detailed database operations debugging completed
2024-10-31 04:56:29 - db_utils - INFO - Oppdatert skjema for customer
2024-10-31 04:56:29 - db_utils - INFO - Oppdatert skjema for feedback
2024-10-31 04:56:29 - db_utils - INFO - Oppdatert skjema for login_history
2024-10-31 04:56:29 - db_utils - INFO - Oppdatert skjema for stroing
2024-10-31 04:56:29 - db_utils - INFO - Oppdatert skjema for tunbroyting
2024-10-31 04:56:29 - db_utils - INFO - All database schemas verified and updated
2024-10-31 04:56:29 - db_utils - INFO - Oppdatert skjema for customer
2024-10-31 04:56:29 - db_utils - INFO - Oppdatert skjema for feedback
2024-10-31 04:56:29 - db_utils - INFO - Oppdatert skjema for login_history
2024-10-31 04:56:29 - db_utils - INFO - Oppdatert skjema for stroing
2024-10-31 04:56:29 - db_utils - INFO - Oppdatert skjema for tunbroyting
2024-10-31 04:56:29 - db_utils - INFO - All database schemas verified and updated
2024-10-31 04:56:29 - db_utils - INFO - Database already initialized. Skipping.
2024-10-31 04:56:29 - db_utils - INFO - Query executed successfully on login_history.db. Rows affected: -1
2024-10-31 04:56:29 - db_utils - INFO - login_history table structure is correct
2024-10-31 04:56:29 - customer_utils - INFO - Starting cabin user consistency check
2024-10-31 04:56:29 - utils - INFO - Attempting to load passwords from secrets
2024-10-31 04:56:29 - utils - INFO - Successfully loaded passwords. Number of entries: 94
2024-10-31 04:56:29 - customer_utils - INFO - Retrieved 94 passwords
2024-10-31 04:56:29 - customer_utils - INFO - Found 94 customers in database
2024-10-31 04:56:29 - customer_utils - INFO - Consistency check completed
2024-10-31 04:56:29 - customer_utils - INFO - Database connection closed
2024-10-31 04:56:29 - customer_utils - INFO - Validating customers and passwords
2024-10-31 04:56:29 - utils - INFO - Attempting to load passwords from secrets
2024-10-31 04:56:29 - utils - INFO - Successfully loaded passwords. Number of entries: 94
2024-10-31 04:56:29 - customer_utils - INFO - Customer and password validation complete
2024-10-31 04:56:29 - db_utils - INFO - Successfully created indexes for tunbroyting database
2024-10-31 04:56:29 - db_utils - INFO - Successfully created indexes for stroing database
2024-10-31 04:56:29 - db_utils - INFO - Successfully created indexes for feedback database
2024-10-31 04:56:29 - db_utils - INFO - Successfully created indexes for login_history database
2024-10-31 04:56:29 - db_utils - INFO - Successfully created indexes for customer database
2024-10-31 04:56:29 - db_utils - INFO - Database index creation completed
2024-10-31 04:56:29 - __main__ - INFO - Application initialization completed successfully
2024-10-31 04:56:29 - __main__ - INFO - Application initialization completed successfully
2024-10-31 04:56:29 - __main__ - INFO - Application setup complete
2024-10-31 04:56:29 - customer_utils - INFO - Successfully retrieved customer with ID: 999
2024-10-31 04:56:29 - alert_utils - INFO - Fetched 1 alerts. only_today=False, include_expired=False
2024-10-31 04:56:29 - tun_utils - WARNING - hent_bestillinger() is deprecated, use get_bookings() instead
2024-10-31 04:56:29 - tun_utils - INFO - Starting get_bookings with start_date=None, end_date=None
2024-10-31 04:56:29 - tun_utils - INFO - Successfully retrieved 2 bookings
2024-10-31 04:56:29 - __main__ - INFO - Application shutting down
2024-10-31 04:56:30 - __main__ - INFO - Added validate_user_input function to app.py
2024-10-31 04:56:30 - __main__ - INFO - Starting application initialization
2024-10-31 04:56:30 - db_utils - INFO - Starting detailed database operations debugging
2024-10-31 04:56:30 - db_utils - INFO - Debugging login_history database:
2024-10-31 04:56:30 - db_utils - INFO -   Database version: 0
2024-10-31 04:56:30 - db_utils - INFO -   Tables in login_history.db: ['login_history']
2024-10-31 04:56:30 - db_utils - INFO -   Structure of login_history table:
2024-10-31 04:56:30 - db_utils - INFO -     Column: id, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:56:30 - db_utils - INFO -     Column: login_time, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:56:30 - db_utils - INFO -     Column: success, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:56:30 - db_utils - INFO -   Indexes in login_history.db: ['idx_login_id', 'idx_login_time']
2024-10-31 04:56:30 - db_utils - INFO -   Row count in login_history: 445
2024-10-31 04:56:30 - db_utils - INFO -   Test query result: (1,)
2024-10-31 04:56:30 - db_utils - INFO - Debugging tunbroyting database:
2024-10-31 04:56:30 - db_utils - INFO -   Database version: 0
2024-10-31 04:56:30 - db_utils - INFO -   Tables in tunbroyting.db: ['tunbroyting_bestillinger']
2024-10-31 04:56:30 - db_utils - INFO -   Structure of tunbroyting_bestillinger table:
2024-10-31 04:56:30 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 04:56:30 - db_utils - INFO -     Column: bruker, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:56:30 - db_utils - INFO -     Column: ankomst_dato, Type: DATE, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:56:30 - db_utils - INFO -     Column: ankomst_tid, Type: TIME, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:56:30 - db_utils - INFO -     Column: avreise_dato, Type: DATE, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:56:30 - db_utils - INFO -     Column: avreise_tid, Type: TIME, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:56:30 - db_utils - INFO -     Column: abonnement_type, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:56:30 - db_utils - INFO -   Indexes in tunbroyting.db: ['idx_tunbroyting_bruker', 'idx_tunbroyting_ankomst_dato', 'idx_tunbroyting_avreise_dato', 'idx_tunbroyting_abonnement']
2024-10-31 04:56:30 - db_utils - INFO -   Row count in tunbroyting_bestillinger: 2
2024-10-31 04:56:30 - db_utils - INFO -   Test query result: (1,)
2024-10-31 04:56:30 - db_utils - INFO - Debugging stroing database:
2024-10-31 04:56:30 - db_utils - INFO -   Database version: 0
2024-10-31 04:56:30 - db_utils - INFO -   Tables in stroing.db: ['sqlite_sequence', 'stroing_bestillinger']
2024-10-31 04:56:30 - db_utils - INFO -   Structure of sqlite_sequence table:
2024-10-31 04:56:30 - db_utils - INFO -     Column: name, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:56:30 - db_utils - INFO -     Column: seq, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:56:30 - db_utils - INFO -   Structure of stroing_bestillinger table:
2024-10-31 04:56:30 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 04:56:30 - db_utils - INFO -     Column: bruker, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:56:30 - db_utils - INFO -     Column: bestillings_dato, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:56:30 - db_utils - INFO -     Column: onske_dato, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:56:30 - db_utils - INFO -   Indexes in stroing.db: ['idx_stroing_bruker', 'idx_stroing_onske_dato', 'idx_stroing_bestillings_dato']
2024-10-31 04:56:30 - db_utils - INFO -   Row count in sqlite_sequence: 1
2024-10-31 04:56:30 - db_utils - INFO -   Row count in stroing_bestillinger: 5
2024-10-31 04:56:30 - db_utils - INFO -   Test query result: (1,)
2024-10-31 04:56:30 - db_utils - INFO - Debugging feedback database:
2024-10-31 04:56:30 - db_utils - INFO -   Database version: 0
2024-10-31 04:56:30 - db_utils - INFO -   Tables in feedback.db: ['sqlite_sequence', 'feedback']
2024-10-31 04:56:30 - db_utils - INFO -   Structure of sqlite_sequence table:
2024-10-31 04:56:30 - db_utils - INFO -     Column: name, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:56:30 - db_utils - INFO -     Column: seq, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:56:30 - db_utils - INFO -   Structure of feedback table:
2024-10-31 04:56:30 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 04:56:30 - db_utils - INFO -     Column: type, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:56:30 - db_utils - INFO -     Column: datetime, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:56:30 - db_utils - INFO -     Column: comment, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:56:30 - db_utils - INFO -     Column: innsender, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:56:30 - db_utils - INFO -     Column: status, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:56:30 - db_utils - INFO -     Column: status_changed_by, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:56:30 - db_utils - INFO -     Column: status_changed_at, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:56:30 - db_utils - INFO -     Column: hidden, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:56:30 - db_utils - INFO -     Column: is_alert, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:56:30 - db_utils - INFO -     Column: display_on_weather, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:56:30 - db_utils - INFO -     Column: expiry_date, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:56:30 - db_utils - INFO -     Column: target_group, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:56:30 - db_utils - INFO -   Indexes in feedback.db: ['idx_feedback_datetime', 'idx_feedback_innsender', 'idx_feedback_status', 'idx_feedback_type']
2024-10-31 04:56:30 - db_utils - INFO -   Row count in sqlite_sequence: 1
2024-10-31 04:56:30 - db_utils - INFO -   Row count in feedback: 11
2024-10-31 04:56:30 - db_utils - INFO -   Test query result: (1,)
2024-10-31 04:56:30 - db_utils - INFO - Detailed database operations debugging completed
2024-10-31 04:56:30 - db_utils - INFO - Oppdatert skjema for customer
2024-10-31 04:56:30 - db_utils - INFO - Oppdatert skjema for feedback
2024-10-31 04:56:30 - db_utils - INFO - Oppdatert skjema for login_history
2024-10-31 04:56:30 - db_utils - INFO - Oppdatert skjema for stroing
2024-10-31 04:56:30 - db_utils - INFO - Oppdatert skjema for tunbroyting
2024-10-31 04:56:30 - db_utils - INFO - All database schemas verified and updated
2024-10-31 04:56:30 - db_utils - INFO - Oppdatert skjema for customer
2024-10-31 04:56:30 - db_utils - INFO - Oppdatert skjema for feedback
2024-10-31 04:56:30 - db_utils - INFO - Oppdatert skjema for login_history
2024-10-31 04:56:30 - db_utils - INFO - Oppdatert skjema for stroing
2024-10-31 04:56:30 - db_utils - INFO - Oppdatert skjema for tunbroyting
2024-10-31 04:56:30 - db_utils - INFO - All database schemas verified and updated
2024-10-31 04:56:30 - db_utils - INFO - Database already initialized. Skipping.
2024-10-31 04:56:30 - db_utils - INFO - Query executed successfully on login_history.db. Rows affected: -1
2024-10-31 04:56:30 - db_utils - INFO - login_history table structure is correct
2024-10-31 04:56:30 - customer_utils - INFO - Starting cabin user consistency check
2024-10-31 04:56:30 - utils - INFO - Attempting to load passwords from secrets
2024-10-31 04:56:30 - utils - INFO - Successfully loaded passwords. Number of entries: 94
2024-10-31 04:56:30 - customer_utils - INFO - Retrieved 94 passwords
2024-10-31 04:56:30 - customer_utils - INFO - Found 94 customers in database
2024-10-31 04:56:30 - customer_utils - INFO - Consistency check completed
2024-10-31 04:56:30 - customer_utils - INFO - Database connection closed
2024-10-31 04:56:30 - customer_utils - INFO - Validating customers and passwords
2024-10-31 04:56:30 - utils - INFO - Attempting to load passwords from secrets
2024-10-31 04:56:30 - utils - INFO - Successfully loaded passwords. Number of entries: 94
2024-10-31 04:56:30 - customer_utils - INFO - Customer and password validation complete
2024-10-31 04:56:30 - db_utils - INFO - Successfully created indexes for tunbroyting database
2024-10-31 04:56:30 - db_utils - INFO - Successfully created indexes for stroing database
2024-10-31 04:56:30 - db_utils - INFO - Successfully created indexes for feedback database
2024-10-31 04:56:30 - db_utils - INFO - Successfully created indexes for login_history database
2024-10-31 04:56:30 - db_utils - INFO - Successfully created indexes for customer database
2024-10-31 04:56:30 - db_utils - INFO - Database index creation completed
2024-10-31 04:56:30 - __main__ - INFO - Application initialization completed successfully
2024-10-31 04:56:30 - __main__ - INFO - Application initialization completed successfully
2024-10-31 04:56:30 - __main__ - INFO - Application setup complete
2024-10-31 04:56:30 - customer_utils - INFO - Successfully retrieved customer with ID: 999
2024-10-31 04:56:31 - __main__ - INFO - Application shutting down
2024-10-31 04:57:04 - __main__ - INFO - Added validate_user_input function to app.py
2024-10-31 04:57:04 - __main__ - INFO - Starting application initialization
2024-10-31 04:57:04 - db_utils - INFO - Starting detailed database operations debugging
2024-10-31 04:57:04 - db_utils - INFO - Debugging login_history database:
2024-10-31 04:57:04 - db_utils - INFO -   Database version: 0
2024-10-31 04:57:04 - db_utils - INFO -   Tables in login_history.db: ['login_history']
2024-10-31 04:57:04 - db_utils - INFO -   Structure of login_history table:
2024-10-31 04:57:04 - db_utils - INFO -     Column: id, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:57:04 - db_utils - INFO -     Column: login_time, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:57:04 - db_utils - INFO -     Column: success, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:57:04 - db_utils - INFO -   Indexes in login_history.db: ['idx_login_id', 'idx_login_time']
2024-10-31 04:57:04 - db_utils - INFO -   Row count in login_history: 445
2024-10-31 04:57:04 - db_utils - INFO -   Test query result: (1,)
2024-10-31 04:57:04 - db_utils - INFO - Debugging tunbroyting database:
2024-10-31 04:57:04 - db_utils - INFO -   Database version: 0
2024-10-31 04:57:04 - db_utils - INFO -   Tables in tunbroyting.db: ['tunbroyting_bestillinger']
2024-10-31 04:57:04 - db_utils - INFO -   Structure of tunbroyting_bestillinger table:
2024-10-31 04:57:04 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 04:57:04 - db_utils - INFO -     Column: bruker, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:57:04 - db_utils - INFO -     Column: ankomst_dato, Type: DATE, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:57:04 - db_utils - INFO -     Column: ankomst_tid, Type: TIME, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:57:04 - db_utils - INFO -     Column: avreise_dato, Type: DATE, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:57:04 - db_utils - INFO -     Column: avreise_tid, Type: TIME, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:57:04 - db_utils - INFO -     Column: abonnement_type, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:57:04 - db_utils - INFO -   Indexes in tunbroyting.db: ['idx_tunbroyting_bruker', 'idx_tunbroyting_ankomst_dato', 'idx_tunbroyting_avreise_dato', 'idx_tunbroyting_abonnement']
2024-10-31 04:57:04 - db_utils - INFO -   Row count in tunbroyting_bestillinger: 2
2024-10-31 04:57:04 - db_utils - INFO -   Test query result: (1,)
2024-10-31 04:57:04 - db_utils - INFO - Debugging stroing database:
2024-10-31 04:57:04 - db_utils - INFO -   Database version: 0
2024-10-31 04:57:04 - db_utils - INFO -   Tables in stroing.db: ['sqlite_sequence', 'stroing_bestillinger']
2024-10-31 04:57:04 - db_utils - INFO -   Structure of sqlite_sequence table:
2024-10-31 04:57:04 - db_utils - INFO -     Column: name, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:57:04 - db_utils - INFO -     Column: seq, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:57:04 - db_utils - INFO -   Structure of stroing_bestillinger table:
2024-10-31 04:57:04 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 04:57:04 - db_utils - INFO -     Column: bruker, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:57:04 - db_utils - INFO -     Column: bestillings_dato, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:57:04 - db_utils - INFO -     Column: onske_dato, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:57:04 - db_utils - INFO -   Indexes in stroing.db: ['idx_stroing_bruker', 'idx_stroing_onske_dato', 'idx_stroing_bestillings_dato']
2024-10-31 04:57:04 - db_utils - INFO -   Row count in sqlite_sequence: 1
2024-10-31 04:57:04 - db_utils - INFO -   Row count in stroing_bestillinger: 5
2024-10-31 04:57:04 - db_utils - INFO -   Test query result: (1,)
2024-10-31 04:57:04 - db_utils - INFO - Debugging feedback database:
2024-10-31 04:57:04 - db_utils - INFO -   Database version: 0
2024-10-31 04:57:04 - db_utils - INFO -   Tables in feedback.db: ['sqlite_sequence', 'feedback']
2024-10-31 04:57:04 - db_utils - INFO -   Structure of sqlite_sequence table:
2024-10-31 04:57:04 - db_utils - INFO -     Column: name, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:57:04 - db_utils - INFO -     Column: seq, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:57:04 - db_utils - INFO -   Structure of feedback table:
2024-10-31 04:57:04 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 04:57:04 - db_utils - INFO -     Column: type, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:57:04 - db_utils - INFO -     Column: datetime, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:57:04 - db_utils - INFO -     Column: comment, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:57:04 - db_utils - INFO -     Column: innsender, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:57:04 - db_utils - INFO -     Column: status, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:57:04 - db_utils - INFO -     Column: status_changed_by, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:57:04 - db_utils - INFO -     Column: status_changed_at, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:57:04 - db_utils - INFO -     Column: hidden, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:57:04 - db_utils - INFO -     Column: is_alert, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:57:04 - db_utils - INFO -     Column: display_on_weather, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:57:04 - db_utils - INFO -     Column: expiry_date, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:57:04 - db_utils - INFO -     Column: target_group, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:57:04 - db_utils - INFO -   Indexes in feedback.db: ['idx_feedback_datetime', 'idx_feedback_innsender', 'idx_feedback_status', 'idx_feedback_type']
2024-10-31 04:57:04 - db_utils - INFO -   Row count in sqlite_sequence: 1
2024-10-31 04:57:04 - db_utils - INFO -   Row count in feedback: 11
2024-10-31 04:57:04 - db_utils - INFO -   Test query result: (1,)
2024-10-31 04:57:04 - db_utils - INFO - Detailed database operations debugging completed
2024-10-31 04:57:04 - db_utils - INFO - Oppdatert skjema for customer
2024-10-31 04:57:04 - db_utils - INFO - Oppdatert skjema for feedback
2024-10-31 04:57:04 - db_utils - INFO - Oppdatert skjema for login_history
2024-10-31 04:57:04 - db_utils - INFO - Oppdatert skjema for stroing
2024-10-31 04:57:04 - db_utils - INFO - Oppdatert skjema for tunbroyting
2024-10-31 04:57:04 - db_utils - INFO - All database schemas verified and updated
2024-10-31 04:57:04 - db_utils - INFO - Oppdatert skjema for customer
2024-10-31 04:57:04 - db_utils - INFO - Oppdatert skjema for feedback
2024-10-31 04:57:04 - db_utils - INFO - Oppdatert skjema for login_history
2024-10-31 04:57:04 - db_utils - INFO - Oppdatert skjema for stroing
2024-10-31 04:57:04 - db_utils - INFO - Oppdatert skjema for tunbroyting
2024-10-31 04:57:04 - db_utils - INFO - All database schemas verified and updated
2024-10-31 04:57:04 - db_utils - INFO - Database already initialized. Skipping.
2024-10-31 04:57:04 - db_utils - INFO - Query executed successfully on login_history.db. Rows affected: -1
2024-10-31 04:57:04 - db_utils - INFO - login_history table structure is correct
2024-10-31 04:57:04 - customer_utils - INFO - Starting cabin user consistency check
2024-10-31 04:57:04 - utils - INFO - Attempting to load passwords from secrets
2024-10-31 04:57:04 - utils - INFO - Successfully loaded passwords. Number of entries: 94
2024-10-31 04:57:04 - customer_utils - INFO - Retrieved 94 passwords
2024-10-31 04:57:04 - customer_utils - INFO - Found 94 customers in database
2024-10-31 04:57:04 - customer_utils - INFO - Consistency check completed
2024-10-31 04:57:04 - customer_utils - INFO - Database connection closed
2024-10-31 04:57:04 - customer_utils - INFO - Validating customers and passwords
2024-10-31 04:57:04 - utils - INFO - Attempting to load passwords from secrets
2024-10-31 04:57:04 - utils - INFO - Successfully loaded passwords. Number of entries: 94
2024-10-31 04:57:04 - customer_utils - INFO - Customer and password validation complete
2024-10-31 04:57:04 - db_utils - INFO - Successfully created indexes for tunbroyting database
2024-10-31 04:57:04 - db_utils - INFO - Successfully created indexes for stroing database
2024-10-31 04:57:04 - db_utils - INFO - Successfully created indexes for feedback database
2024-10-31 04:57:04 - db_utils - INFO - Successfully created indexes for login_history database
2024-10-31 04:57:04 - db_utils - INFO - Successfully created indexes for customer database
2024-10-31 04:57:04 - db_utils - INFO - Database index creation completed
2024-10-31 04:57:04 - __main__ - INFO - Application initialization completed successfully
2024-10-31 04:57:04 - __main__ - INFO - Application initialization completed successfully
2024-10-31 04:57:04 - __main__ - INFO - Application setup complete
2024-10-31 04:57:04 - customer_utils - INFO - Successfully retrieved customer with ID: 999
2024-10-31 04:57:05 - __main__ - INFO - Application shutting down
2024-10-31 04:57:12 - __main__ - INFO - Added validate_user_input function to app.py
2024-10-31 04:57:12 - __main__ - INFO - Starting application initialization
2024-10-31 04:57:12 - db_utils - INFO - Starting detailed database operations debugging
2024-10-31 04:57:12 - db_utils - INFO - Debugging login_history database:
2024-10-31 04:57:12 - db_utils - INFO -   Database version: 0
2024-10-31 04:57:12 - db_utils - INFO -   Tables in login_history.db: ['login_history']
2024-10-31 04:57:12 - db_utils - INFO -   Structure of login_history table:
2024-10-31 04:57:12 - db_utils - INFO -     Column: id, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:57:12 - db_utils - INFO -     Column: login_time, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:57:12 - db_utils - INFO -     Column: success, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:57:12 - db_utils - INFO -   Indexes in login_history.db: ['idx_login_id', 'idx_login_time']
2024-10-31 04:57:12 - db_utils - INFO -   Row count in login_history: 445
2024-10-31 04:57:12 - db_utils - INFO -   Test query result: (1,)
2024-10-31 04:57:12 - db_utils - INFO - Debugging tunbroyting database:
2024-10-31 04:57:12 - db_utils - INFO -   Database version: 0
2024-10-31 04:57:12 - db_utils - INFO -   Tables in tunbroyting.db: ['tunbroyting_bestillinger']
2024-10-31 04:57:12 - db_utils - INFO -   Structure of tunbroyting_bestillinger table:
2024-10-31 04:57:12 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 04:57:12 - db_utils - INFO -     Column: bruker, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:57:12 - db_utils - INFO -     Column: ankomst_dato, Type: DATE, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:57:12 - db_utils - INFO -     Column: ankomst_tid, Type: TIME, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:57:12 - db_utils - INFO -     Column: avreise_dato, Type: DATE, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:57:12 - db_utils - INFO -     Column: avreise_tid, Type: TIME, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:57:12 - db_utils - INFO -     Column: abonnement_type, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:57:12 - db_utils - INFO -   Indexes in tunbroyting.db: ['idx_tunbroyting_bruker', 'idx_tunbroyting_ankomst_dato', 'idx_tunbroyting_avreise_dato', 'idx_tunbroyting_abonnement']
2024-10-31 04:57:12 - db_utils - INFO -   Row count in tunbroyting_bestillinger: 2
2024-10-31 04:57:12 - db_utils - INFO -   Test query result: (1,)
2024-10-31 04:57:12 - db_utils - INFO - Debugging stroing database:
2024-10-31 04:57:12 - db_utils - INFO -   Database version: 0
2024-10-31 04:57:12 - db_utils - INFO -   Tables in stroing.db: ['sqlite_sequence', 'stroing_bestillinger']
2024-10-31 04:57:12 - db_utils - INFO -   Structure of sqlite_sequence table:
2024-10-31 04:57:12 - db_utils - INFO -     Column: name, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:57:12 - db_utils - INFO -     Column: seq, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:57:12 - db_utils - INFO -   Structure of stroing_bestillinger table:
2024-10-31 04:57:12 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 04:57:12 - db_utils - INFO -     Column: bruker, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:57:12 - db_utils - INFO -     Column: bestillings_dato, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:57:12 - db_utils - INFO -     Column: onske_dato, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:57:12 - db_utils - INFO -   Indexes in stroing.db: ['idx_stroing_bruker', 'idx_stroing_onske_dato', 'idx_stroing_bestillings_dato']
2024-10-31 04:57:12 - db_utils - INFO -   Row count in sqlite_sequence: 1
2024-10-31 04:57:12 - db_utils - INFO -   Row count in stroing_bestillinger: 5
2024-10-31 04:57:12 - db_utils - INFO -   Test query result: (1,)
2024-10-31 04:57:12 - db_utils - INFO - Debugging feedback database:
2024-10-31 04:57:12 - db_utils - INFO -   Database version: 0
2024-10-31 04:57:12 - db_utils - INFO -   Tables in feedback.db: ['sqlite_sequence', 'feedback']
2024-10-31 04:57:12 - db_utils - INFO -   Structure of sqlite_sequence table:
2024-10-31 04:57:12 - db_utils - INFO -     Column: name, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:57:12 - db_utils - INFO -     Column: seq, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:57:12 - db_utils - INFO -   Structure of feedback table:
2024-10-31 04:57:12 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 04:57:12 - db_utils - INFO -     Column: type, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:57:12 - db_utils - INFO -     Column: datetime, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:57:12 - db_utils - INFO -     Column: comment, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:57:12 - db_utils - INFO -     Column: innsender, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:57:12 - db_utils - INFO -     Column: status, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:57:12 - db_utils - INFO -     Column: status_changed_by, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:57:12 - db_utils - INFO -     Column: status_changed_at, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:57:12 - db_utils - INFO -     Column: hidden, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:57:12 - db_utils - INFO -     Column: is_alert, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:57:12 - db_utils - INFO -     Column: display_on_weather, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:57:12 - db_utils - INFO -     Column: expiry_date, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:57:12 - db_utils - INFO -     Column: target_group, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:57:12 - db_utils - INFO -   Indexes in feedback.db: ['idx_feedback_datetime', 'idx_feedback_innsender', 'idx_feedback_status', 'idx_feedback_type']
2024-10-31 04:57:12 - db_utils - INFO -   Row count in sqlite_sequence: 1
2024-10-31 04:57:12 - db_utils - INFO -   Row count in feedback: 11
2024-10-31 04:57:12 - db_utils - INFO -   Test query result: (1,)
2024-10-31 04:57:12 - db_utils - INFO - Detailed database operations debugging completed
2024-10-31 04:57:12 - db_utils - INFO - Oppdatert skjema for customer
2024-10-31 04:57:12 - db_utils - INFO - Oppdatert skjema for feedback
2024-10-31 04:57:12 - db_utils - INFO - Oppdatert skjema for login_history
2024-10-31 04:57:12 - db_utils - INFO - Oppdatert skjema for stroing
2024-10-31 04:57:12 - db_utils - INFO - Oppdatert skjema for tunbroyting
2024-10-31 04:57:12 - db_utils - INFO - All database schemas verified and updated
2024-10-31 04:57:12 - db_utils - INFO - Oppdatert skjema for customer
2024-10-31 04:57:12 - db_utils - INFO - Oppdatert skjema for feedback
2024-10-31 04:57:12 - db_utils - INFO - Oppdatert skjema for login_history
2024-10-31 04:57:12 - db_utils - INFO - Oppdatert skjema for stroing
2024-10-31 04:57:12 - db_utils - INFO - Oppdatert skjema for tunbroyting
2024-10-31 04:57:12 - db_utils - INFO - All database schemas verified and updated
2024-10-31 04:57:12 - db_utils - INFO - Database already initialized. Skipping.
2024-10-31 04:57:12 - db_utils - INFO - Query executed successfully on login_history.db. Rows affected: -1
2024-10-31 04:57:12 - db_utils - INFO - login_history table structure is correct
2024-10-31 04:57:12 - customer_utils - INFO - Starting cabin user consistency check
2024-10-31 04:57:12 - utils - INFO - Attempting to load passwords from secrets
2024-10-31 04:57:12 - utils - INFO - Successfully loaded passwords. Number of entries: 94
2024-10-31 04:57:12 - customer_utils - INFO - Retrieved 94 passwords
2024-10-31 04:57:12 - customer_utils - INFO - Found 94 customers in database
2024-10-31 04:57:12 - customer_utils - INFO - Consistency check completed
2024-10-31 04:57:12 - customer_utils - INFO - Database connection closed
2024-10-31 04:57:12 - customer_utils - INFO - Validating customers and passwords
2024-10-31 04:57:12 - utils - INFO - Attempting to load passwords from secrets
2024-10-31 04:57:12 - utils - INFO - Successfully loaded passwords. Number of entries: 94
2024-10-31 04:57:12 - customer_utils - INFO - Customer and password validation complete
2024-10-31 04:57:12 - db_utils - INFO - Successfully created indexes for tunbroyting database
2024-10-31 04:57:12 - db_utils - INFO - Successfully created indexes for stroing database
2024-10-31 04:57:12 - db_utils - INFO - Successfully created indexes for feedback database
2024-10-31 04:57:12 - db_utils - INFO - Successfully created indexes for login_history database
2024-10-31 04:57:12 - db_utils - INFO - Successfully created indexes for customer database
2024-10-31 04:57:12 - db_utils - INFO - Database index creation completed
2024-10-31 04:57:12 - __main__ - INFO - Application initialization completed successfully
2024-10-31 04:57:12 - __main__ - INFO - Application initialization completed successfully
2024-10-31 04:57:12 - __main__ - INFO - Application setup complete
2024-10-31 04:57:12 - customer_utils - INFO - Successfully retrieved customer with ID: 999
2024-10-31 04:57:13 - __main__ - INFO - Application shutting down
2024-10-31 04:58:31 - __main__ - INFO - Added validate_user_input function to app.py
2024-10-31 04:58:31 - __main__ - INFO - Starting application initialization
2024-10-31 04:58:31 - db_utils - INFO - Starting detailed database operations debugging
2024-10-31 04:58:31 - db_utils - INFO - Debugging login_history database:
2024-10-31 04:58:31 - db_utils - INFO -   Database version: 0
2024-10-31 04:58:31 - db_utils - INFO -   Tables in login_history.db: ['login_history']
2024-10-31 04:58:31 - db_utils - INFO -   Structure of login_history table:
2024-10-31 04:58:31 - db_utils - INFO -     Column: id, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:58:31 - db_utils - INFO -     Column: login_time, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:58:31 - db_utils - INFO -     Column: success, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:58:31 - db_utils - INFO -   Indexes in login_history.db: ['idx_login_id', 'idx_login_time']
2024-10-31 04:58:31 - db_utils - INFO -   Row count in login_history: 445
2024-10-31 04:58:31 - db_utils - INFO -   Test query result: (1,)
2024-10-31 04:58:31 - db_utils - INFO - Debugging tunbroyting database:
2024-10-31 04:58:31 - db_utils - INFO -   Database version: 0
2024-10-31 04:58:31 - db_utils - INFO -   Tables in tunbroyting.db: ['tunbroyting_bestillinger']
2024-10-31 04:58:31 - db_utils - INFO -   Structure of tunbroyting_bestillinger table:
2024-10-31 04:58:31 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 04:58:31 - db_utils - INFO -     Column: bruker, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:58:31 - db_utils - INFO -     Column: ankomst_dato, Type: DATE, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:58:31 - db_utils - INFO -     Column: ankomst_tid, Type: TIME, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:58:31 - db_utils - INFO -     Column: avreise_dato, Type: DATE, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:58:31 - db_utils - INFO -     Column: avreise_tid, Type: TIME, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:58:31 - db_utils - INFO -     Column: abonnement_type, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:58:31 - db_utils - INFO -   Indexes in tunbroyting.db: ['idx_tunbroyting_bruker', 'idx_tunbroyting_ankomst_dato', 'idx_tunbroyting_avreise_dato', 'idx_tunbroyting_abonnement']
2024-10-31 04:58:31 - db_utils - INFO -   Row count in tunbroyting_bestillinger: 2
2024-10-31 04:58:31 - db_utils - INFO -   Test query result: (1,)
2024-10-31 04:58:31 - db_utils - INFO - Debugging stroing database:
2024-10-31 04:58:31 - db_utils - INFO -   Database version: 0
2024-10-31 04:58:31 - db_utils - INFO -   Tables in stroing.db: ['sqlite_sequence', 'stroing_bestillinger']
2024-10-31 04:58:31 - db_utils - INFO -   Structure of sqlite_sequence table:
2024-10-31 04:58:31 - db_utils - INFO -     Column: name, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:58:31 - db_utils - INFO -     Column: seq, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:58:31 - db_utils - INFO -   Structure of stroing_bestillinger table:
2024-10-31 04:58:31 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 04:58:31 - db_utils - INFO -     Column: bruker, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:58:31 - db_utils - INFO -     Column: bestillings_dato, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:58:31 - db_utils - INFO -     Column: onske_dato, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:58:31 - db_utils - INFO -   Indexes in stroing.db: ['idx_stroing_bruker', 'idx_stroing_onske_dato', 'idx_stroing_bestillings_dato']
2024-10-31 04:58:31 - db_utils - INFO -   Row count in sqlite_sequence: 1
2024-10-31 04:58:31 - db_utils - INFO -   Row count in stroing_bestillinger: 5
2024-10-31 04:58:31 - db_utils - INFO -   Test query result: (1,)
2024-10-31 04:58:31 - db_utils - INFO - Debugging feedback database:
2024-10-31 04:58:31 - db_utils - INFO -   Database version: 0
2024-10-31 04:58:31 - db_utils - INFO -   Tables in feedback.db: ['sqlite_sequence', 'feedback']
2024-10-31 04:58:31 - db_utils - INFO -   Structure of sqlite_sequence table:
2024-10-31 04:58:31 - db_utils - INFO -     Column: name, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:58:31 - db_utils - INFO -     Column: seq, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:58:31 - db_utils - INFO -   Structure of feedback table:
2024-10-31 04:58:31 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 04:58:31 - db_utils - INFO -     Column: type, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:58:31 - db_utils - INFO -     Column: datetime, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:58:31 - db_utils - INFO -     Column: comment, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:58:31 - db_utils - INFO -     Column: innsender, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:58:31 - db_utils - INFO -     Column: status, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:58:31 - db_utils - INFO -     Column: status_changed_by, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:58:31 - db_utils - INFO -     Column: status_changed_at, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:58:31 - db_utils - INFO -     Column: hidden, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:58:31 - db_utils - INFO -     Column: is_alert, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:58:31 - db_utils - INFO -     Column: display_on_weather, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:58:31 - db_utils - INFO -     Column: expiry_date, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:58:31 - db_utils - INFO -     Column: target_group, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:58:31 - db_utils - INFO -   Indexes in feedback.db: ['idx_feedback_datetime', 'idx_feedback_innsender', 'idx_feedback_status', 'idx_feedback_type']
2024-10-31 04:58:31 - db_utils - INFO -   Row count in sqlite_sequence: 1
2024-10-31 04:58:31 - db_utils - INFO -   Row count in feedback: 11
2024-10-31 04:58:31 - db_utils - INFO -   Test query result: (1,)
2024-10-31 04:58:31 - db_utils - INFO - Detailed database operations debugging completed
2024-10-31 04:58:31 - db_utils - INFO - Oppdatert skjema for customer
2024-10-31 04:58:31 - db_utils - INFO - Oppdatert skjema for feedback
2024-10-31 04:58:31 - db_utils - INFO - Oppdatert skjema for login_history
2024-10-31 04:58:31 - db_utils - INFO - Oppdatert skjema for stroing
2024-10-31 04:58:31 - db_utils - INFO - Oppdatert skjema for tunbroyting
2024-10-31 04:58:31 - db_utils - INFO - All database schemas verified and updated
2024-10-31 04:58:31 - db_utils - INFO - Oppdatert skjema for customer
2024-10-31 04:58:31 - db_utils - INFO - Oppdatert skjema for feedback
2024-10-31 04:58:31 - db_utils - INFO - Oppdatert skjema for login_history
2024-10-31 04:58:31 - db_utils - INFO - Oppdatert skjema for stroing
2024-10-31 04:58:31 - db_utils - INFO - Oppdatert skjema for tunbroyting
2024-10-31 04:58:31 - db_utils - INFO - All database schemas verified and updated
2024-10-31 04:58:31 - db_utils - INFO - Database already initialized. Skipping.
2024-10-31 04:58:31 - db_utils - INFO - Query executed successfully on login_history.db. Rows affected: -1
2024-10-31 04:58:31 - db_utils - INFO - login_history table structure is correct
2024-10-31 04:58:31 - customer_utils - INFO - Starting cabin user consistency check
2024-10-31 04:58:31 - utils - INFO - Attempting to load passwords from secrets
2024-10-31 04:58:31 - utils - INFO - Successfully loaded passwords. Number of entries: 94
2024-10-31 04:58:31 - customer_utils - INFO - Retrieved 94 passwords
2024-10-31 04:58:31 - customer_utils - INFO - Found 94 customers in database
2024-10-31 04:58:31 - customer_utils - INFO - Consistency check completed
2024-10-31 04:58:31 - customer_utils - INFO - Database connection closed
2024-10-31 04:58:31 - customer_utils - INFO - Validating customers and passwords
2024-10-31 04:58:31 - utils - INFO - Attempting to load passwords from secrets
2024-10-31 04:58:31 - utils - INFO - Successfully loaded passwords. Number of entries: 94
2024-10-31 04:58:31 - customer_utils - INFO - Customer and password validation complete
2024-10-31 04:58:31 - db_utils - INFO - Successfully created indexes for tunbroyting database
2024-10-31 04:58:31 - db_utils - INFO - Successfully created indexes for stroing database
2024-10-31 04:58:31 - db_utils - INFO - Successfully created indexes for feedback database
2024-10-31 04:58:31 - db_utils - INFO - Successfully created indexes for login_history database
2024-10-31 04:58:31 - db_utils - INFO - Successfully created indexes for customer database
2024-10-31 04:58:31 - db_utils - INFO - Database index creation completed
2024-10-31 04:58:31 - __main__ - INFO - Application initialization completed successfully
2024-10-31 04:58:31 - __main__ - INFO - Application initialization completed successfully
2024-10-31 04:58:31 - __main__ - INFO - Application setup complete
2024-10-31 04:58:31 - customer_utils - INFO - Successfully retrieved customer with ID: 999
2024-10-31 04:58:32 - __main__ - INFO - Added validate_user_input function to app.py
2024-10-31 04:58:32 - __main__ - INFO - Starting application initialization
2024-10-31 04:58:32 - db_utils - INFO - Starting detailed database operations debugging
2024-10-31 04:58:32 - db_utils - INFO - Debugging login_history database:
2024-10-31 04:58:32 - db_utils - INFO -   Database version: 0
2024-10-31 04:58:32 - db_utils - INFO -   Tables in login_history.db: ['login_history']
2024-10-31 04:58:32 - db_utils - INFO -   Structure of login_history table:
2024-10-31 04:58:32 - db_utils - INFO -     Column: id, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:58:32 - db_utils - INFO -     Column: login_time, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:58:32 - db_utils - INFO -     Column: success, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:58:32 - db_utils - INFO -   Indexes in login_history.db: ['idx_login_id', 'idx_login_time']
2024-10-31 04:58:32 - db_utils - INFO -   Row count in login_history: 445
2024-10-31 04:58:32 - db_utils - INFO -   Test query result: (1,)
2024-10-31 04:58:32 - db_utils - INFO - Debugging tunbroyting database:
2024-10-31 04:58:32 - db_utils - INFO -   Database version: 0
2024-10-31 04:58:32 - db_utils - INFO -   Tables in tunbroyting.db: ['tunbroyting_bestillinger']
2024-10-31 04:58:32 - db_utils - INFO -   Structure of tunbroyting_bestillinger table:
2024-10-31 04:58:32 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 04:58:32 - db_utils - INFO -     Column: bruker, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:58:32 - db_utils - INFO -     Column: ankomst_dato, Type: DATE, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:58:32 - db_utils - INFO -     Column: ankomst_tid, Type: TIME, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:58:32 - db_utils - INFO -     Column: avreise_dato, Type: DATE, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:58:32 - db_utils - INFO -     Column: avreise_tid, Type: TIME, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:58:32 - db_utils - INFO -     Column: abonnement_type, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:58:32 - db_utils - INFO -   Indexes in tunbroyting.db: ['idx_tunbroyting_bruker', 'idx_tunbroyting_ankomst_dato', 'idx_tunbroyting_avreise_dato', 'idx_tunbroyting_abonnement']
2024-10-31 04:58:32 - db_utils - INFO -   Row count in tunbroyting_bestillinger: 2
2024-10-31 04:58:32 - db_utils - INFO -   Test query result: (1,)
2024-10-31 04:58:32 - db_utils - INFO - Debugging stroing database:
2024-10-31 04:58:32 - db_utils - INFO -   Database version: 0
2024-10-31 04:58:32 - db_utils - INFO -   Tables in stroing.db: ['sqlite_sequence', 'stroing_bestillinger']
2024-10-31 04:58:32 - db_utils - INFO -   Structure of sqlite_sequence table:
2024-10-31 04:58:32 - db_utils - INFO -     Column: name, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:58:32 - db_utils - INFO -     Column: seq, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:58:32 - db_utils - INFO -   Structure of stroing_bestillinger table:
2024-10-31 04:58:32 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 04:58:32 - db_utils - INFO -     Column: bruker, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:58:32 - db_utils - INFO -     Column: bestillings_dato, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:58:32 - db_utils - INFO -     Column: onske_dato, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:58:32 - db_utils - INFO -   Indexes in stroing.db: ['idx_stroing_bruker', 'idx_stroing_onske_dato', 'idx_stroing_bestillings_dato']
2024-10-31 04:58:32 - db_utils - INFO -   Row count in sqlite_sequence: 1
2024-10-31 04:58:32 - db_utils - INFO -   Row count in stroing_bestillinger: 5
2024-10-31 04:58:32 - db_utils - INFO -   Test query result: (1,)
2024-10-31 04:58:32 - db_utils - INFO - Debugging feedback database:
2024-10-31 04:58:32 - db_utils - INFO -   Database version: 0
2024-10-31 04:58:32 - db_utils - INFO -   Tables in feedback.db: ['sqlite_sequence', 'feedback']
2024-10-31 04:58:32 - db_utils - INFO -   Structure of sqlite_sequence table:
2024-10-31 04:58:32 - db_utils - INFO -     Column: name, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:58:32 - db_utils - INFO -     Column: seq, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:58:32 - db_utils - INFO -   Structure of feedback table:
2024-10-31 04:58:32 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 04:58:32 - db_utils - INFO -     Column: type, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:58:32 - db_utils - INFO -     Column: datetime, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:58:32 - db_utils - INFO -     Column: comment, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:58:32 - db_utils - INFO -     Column: innsender, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:58:32 - db_utils - INFO -     Column: status, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:58:32 - db_utils - INFO -     Column: status_changed_by, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:58:32 - db_utils - INFO -     Column: status_changed_at, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:58:32 - db_utils - INFO -     Column: hidden, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:58:32 - db_utils - INFO -     Column: is_alert, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:58:32 - db_utils - INFO -     Column: display_on_weather, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:58:32 - db_utils - INFO -     Column: expiry_date, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:58:32 - db_utils - INFO -     Column: target_group, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 04:58:32 - db_utils - INFO -   Indexes in feedback.db: ['idx_feedback_datetime', 'idx_feedback_innsender', 'idx_feedback_status', 'idx_feedback_type']
2024-10-31 04:58:32 - __main__ - INFO - Application shutting down
2024-10-31 04:58:32 - db_utils - INFO -   Row count in sqlite_sequence: 1
2024-10-31 04:58:32 - db_utils - INFO -   Row count in feedback: 11
2024-10-31 04:58:32 - db_utils - INFO -   Test query result: (1,)
2024-10-31 04:58:32 - db_utils - INFO - Detailed database operations debugging completed
2024-10-31 04:58:32 - db_utils - INFO - Oppdatert skjema for customer
2024-10-31 04:58:32 - db_utils - INFO - Oppdatert skjema for feedback
2024-10-31 04:58:32 - db_utils - INFO - Oppdatert skjema for login_history
2024-10-31 04:58:32 - db_utils - INFO - Oppdatert skjema for stroing
2024-10-31 04:58:32 - db_utils - INFO - Oppdatert skjema for tunbroyting
2024-10-31 04:58:32 - db_utils - INFO - All database schemas verified and updated
2024-10-31 04:58:32 - db_utils - INFO - Oppdatert skjema for customer
2024-10-31 04:58:32 - db_utils - INFO - Oppdatert skjema for feedback
2024-10-31 04:58:32 - db_utils - INFO - Oppdatert skjema for login_history
2024-10-31 04:58:32 - db_utils - INFO - Oppdatert skjema for stroing
2024-10-31 04:58:32 - db_utils - INFO - Oppdatert skjema for tunbroyting
2024-10-31 04:58:32 - db_utils - INFO - All database schemas verified and updated
2024-10-31 04:58:32 - db_utils - INFO - Database already initialized. Skipping.
2024-10-31 04:58:32 - db_utils - INFO - Query executed successfully on login_history.db. Rows affected: -1
2024-10-31 04:58:32 - db_utils - INFO - login_history table structure is correct
2024-10-31 04:58:32 - customer_utils - INFO - Starting cabin user consistency check
2024-10-31 04:58:32 - utils - INFO - Attempting to load passwords from secrets
2024-10-31 04:58:32 - utils - INFO - Successfully loaded passwords. Number of entries: 94
2024-10-31 04:58:32 - customer_utils - INFO - Retrieved 94 passwords
2024-10-31 04:58:32 - customer_utils - INFO - Found 94 customers in database
2024-10-31 04:58:32 - customer_utils - INFO - Consistency check completed
2024-10-31 04:58:32 - customer_utils - INFO - Database connection closed
2024-10-31 04:58:32 - customer_utils - INFO - Validating customers and passwords
2024-10-31 04:58:32 - utils - INFO - Attempting to load passwords from secrets
2024-10-31 04:58:32 - utils - INFO - Successfully loaded passwords. Number of entries: 94
2024-10-31 04:58:32 - customer_utils - INFO - Customer and password validation complete
2024-10-31 04:58:32 - db_utils - INFO - Successfully created indexes for tunbroyting database
2024-10-31 04:58:32 - db_utils - INFO - Successfully created indexes for stroing database
2024-10-31 04:58:32 - db_utils - INFO - Successfully created indexes for feedback database
2024-10-31 04:58:32 - db_utils - INFO - Successfully created indexes for login_history database
2024-10-31 04:58:32 - db_utils - INFO - Successfully created indexes for customer database
2024-10-31 04:58:32 - db_utils - INFO - Database index creation completed
2024-10-31 04:58:32 - __main__ - INFO - Application initialization completed successfully
2024-10-31 04:58:32 - __main__ - INFO - Application initialization completed successfully
2024-10-31 04:58:32 - __main__ - INFO - Application setup complete
2024-10-31 04:58:32 - customer_utils - INFO - Successfully retrieved customer with ID: 999
2024-10-31 04:58:33 - __main__ - INFO - Application shutting down
2024-10-31 05:03:58 - __main__ - INFO - Added validate_user_input function to app.py
2024-10-31 05:03:58 - __main__ - INFO - Starting application initialization
2024-10-31 05:03:58 - db_utils - INFO - Starting detailed database operations debugging
2024-10-31 05:03:58 - db_utils - INFO - Debugging login_history database:
2024-10-31 05:03:58 - db_utils - INFO -   Database version: 0
2024-10-31 05:03:58 - db_utils - INFO -   Tables in login_history.db: ['login_history']
2024-10-31 05:03:58 - db_utils - INFO -   Structure of login_history table:
2024-10-31 05:03:58 - db_utils - INFO -     Column: id, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 05:03:58 - db_utils - INFO -     Column: login_time, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 05:03:58 - db_utils - INFO -     Column: success, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 05:03:58 - db_utils - INFO -   Indexes in login_history.db: ['idx_login_id', 'idx_login_time']
2024-10-31 05:03:58 - db_utils - INFO -   Row count in login_history: 445
2024-10-31 05:03:58 - db_utils - INFO -   Test query result: (1,)
2024-10-31 05:03:58 - db_utils - INFO - Debugging tunbroyting database:
2024-10-31 05:03:58 - db_utils - INFO -   Database version: 0
2024-10-31 05:03:58 - db_utils - INFO -   Tables in tunbroyting.db: ['tunbroyting_bestillinger']
2024-10-31 05:03:58 - db_utils - INFO -   Structure of tunbroyting_bestillinger table:
2024-10-31 05:03:58 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 05:03:58 - db_utils - INFO -     Column: bruker, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 05:03:58 - db_utils - INFO -     Column: ankomst_dato, Type: DATE, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 05:03:58 - db_utils - INFO -     Column: ankomst_tid, Type: TIME, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 05:03:58 - db_utils - INFO -     Column: avreise_dato, Type: DATE, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 05:03:58 - db_utils - INFO -     Column: avreise_tid, Type: TIME, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 05:03:58 - db_utils - INFO -     Column: abonnement_type, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 05:03:58 - db_utils - INFO -   Indexes in tunbroyting.db: ['idx_tunbroyting_bruker', 'idx_tunbroyting_ankomst_dato', 'idx_tunbroyting_avreise_dato', 'idx_tunbroyting_abonnement']
2024-10-31 05:03:58 - db_utils - INFO -   Row count in tunbroyting_bestillinger: 2
2024-10-31 05:03:58 - db_utils - INFO -   Test query result: (1,)
2024-10-31 05:03:58 - db_utils - INFO - Debugging stroing database:
2024-10-31 05:03:58 - db_utils - INFO -   Database version: 0
2024-10-31 05:03:58 - db_utils - INFO -   Tables in stroing.db: ['sqlite_sequence', 'stroing_bestillinger']
2024-10-31 05:03:58 - db_utils - INFO -   Structure of sqlite_sequence table:
2024-10-31 05:03:58 - db_utils - INFO -     Column: name, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 05:03:58 - db_utils - INFO -     Column: seq, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 05:03:58 - db_utils - INFO -   Structure of stroing_bestillinger table:
2024-10-31 05:03:58 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 05:03:58 - db_utils - INFO -     Column: bruker, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 05:03:58 - db_utils - INFO -     Column: bestillings_dato, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 05:03:58 - db_utils - INFO -     Column: onske_dato, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 05:03:58 - db_utils - INFO -   Indexes in stroing.db: ['idx_stroing_bruker', 'idx_stroing_onske_dato', 'idx_stroing_bestillings_dato']
2024-10-31 05:03:58 - db_utils - INFO -   Row count in sqlite_sequence: 1
2024-10-31 05:03:58 - db_utils - INFO -   Row count in stroing_bestillinger: 5
2024-10-31 05:03:58 - db_utils - INFO -   Test query result: (1,)
2024-10-31 05:03:58 - db_utils - INFO - Debugging feedback database:
2024-10-31 05:03:58 - db_utils - INFO -   Database version: 0
2024-10-31 05:03:58 - db_utils - INFO -   Tables in feedback.db: ['sqlite_sequence', 'feedback']
2024-10-31 05:03:58 - db_utils - INFO -   Structure of sqlite_sequence table:
2024-10-31 05:03:58 - db_utils - INFO -     Column: name, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 05:03:58 - db_utils - INFO -     Column: seq, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 05:03:58 - db_utils - INFO -   Structure of feedback table:
2024-10-31 05:03:58 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 05:03:58 - db_utils - INFO -     Column: type, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 05:03:58 - db_utils - INFO -     Column: datetime, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 05:03:58 - db_utils - INFO -     Column: comment, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 05:03:58 - db_utils - INFO -     Column: innsender, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 05:03:58 - db_utils - INFO -     Column: status, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 05:03:58 - db_utils - INFO -     Column: status_changed_by, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 05:03:58 - db_utils - INFO -     Column: status_changed_at, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 05:03:58 - db_utils - INFO -     Column: hidden, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 05:03:58 - db_utils - INFO -     Column: is_alert, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 05:03:58 - db_utils - INFO -     Column: display_on_weather, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 05:03:58 - db_utils - INFO -     Column: expiry_date, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 05:03:58 - db_utils - INFO -     Column: target_group, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 05:03:58 - db_utils - INFO -   Indexes in feedback.db: ['idx_feedback_datetime', 'idx_feedback_innsender', 'idx_feedback_status', 'idx_feedback_type']
2024-10-31 05:03:58 - db_utils - INFO -   Row count in sqlite_sequence: 1
2024-10-31 05:03:58 - db_utils - INFO -   Row count in feedback: 11
2024-10-31 05:03:58 - db_utils - INFO -   Test query result: (1,)
2024-10-31 05:03:58 - db_utils - INFO - Detailed database operations debugging completed
2024-10-31 05:03:58 - db_utils - INFO - Oppdatert skjema for customer
2024-10-31 05:03:58 - db_utils - INFO - Oppdatert skjema for feedback
2024-10-31 05:03:58 - db_utils - INFO - Oppdatert skjema for login_history
2024-10-31 05:03:58 - db_utils - INFO - Oppdatert skjema for stroing
2024-10-31 05:03:58 - db_utils - INFO - Oppdatert skjema for tunbroyting
2024-10-31 05:03:58 - db_utils - INFO - All database schemas verified and updated
2024-10-31 05:03:58 - db_utils - INFO - Oppdatert skjema for customer
2024-10-31 05:03:58 - db_utils - INFO - Oppdatert skjema for feedback
2024-10-31 05:03:58 - db_utils - INFO - Oppdatert skjema for login_history
2024-10-31 05:03:58 - db_utils - INFO - Oppdatert skjema for stroing
2024-10-31 05:03:58 - db_utils - INFO - Oppdatert skjema for tunbroyting
2024-10-31 05:03:58 - db_utils - INFO - All database schemas verified and updated
2024-10-31 05:03:58 - db_utils - INFO - Database login_history initialized, updated, and optimized
2024-10-31 05:03:58 - db_utils - INFO - Database tunbroyting initialized, updated, and optimized
2024-10-31 05:03:58 - db_utils - INFO - Database stroing initialized, updated, and optimized
2024-10-31 05:03:58 - db_utils - INFO - Database feedback initialized, updated, and optimized
2024-10-31 05:03:58 - db_utils - INFO - Database customer initialized, updated, and optimized
2024-10-31 05:03:58 - db_utils - INFO - Successfully created indexes for tunbroyting database
2024-10-31 05:03:58 - db_utils - INFO - Successfully created indexes for stroing database
2024-10-31 05:03:58 - db_utils - INFO - Successfully created indexes for feedback database
2024-10-31 05:03:58 - db_utils - INFO - Successfully created indexes for login_history database
2024-10-31 05:03:58 - db_utils - INFO - Successfully created indexes for customer database
2024-10-31 05:03:58 - db_utils - INFO - Database index creation completed
2024-10-31 05:03:58 - db_utils - INFO - Database indexes created
2024-10-31 05:03:58 - db_utils - INFO - Successfully verified connection to stroing.db
2024-10-31 05:03:58 - db_utils - INFO - Successfully verified connection to tunbroyting.db
2024-10-31 05:03:58 - db_utils - INFO - Successfully verified connection to feedback.db
2024-10-31 05:03:58 - db_utils - INFO - Successfully verified connection to login_history.db
2024-10-31 05:03:58 - db_utils - INFO - Successfully verified connection to customer.db
2024-10-31 05:03:58 - db_utils - INFO - Database connections verified
2024-10-31 05:03:58 - db_utils - INFO - All databases initialized, updated, and verified
2024-10-31 05:03:58 - db_utils - INFO - Query executed successfully on login_history.db. Rows affected: -1
2024-10-31 05:03:58 - db_utils - INFO - login_history table structure is correct
2024-10-31 05:03:58 - customer_utils - INFO - Starting cabin user consistency check
2024-10-31 05:03:58 - utils - INFO - Attempting to load passwords from secrets
2024-10-31 05:03:58 - utils - INFO - Successfully loaded passwords. Number of entries: 94
2024-10-31 05:03:58 - customer_utils - INFO - Retrieved 94 passwords
2024-10-31 05:03:58 - customer_utils - INFO - Found 94 customers in database
2024-10-31 05:03:58 - customer_utils - INFO - Consistency check completed
2024-10-31 05:03:58 - customer_utils - INFO - Database connection closed
2024-10-31 05:03:58 - customer_utils - INFO - Validating customers and passwords
2024-10-31 05:03:58 - utils - INFO - Attempting to load passwords from secrets
2024-10-31 05:03:58 - utils - INFO - Successfully loaded passwords. Number of entries: 94
2024-10-31 05:03:58 - customer_utils - INFO - Customer and password validation complete
2024-10-31 05:03:58 - db_utils - INFO - Successfully created indexes for tunbroyting database
2024-10-31 05:03:58 - db_utils - INFO - Successfully created indexes for stroing database
2024-10-31 05:03:58 - db_utils - INFO - Successfully created indexes for feedback database
2024-10-31 05:03:58 - db_utils - INFO - Successfully created indexes for login_history database
2024-10-31 05:03:58 - db_utils - INFO - Successfully created indexes for customer database
2024-10-31 05:03:58 - db_utils - INFO - Database index creation completed
2024-10-31 05:03:58 - __main__ - INFO - Application initialization completed successfully
2024-10-31 05:03:58 - __main__ - INFO - Application initialization completed successfully
2024-10-31 05:03:58 - __main__ - INFO - Application setup complete
2024-10-31 05:03:58 - __main__ - INFO - Application shutting down
2024-10-31 05:04:00 - __main__ - INFO - Added validate_user_input function to app.py
2024-10-31 05:04:00 - __main__ - INFO - Starting application initialization
2024-10-31 05:04:00 - db_utils - INFO - Starting detailed database operations debugging
2024-10-31 05:04:00 - db_utils - INFO - Debugging login_history database:
2024-10-31 05:04:00 - db_utils - INFO -   Database version: 0
2024-10-31 05:04:00 - db_utils - INFO -   Tables in login_history.db: ['login_history']
2024-10-31 05:04:00 - db_utils - INFO -   Structure of login_history table:
2024-10-31 05:04:00 - db_utils - INFO -     Column: id, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 05:04:00 - db_utils - INFO -     Column: login_time, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 05:04:00 - db_utils - INFO -     Column: success, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 05:04:00 - db_utils - INFO -   Indexes in login_history.db: ['idx_login_id', 'idx_login_time']
2024-10-31 05:04:00 - db_utils - INFO -   Row count in login_history: 445
2024-10-31 05:04:00 - db_utils - INFO -   Test query result: (1,)
2024-10-31 05:04:00 - db_utils - INFO - Debugging tunbroyting database:
2024-10-31 05:04:00 - db_utils - INFO -   Database version: 0
2024-10-31 05:04:00 - db_utils - INFO -   Tables in tunbroyting.db: ['tunbroyting_bestillinger']
2024-10-31 05:04:00 - db_utils - INFO -   Structure of tunbroyting_bestillinger table:
2024-10-31 05:04:00 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 05:04:00 - db_utils - INFO -     Column: bruker, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 05:04:00 - db_utils - INFO -     Column: ankomst_dato, Type: DATE, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 05:04:00 - db_utils - INFO -     Column: ankomst_tid, Type: TIME, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 05:04:00 - db_utils - INFO -     Column: avreise_dato, Type: DATE, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 05:04:00 - db_utils - INFO -     Column: avreise_tid, Type: TIME, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 05:04:00 - db_utils - INFO -     Column: abonnement_type, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 05:04:00 - db_utils - INFO -   Indexes in tunbroyting.db: ['idx_tunbroyting_bruker', 'idx_tunbroyting_ankomst_dato', 'idx_tunbroyting_avreise_dato', 'idx_tunbroyting_abonnement']
2024-10-31 05:04:00 - db_utils - INFO -   Row count in tunbroyting_bestillinger: 2
2024-10-31 05:04:00 - db_utils - INFO -   Test query result: (1,)
2024-10-31 05:04:00 - db_utils - INFO - Debugging stroing database:
2024-10-31 05:04:00 - db_utils - INFO -   Database version: 0
2024-10-31 05:04:00 - db_utils - INFO -   Tables in stroing.db: ['sqlite_sequence', 'stroing_bestillinger']
2024-10-31 05:04:00 - db_utils - INFO -   Structure of sqlite_sequence table:
2024-10-31 05:04:00 - db_utils - INFO -     Column: name, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 05:04:00 - db_utils - INFO -     Column: seq, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 05:04:00 - db_utils - INFO -   Structure of stroing_bestillinger table:
2024-10-31 05:04:00 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 05:04:00 - db_utils - INFO -     Column: bruker, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 05:04:00 - db_utils - INFO -     Column: bestillings_dato, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 05:04:00 - db_utils - INFO -     Column: onske_dato, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 05:04:00 - db_utils - INFO -   Indexes in stroing.db: ['idx_stroing_bruker', 'idx_stroing_onske_dato', 'idx_stroing_bestillings_dato']
2024-10-31 05:04:00 - db_utils - INFO -   Row count in sqlite_sequence: 1
2024-10-31 05:04:00 - db_utils - INFO -   Row count in stroing_bestillinger: 5
2024-10-31 05:04:00 - db_utils - INFO -   Test query result: (1,)
2024-10-31 05:04:00 - db_utils - INFO - Debugging feedback database:
2024-10-31 05:04:00 - db_utils - INFO -   Database version: 0
2024-10-31 05:04:00 - db_utils - INFO -   Tables in feedback.db: ['sqlite_sequence', 'feedback']
2024-10-31 05:04:00 - db_utils - INFO -   Structure of sqlite_sequence table:
2024-10-31 05:04:00 - db_utils - INFO -     Column: name, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 05:04:00 - db_utils - INFO -     Column: seq, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 05:04:00 - db_utils - INFO -   Structure of feedback table:
2024-10-31 05:04:00 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 05:04:00 - db_utils - INFO -     Column: type, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 05:04:00 - db_utils - INFO -     Column: datetime, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 05:04:00 - db_utils - INFO -     Column: comment, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 05:04:00 - db_utils - INFO -     Column: innsender, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 05:04:00 - db_utils - INFO -     Column: status, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 05:04:00 - db_utils - INFO -     Column: status_changed_by, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 05:04:00 - db_utils - INFO -     Column: status_changed_at, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 05:04:00 - db_utils - INFO -     Column: hidden, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 05:04:00 - db_utils - INFO -     Column: is_alert, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 05:04:00 - db_utils - INFO -     Column: display_on_weather, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 05:04:00 - db_utils - INFO -     Column: expiry_date, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 05:04:00 - db_utils - INFO -     Column: target_group, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 05:04:00 - db_utils - INFO -   Indexes in feedback.db: ['idx_feedback_datetime', 'idx_feedback_innsender', 'idx_feedback_status', 'idx_feedback_type']
2024-10-31 05:04:00 - db_utils - INFO -   Row count in sqlite_sequence: 1
2024-10-31 05:04:00 - db_utils - INFO -   Row count in feedback: 11
2024-10-31 05:04:00 - db_utils - INFO -   Test query result: (1,)
2024-10-31 05:04:00 - db_utils - INFO - Detailed database operations debugging completed
2024-10-31 05:04:00 - db_utils - INFO - Oppdatert skjema for customer
2024-10-31 05:04:00 - db_utils - INFO - Oppdatert skjema for feedback
2024-10-31 05:04:00 - db_utils - INFO - Oppdatert skjema for login_history
2024-10-31 05:04:00 - db_utils - INFO - Oppdatert skjema for stroing
2024-10-31 05:04:00 - db_utils - INFO - Oppdatert skjema for tunbroyting
2024-10-31 05:04:00 - db_utils - INFO - All database schemas verified and updated
2024-10-31 05:04:00 - db_utils - INFO - Oppdatert skjema for customer
2024-10-31 05:04:00 - db_utils - INFO - Oppdatert skjema for feedback
2024-10-31 05:04:00 - db_utils - INFO - Oppdatert skjema for login_history
2024-10-31 05:04:00 - db_utils - INFO - Oppdatert skjema for stroing
2024-10-31 05:04:00 - db_utils - INFO - Oppdatert skjema for tunbroyting
2024-10-31 05:04:00 - db_utils - INFO - All database schemas verified and updated
2024-10-31 05:04:00 - db_utils - INFO - Database already initialized. Skipping.
2024-10-31 05:04:00 - db_utils - INFO - Query executed successfully on login_history.db. Rows affected: -1
2024-10-31 05:04:00 - db_utils - INFO - login_history table structure is correct
2024-10-31 05:04:00 - customer_utils - INFO - Starting cabin user consistency check
2024-10-31 05:04:00 - utils - INFO - Attempting to load passwords from secrets
2024-10-31 05:04:00 - utils - INFO - Successfully loaded passwords. Number of entries: 94
2024-10-31 05:04:00 - customer_utils - INFO - Retrieved 94 passwords
2024-10-31 05:04:00 - customer_utils - INFO - Found 94 customers in database
2024-10-31 05:04:00 - customer_utils - INFO - Consistency check completed
2024-10-31 05:04:00 - customer_utils - INFO - Database connection closed
2024-10-31 05:04:00 - customer_utils - INFO - Validating customers and passwords
2024-10-31 05:04:00 - utils - INFO - Attempting to load passwords from secrets
2024-10-31 05:04:00 - utils - INFO - Successfully loaded passwords. Number of entries: 94
2024-10-31 05:04:00 - customer_utils - INFO - Customer and password validation complete
2024-10-31 05:04:00 - db_utils - INFO - Successfully created indexes for tunbroyting database
2024-10-31 05:04:00 - db_utils - INFO - Successfully created indexes for stroing database
2024-10-31 05:04:00 - db_utils - INFO - Successfully created indexes for feedback database
2024-10-31 05:04:00 - db_utils - INFO - Successfully created indexes for login_history database
2024-10-31 05:04:00 - db_utils - INFO - Successfully created indexes for customer database
2024-10-31 05:04:00 - db_utils - INFO - Database index creation completed
2024-10-31 05:04:00 - __main__ - INFO - Application initialization completed successfully
2024-10-31 05:04:00 - __main__ - INFO - Application initialization completed successfully
2024-10-31 05:04:00 - __main__ - INFO - Application setup complete
2024-10-31 05:04:00 - auth_utils - INFO - Login attempt for ID: 999
2024-10-31 05:04:00 - db_utils - INFO - DATABASE_PATH: /Users/tor.inge.jossang@aftenbladet.no/dev/gullingen
2024-10-31 05:04:00 - db_utils - INFO - Full database path: /Users/tor.inge.jossang@aftenbladet.no/dev/gullingen/login_history.db
2024-10-31 05:04:00 - db_utils - INFO - Attempting to create database engine...
2024-10-31 05:04:00 - db_utils - INFO - Database engine created successfully for login_history.db
2024-10-31 05:04:00 - auth_utils - INFO - Rate limit check passed for user 999
2024-10-31 05:04:00 - auth_utils - INFO - User 999 authenticated successfully
2024-10-31 05:04:00 - customer_utils - INFO - Successfully retrieved customer with ID: 999
2024-10-31 05:04:00 - db_utils - INFO - Database file /Users/tor.inge.jossang@aftenbladet.no/dev/gullingen/login_history.db exists.
2024-10-31 05:04:00 - db_utils - INFO - Query executed successfully on login_history.db. Rows affected: 1
2024-10-31 05:04:00 - auth_utils - INFO - Successful login for ID: 999
2024-10-31 05:04:00 - auth_utils - INFO - Successful login and logging for ID: 999
2024-10-31 05:04:00 - db_utils - INFO - DATABASE_PATH: /Users/tor.inge.jossang@aftenbladet.no/dev/gullingen
2024-10-31 05:04:00 - db_utils - INFO - Full database path: /Users/tor.inge.jossang@aftenbladet.no/dev/gullingen/login_history.db
2024-10-31 05:04:00 - db_utils - INFO - Attempting to create database engine...
2024-10-31 05:04:00 - db_utils - INFO - Database engine created successfully for login_history.db
2024-10-31 05:04:00 - auth_utils - INFO - Rate limit reset for user 999
2024-10-31 05:04:00 - __main__ - INFO - Application shutting down
2024-10-31 05:04:00 - __main__ - INFO - Added validate_user_input function to app.py
2024-10-31 05:04:00 - __main__ - INFO - Starting application initialization
2024-10-31 05:04:00 - db_utils - INFO - Starting detailed database operations debugging
2024-10-31 05:04:00 - db_utils - INFO - Debugging login_history database:
2024-10-31 05:04:00 - db_utils - INFO -   Database version: 0
2024-10-31 05:04:00 - db_utils - INFO -   Tables in login_history.db: ['login_history']
2024-10-31 05:04:00 - db_utils - INFO -   Structure of login_history table:
2024-10-31 05:04:00 - db_utils - INFO -     Column: id, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 05:04:00 - db_utils - INFO -     Column: login_time, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 05:04:00 - db_utils - INFO -     Column: success, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 05:04:00 - db_utils - INFO -   Indexes in login_history.db: ['idx_login_id', 'idx_login_time']
2024-10-31 05:04:00 - db_utils - INFO -   Row count in login_history: 446
2024-10-31 05:04:00 - db_utils - INFO -   Test query result: (1,)
2024-10-31 05:04:00 - db_utils - INFO - Debugging tunbroyting database:
2024-10-31 05:04:00 - db_utils - INFO -   Database version: 0
2024-10-31 05:04:00 - db_utils - INFO -   Tables in tunbroyting.db: ['tunbroyting_bestillinger']
2024-10-31 05:04:00 - db_utils - INFO -   Structure of tunbroyting_bestillinger table:
2024-10-31 05:04:00 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 05:04:00 - db_utils - INFO -     Column: bruker, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 05:04:00 - db_utils - INFO -     Column: ankomst_dato, Type: DATE, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 05:04:00 - db_utils - INFO -     Column: ankomst_tid, Type: TIME, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 05:04:00 - db_utils - INFO -     Column: avreise_dato, Type: DATE, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 05:04:00 - db_utils - INFO -     Column: avreise_tid, Type: TIME, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 05:04:00 - db_utils - INFO -     Column: abonnement_type, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 05:04:00 - db_utils - INFO -   Indexes in tunbroyting.db: ['idx_tunbroyting_bruker', 'idx_tunbroyting_ankomst_dato', 'idx_tunbroyting_avreise_dato', 'idx_tunbroyting_abonnement']
2024-10-31 05:04:00 - db_utils - INFO -   Row count in tunbroyting_bestillinger: 2
2024-10-31 05:04:00 - db_utils - INFO -   Test query result: (1,)
2024-10-31 05:04:00 - db_utils - INFO - Debugging stroing database:
2024-10-31 05:04:00 - db_utils - INFO -   Database version: 0
2024-10-31 05:04:00 - db_utils - INFO -   Tables in stroing.db: ['sqlite_sequence', 'stroing_bestillinger']
2024-10-31 05:04:00 - db_utils - INFO -   Structure of sqlite_sequence table:
2024-10-31 05:04:00 - db_utils - INFO -     Column: name, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 05:04:00 - db_utils - INFO -     Column: seq, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 05:04:00 - db_utils - INFO -   Structure of stroing_bestillinger table:
2024-10-31 05:04:00 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 05:04:00 - db_utils - INFO -     Column: bruker, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 05:04:00 - db_utils - INFO -     Column: bestillings_dato, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 05:04:00 - db_utils - INFO -     Column: onske_dato, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 05:04:00 - db_utils - INFO -   Indexes in stroing.db: ['idx_stroing_bruker', 'idx_stroing_onske_dato', 'idx_stroing_bestillings_dato']
2024-10-31 05:04:00 - db_utils - INFO -   Row count in sqlite_sequence: 1
2024-10-31 05:04:00 - db_utils - INFO -   Row count in stroing_bestillinger: 5
2024-10-31 05:04:00 - db_utils - INFO -   Test query result: (1,)
2024-10-31 05:04:00 - db_utils - INFO - Debugging feedback database:
2024-10-31 05:04:00 - db_utils - INFO -   Database version: 0
2024-10-31 05:04:00 - db_utils - INFO -   Tables in feedback.db: ['sqlite_sequence', 'feedback']
2024-10-31 05:04:00 - db_utils - INFO -   Structure of sqlite_sequence table:
2024-10-31 05:04:00 - db_utils - INFO -     Column: name, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 05:04:00 - db_utils - INFO -     Column: seq, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 05:04:00 - db_utils - INFO -   Structure of feedback table:
2024-10-31 05:04:00 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 05:04:00 - db_utils - INFO -     Column: type, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 05:04:00 - db_utils - INFO -     Column: datetime, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 05:04:00 - db_utils - INFO -     Column: comment, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 05:04:00 - db_utils - INFO -     Column: innsender, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 05:04:00 - db_utils - INFO -     Column: status, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 05:04:00 - db_utils - INFO -     Column: status_changed_by, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 05:04:00 - db_utils - INFO -     Column: status_changed_at, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 05:04:00 - db_utils - INFO -     Column: hidden, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 05:04:00 - db_utils - INFO -     Column: is_alert, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 05:04:00 - db_utils - INFO -     Column: display_on_weather, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 05:04:00 - db_utils - INFO -     Column: expiry_date, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 05:04:00 - db_utils - INFO -     Column: target_group, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 05:04:00 - db_utils - INFO -   Indexes in feedback.db: ['idx_feedback_datetime', 'idx_feedback_innsender', 'idx_feedback_status', 'idx_feedback_type']
2024-10-31 05:04:00 - db_utils - INFO -   Row count in sqlite_sequence: 1
2024-10-31 05:04:00 - db_utils - INFO -   Row count in feedback: 11
2024-10-31 05:04:00 - db_utils - INFO -   Test query result: (1,)
2024-10-31 05:04:00 - db_utils - INFO - Detailed database operations debugging completed
2024-10-31 05:04:00 - db_utils - INFO - Oppdatert skjema for customer
2024-10-31 05:04:00 - db_utils - INFO - Oppdatert skjema for feedback
2024-10-31 05:04:00 - db_utils - INFO - Oppdatert skjema for login_history
2024-10-31 05:04:00 - db_utils - INFO - Oppdatert skjema for stroing
2024-10-31 05:04:00 - db_utils - INFO - Oppdatert skjema for tunbroyting
2024-10-31 05:04:00 - db_utils - INFO - All database schemas verified and updated
2024-10-31 05:04:00 - db_utils - INFO - Oppdatert skjema for customer
2024-10-31 05:04:00 - db_utils - INFO - Oppdatert skjema for feedback
2024-10-31 05:04:00 - db_utils - INFO - Oppdatert skjema for login_history
2024-10-31 05:04:00 - db_utils - INFO - Oppdatert skjema for stroing
2024-10-31 05:04:00 - db_utils - INFO - Oppdatert skjema for tunbroyting
2024-10-31 05:04:00 - db_utils - INFO - All database schemas verified and updated
2024-10-31 05:04:00 - db_utils - INFO - Database already initialized. Skipping.
2024-10-31 05:04:00 - db_utils - INFO - Query executed successfully on login_history.db. Rows affected: -1
2024-10-31 05:04:00 - db_utils - INFO - login_history table structure is correct
2024-10-31 05:04:00 - customer_utils - INFO - Starting cabin user consistency check
2024-10-31 05:04:00 - utils - INFO - Attempting to load passwords from secrets
2024-10-31 05:04:00 - utils - INFO - Successfully loaded passwords. Number of entries: 94
2024-10-31 05:04:00 - customer_utils - INFO - Retrieved 94 passwords
2024-10-31 05:04:00 - customer_utils - INFO - Found 94 customers in database
2024-10-31 05:04:00 - customer_utils - INFO - Consistency check completed
2024-10-31 05:04:00 - customer_utils - INFO - Database connection closed
2024-10-31 05:04:00 - customer_utils - INFO - Validating customers and passwords
2024-10-31 05:04:00 - utils - INFO - Attempting to load passwords from secrets
2024-10-31 05:04:00 - utils - INFO - Successfully loaded passwords. Number of entries: 94
2024-10-31 05:04:00 - customer_utils - INFO - Customer and password validation complete
2024-10-31 05:04:00 - db_utils - INFO - Successfully created indexes for tunbroyting database
2024-10-31 05:04:00 - db_utils - INFO - Successfully created indexes for stroing database
2024-10-31 05:04:00 - db_utils - INFO - Successfully created indexes for feedback database
2024-10-31 05:04:00 - db_utils - INFO - Successfully created indexes for login_history database
2024-10-31 05:04:00 - db_utils - INFO - Successfully created indexes for customer database
2024-10-31 05:04:00 - db_utils - INFO - Database index creation completed
2024-10-31 05:04:00 - __main__ - INFO - Application initialization completed successfully
2024-10-31 05:04:00 - __main__ - INFO - Application initialization completed successfully
2024-10-31 05:04:00 - __main__ - INFO - Application setup complete
2024-10-31 05:04:00 - customer_utils - INFO - Successfully retrieved customer with ID: 999
2024-10-31 05:04:00 - alert_utils - INFO - Fetched 1 alerts. only_today=False, include_expired=False
2024-10-31 05:04:00 - tun_utils - WARNING - hent_bestillinger() is deprecated, use get_bookings() instead
2024-10-31 05:04:00 - tun_utils - INFO - Starting get_bookings with start_date=None, end_date=None
2024-10-31 05:04:00 - tun_utils - INFO - Successfully retrieved 2 bookings
2024-10-31 05:04:00 - __main__ - INFO - Application shutting down
2024-10-31 05:04:02 - __main__ - INFO - Added validate_user_input function to app.py
2024-10-31 05:04:02 - __main__ - INFO - Starting application initialization
2024-10-31 05:04:02 - db_utils - INFO - Starting detailed database operations debugging
2024-10-31 05:04:02 - db_utils - INFO - Debugging login_history database:
2024-10-31 05:04:02 - db_utils - INFO -   Database version: 0
2024-10-31 05:04:02 - db_utils - INFO -   Tables in login_history.db: ['login_history']
2024-10-31 05:04:02 - db_utils - INFO -   Structure of login_history table:
2024-10-31 05:04:02 - db_utils - INFO -     Column: id, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 05:04:02 - db_utils - INFO -     Column: login_time, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 05:04:02 - db_utils - INFO -     Column: success, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 05:04:02 - db_utils - INFO -   Indexes in login_history.db: ['idx_login_id', 'idx_login_time']
2024-10-31 05:04:02 - db_utils - INFO -   Row count in login_history: 446
2024-10-31 05:04:02 - db_utils - INFO -   Test query result: (1,)
2024-10-31 05:04:02 - db_utils - INFO - Debugging tunbroyting database:
2024-10-31 05:04:02 - db_utils - INFO -   Database version: 0
2024-10-31 05:04:02 - db_utils - INFO -   Tables in tunbroyting.db: ['tunbroyting_bestillinger']
2024-10-31 05:04:02 - db_utils - INFO -   Structure of tunbroyting_bestillinger table:
2024-10-31 05:04:02 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 05:04:02 - db_utils - INFO -     Column: bruker, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 05:04:02 - db_utils - INFO -     Column: ankomst_dato, Type: DATE, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 05:04:02 - db_utils - INFO -     Column: ankomst_tid, Type: TIME, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 05:04:02 - db_utils - INFO -     Column: avreise_dato, Type: DATE, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 05:04:02 - db_utils - INFO -     Column: avreise_tid, Type: TIME, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 05:04:02 - db_utils - INFO -     Column: abonnement_type, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 05:04:02 - db_utils - INFO -   Indexes in tunbroyting.db: ['idx_tunbroyting_bruker', 'idx_tunbroyting_ankomst_dato', 'idx_tunbroyting_avreise_dato', 'idx_tunbroyting_abonnement']
2024-10-31 05:04:02 - db_utils - INFO -   Row count in tunbroyting_bestillinger: 2
2024-10-31 05:04:02 - db_utils - INFO -   Test query result: (1,)
2024-10-31 05:04:02 - db_utils - INFO - Debugging stroing database:
2024-10-31 05:04:02 - db_utils - INFO -   Database version: 0
2024-10-31 05:04:02 - db_utils - INFO -   Tables in stroing.db: ['sqlite_sequence', 'stroing_bestillinger']
2024-10-31 05:04:02 - db_utils - INFO -   Structure of sqlite_sequence table:
2024-10-31 05:04:02 - db_utils - INFO -     Column: name, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 05:04:02 - db_utils - INFO -     Column: seq, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 05:04:02 - db_utils - INFO -   Structure of stroing_bestillinger table:
2024-10-31 05:04:02 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 05:04:02 - db_utils - INFO -     Column: bruker, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 05:04:02 - db_utils - INFO -     Column: bestillings_dato, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 05:04:02 - db_utils - INFO -     Column: onske_dato, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 05:04:02 - db_utils - INFO -   Indexes in stroing.db: ['idx_stroing_bruker', 'idx_stroing_onske_dato', 'idx_stroing_bestillings_dato']
2024-10-31 05:04:02 - db_utils - INFO -   Row count in sqlite_sequence: 1
2024-10-31 05:04:02 - db_utils - INFO -   Row count in stroing_bestillinger: 5
2024-10-31 05:04:02 - db_utils - INFO -   Test query result: (1,)
2024-10-31 05:04:02 - db_utils - INFO - Debugging feedback database:
2024-10-31 05:04:02 - db_utils - INFO -   Database version: 0
2024-10-31 05:04:02 - db_utils - INFO -   Tables in feedback.db: ['sqlite_sequence', 'feedback']
2024-10-31 05:04:02 - db_utils - INFO -   Structure of sqlite_sequence table:
2024-10-31 05:04:02 - db_utils - INFO -     Column: name, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 05:04:02 - db_utils - INFO -     Column: seq, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 05:04:02 - db_utils - INFO -   Structure of feedback table:
2024-10-31 05:04:02 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 05:04:02 - db_utils - INFO -     Column: type, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 05:04:02 - db_utils - INFO -     Column: datetime, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 05:04:02 - db_utils - INFO -     Column: comment, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 05:04:02 - db_utils - INFO -     Column: innsender, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 05:04:02 - db_utils - INFO -     Column: status, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 05:04:02 - db_utils - INFO -     Column: status_changed_by, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 05:04:02 - db_utils - INFO -     Column: status_changed_at, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 05:04:02 - db_utils - INFO -     Column: hidden, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 05:04:02 - db_utils - INFO -     Column: is_alert, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 05:04:02 - db_utils - INFO -     Column: display_on_weather, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 05:04:02 - db_utils - INFO -     Column: expiry_date, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 05:04:02 - db_utils - INFO -     Column: target_group, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 05:04:02 - db_utils - INFO -   Indexes in feedback.db: ['idx_feedback_datetime', 'idx_feedback_innsender', 'idx_feedback_status', 'idx_feedback_type']
2024-10-31 05:04:02 - db_utils - INFO -   Row count in sqlite_sequence: 1
2024-10-31 05:04:02 - db_utils - INFO -   Row count in feedback: 11
2024-10-31 05:04:02 - db_utils - INFO -   Test query result: (1,)
2024-10-31 05:04:02 - db_utils - INFO - Detailed database operations debugging completed
2024-10-31 05:04:02 - db_utils - INFO - Oppdatert skjema for customer
2024-10-31 05:04:02 - db_utils - INFO - Oppdatert skjema for feedback
2024-10-31 05:04:02 - db_utils - INFO - Oppdatert skjema for login_history
2024-10-31 05:04:02 - db_utils - INFO - Oppdatert skjema for stroing
2024-10-31 05:04:02 - db_utils - INFO - Oppdatert skjema for tunbroyting
2024-10-31 05:04:02 - db_utils - INFO - All database schemas verified and updated
2024-10-31 05:04:02 - db_utils - INFO - Oppdatert skjema for customer
2024-10-31 05:04:02 - db_utils - INFO - Oppdatert skjema for feedback
2024-10-31 05:04:02 - db_utils - INFO - Oppdatert skjema for login_history
2024-10-31 05:04:02 - db_utils - INFO - Oppdatert skjema for stroing
2024-10-31 05:04:02 - db_utils - INFO - Oppdatert skjema for tunbroyting
2024-10-31 05:04:02 - db_utils - INFO - All database schemas verified and updated
2024-10-31 05:04:02 - db_utils - INFO - Database already initialized. Skipping.
2024-10-31 05:04:02 - db_utils - INFO - Query executed successfully on login_history.db. Rows affected: -1
2024-10-31 05:04:02 - db_utils - INFO - login_history table structure is correct
2024-10-31 05:04:02 - customer_utils - INFO - Starting cabin user consistency check
2024-10-31 05:04:02 - utils - INFO - Attempting to load passwords from secrets
2024-10-31 05:04:02 - utils - INFO - Successfully loaded passwords. Number of entries: 94
2024-10-31 05:04:02 - customer_utils - INFO - Retrieved 94 passwords
2024-10-31 05:04:02 - customer_utils - INFO - Found 94 customers in database
2024-10-31 05:04:02 - customer_utils - INFO - Consistency check completed
2024-10-31 05:04:02 - customer_utils - INFO - Database connection closed
2024-10-31 05:04:02 - customer_utils - INFO - Validating customers and passwords
2024-10-31 05:04:02 - utils - INFO - Attempting to load passwords from secrets
2024-10-31 05:04:02 - utils - INFO - Successfully loaded passwords. Number of entries: 94
2024-10-31 05:04:02 - customer_utils - INFO - Customer and password validation complete
2024-10-31 05:04:02 - db_utils - INFO - Successfully created indexes for tunbroyting database
2024-10-31 05:04:02 - db_utils - INFO - Successfully created indexes for stroing database
2024-10-31 05:04:02 - db_utils - INFO - Successfully created indexes for feedback database
2024-10-31 05:04:02 - db_utils - INFO - Successfully created indexes for login_history database
2024-10-31 05:04:02 - db_utils - INFO - Successfully created indexes for customer database
2024-10-31 05:04:02 - db_utils - INFO - Database index creation completed
2024-10-31 05:04:02 - __main__ - INFO - Application initialization completed successfully
2024-10-31 05:04:02 - __main__ - INFO - Application initialization completed successfully
2024-10-31 05:04:02 - __main__ - INFO - Application setup complete
2024-10-31 05:04:02 - customer_utils - INFO - Successfully retrieved customer with ID: 999
2024-10-31 05:04:03 - __main__ - INFO - Application shutting down
2024-10-31 05:07:49 - __main__ - INFO - Added validate_user_input function to app.py
2024-10-31 05:07:49 - __main__ - INFO - Starting application initialization
2024-10-31 05:07:49 - db_utils - INFO - Starting detailed database operations debugging
2024-10-31 05:07:49 - db_utils - INFO - Debugging login_history database:
2024-10-31 05:07:49 - db_utils - INFO -   Database version: 0
2024-10-31 05:07:49 - db_utils - INFO -   Tables in login_history.db: ['login_history']
2024-10-31 05:07:49 - db_utils - INFO -   Structure of login_history table:
2024-10-31 05:07:49 - db_utils - INFO -     Column: id, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 05:07:49 - db_utils - INFO -     Column: login_time, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 05:07:49 - db_utils - INFO -     Column: success, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 05:07:49 - db_utils - INFO -   Indexes in login_history.db: ['idx_login_id', 'idx_login_time']
2024-10-31 05:07:49 - db_utils - INFO -   Row count in login_history: 446
2024-10-31 05:07:49 - db_utils - INFO -   Test query result: (1,)
2024-10-31 05:07:49 - db_utils - INFO - Debugging tunbroyting database:
2024-10-31 05:07:49 - db_utils - INFO -   Database version: 0
2024-10-31 05:07:49 - db_utils - INFO -   Tables in tunbroyting.db: ['tunbroyting_bestillinger']
2024-10-31 05:07:49 - db_utils - INFO -   Structure of tunbroyting_bestillinger table:
2024-10-31 05:07:49 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 05:07:49 - db_utils - INFO -     Column: bruker, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 05:07:49 - db_utils - INFO -     Column: ankomst_dato, Type: DATE, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 05:07:49 - db_utils - INFO -     Column: ankomst_tid, Type: TIME, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 05:07:49 - db_utils - INFO -     Column: avreise_dato, Type: DATE, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 05:07:49 - db_utils - INFO -     Column: avreise_tid, Type: TIME, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 05:07:49 - db_utils - INFO -     Column: abonnement_type, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 05:07:49 - db_utils - INFO -   Indexes in tunbroyting.db: ['idx_tunbroyting_bruker', 'idx_tunbroyting_ankomst_dato', 'idx_tunbroyting_avreise_dato', 'idx_tunbroyting_abonnement']
2024-10-31 05:07:49 - db_utils - INFO -   Row count in tunbroyting_bestillinger: 2
2024-10-31 05:07:49 - db_utils - INFO -   Test query result: (1,)
2024-10-31 05:07:49 - db_utils - INFO - Debugging stroing database:
2024-10-31 05:07:49 - db_utils - INFO -   Database version: 0
2024-10-31 05:07:49 - db_utils - INFO -   Tables in stroing.db: ['sqlite_sequence', 'stroing_bestillinger']
2024-10-31 05:07:49 - db_utils - INFO -   Structure of sqlite_sequence table:
2024-10-31 05:07:49 - db_utils - INFO -     Column: name, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 05:07:49 - db_utils - INFO -     Column: seq, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 05:07:49 - db_utils - INFO -   Structure of stroing_bestillinger table:
2024-10-31 05:07:49 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 05:07:49 - db_utils - INFO -     Column: bruker, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 05:07:49 - db_utils - INFO -     Column: bestillings_dato, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 05:07:49 - db_utils - INFO -     Column: onske_dato, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 05:07:49 - db_utils - INFO -   Indexes in stroing.db: ['idx_stroing_bruker', 'idx_stroing_onske_dato', 'idx_stroing_bestillings_dato']
2024-10-31 05:07:49 - db_utils - INFO -   Row count in sqlite_sequence: 1
2024-10-31 05:07:49 - db_utils - INFO -   Row count in stroing_bestillinger: 5
2024-10-31 05:07:49 - db_utils - INFO -   Test query result: (1,)
2024-10-31 05:07:49 - db_utils - INFO - Debugging feedback database:
2024-10-31 05:07:49 - db_utils - INFO -   Database version: 0
2024-10-31 05:07:49 - db_utils - INFO -   Tables in feedback.db: ['sqlite_sequence', 'feedback']
2024-10-31 05:07:49 - db_utils - INFO -   Structure of sqlite_sequence table:
2024-10-31 05:07:49 - db_utils - INFO -     Column: name, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 05:07:49 - db_utils - INFO -     Column: seq, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 05:07:49 - db_utils - INFO -   Structure of feedback table:
2024-10-31 05:07:49 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 05:07:49 - db_utils - INFO -     Column: type, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 05:07:49 - db_utils - INFO -     Column: datetime, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 05:07:49 - db_utils - INFO -     Column: comment, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 05:07:49 - db_utils - INFO -     Column: innsender, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 05:07:49 - db_utils - INFO -     Column: status, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 05:07:49 - db_utils - INFO -     Column: status_changed_by, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 05:07:49 - db_utils - INFO -     Column: status_changed_at, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 05:07:49 - db_utils - INFO -     Column: hidden, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 05:07:49 - db_utils - INFO -     Column: is_alert, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 05:07:49 - db_utils - INFO -     Column: display_on_weather, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 05:07:49 - db_utils - INFO -     Column: expiry_date, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 05:07:49 - db_utils - INFO -     Column: target_group, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 05:07:49 - db_utils - INFO -   Indexes in feedback.db: ['idx_feedback_datetime', 'idx_feedback_innsender', 'idx_feedback_status', 'idx_feedback_type']
2024-10-31 05:07:49 - db_utils - INFO -   Row count in sqlite_sequence: 1
2024-10-31 05:07:49 - db_utils - INFO -   Row count in feedback: 11
2024-10-31 05:07:49 - db_utils - INFO -   Test query result: (1,)
2024-10-31 05:07:49 - db_utils - INFO - Detailed database operations debugging completed
2024-10-31 05:07:49 - db_utils - INFO - Oppdatert skjema for customer
2024-10-31 05:07:49 - db_utils - INFO - Oppdatert skjema for feedback
2024-10-31 05:07:49 - db_utils - INFO - Oppdatert skjema for login_history
2024-10-31 05:07:49 - db_utils - INFO - Oppdatert skjema for stroing
2024-10-31 05:07:49 - db_utils - INFO - Oppdatert skjema for tunbroyting
2024-10-31 05:07:49 - db_utils - INFO - All database schemas verified and updated
2024-10-31 05:07:49 - db_utils - INFO - Oppdatert skjema for customer
2024-10-31 05:07:49 - db_utils - INFO - Oppdatert skjema for feedback
2024-10-31 05:07:49 - db_utils - INFO - Oppdatert skjema for login_history
2024-10-31 05:07:49 - db_utils - INFO - Oppdatert skjema for stroing
2024-10-31 05:07:49 - db_utils - INFO - Oppdatert skjema for tunbroyting
2024-10-31 05:07:49 - db_utils - INFO - All database schemas verified and updated
2024-10-31 05:07:49 - db_utils - INFO - Database login_history initialized, updated, and optimized
2024-10-31 05:07:49 - db_utils - INFO - Database tunbroyting initialized, updated, and optimized
2024-10-31 05:07:49 - db_utils - INFO - Database stroing initialized, updated, and optimized
2024-10-31 05:07:49 - db_utils - INFO - Database feedback initialized, updated, and optimized
2024-10-31 05:07:49 - db_utils - INFO - Database customer initialized, updated, and optimized
2024-10-31 05:07:49 - db_utils - INFO - Successfully created indexes for tunbroyting database
2024-10-31 05:07:49 - db_utils - INFO - Successfully created indexes for stroing database
2024-10-31 05:07:49 - db_utils - INFO - Successfully created indexes for feedback database
2024-10-31 05:07:49 - db_utils - INFO - Successfully created indexes for login_history database
2024-10-31 05:07:49 - db_utils - INFO - Successfully created indexes for customer database
2024-10-31 05:07:49 - db_utils - INFO - Database index creation completed
2024-10-31 05:07:49 - db_utils - INFO - Database indexes created
2024-10-31 05:07:49 - db_utils - INFO - Successfully verified connection to stroing.db
2024-10-31 05:07:49 - db_utils - INFO - Successfully verified connection to tunbroyting.db
2024-10-31 05:07:49 - db_utils - INFO - Successfully verified connection to feedback.db
2024-10-31 05:07:49 - db_utils - INFO - Successfully verified connection to login_history.db
2024-10-31 05:07:49 - db_utils - INFO - Successfully verified connection to customer.db
2024-10-31 05:07:49 - db_utils - INFO - Database connections verified
2024-10-31 05:07:49 - db_utils - INFO - All databases initialized, updated, and verified
2024-10-31 05:07:49 - db_utils - INFO - Query executed successfully on login_history.db. Rows affected: -1
2024-10-31 05:07:49 - db_utils - INFO - login_history table structure is correct
2024-10-31 05:07:49 - customer_utils - INFO - Starting cabin user consistency check
2024-10-31 05:07:49 - utils - INFO - Attempting to load passwords from secrets
2024-10-31 05:07:49 - utils - INFO - Successfully loaded passwords. Number of entries: 94
2024-10-31 05:07:49 - customer_utils - INFO - Retrieved 94 passwords
2024-10-31 05:07:49 - customer_utils - INFO - Found 94 customers in database
2024-10-31 05:07:49 - customer_utils - INFO - Consistency check completed
2024-10-31 05:07:49 - customer_utils - INFO - Database connection closed
2024-10-31 05:07:49 - customer_utils - INFO - Validating customers and passwords
2024-10-31 05:07:49 - utils - INFO - Attempting to load passwords from secrets
2024-10-31 05:07:49 - utils - INFO - Successfully loaded passwords. Number of entries: 94
2024-10-31 05:07:49 - customer_utils - INFO - Customer and password validation complete
2024-10-31 05:07:49 - db_utils - INFO - Successfully created indexes for tunbroyting database
2024-10-31 05:07:49 - db_utils - INFO - Successfully created indexes for stroing database
2024-10-31 05:07:49 - db_utils - INFO - Successfully created indexes for feedback database
2024-10-31 05:07:49 - db_utils - INFO - Successfully created indexes for login_history database
2024-10-31 05:07:49 - db_utils - INFO - Successfully created indexes for customer database
2024-10-31 05:07:49 - db_utils - INFO - Database index creation completed
2024-10-31 05:07:49 - __main__ - INFO - Application initialization completed successfully
2024-10-31 05:07:49 - __main__ - INFO - Application initialization completed successfully
2024-10-31 05:07:49 - __main__ - INFO - Application setup complete
2024-10-31 05:07:49 - __main__ - INFO - Application shutting down
2024-10-31 05:07:51 - __main__ - INFO - Added validate_user_input function to app.py
2024-10-31 05:07:51 - __main__ - INFO - Starting application initialization
2024-10-31 05:07:51 - db_utils - INFO - Starting detailed database operations debugging
2024-10-31 05:07:51 - db_utils - INFO - Debugging login_history database:
2024-10-31 05:07:51 - db_utils - INFO -   Database version: 0
2024-10-31 05:07:51 - db_utils - INFO -   Tables in login_history.db: ['login_history']
2024-10-31 05:07:51 - db_utils - INFO -   Structure of login_history table:
2024-10-31 05:07:51 - db_utils - INFO -     Column: id, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 05:07:51 - db_utils - INFO -     Column: login_time, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 05:07:51 - db_utils - INFO -     Column: success, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 05:07:51 - db_utils - INFO -   Indexes in login_history.db: ['idx_login_id', 'idx_login_time']
2024-10-31 05:07:51 - db_utils - INFO -   Row count in login_history: 446
2024-10-31 05:07:51 - db_utils - INFO -   Test query result: (1,)
2024-10-31 05:07:51 - db_utils - INFO - Debugging tunbroyting database:
2024-10-31 05:07:51 - db_utils - INFO -   Database version: 0
2024-10-31 05:07:51 - db_utils - INFO -   Tables in tunbroyting.db: ['tunbroyting_bestillinger']
2024-10-31 05:07:51 - db_utils - INFO -   Structure of tunbroyting_bestillinger table:
2024-10-31 05:07:51 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 05:07:51 - db_utils - INFO -     Column: bruker, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 05:07:51 - db_utils - INFO -     Column: ankomst_dato, Type: DATE, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 05:07:51 - db_utils - INFO -     Column: ankomst_tid, Type: TIME, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 05:07:51 - db_utils - INFO -     Column: avreise_dato, Type: DATE, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 05:07:51 - db_utils - INFO -     Column: avreise_tid, Type: TIME, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 05:07:51 - db_utils - INFO -     Column: abonnement_type, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 05:07:51 - db_utils - INFO -   Indexes in tunbroyting.db: ['idx_tunbroyting_bruker', 'idx_tunbroyting_ankomst_dato', 'idx_tunbroyting_avreise_dato', 'idx_tunbroyting_abonnement']
2024-10-31 05:07:51 - db_utils - INFO -   Row count in tunbroyting_bestillinger: 2
2024-10-31 05:07:51 - db_utils - INFO -   Test query result: (1,)
2024-10-31 05:07:51 - db_utils - INFO - Debugging stroing database:
2024-10-31 05:07:51 - db_utils - INFO -   Database version: 0
2024-10-31 05:07:51 - db_utils - INFO -   Tables in stroing.db: ['sqlite_sequence', 'stroing_bestillinger']
2024-10-31 05:07:51 - db_utils - INFO -   Structure of sqlite_sequence table:
2024-10-31 05:07:51 - db_utils - INFO -     Column: name, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 05:07:51 - db_utils - INFO -     Column: seq, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 05:07:51 - db_utils - INFO -   Structure of stroing_bestillinger table:
2024-10-31 05:07:51 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 05:07:51 - db_utils - INFO -     Column: bruker, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 05:07:51 - db_utils - INFO -     Column: bestillings_dato, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 05:07:51 - db_utils - INFO -     Column: onske_dato, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 05:07:51 - db_utils - INFO -   Indexes in stroing.db: ['idx_stroing_bruker', 'idx_stroing_onske_dato', 'idx_stroing_bestillings_dato']
2024-10-31 05:07:51 - db_utils - INFO -   Row count in sqlite_sequence: 1
2024-10-31 05:07:51 - db_utils - INFO -   Row count in stroing_bestillinger: 5
2024-10-31 05:07:51 - db_utils - INFO -   Test query result: (1,)
2024-10-31 05:07:51 - db_utils - INFO - Debugging feedback database:
2024-10-31 05:07:51 - db_utils - INFO -   Database version: 0
2024-10-31 05:07:51 - db_utils - INFO -   Tables in feedback.db: ['sqlite_sequence', 'feedback']
2024-10-31 05:07:51 - db_utils - INFO -   Structure of sqlite_sequence table:
2024-10-31 05:07:51 - db_utils - INFO -     Column: name, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 05:07:51 - db_utils - INFO -     Column: seq, Type: , NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 05:07:51 - db_utils - INFO -   Structure of feedback table:
2024-10-31 05:07:51 - db_utils - INFO -     Column: id, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 1
2024-10-31 05:07:51 - db_utils - INFO -     Column: type, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 05:07:51 - db_utils - INFO -     Column: datetime, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 05:07:51 - db_utils - INFO -     Column: comment, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 05:07:51 - db_utils - INFO -     Column: innsender, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 05:07:51 - db_utils - INFO -     Column: status, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 05:07:51 - db_utils - INFO -     Column: status_changed_by, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 05:07:51 - db_utils - INFO -     Column: status_changed_at, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 05:07:51 - db_utils - INFO -     Column: hidden, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 05:07:51 - db_utils - INFO -     Column: is_alert, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 05:07:51 - db_utils - INFO -     Column: display_on_weather, Type: INTEGER, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 05:07:51 - db_utils - INFO -     Column: expiry_date, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 05:07:51 - db_utils - INFO -     Column: target_group, Type: TEXT, NotNull: 0, DefaultValue: None, PK: 0
2024-10-31 05:07:51 - db_utils - INFO -   Indexes in feedback.db: ['idx_feedback_datetime', 'idx_feedback_innsender', 'idx_feedback_status', 'idx_feedback_type']
2024-10-31 05:07:51 - db_utils - INFO -   Row count in sqlite_sequence: 1
2024-10-31 05:07:51 - db_utils - INFO -   Row count in feedback: 11
2024-10-31 05:07:51 - db_utils - INFO -   Test query result: (1,)
2024-10-31 05:07:51 - db_utils - INFO - Detailed database operations debugging completed
2024-10-31 05:07:51 - db_utils - INFO - Oppdatert skjema for customer
2024-10-31 05:07:51 - db_utils - INFO - Oppdatert skjema for feedback
2024-10-31 05:07:51 - db_utils - INFO - Oppdatert skjema for login_history
2024-10-31 05:07:51 - db_utils - INFO - Oppdatert skjema for stroing
2024-10-31 05:07:51 - db_utils - INFO - Oppdatert skjema for tunbroyting
2024-10-31 05:07:51 - db_utils - INFO - All database schemas verified and updated
2024-10-31 05:07:51 - db_utils - INFO - Oppdatert skjema for customer
2024-10-31 05:07:51 - db_utils - INFO - Oppdatert skjema for feedback
2024-10-31 05:07:51 - db_utils - INFO - Oppdatert skjema for login_history
2024-10-31 05:07:51 - db_utils - INFO - Oppdatert skjema for stroing
2024-10-31 05:07:51 - db_utils - INFO - Oppdatert skjema for tunbroyting
2024-10-31 05:07:51 - db_utils - INFO - All database schemas verified and updated
2024-10-31 05:07:51 - db_utils - INFO - Database already initialized. Skipping.
2024-10-31 05:07:51 - db_utils - INFO - Query executed successfully on login_history.db. Rows affected: -1
2024-10-31 05:07:51 - db_utils - INFO - login_history table structure is correct
2024-10-31 05:07:51 - customer_utils - INFO - Starting cabin user consistency check
2024-10-31 05:07:51 - utils - INFO - Attempting to load passwords from secrets
2024-10-31 05:07:51 - utils - INFO - Successfully loaded passwords. Number of entries: 94
2024-10-31 05:07:51 - customer_utils - INFO - Retrieved 94 passwords
2024-10-31 05:07:51 - customer_utils - INFO - Found 94 customers in database
2024-10-31 05:07:51 - customer_utils - INFO - Consistency check completed
2024-10-31 05:07:51 - customer_utils - INFO - Database connection closed
2024-10-31 05:07:51 - customer_utils - INFO - Validating customers and passwords
